/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/mermaid@11.6.0/dist/chunks/mermaid.esm.min/architectureDiagram-YZ6UH2CF.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(e,t)=>r(e,"name",{value:t,configurable:!0}),l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),u=(e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})},c=(e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of i(t))!o.call(e,l)&&l!==a&&r(e,l,{get:()=>t[l],enumerable:!(s=n(t,l))||s.enumerable});return e},h=(e,t,r)=>(c(e,t,"default"),r&&c(r,t,"default")),d=(e,n,i)=>(i=null!=e?t(a(e)):{},c(!n&&e&&e.__esModule?i:r(i,"default",{value:e,enumerable:!0}),e));function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return T(e)||w(e,t)||k(e,t)||A()}function x(e){return b(e)||C(e)||k(e)||_()}function b(e){if(Array.isArray(e))return E(e)}function T(e){if(Array.isArray(e))return e}function C(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{!o&&null!=r.return&&r.return()}finally{if(s)throw i}}return a}}function k(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=k(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=s((function(){}),"F");return{s:i,n:s((function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}),"n"),e:s((function(e){throw e}),"e"),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:s((function(){r=r.call(e)}),"s"),n:s((function(){var e=r.next();return o=e.done,e}),"n"),e:s((function(e){l=!0,a=e}),"e"),f:s((function(){try{!o&&null!=r.return&&r.return()}finally{if(l)throw a}}),"f")}}s(f,"_typeof"),s(p,"_classCallCheck"),s(g,"_defineProperties"),s(m,"_createClass"),s(y,"_defineProperty$1"),s(v,"_slicedToArray"),s(x,"_toConsumableArray"),s(b,"_arrayWithoutHoles"),s(T,"_arrayWithHoles"),s(C,"_iterableToArray"),s(w,"_iterableToArrayLimit"),s(k,"_unsupportedIterableToArray"),s(E,"_arrayLikeToArray"),s(_,"_nonIterableSpread"),s(A,"_nonIterableRest"),s(S,"_createForOfIteratorHelper");var R=typeof window>"u"?null:window,N=R?R.navigator:null;R&&R.document;var L=f(""),I=f({}),M=f((function(){})),O=typeof HTMLElement>"u"?"undefined":f(HTMLElement),P=s((function(e){return e&&e.instanceString&&B(e.instanceString)?e.instanceString():null}),"instanceStr"),D=s((function(e){return null!=e&&f(e)==L}),"string"),B=s((function(e){return null!=e&&f(e)===M}),"fn"),F=s((function(e){return!V(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)}),"array"),$=s((function(e){return null!=e&&f(e)===I&&!F(e)&&e.constructor===Object}),"plainObject"),z=s((function(e){return null!=e&&f(e)===I}),"object"),U=s((function(e){return null!=e&&f(e)===f(1)&&!isNaN(e)}),"number"),G=s((function(e){return U(e)&&Math.floor(e)===e}),"integer"),j=s((function(e){if("undefined"!==O)return null!=e&&e instanceof HTMLElement}),"htmlElement"),V=s((function(e){return W(e)||H(e)}),"elementOrCollection"),W=s((function(e){return"collection"===P(e)&&e._private.single}),"element"),H=s((function(e){return"collection"===P(e)&&!e._private.single}),"collection"),q=s((function(e){return"core"===P(e)}),"core"),Y=s((function(e){return"stylesheet"===P(e)}),"stylesheet"),X=s((function(e){return"event"===P(e)}),"event"),K=s((function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))}),"emptyString"),Z=s((function(e){return!(typeof HTMLElement>"u")&&e instanceof HTMLElement}),"domElement"),Q=s((function(e){return $(e)&&U(e.x1)&&U(e.x2)&&U(e.y1)&&U(e.y2)}),"boundingBox"),J=s((function(e){return z(e)&&B(e.then)}),"promise"),ee=s((function(){return N&&N.userAgent.match(/msie|trident|edge/i)}),"ms"),te=s((function(e,t){t||(t=s((function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")}),"keyFn"));var r=s((function r(){var n,i=arguments,a=t.apply(this,i),o=r.cache;return(n=o[a])||(n=o[a]=e.apply(this,i)),n}),"memoizedFn");return r.cache={},r}),"memoize"),re=te((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),ne=te((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),ie=te((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),ae=s((function(e){return K(e)?e:e.charAt(0).toUpperCase()+e.substring(1)}),"capitalize"),oe="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",se="rgb[a]?\\(("+oe+"[%]?)\\s*,\\s*("+oe+"[%]?)\\s*,\\s*("+oe+"[%]?)(?:\\s*,\\s*("+oe+"))?\\)",le="rgb[a]?\\((?:"+oe+"[%]?)\\s*,\\s*(?:"+oe+"[%]?)\\s*,\\s*(?:"+oe+"[%]?)(?:\\s*,\\s*(?:"+oe+"))?\\)",ue="hsl[a]?\\(("+oe+")\\s*,\\s*("+oe+"[%])\\s*,\\s*("+oe+"[%])(?:\\s*,\\s*("+oe+"))?\\)",ce="hsl[a]?\\((?:"+oe+")\\s*,\\s*(?:"+oe+"[%])\\s*,\\s*(?:"+oe+"[%])(?:\\s*,\\s*(?:"+oe+"))?\\)",he=s((function(e,t){return e<t?-1:e>t?1:0}),"ascending"),de=s((function(e,t){return-1*he(e,t)}),"descending"),fe=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(null!=n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];e[o]=n[o]}}return e},pe=s((function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n,i=16;return 4===e.length?(t=parseInt(e[1]+e[1],i),r=parseInt(e[2]+e[2],i),n=parseInt(e[3]+e[3],i)):(t=parseInt(e[1]+e[2],i),r=parseInt(e[3]+e[4],i),n=parseInt(e[5]+e[6],i)),[t,r,n]}}),"hex2tuple"),ge=s((function(e){var t,r,n,i,a,o,l,u;function c(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}s(c,"hue2rgb");var h=new RegExp("^"+ue+"$").exec(e);if(h){if((r=parseInt(h[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(n=parseFloat(h[2]))<0||n>100||(n/=100,(i=parseFloat(h[3]))<0||i>100)||(i/=100,void 0!==(a=h[4])&&((a=parseFloat(a))<0||a>1)))return;if(0===n)o=l=u=Math.round(255*i);else{var d=i<.5?i*(1+n):i+n-i*n,f=2*i-d;o=Math.round(255*c(f,d,r+1/3)),l=Math.round(255*c(f,d,r)),u=Math.round(255*c(f,d,r-1/3))}t=[o,l,u,a]}return t}),"hsl2tuple"),me=s((function(e){var t,r=new RegExp("^"+se+"$").exec(e);if(r){t=[];for(var n=[],i=1;i<=3;i++){var a=r[i];if("%"===a[a.length-1]&&(n[i]=!0),a=parseFloat(a),n[i]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var o=n[1]||n[2]||n[3],s=n[1]&&n[2]&&n[3];if(o&&!s)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t}),"rgb2tuple"),ye=s((function(e){return xe[e.toLowerCase()]}),"colorname2tuple"),ve=s((function(e){return(F(e)?e:null)||ye(e)||pe(e)||me(e)||ge(e)}),"color2tuple"),xe={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},be=s((function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var a=r[i];if($(a))throw Error("Tried to set map with object key");i<r.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}}),"setMap"),Te=s((function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var a=r[i];if($(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))return t}return t}),"getMap");function Ce(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}s(Ce,"isObject");var we=Ce,ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof e<"u"?e:typeof self<"u"?self:{};function Ee(e,t){return e(t={exports:{}},t.exports),t.exports}s(Ee,"createCommonjsModule");var _e="object"==typeof ke&&ke&&ke.Object===Object&&ke,Ae="object"==typeof self&&self&&self.Object===Object&&self,Se=_e||Ae||Function("return this")(),Re=s((function(){return Se.Date.now()}),"now"),Ne=/\s/;function Le(e){for(var t=e.length;t--&&Ne.test(e.charAt(t)););return t}s(Le,"trimmedEndIndex");var Ie=Le,Me=/^\s+/;function Oe(e){return e&&e.slice(0,Ie(e)+1).replace(Me,"")}s(Oe,"baseTrim");var Pe=Oe,De=Se.Symbol,Be=Object.prototype,Fe=Be.hasOwnProperty,$e=Be.toString,ze=De?De.toStringTag:void 0;function Ue(e){var t=Fe.call(e,ze),r=e[ze];try{e[ze]=void 0;var n=!0}catch{}var i=$e.call(e);return n&&(t?e[ze]=r:delete e[ze]),i}s(Ue,"getRawTag");var Ge=Ue,je=Object.prototype.toString;function Ve(e){return je.call(e)}s(Ve,"objectToString");var We=Ve,He=De?De.toStringTag:void 0;function qe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":He&&He in Object(e)?Ge(e):We(e)}s(qe,"baseGetTag");var Ye=qe;function Xe(e){return null!=e&&"object"==typeof e}s(Xe,"isObjectLike");var Ke=Xe;function Ze(e){return"symbol"==typeof e||Ke(e)&&"[object Symbol]"==Ye(e)}s(Ze,"isSymbol");var Qe=Ze,Je=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,tt=/^0o[0-7]+$/i,rt=parseInt;function nt(e){if("number"==typeof e)return e;if(Qe(e))return NaN;if(we(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=we(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Pe(e);var r=et.test(e);return r||tt.test(e)?rt(e.slice(2),r?2:8):Je.test(e)?NaN:+e}s(nt,"toNumber");var it=nt,at=Math.max,ot=Math.min;function st(e,t,r){var n,i,a,o,l,u,c=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,a=i;return n=i=void 0,c=t,o=e.apply(a,r)}function g(e){return c=e,l=setTimeout(v,t),h?p(e):o}function m(e){var r=t-(e-u);return d?ot(r,a-(e-c)):r}function y(e){var r=e-u;return void 0===u||r>=t||r<0||d&&e-c>=a}function v(){var e=Re();if(y(e))return x(e);l=setTimeout(v,m(e))}function x(e){return l=void 0,f&&n?p(e):(n=i=void 0,o)}function b(){void 0!==l&&clearTimeout(l),c=0,n=u=i=l=void 0}function T(){return void 0===l?o:x(Re())}function C(){var e=Re(),r=y(e);if(n=arguments,i=this,u=e,r){if(void 0===l)return g(u);if(d)return clearTimeout(l),l=setTimeout(v,t),p(u)}return void 0===l&&(l=setTimeout(v,t)),o}return t=it(t)||0,we(r)&&(h=!!r.leading,a=(d="maxWait"in r)?at(it(r.maxWait)||0,t):a,f="trailing"in r?!!r.trailing:f),s(p,"invokeFunc"),s(g,"leadingEdge"),s(m,"remainingWait"),s(y,"shouldInvoke"),s(v,"timerExpired"),s(x,"trailingEdge"),s(b,"cancel"),s(T,"flush"),s(C,"debounced"),C.cancel=b,C.flush=T,C}s(st,"debounce");var lt=st,ut=R?R.performance:null,ct=ut&&ut.now?function(){return ut.now()}:function(){return Date.now()},ht=function(){if(R){if(R.requestAnimationFrame)return function(e){R.requestAnimationFrame(e)};if(R.mozRequestAnimationFrame)return function(e){R.mozRequestAnimationFrame(e)};if(R.webkitRequestAnimationFrame)return function(e){R.webkitRequestAnimationFrame(e)};if(R.msRequestAnimationFrame)return function(e){R.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(ct())}),1e3/60)}}(),dt=s((function(e){return ht(e)}),"requestAnimationFrame"),ft=ct,pt=9261,gt=5381,mt=s((function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt;!(t=e.next()).done;)r=65599*r+t.value|0;return r}),"hashIterableInts"),yt=s((function(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt)+e|0}),"hashInt"),vt=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt;return(t<<5)+t+e|0}),"hashIntAlt"),xt=s((function(e,t){return 2097152*e+t}),"combineHashes"),bt=s((function(e){return 2097152*e[0]+e[1]}),"combineHashesArray"),Tt=s((function(e,t){return[yt(e[0],t[0]),vt(e[1],t[1])]}),"hashArrays"),Ct=s((function(e,t){var r={value:0,done:!1},n=0,i=e.length,a={next:s((function(){return n<i?r.value=e[n++]:r.done=!0,r}),"next")};return mt(a,t)}),"hashIntsArray"),wt=s((function(e,t){var r={value:0,done:!1},n=0,i=e.length,a={next:s((function(){return n<i?r.value=e.charCodeAt(n++):r.done=!0,r}),"next")};return mt(a,t)}),"hashString"),kt=s((function(){return Et(arguments)}),"hashStrings"),Et=s((function(e){for(var t,r=0;r<e.length;r++){var n=e[r];t=0===r?wt(n):wt(n,t)}return t}),"hashStringsArray"),_t=!0,At=null!=console.warn,St=null!=console.trace,Rt=Number.MAX_SAFE_INTEGER||9007199254740991,Nt=s((function(){return!0}),"trueify"),Lt=s((function(){return!1}),"falsify"),It=s((function(){return 0}),"zeroify"),Mt=s((function(){}),"noop"),Ot=s((function(e){throw new Error(e)}),"error"),Pt=s((function(e){if(void 0===e)return _t;_t=!!e}),"warnings"),Dt=s((function(e){Pt()&&(At?console.warn(e):(console.log(e),St&&console.trace()))}),"warn"),Bt=s((function(e){return fe({},e)}),"clone"),Ft=s((function(e){return null==e?e:F(e)?e.slice():$(e)?Bt(e):e}),"copy"),$t=s((function(e){return e.slice()}),"copyArray"),zt=s((function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}),"uuid"),Ut={},Gt=s((function(){return Ut}),"staticEmptyObject"),jt=s((function(e){var t=Object.keys(e);return function(r){for(var n={},i=0;i<t.length;i++){var a=t[i],o=r?.[a];n[a]=void 0===o?e[a]:o}return n}}),"defaults"),Vt=s((function(e,t,r){for(var n=e.length-1;n>=0&&(e[n]!==t||(e.splice(n,1),!r));n--);}),"removeFromArray"),Wt=s((function(e){e.splice(0,e.length)}),"clearArray"),Ht=s((function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.push(n)}}),"push"),qt=s((function(e,t,r){return r&&(t=ie(r,t)),e[t]}),"getPrefixedProperty"),Yt=s((function(e,t,r,n){r&&(t=ie(r,t)),e[t]=n}),"setPrefixedProperty"),Xt=function(){function e(){p(this,e),this._obj={}}return s(e,"ObjectMap"),m(e,[{key:"set",value:s((function(e,t){return this._obj[e]=t,this}),"set")},{key:"delete",value:s((function(e){return this._obj[e]=void 0,this}),"_delete")},{key:"clear",value:s((function(){this._obj={}}),"clear")},{key:"has",value:s((function(e){return void 0!==this._obj[e]}),"has")},{key:"get",value:s((function(e){return this._obj[e]}),"get")}]),e}(),Kt=typeof Map<"u"?Map:Xt,Zt=function(){function e(t){if(p(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var n=0;n<r.length;n++)this.add(r[n])}}return s(e,"ObjectSet"),m(e,[{key:"instanceString",value:s((function(){return"set"}),"instanceString")},{key:"add",value:s((function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}),"add")},{key:"delete",value:s((function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}),"_delete")},{key:"clear",value:s((function(){this._obj=Object.create(null)}),"clear")},{key:"has",value:s((function(e){return 1===this._obj[e]}),"has")},{key:"toArray",value:s((function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}),"toArray")},{key:"forEach",value:s((function(e,t){return this.toArray().forEach(e,t)}),"forEach")}]),e}(),Qt="undefined"!==(typeof Set>"u"?"undefined":f(Set))?Set:Zt,Jt=s((function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&q(e)){var n=t.group;if(null==n&&(n=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===n||"edges"===n){this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===n:!!t.pannable,active:!1,classes:new Qt,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var a=t.renderedPosition,o=e.pan(),s=e.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var l=[];F(t.classes)?l=t.classes:D(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];!h||""===h||i.classes.add(h)}this.createEmitter();var d=t.style||t.css;d&&(Dt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d)),(void 0===r||r)&&this.restore()}else Ot("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else Ot("An element must have a core reference and parameters set")}),"Element"),er=s((function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},s((function(t,r,n){var i;$(t)&&!V(t)&&(t=(i=t).roots||i.root,r=i.visit,n=i.directed),n=2!==arguments.length||B(r)?n:r,r=B(r)?r:function(){};for(var a,o=this._private.cy,l=t=D(t)?this.filter(t):t,u=[],c=[],h={},d={},f={},p=0,g=this.byGroup(),m=g.nodes,y=g.edges,v=0;v<l.length;v++){var x=l[v],b=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(f[b]=!0,c.push(x)),d[b]=0)}for(var T=s((function(){var t=e.bfs?u.shift():u.pop(),i=t.id();if(e.dfs){if(f[i])return"continue";f[i]=!0,c.push(t)}var o,s=d[i],l=h[i],g=null!=l?l.source():null,v=null!=l?l.target():null,x=null==l?void 0:t.same(g)?v[0]:g[0];if(!0===(o=r(t,l,x,p++,s)))return a=t,"break";if(!1===o)return"break";for(var b=t.connectedEdges().filter((function(e){return(!n||e.source().same(t))&&y.has(e)})),T=0;T<b.length;T++){var C=b[T],w=C.connectedNodes().filter((function(e){return!e.same(t)&&m.has(e)})),k=w.id();0!==w.length&&!f[k]&&(w=w[0],u.push(w),e.bfs&&(f[k]=!0,c.push(w)),h[k]=C,d[k]=d[i]+1)}}),"_loop");0!==u.length;){var C=T();if("continue"!==C&&"break"===C)break}for(var w=o.collection(),k=0;k<c.length;k++){var E=c[k],_=h[E.id()];null!=_&&w.push(_),w.push(E)}return{path:o.collection(w),found:o.collection(a)}}),"searchFn")}),"defineSearch"),tr={breadthFirstSearch:er({bfs:!0}),depthFirstSearch:er({dfs:!0})};tr.bfs=tr.breadthFirstSearch,tr.dfs=tr.depthFirstSearch;var rr=Ee((function(e,t){(function(){var t,r,n,i,a,o,l,u,c,h,d,f,p,g,m;n=Math.floor,h=Math.min,r=s((function(e,t){return e<t?-1:e>t?1:0}),"defaultCmp"),c=s((function(e,t,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=r),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)o(t,e[s=n((i+a)/2)])<0?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(t)),t}),"insort"),o=s((function(e,t,n){return null==n&&(n=r),e.push(t),g(e,0,e.length-1,n)}),"heappush"),a=s((function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,m(e,0,t)):i=n,i}),"heappop"),u=s((function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,m(e,0,n),i}),"heapreplace"),l=s((function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],m(e,0,n)),t}),"heappushpop"),i=s((function(e,t){var i,a,o,s,l,u;for(null==t&&(t=r),s=function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],a=0,o=s.length;a<o;a++)i=s[a],l.push(m(e,i,t));return l}),"heapify"),p=s((function(e,t,n){var i;if(null==n&&(n=r),-1!==(i=e.indexOf(t)))return g(e,0,i,n),m(e,i,n)}),"updateItem"),d=s((function(e,t,n){var a,o,s,u,c;if(null==n&&(n=r),!(o=e.slice(0,t)).length)return o;for(i(o,n),s=0,u=(c=e.slice(t)).length;s<u;s++)a=c[s],l(o,a,n);return o.sort(n).reverse()}),"nlargest"),f=s((function(e,t,n){var o,s,l,u,d,f,p,g,m;if(null==n&&(n=r),10*t<=e.length){if(!(l=e.slice(0,t).sort(n)).length)return l;for(s=l[l.length-1],u=0,f=(p=e.slice(t)).length;u<f;u++)n(o=p[u],s)<0&&(c(l,o,0,null,n),l.pop(),s=l[l.length-1]);return l}for(i(e,n),m=[],d=0,g=h(t,e.length);0<=g?d<g:d>g;0<=g?++d:--d)m.push(a(e,n));return m}),"nsmallest"),g=s((function(e,t,n,i){var a,o,s;for(null==i&&(i=r),a=e[n];n>t&&i(a,o=e[s=n-1>>1])<0;)e[n]=o,n=s;return e[n]=a}),"_siftdown"),m=s((function(e,t,n){var i,a,o,s,l;for(null==n&&(n=r),a=e.length,l=t,o=e[t],i=2*t+1;i<a;)(s=i+1)<a&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=o,g(e,l,t,n)}),"_siftup"),t=function(){function e(e){this.cmp=e??r,this.nodes=[]}return e.push=o,e.pop=a,e.replace=u,e.pushpop=l,e.heapify=i,e.updateItem=p,e.nlargest=d,e.nsmallest=f,s(e,"Heap"),e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}).call(ke)})),nr=rr,ir=jt({root:null,weight:s((function(e){return 1}),"weight"),directed:!1}),ar={dijkstra:s((function(e){if(!$(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=ir(e),n=r.root,i=r.weight,a=r.directed,o=this,l=i,u=D(n)?this.filter(n)[0]:n[0],c={},h={},d={},f=this.byGroup(),p=f.nodes,g=f.edges;g.unmergeBy((function(e){return e.isLoop()}));for(var m=s((function(e){return c[e.id()]}),"getDist"),y=s((function(e,t){c[e.id()]=t,v.updateItem(e)}),"setDist"),v=new nr((function(e,t){return m(e)-m(t)})),x=0;x<p.length;x++){var b=p[x];c[b.id()]=b.same(u)?0:1/0,v.push(b)}for(var T=s((function(e,t){for(var r,n=(a?e.edgesTo(t):e.edgesWith(t)).intersect(g),i=1/0,o=0;o<n.length;o++){var s=n[o],u=l(s);(u<i||!r)&&(i=u,r=s)}return{edge:r,dist:i}}),"distBetween");v.size()>0;){var C=v.pop(),w=m(C),k=C.id();if(d[k]=w,w!==1/0)for(var E=C.neighborhood().intersect(p),_=0;_<E.length;_++){var A=E[_],S=A.id(),R=T(C,A),N=w+R.dist;N<m(A)&&(y(A,N),h[S]={node:C,edge:R.edge})}}return{distanceTo:s((function(e){var t=D(e)?p.filter(e)[0]:e[0];return d[t.id()]}),"distanceTo"),pathTo:s((function(e){var t=D(e)?p.filter(e)[0]:e[0],r=[],n=t,i=n.id();if(t.length>0)for(r.unshift(t);h[i];){var a=h[i];r.unshift(a.edge),r.unshift(a.node),i=(n=a.node).id()}return o.spawn(r)}),"pathTo")}}),"dijkstra")},or={kruskal:s((function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,n=t.edges,i=r.length,a=new Array(i),o=r,l=s((function(e){for(var t=0;t<a.length;t++){if(a[t].has(e))return t}}),"findSetIndex"),u=0;u<i;u++)a[u]=this.spawn(r[u]);for(var c=n.sort((function(t,r){return e(t)-e(r)})),h=0;h<c.length;h++){var d=c[h],f=d.source()[0],p=d.target()[0],g=l(f),m=l(p),y=a[g],v=a[m];g!==m&&(o.merge(d),y.merge(v),a.splice(m,1))}return o}),"kruskal")},sr=jt({root:null,goal:null,weight:s((function(e){return 1}),"weight"),heuristic:s((function(e){return 0}),"heuristic"),directed:!1}),lr={aStar:s((function(e){var t=this.cy(),r=sr(e),n=r.root,i=r.goal,a=r.heuristic,o=r.directed,l=r.weight;n=t.collection(n)[0],i=t.collection(i)[0];var u,c,h=n.id(),d=i.id(),f={},p={},g={},m=new nr((function(e,t){return p[e.id()]-p[t.id()]})),y=new Qt,v={},x={},b=s((function(e,t){m.push(e),y.add(t)}),"addToOpenSet"),T=s((function(){u=m.pop(),c=u.id(),y.delete(c)}),"popFromOpenSet"),C=s((function(e){return y.has(e)}),"isInOpenSet");b(n,h),f[h]=0,p[h]=a(n);for(var w=0;m.size()>0;){if(T(),w++,c===d){for(var k=[],E=i,_=d,A=x[_];k.unshift(E),null!=A&&k.unshift(A),null!=(E=v[_]);)A=x[_=E.id()];return{found:!0,distance:f[c],path:this.spawn(k),steps:w}}g[c]=!0;for(var S=u._private.edges,R=0;R<S.length;R++){var N=S[R];if(this.hasElementWithId(N.id())&&(!o||N.data("source")===c)){var L=N.source(),I=N.target(),M=L.id()!==c?L:I,O=M.id();if(this.hasElementWithId(O)&&!g[O]){var P=f[c]+l(N);if(!C(O)){f[O]=P,p[O]=P+a(M),b(M,O),v[O]=u,x[O]=N;continue}P<f[O]&&(f[O]=P,p[O]=P+a(M),v[O]=u,x[O]=N)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}),"aStar")},ur=jt({weight:s((function(e){return 1}),"weight"),directed:!1}),cr={floydWarshall:s((function(e){for(var t=this.cy(),r=ur(e),n=r.weight,i=r.directed,a=n,o=this.byGroup(),l=o.nodes,u=o.edges,c=l.length,h=c*c,d=s((function(e){return l.indexOf(e)}),"indexOf"),f=s((function(e){return l[e]}),"atIndex"),p=new Array(h),g=0;g<h;g++){var m=g%c,y=(g-m)/c;p[g]=y===m?0:1/0}for(var v=new Array(h),x=new Array(h),b=0;b<u.length;b++){var T=u[b],C=T.source()[0],w=T.target()[0];if(C!==w){var k=d(C),E=d(w),_=k*c+E,A=a(T);if(p[_]>A&&(p[_]=A,v[_]=E,x[_]=T),!i){var S=E*c+k;!i&&p[S]>A&&(p[S]=A,v[S]=k,x[S]=T)}}}for(var R=0;R<c;R++)for(var N=0;N<c;N++)for(var L=N*c+R,I=0;I<c;I++){var M=N*c+I,O=R*c+I;p[L]+p[O]<p[M]&&(p[M]=p[L]+p[O],v[M]=v[L])}var P=s((function(e){return(D(e)?t.filter(e):e)[0]}),"getArgEle"),B=s((function(e){return d(P(e))}),"indexOfArgEle"),F={distance:s((function(e,t){var r=B(e),n=B(t);return p[r*c+n]}),"distance"),path:s((function(e,r){var n=B(e),i=B(r),a=f(n);if(n===i)return a.collection();if(null==v[n*c+i])return t.collection();var o,s=t.collection(),l=n;for(s.merge(a);n!==i;)l=n,n=v[n*c+i],o=x[l*c+n],s.merge(o),s.merge(f(n));return s}),"path")};return F}),"floydWarshall")},hr=jt({weight:s((function(e){return 1}),"weight"),directed:!1,root:null}),dr={bellmanFord:s((function(e){var t=this,r=hr(e),n=r.weight,i=r.directed,a=r.root,o=n,l=this,u=this.cy(),c=this.byGroup(),h=c.edges,d=c.nodes,f=d.length,p=new Kt,g=!1,m=[];a=u.collection(a)[0],h.unmergeBy((function(e){return e.isLoop()}));for(var y=h.length,v=s((function(e){var t=p.get(e.id());return t||(t={},p.set(e.id(),t)),t}),"getInfo"),x=s((function(e){return(D(e)?u.$(e):e)[0]}),"getNodeFromTo"),b=s((function(e){return v(x(e)).dist}),"distanceTo"),T=s((function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=[],i=x(e);;){if(null==i)return t.spawn();var o=v(i),s=o.edge,u=o.pred;if(n.unshift(i[0]),i.same(r)&&n.length>0)break;null!=s&&n.unshift(s),i=u}return l.spawn(n)}),"pathTo"),C=0;C<f;C++){var w=d[C],k=v(w);w.same(a)?k.dist=0:k.dist=1/0,k.pred=null,k.edge=null}for(var E=!1,_=s((function(e,t,r,n,i,a){var o=n.dist+a;o<i.dist&&!r.same(n.edge)&&(i.dist=o,i.pred=e,i.edge=r,E=!0)}),"checkForEdgeReplacement"),A=1;A<f;A++){E=!1;for(var S=0;S<y;S++){var R=h[S],N=R.source(),L=R.target(),I=o(R),M=v(N),O=v(L);_(N,L,R,M,O,I),i||_(L,N,R,O,M,I)}if(!E)break}if(E)for(var P=[],B=0;B<y;B++){var F=h[B],$=F.source(),z=F.target(),U=o(F),G=v($).dist,j=v(z).dist;if(G+U<j||!i&&j+U<G){if(g||(Dt("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),!1===e.findNegativeWeightCycles)break;var V=[];G+U<j&&V.push($),!i&&j+U<G&&V.push(z);for(var W=V.length,H=0;H<W;H++){var q=V[H],Y=[q];Y.push(v(q).edge);for(var X=v(q).pred;-1===Y.indexOf(X);)Y.push(X),Y.push(v(X).edge),X=v(X).pred;for(var K=(Y=Y.slice(Y.indexOf(X)))[0].id(),Z=0,Q=2;Q<Y.length;Q+=2)Y[Q].id()<K&&(K=Y[Q].id(),Z=Q);(Y=Y.slice(Z).concat(Y.slice(0,Z))).push(Y[0]);var J=Y.map((function(e){return e.id()})).join(",");-1===P.indexOf(J)&&(m.push(l.spawn(Y)),P.push(J))}}}return{distanceTo:b,pathTo:T,hasNegativeWeightCycle:g,negativeWeightCycles:m}}),"bellmanFord")},fr=Math.sqrt(2),pr=s((function(e,t,r){0===r.length&&Ot("Karger-Stein must be run on a connected (sub)graph");for(var n=r[e],i=n[1],a=n[2],o=t[i],s=t[a],l=r,u=l.length-1;u>=0;u--){var c=l[u],h=c[1],d=c[2];(t[h]===o&&t[d]===s||t[h]===s&&t[d]===o)&&l.splice(u,1)}for(var f=0;f<l.length;f++){var p=l[f];p[1]===s?(l[f]=p.slice(),l[f][1]=o):p[2]===s&&(l[f]=p.slice(),l[f][2]=o)}for(var g=0;g<t.length;g++)t[g]===s&&(t[g]=o);return l}),"collapse"),gr=s((function(e,t,r,n){for(;r>n;){var i=Math.floor(Math.random()*t.length);t=pr(i,e,t),r--}return t}),"contractUntil"),mr={kargerStein:s((function(){var e=this,t=this.byGroup(),r=t.nodes,n=t.edges;n.unmergeBy((function(e){return e.isLoop()}));var i=r.length,a=n.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/fr);if(!(i<2)){for(var u=[],c=0;c<a;c++){var h=n[c];u.push([c,r.indexOf(h.source()),r.indexOf(h.target())])}for(var d=1/0,f=[],p=new Array(i),g=new Array(i),m=new Array(i),y=s((function(e,t){for(var r=0;r<i;r++)t[r]=e[r]}),"copyNodesMap"),v=0;v<=o;v++){for(var x=0;x<i;x++)g[x]=x;var b=gr(g,u.slice(),i,l),T=b.slice();y(g,m);var C=gr(g,b,l,2),w=gr(m,T,l,2);C.length<=w.length&&C.length<d?(d=C.length,f=C,y(g,p)):w.length<=C.length&&w.length<d&&(d=w.length,f=w,y(m,p))}for(var k=this.spawn(f.map((function(e){return n[e[0]]}))),E=this.spawn(),_=this.spawn(),A=p[0],S=0;S<p.length;S++){var R=p[S],N=r[S];R===A?E.merge(N):_.merge(N)}var L=s((function(t){var r=e.spawn();return t.forEach((function(t){r.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!k.contains(t)&&r.merge(t)}))})),r}),"constructComponent"),I=[L(E),L(_)];return{cut:k,components:I,partition1:E,partition2:_}}Ot("At least 2 nodes are required for Karger-Stein algorithm")}),"kargerStein")},yr=s((function(e){return{x:e.x,y:e.y}}),"copyPosition"),vr=s((function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}}),"modelToRenderedPosition"),xr=s((function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}}),"renderedToModelPosition"),br=s((function(e){return{x:e[0],y:e[1]}}),"array2point"),Tr=s((function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=1/0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n=Math.min(a,n))}return n}),"min"),Cr=s((function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=-1/0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n=Math.max(a,n))}return n}),"max"),wr=s((function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=0,i=0,a=t;a<r;a++){var o=e[a];isFinite(o)&&(n+=o,i++)}return n/i}),"mean"),kr=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?e=e.slice(t,r):(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t));for(var a=0,o=e.length-1;o>=0;o--){var s=e[o];i?isFinite(s)||(e[o]=-1/0,a++):e.splice(o,1)}n&&e.sort((function(e,t){return e-t}));var l=e.length,u=Math.floor(l/2);return l%2!=0?e[u+1+a]:(e[u-1+a]+e[u+a])/2}),"median"),Er=s((function(e){return Math.PI*e/180}),"deg2rad"),_r=s((function(e,t){return Math.atan2(t,e)-Math.PI/2}),"getAngleFromDisp"),Ar=Math.log2||function(e){return Math.log(e)/Math.log(2)},Sr=s((function(e){return e>0?1:e<0?-1:0}),"signum"),Rr=s((function(e,t){return Math.sqrt(Nr(e,t))}),"dist"),Nr=s((function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n}),"sqdist"),Lr=s((function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];for(var i=0;i<t;i++)e[i]=e[i]/r;return e}),"inPlaceSumNormalize"),Ir=s((function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r}),"qbezierAt"),Mr=s((function(e,t,r,n){return{x:Ir(e.x,t.x,r.x,n),y:Ir(e.y,t.y,r.y,n)}}),"qbezierPtAt"),Or=s((function(e,t,r,n){var i=t.x-e.x,a=t.y-e.y,o=Rr(e,t),s=i/o,l=a/o;return r=r??0,n=n??r*o,{x:e.x+s*n,y:e.y+l*n}}),"lineAt"),Pr=s((function(e,t,r){return Math.max(e,Math.min(r,t))}),"bound"),Dr=s((function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}}),"makeBoundingBox"),Br=s((function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}),"copyBoundingBox"),Fr=s((function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0}),"clearBoundingBox"),$r=s((function(e,t,r){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+r,y2:e.y2+r,w:e.w,h:e.h}}),"shiftBoundingBox"),zr=s((function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1}),"updateBoundingBox"),Ur=s((function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1}),"expandBoundingBoxByPoint"),Gr=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e}),"expandBoundingBox"),jr=s((function(e){var t,r,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=r=n=i=a[0];else if(2===a.length)t=n=a[0],i=r=a[1];else if(4===a.length){var o=v(a,4);t=o[0],r=o[1],n=o[2],i=o[3]}return e.x1-=i,e.x2+=r,e.y1-=t,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e}),"expandBoundingBoxSides"),Vr=s((function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1}),"assignBoundingBox"),Wr=s((function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)}),"boundingBoxesIntersect"),Hr=s((function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2}),"inBoundingBox"),qr=s((function(e,t){return Hr(e,t.x,t.y)}),"pointInBoundingBox"),Yr=s((function(e,t){return Hr(e,t.x1,t.y1)&&Hr(e,t.x2,t.y2)}),"boundingBoxInBoundingBox"),Xr=s((function(e,t,r,n,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===u?xn(i,a):u,h=i/2,d=a/2,f=(c=Math.min(c,h,d))!==h,p=c!==d;if(f){var g=n-d-o;if((s=dn(e,t,r,n,r-h+c-o,g,r+h-c+o,g,!1)).length>0)return s}if(p){var m=r+h+o;if((s=dn(e,t,r,n,m,n-d+c-o,m,n+d-c+o,!1)).length>0)return s}if(f){var y=n+d+o;if((s=dn(e,t,r,n,r-h+c-o,y,r+h-c+o,y,!1)).length>0)return s}if(p){var v=r-h-o;if((s=dn(e,t,r,n,v,n-d+c-o,v,n+d-c+o,!1)).length>0)return s}var x=r-h+c,b=n-d+c;if((l=cn(e,t,r,n,x,b,c+o)).length>0&&l[0]<=x&&l[1]<=b)return[l[0],l[1]];var T=r+h-c,C=n-d+c;if((l=cn(e,t,r,n,T,C,c+o)).length>0&&l[0]>=T&&l[1]<=C)return[l[0],l[1]];var w=r+h-c,k=n+d-c;if((l=cn(e,t,r,n,w,k,c+o)).length>0&&l[0]>=w&&l[1]>=k)return[l[0],l[1]];var E=r-h+c,_=n+d-c;return(l=cn(e,t,r,n,E,_,c+o)).length>0&&l[0]<=E&&l[1]>=_?[l[0],l[1]]:[]}),"roundRectangleIntersectLine"),Kr=s((function(e,t,r,n,i,a,o){var s=o,l=Math.min(r,i),u=Math.max(r,i),c=Math.min(n,a),h=Math.max(n,a);return l-s<=e&&e<=u+s&&c-s<=t&&t<=h+s}),"inLineVicinity"),Zr=s((function(e,t,r,n,i,a,o,s,l){var u=Math.min(r,o,i)-l,c=Math.max(r,o,i)+l,h=Math.min(n,s,a)-l,d=Math.max(n,s,a)+l;return!(e<u||e>c||t<h||t>d)}),"inBezierVicinity"),Qr=s((function(e,t,r,n){var i=t*t-4*e*(r-=n);if(i<0)return[];var a=Math.sqrt(i),o=2*e;return[(-t+a)/o,(-t-a)/o]}),"solveQuadratic"),Jr=s((function(e,t,r,n,i){var a,o,s,l,u,c,h,d;return 0===e&&(e=1e-5),s=-27*(n/=e)+(t/=e)*(9*(r/=e)-t*t*2),a=(o=(3*r-t*t)/9)*o*o+(s/=54)*s,i[1]=0,h=t/3,a>0?(u=(u=s+Math.sqrt(a))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===a?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,void(i[4]=i[2]=-(d+h))):(l=(o=-o)*o*o,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(o),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((l+4*Math.PI)/3))))}),"solveCubic"),en=s((function(e,t,r,n,i,a,o,s){var l=[];Jr(1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s,9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*n*a-3*n*n-3*n*s-6*a*a+3*a*s,3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*n*n-6*n*a+n*s-n*t+2*a*a+2*a*t-s*t,1*r*i-r*r+r*e-i*e+n*a-n*n+n*t-a*t,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var h,d,f,p=-1,g=0;g<u.length;g++)h=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*i+u[g]*u[g]*o,d=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*a+u[g]*u[g]*s,f=Math.pow(h-e,2)+Math.pow(d-t,2),p>=0?f<p&&(p=f):p=f;return p}),"sqdistToQuadraticBezier"),tn=s((function(e,t,r,n,i,a){var o=[e-r,t-n],s=[i-r,a-n],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-a)*(t-a):u-h}),"sqdistToFiniteLine"),rn=s((function(e,t,r){for(var n,i,a,o,s=0,l=0;l<r.length/2;l++)if(n=r[2*l],i=r[2*l+1],l+1<r.length/2?(a=r[2*(l+1)],o=r[2*(l+1)+1]):(a=r[2*(l+1-r.length/2)],o=r[2*(l+1-r.length/2)+1]),n!=e||a!=e){if(!(n>=e&&e>=a||n<=e&&e<=a))continue;(e-n)/(a-n)*(o-i)+i>t&&s++}return s%2!=0}),"pointInsidePolygonPoints"),nn=s((function(e,t,r,n,i,a,o,s,l){var u,c,h=new Array(r.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var d=Math.cos(-u),f=Math.sin(-u),p=0;p<h.length/2;p++)h[2*p]=a/2*(r[2*p]*d-r[2*p+1]*f),h[2*p+1]=o/2*(r[2*p+1]*d+r[2*p]*f),h[2*p]+=n,h[2*p+1]+=i;if(l>0){var g=sn(h,-l);c=on(g)}else c=h;return rn(e,t,c)}),"pointInsidePolygon"),an=s((function(e,t,r,n,i,a,o,s){for(var l=new Array(2*r.length),u=0;u<s.length;u++){var c=s[u];if(l[4*u+0]=c.startX,l[4*u+1]=c.startY,l[4*u+2]=c.stopX,l[4*u+3]=c.stopY,Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2)<=Math.pow(c.radius,2))return!0}return rn(e,t,l)}),"pointInsideRoundPolygon"),on=s((function(e){for(var t,r,n,i,a,o,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],n=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],o=e[4*(c+1)+1],s=e[4*(c+1)+2],l=e[4*(c+1)+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var h=dn(t,r,n,i,a,o,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u}),"joinLines"),sn=s((function(e,t){for(var r,n,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],n=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],a=e[2*(s+1)+1]):(i=e[0],a=e[1]);var l=a-n,u=-(i-r),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;o[4*s]=r+h*t,o[4*s+1]=n+d*t,o[4*s+2]=i+h*t,o[4*s+3]=a+d*t}return o}),"expandPolygon"),ln=s((function(e,t,r,n,i,a){var o=r-e,s=n-t;o/=i,s/=a;var l=Math.sqrt(o*o+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(r-e)*c+e,(n-t)*c+t]}),"intersectLineEllipse"),un=s((function(e,t,r,n,i,a,o){return e-=i,t-=a,(e/=r/2+o)*e+(t/=n/2+o)*t<=1}),"checkInEllipse"),cn=s((function(e,t,r,n,i,a,o){var s=[r-e,n-t],l=[e-i,t-a],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-o*o);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),p=Math.min(d,f),g=Math.max(d,f),m=[];if(p>=0&&p<=1&&m.push(p),g>=0&&g<=1&&m.push(g),0===m.length)return[];var y=m[0]*s[0]+e,v=m[0]*s[1]+t;return m.length>1?m[0]==m[1]?[y,v]:[y,v,m[1]*s[0]+e,m[1]*s[1]+t]:[y,v]}),"intersectLineCircle"),hn=s((function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r}),"midOfThree"),dn=s((function(e,t,r,n,i,a,o,s,l){var u=e-i,c=r-e,h=o-i,d=t-a,f=n-t,p=s-a,g=h*d-p*u,m=c*d-f*u,y=p*c-h*f;if(0!==y){var v=g/y,x=m/y,b=-.001;return b<=v&&v<=1.001&&b<=x&&x<=1.001||l?[e+v*c,t+v*f]:[]}return 0===g||0===m?hn(e,r,o)===o?[o,s]:hn(e,r,i)===i?[i,a]:hn(i,o,r)===r?[r,n]:[]:[]}),"finiteLinesIntersect"),fn=s((function(e,t,r,n,i,a,o,s){var l,u,c=[],h=new Array(r.length),d=!0;if(null==a&&(d=!1),d){for(var f=0;f<h.length/2;f++)h[2*f]=r[2*f]*a+n,h[2*f+1]=r[2*f+1]*o+i;if(s>0){var p=sn(h,-s);u=on(p)}else u=h}else u=r;for(var g,m,y,v,x=0;x<u.length/2;x++)g=u[2*x],m=u[2*x+1],x<u.length/2-1?(y=u[2*(x+1)],v=u[2*(x+1)+1]):(y=u[0],v=u[1]),0!==(l=dn(e,t,n,i,g,m,y,v)).length&&c.push(l[0],l[1]);return c}),"polygonIntersectLine"),pn=s((function(e,t,r,n,i,a,o,s,l){var u,c=[],h=new Array(2*r.length);l.forEach((function(r,a){0===a?(h[h.length-2]=r.startX,h[h.length-1]=r.startY):(h[4*a-2]=r.startX,h[4*a-1]=r.startY),h[4*a]=r.stopX,h[4*a+1]=r.stopY,0!==(u=cn(e,t,n,i,r.cx,r.cy,r.radius)).length&&c.push(u[0],u[1])}));for(var d=0;d<h.length/4;d++)0!==(u=dn(e,t,n,i,h[4*d],h[4*d+1],h[4*d+2],h[4*d+3],!1)).length&&c.push(u[0],u[1]);if(c.length>2){for(var f=[c[0],c[1]],p=Math.pow(f[0]-e,2)+Math.pow(f[1]-t,2),g=1;g<c.length/2;g++){var m=Math.pow(c[2*g]-e,2)+Math.pow(c[2*g+1]-t,2);m<=p&&(f[0]=c[2*g],f[1]=c[2*g+1],p=m)}return f}return c}),"roundPolygonIntersectLine"),gn=s((function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(i-r)/i;return a<0&&(a=1e-5),[t[0]+a*n[0],t[1]+a*n[1]]}),"shortenIntersection"),mn=s((function(e,t){var r=vn(e,t);return r=yn(r)}),"generateUnitNgonPointsFitToSquare"),yn=s((function(e){for(var t,r,n=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<n;l++)t=e[2*l],r=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);for(var u=2/(o-i),c=2/(s-a),h=0;h<n;h++)t=e[2*h]=e[2*h]*u,r=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);if(a<-1)for(var d=0;d<n;d++)r=e[2*d+1]=e[2*d+1]+(-1-a);return e}),"fitPolygonToSquare"),vn=s((function(e,t){var r=1/e*2*Math.PI,n=e%2==0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var i,a=new Array(2*e),o=0;o<e;o++)i=o*r+n,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a}),"generateUnitNgonPoints"),xn=s((function(e,t){return Math.min(e/4,t/4,8)}),"getRoundRectangleRadius"),bn=s((function(e,t){return Math.min(e/10,t/10,8)}),"getRoundPolygonRadius"),Tn=s((function(){return 8}),"getCutRectangleCornerLength"),Cn=s((function(e,t,r){return[e-2*t+r,2*(t-e),e]}),"bezierPtsToQuadCoeff"),wn=s((function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}}),"getBarrelCurveConstants"),kn=jt({dampingFactor:.8,precision:1e-6,iterations:200,weight:s((function(e){return 1}),"weight")}),En={pageRank:s((function(e){for(var t=kn(e),r=t.dampingFactor,n=t.precision,i=t.iterations,a=t.weight,o=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,h=u.length,d=h*h,f=c.length,p=new Array(d),g=new Array(h),m=(1-r)/h,y=0;y<h;y++){for(var v=0;v<h;v++){p[y*h+v]=0}g[y]=0}for(var x=0;x<f;x++){var b=c[x],T=b.data("source"),C=b.data("target");if(T!==C){var w=u.indexOfId(T),k=u.indexOfId(C),E=a(b);p[k*h+w]+=E,g[w]+=E}}for(var _=1/h+m,A=0;A<h;A++)if(0===g[A])for(var S=0;S<h;S++){p[S*h+A]=_}else for(var R=0;R<h;R++){var N=R*h+A;p[N]=p[N]/g[A]+m}for(var L,I=new Array(h),M=new Array(h),O=0;O<h;O++)I[O]=1;for(var P=0;P<i;P++){for(var D=0;D<h;D++)M[D]=0;for(var B=0;B<h;B++)for(var F=0;F<h;F++){var $=B*h+F;M[B]+=p[$]*I[F]}Lr(M),L=I,I=M,M=L;for(var z=0,U=0;U<h;U++){var G=L[U]-I[U];z+=G*G}if(z<n)break}var j={rank:s((function(e){return e=o.collection(e)[0],I[u.indexOf(e)]}),"rank")};return j}),"pageRank")},_n=jt({root:null,weight:s((function(e){return 1}),"weight"),directed:!1,alpha:0}),An={degreeCentralityNormalized:s((function(e){e=_n(e);var t=this.cy(),r=this.nodes(),n=r.length;if(e.directed){for(var i={},a={},o=0,l=0,u=0;u<n;u++){var c=r[u],h=c.id();e.root=c;var d=this.degreeCentrality(e);o<d.indegree&&(o=d.indegree),l<d.outdegree&&(l=d.outdegree),i[h]=d.indegree,a[h]=d.outdegree}return{indegree:s((function(e){return 0==o?0:(D(e)&&(e=t.filter(e)),i[e.id()]/o)}),"indegree"),outdegree:s((function(e){return 0===l?0:(D(e)&&(e=t.filter(e)),a[e.id()]/l)}),"outdegree")}}for(var f={},p=0,g=0;g<n;g++){var m=r[g];e.root=m;var y=this.degreeCentrality(e);p<y.degree&&(p=y.degree),f[m.id()]=y.degree}return{degree:s((function(e){return 0===p?0:(D(e)&&(e=t.filter(e)),f[e.id()]/p)}),"degree")}}),"degreeCentralityNormalized"),degreeCentrality:s((function(e){e=_n(e);var t=this.cy(),r=this,n=e,i=n.root,a=n.weight,o=n.directed,s=n.alpha;if(i=t.collection(i)[0],o){for(var l=i.connectedEdges(),u=l.filter((function(e){return e.target().same(i)&&r.has(e)})),c=l.filter((function(e){return e.source().same(i)&&r.has(e)})),h=u.length,d=c.length,f=0,p=0,g=0;g<u.length;g++)f+=a(u[g]);for(var m=0;m<c.length;m++)p+=a(c[m]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(r),v=y.length,x=0,b=0;b<y.length;b++)x+=a(y[b]);return{degree:Math.pow(v,1-s)*Math.pow(x,s)}}),"degreeCentrality")};An.dc=An.degreeCentrality,An.dcn=An.degreeCentralityNormalised=An.degreeCentralityNormalized;var Sn=jt({harmonic:!0,weight:s((function(){return 1}),"weight"),directed:!1,root:null}),Rn={closenessCentralityNormalized:s((function(e){for(var t=Sn(e),r=t.harmonic,n=t.weight,i=t.directed,a=this.cy(),o={},l=0,u=this.nodes(),c=this.floydWarshall({weight:n,directed:i}),h=0;h<u.length;h++){for(var d=0,f=u[h],p=0;p<u.length;p++)if(h!==p){var g=c.distance(f,u[p]);d+=r?1/g:g}r||(d=1/d),l<d&&(l=d),o[f.id()]=d}return{closeness:s((function(e){return 0==l?0:(e=D(e)?a.filter(e)[0].id():e.id(),o[e]/l)}),"closeness")}}),"closenessCentralityNormalized"),closenessCentrality:s((function(e){var t=Sn(e),r=t.root,n=t.weight,i=t.directed,a=t.harmonic;r=this.filter(r)[0];for(var o=this.dijkstra({root:r,weight:n,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(r)){var h=o.distanceTo(c);s+=a?1/h:h}}return a?s:1/s}),"closenessCentrality")};Rn.cc=Rn.closenessCentrality,Rn.ccn=Rn.closenessCentralityNormalised=Rn.closenessCentralityNormalized;var Nn=jt({weight:null,directed:!1}),Ln={betweennessCentrality:s((function(e){for(var t=Nn(e),r=t.directed,n=t.weight,i=null!=n,a=this.cy(),o=this.nodes(),l={},u={},c=0,h={set:s((function(e,t){u[e]=t,t>c&&(c=t)}),"set"),get:s((function(e){return u[e]}),"get")},d=0;d<o.length;d++){var f=o[d],p=f.id();l[p]=r?f.outgoers().nodes():f.openNeighborhood().nodes(),h.set(p,0)}for(var g=s((function(e){for(var t=o[e].id(),r=[],s={},u={},c={},d=new nr((function(e,t){return c[e]-c[t]})),f=0;f<o.length;f++){var p=o[f].id();s[p]=[],u[p]=0,c[p]=1/0}for(u[t]=1,c[t]=0,d.push(t);!d.empty();){var g=d.pop();if(r.push(g),i)for(var m=0;m<l[g].length;m++){var y=l[g][m],v=a.getElementById(g),x=void 0;x=v.edgesTo(y).length>0?v.edgesTo(y)[0]:y.edgesTo(v)[0];var b=n(x);y=y.id(),c[y]>c[g]+b&&(c[y]=c[g]+b,d.nodes.indexOf(y)<0?d.push(y):d.updateItem(y),u[y]=0,s[y]=[]),c[y]==c[g]+b&&(u[y]=u[y]+u[g],s[y].push(g))}else for(var T=0;T<l[g].length;T++){var C=l[g][T].id();c[C]==1/0&&(d.push(C),c[C]=c[g]+1),c[C]==c[g]+1&&(u[C]=u[C]+u[g],s[C].push(g))}}for(var w={},k=0;k<o.length;k++)w[o[k].id()]=0;for(;r.length>0;){for(var E=r.pop(),_=0;_<s[E].length;_++){var A=s[E][_];w[A]=w[A]+u[A]/u[E]*(1+w[E])}E!=o[e].id()&&h.set(E,h.get(E)+w[E])}}),"_loop"),m=0;m<o.length;m++)g(m);var y={betweenness:s((function(e){var t=a.collection(e).id();return h.get(t)}),"betweenness"),betweennessNormalized:s((function(e){if(0==c)return 0;var t=a.collection(e).id();return h.get(t)/c}),"betweennessNormalized")};return y.betweennessNormalised=y.betweennessNormalized,y}),"betweennessCentrality")};Ln.bc=Ln.betweennessCentrality;var In=jt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Mn=s((function(e){return In(e)}),"setOptions"),On=s((function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n](e);return r}),"getSimilarity"),Pn=s((function(e,t,r){for(var n=0;n<t;n++)e[n*t+n]=r}),"addLoops"),Dn=s((function(e,t){for(var r,n=0;n<t;n++){r=0;for(var i=0;i<t;i++)r+=e[i*t+n];for(var a=0;a<t;a++)e[a*t+n]=e[a*t+n]/r}}),"normalize"),Bn=s((function(e,t,r){for(var n=new Array(r*r),i=0;i<r;i++){for(var a=0;a<r;a++)n[i*r+a]=0;for(var o=0;o<r;o++)for(var s=0;s<r;s++)n[i*r+s]+=e[i*r+o]*t[o*r+s]}return n}),"mmult"),Fn=s((function(e,t,r){for(var n=e.slice(0),i=1;i<r;i++)e=Bn(e,n,t);return e}),"expand"),$n=s((function(e,t,r){for(var n=new Array(t*t),i=0;i<t*t;i++)n[i]=Math.pow(e[i],r);return Dn(n,t),n}),"inflate"),zn=s((function(e,t,r,n){for(var i=0;i<r;i++){if(Math.round(e[i]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(t[i]*Math.pow(10,n))/Math.pow(10,n))return!1}return!0}),"hasConverged"),Un=s((function(e,t,r,n){for(var i=[],a=0;a<t;a++){for(var o=[],s=0;s<t;s++)Math.round(1e3*e[a*t+s])/1e3>0&&o.push(r[s]);0!==o.length&&i.push(n.collection(o))}return i}),"assign"),Gn=s((function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0}),"isDuplicate"),jn=s((function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&Gn(e[t],e[r])&&e.splice(r,1);return e}),"removeDuplicates"),Vn=s((function(e){for(var t=this.nodes(),r=this.edges(),n=this.cy(),i=Mn(e),a={},o=0;o<t.length;o++)a[t[o].id()]=o;for(var s,l=t.length,u=l*l,c=new Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<r.length;d++){var f=r[d],p=a[f.source().id()],g=a[f.target().id()],m=On(f,i.attributes);c[p*l+g]+=m,c[g*l+p]+=m}Pn(c,l,i.multFactor),Dn(c,l);for(var y=!0,v=0;y&&v<i.maxIterations;)y=!1,s=Fn(c,l,i.expandFactor),c=$n(s,l,i.inflateFactor),zn(c,s,u,4)||(y=!0),v++;var x=Un(c,l,t,n);return x=jn(x)}),"markovClustering"),Wn={markovClustering:Vn,mcl:Vn},Hn=s((function(e){return e}),"identity"),qn=s((function(e,t){return Math.abs(t-e)}),"absDiff"),Yn=s((function(e,t,r){return e+qn(t,r)}),"addAbsDiff"),Xn=s((function(e,t,r){return e+Math.pow(r-t,2)}),"addSquaredDiff"),Kn=s((function(e){return Math.sqrt(e)}),"sqrt"),Zn=s((function(e,t,r){return Math.max(e,qn(t,r))}),"maxAbsDiff"),Qn=s((function(e,t,r,n,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hn,o=n,s=0;s<e;s++)o=i(o,t(s),r(s));return a(o)}),"getDistance"),Jn={euclidean:s((function(e,t,r){return e>=2?Qn(e,t,r,0,Xn,Kn):Qn(e,t,r,0,Yn)}),"euclidean"),squaredEuclidean:s((function(e,t,r){return Qn(e,t,r,0,Xn)}),"squaredEuclidean"),manhattan:s((function(e,t,r){return Qn(e,t,r,0,Yn)}),"manhattan"),max:s((function(e,t,r){return Qn(e,t,r,-1/0,Zn)}),"max")};function ei(e,t,r,n,i,a){var o;return o=B(e)?e:Jn[e]||Jn.euclidean,0===t&&B(e)?o(i,a):o(t,r,n,i,a)}Jn["squared-euclidean"]=Jn.squaredEuclidean,Jn.squaredeuclidean=Jn.squaredEuclidean,s(ei,"clusteringDistance");var ti=jt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ri=s((function(e){return ti(e)}),"setOptions"),ni=s((function(e,t,r,n,i){var a="kMedoids"!==i?function(e){return r[e]}:function(e){return n[e](r)},o=s((function(e){return n[e](t)}),"getQ"),l=r,u=t;return ei(e,n.length,a,o,l,u)}),"getDist"),ii=s((function(e,t,r){for(var n=r.length,i=new Array(n),a=new Array(n),o=new Array(t),s=null,l=0;l<n;l++)i[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<n;c++)s[c]=Math.random()*(a[c]-i[c])+i[c];o[u]=s}return o}),"randomCentroids"),ai=s((function(e,t,r,n,i){for(var a=1/0,o=0,s=0;s<t.length;s++){var l=ni(r,e,t[s],n,i);l<a&&(a=l,o=s)}return o}),"classify"),oi=s((function(e,t,r){for(var n=[],i=null,a=0;a<t.length;a++)r[(i=t[a]).id()]===e&&n.push(i);return n}),"buildCluster"),si=s((function(e,t,r){return Math.abs(t-e)<=r}),"haveValuesConverged"),li=s((function(e,t,r){for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++){if(Math.abs(e[n][i]-t[n][i])>r)return!1}return!0}),"haveMatricesConverged"),ui=s((function(e,t,r){for(var n=0;n<r;n++)if(e===t[n])return!0;return!1}),"seenBefore"),ci=s((function(e,t){var r=new Array(t);if(e.length<50)for(var n=0;n<t;n++){for(var i=e[Math.floor(Math.random()*e.length)];ui(i,r,n);)i=e[Math.floor(Math.random()*e.length)];r[n]=i}else for(var a=0;a<t;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r}),"randomMedoids"),hi=s((function(e,t,r){for(var n=0,i=0;i<t.length;i++)n+=ni("manhattan",t[i],e,r,"kMedoids");return n}),"findCost"),di=s((function(e){var t,r=this.cy(),n=this.nodes(),i=null,a=ri(e),o=new Array(a.k),s={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,t=ii(n,a.k,a.attributes)):t="object"===f(a.testCentroids)?a.testCentroids:ii(n,a.k,a.attributes):t=ii(n,a.k,a.attributes);for(var l=!0,u=0;l&&u<a.maxIterations;){for(var c=0;c<n.length;c++)s[(i=n[c]).id()]=ai(i,t,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var d=oi(h,n,s);if(0!==d.length){for(var p=a.attributes.length,g=t[h],m=new Array(p),y=new Array(p),v=0;v<p;v++){y[v]=0;for(var x=0;x<d.length;x++)i=d[x],y[v]+=a.attributes[v](i);m[v]=y[v]/d.length,si(m[v],g[v],a.sensitivityThreshold)||(l=!0)}t[h]=m,o[h]=r.collection(d)}}u++}return o}),"kMeans"),fi=s((function(e){var t,r,n=this.cy(),i=this.nodes(),a=null,o=ri(e),s=new Array(o.k),l={},u=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(t="object"===f(o.testCentroids)?o.testCentroids:ci(i,o.k)):t=ci(i,o.k);for(var c=!0,h=0;c&&h<o.maxIterations;){for(var d=0;d<i.length;d++)l[(a=i[d]).id()]=ai(a,t,o.distance,o.attributes,"kMedoids");c=!1;for(var p=0;p<t.length;p++){var g=oi(p,i,l);if(0!==g.length){u[p]=hi(t[p],g,o.attributes);for(var m=0;m<g.length;m++)(r=hi(g[m],g,o.attributes))<u[p]&&(u[p]=r,t[p]=g[m],c=!0);s[p]=n.collection(g)}}h++}return s}),"kMedoids"),pi=s((function(e,t,r,n,i){for(var a,o,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)n[s][l]=Math.pow(r[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var h=0;h<t.length;h++)a+=n[h][u]*i.attributes[c](t[h]),o+=n[h][u];e[u][c]=a/o}}),"updateCentroids"),gi=s((function(e,t,r,n,i){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var o,s,l,u=2/(i.m-1),c=0;c<r.length;c++)for(var h=0;h<n.length;h++){o=0;for(var d=0;d<r.length;d++)s=ni(i.distance,n[h],r[c],i.attributes,"cmeans"),l=ni(i.distance,n[h],r[d],i.attributes,"cmeans"),o+=Math.pow(s/l,u);e[h][c]=1/o}}),"updateMembership"),mi=s((function(e,t,r,n){for(var i=new Array(r.k),a=0;a<i.length;a++)i[a]=[];for(var o,s,l=0;l<t.length;l++){o=-1/0,s=-1;for(var u=0;u<t[0].length;u++)t[l][u]>o&&(o=t[l][u],s=u);i[s].push(e[l])}for(var c=0;c<i.length;c++)i[c]=n.collection(i[c]);return i}),"assign"),yi=s((function(e){var t,r,n,i,a=this.cy(),o=this.nodes(),s=ri(e);n=new Array(o.length);for(var l=0;l<o.length;l++)n[l]=new Array(s.k);r=new Array(o.length);for(var u=0;u<o.length;u++)r[u]=new Array(s.k);for(var c=0;c<o.length;c++){for(var h=0,d=0;d<s.k;d++)r[c][d]=Math.random(),h+=r[c][d];for(var f=0;f<s.k;f++)r[c][f]=r[c][f]/h}t=new Array(s.k);for(var p=0;p<s.k;p++)t[p]=new Array(s.attributes.length);i=new Array(o.length);for(var g=0;g<o.length;g++)i[g]=new Array(s.k);for(var m=!0,y=0;m&&y<s.maxIterations;)m=!1,pi(t,o,r,i,s),gi(r,n,t,o,s),li(r,n,s.sensitivityThreshold)||(m=!0),y++;return{clusters:mi(o,r,s,a),degreeOfMembership:r}}),"fuzzyCMeans"),vi={kMeans:di,kMedoids:fi,fuzzyCMeans:yi,fcm:yi},xi=jt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),bi={single:"min",complete:"max"},Ti=s((function(e){var t=xi(e),r=bi[t.linkage];return null!=r&&(t.linkage=r),t}),"setOptions"),Ci=s((function(e,t,r,n,i){for(var a,o=0,l=1/0,u=i.attributes,c=s((function(e,t){return ei(i.distance,u.length,(function(t){return u[t](e)}),(function(e){return u[e](t)}),e,t)}),"getDist"),h=0;h<e.length;h++){var d=e[h].key,f=r[d][n[d]];f<l&&(o=d,l=f)}if("threshold"===i.mode&&l>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var p,g=t[o],m=t[n[o]];p="dendrogram"===i.mode?{left:g,right:m,key:g.key}:{value:g.value.concat(m.value),key:g.key},e[g.index]=p,e.splice(m.index,1),t[g.key]=p;for(var y=0;y<e.length;y++){var v=e[y];g.key===v.key?a=1/0:"min"===i.linkage?(a=r[g.key][v.key],r[g.key][v.key]>r[m.key][v.key]&&(a=r[m.key][v.key])):"max"===i.linkage?(a=r[g.key][v.key],r[g.key][v.key]<r[m.key][v.key]&&(a=r[m.key][v.key])):a="mean"===i.linkage?(r[g.key][v.key]*g.size+r[m.key][v.key]*m.size)/(g.size+m.size):"dendrogram"===i.mode?c(v.value,g.value):c(v.value[0],g.value[0]),r[g.key][v.key]=r[v.key][g.key]=a}for(var x=0;x<e.length;x++){var b=e[x].key;if(n[b]===g.key||n[b]===m.key){for(var T=b,C=0;C<e.length;C++){var w=e[C].key;r[b][w]<r[b][T]&&(T=w)}n[b]=T}e[x].index=x}return g.key=m.key=g.index=m.index=null,!0}),"mergeClosest"),wi=s((function e(t,r,n){t&&(t.value?r.push(t.value):(t.left&&e(t.left,r),t.right&&e(t.right,r)))}),"getAllChildren"),ki=s((function e(t,r){if(!t)return"";if(t.left&&t.right){var n=e(t.left,r),i=e(t.right,r),a=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return t.value?t.value.id():void 0}),"buildDendrogram"),Ei=s((function e(t,r,n){if(!t)return[];var i=[],a=[],o=[];return 0===r?(t.left&&wi(t.left,i),t.right&&wi(t.right,a),o=i.concat(a),[n.collection(o)]):1===r?t.value?[n.collection(t.value)]:(t.left&&wi(t.left,i),t.right&&wi(t.right,a),[n.collection(i),n.collection(a)]):t.value?[n.collection(t.value)]:(t.left&&(i=e(t.left,r-1,n)),t.right&&(a=e(t.right,r-1,n)),i.concat(a))}),"buildClustersFromTree"),_i=s((function(e){for(var t=this.cy(),r=this.nodes(),n=Ti(e),i=n.attributes,a=s((function(e,t){return ei(n.distance,i.length,(function(t){return i[t](e)}),(function(e){return i[e](t)}),e,t)}),"getDist"),o=[],l=[],u=[],c=[],h=0;h<r.length;h++){var d={value:"dendrogram"===n.mode?r[h]:[r[h]],key:h,index:h};o[h]=d,c[h]=d,l[h]=[],u[h]=0}for(var f=0;f<o.length;f++)for(var p=0;p<=f;p++){var g=void 0;g="dendrogram"===n.mode?f===p?1/0:a(o[f].value,o[p].value):f===p?1/0:a(o[f].value[0],o[p].value[0]),l[f][p]=g,l[p][f]=g,g<l[f][u[f]]&&(u[f]=p)}for(var m=Ci(o,c,l,u,n);m;)m=Ci(o,c,l,u,n);var y;return"dendrogram"===n.mode?(y=Ei(o[0],n.dendrogramDepth,t),n.addDendrogram&&ki(o[0],t)):(y=new Array(o.length),o.forEach((function(e,r){e.key=e.index=null,y[r]=t.collection(e.value)}))),y}),"hierarchicalClustering"),Ai={hierarchicalClustering:_i,hca:_i},Si=jt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Ri=s((function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||Ot("Damping must range on [0.5, 1).  Got: ".concat(t));var n=["median","mean","min","max"];return n.some((function(e){return e===r}))||U(r)||Ot("Preference must be one of [".concat(n.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(r)),Si(e)}),"setOptions"),Ni=s((function(e,t,r,n){var i=s((function(e,t){return n[t](e)}),"attr");return-ei(e,n.length,(function(e){return i(t,e)}),(function(e){return i(r,e)}),t,r)}),"getSimilarity"),Li=s((function(e,t){return"median"===t?kr(e):"mean"===t?wr(e):"min"===t?Tr(e):"max"===t?Cr(e):t}),"getPreference"),Ii=s((function(e,t,r){for(var n=[],i=0;i<e;i++)t[i*e+i]+r[i*e+i]>0&&n.push(i);return n}),"findExemplars"),Mi=s((function(e,t,r){for(var n=[],i=0;i<e;i++){for(var a=-1,o=-1/0,s=0;s<r.length;s++){var l=r[s];t[i*e+l]>o&&(a=l,o=t[i*e+l])}a>0&&n.push(a)}for(var u=0;u<r.length;u++)n[r[u]]=r[u];return n}),"assignClusters"),Oi=s((function(e,t,r){for(var n=Mi(e,t,r),i=0;i<r.length;i++){for(var a=[],o=0;o<n.length;o++)n[o]===r[i]&&a.push(o);for(var s=-1,l=-1/0,u=0;u<a.length;u++){for(var c=0,h=0;h<a.length;h++)c+=t[a[h]*e+a[u]];c>l&&(s=u,l=c)}r[i]=a[s]}return n=Mi(e,t,r)}),"assign"),Pi=s((function(e){for(var t=this.cy(),r=this.nodes(),n=Ri(e),i={},a=0;a<r.length;a++)i[r[a].id()]=a;var o,s,l,u,c,h,d;s=(o=r.length)*o,l=new Array(s);for(var f=0;f<s;f++)l[f]=-1/0;for(var p=0;p<o;p++)for(var g=0;g<o;g++)p!==g&&(l[p*o+g]=Ni(n.distance,r[p],r[g],n.attributes));u=Li(l,n.preference);for(var m=0;m<o;m++)l[m*o+m]=u;c=new Array(s);for(var y=0;y<s;y++)c[y]=0;h=new Array(s);for(var v=0;v<s;v++)h[v]=0;for(var x=new Array(o),b=new Array(o),T=new Array(o),C=0;C<o;C++)x[C]=0,b[C]=0,T[C]=0;for(var w=new Array(o*n.minIterations),k=0;k<w.length;k++)w[k]=0;for(d=0;d<n.maxIterations;d++){for(var E=0;E<o;E++){for(var _=-1/0,A=-1/0,S=-1,R=0,N=0;N<o;N++)x[N]=c[E*o+N],(R=h[E*o+N]+l[E*o+N])>=_?(A=_,_=R,S=N):R>A&&(A=R);for(var L=0;L<o;L++)c[E*o+L]=(1-n.damping)*(l[E*o+L]-_)+n.damping*x[L];c[E*o+S]=(1-n.damping)*(l[E*o+S]-A)+n.damping*x[S]}for(var I=0;I<o;I++){for(var M=0,O=0;O<o;O++)x[O]=h[O*o+I],b[O]=Math.max(0,c[O*o+I]),M+=b[O];M-=b[I],b[I]=c[I*o+I],M+=b[I];for(var P=0;P<o;P++)h[P*o+I]=(1-n.damping)*Math.min(0,M-b[P])+n.damping*x[P];h[I*o+I]=(1-n.damping)*(M-b[I])+n.damping*x[I]}for(var D=0,B=0;B<o;B++){var F=h[B*o+B]+c[B*o+B]>0?1:0;w[d%n.minIterations*o+B]=F,D+=F}if(D>0&&(d>=n.minIterations-1||d==n.maxIterations-1)){for(var $=0,z=0;z<o;z++){T[z]=0;for(var U=0;U<n.minIterations;U++)T[z]+=w[U*o+z];(0===T[z]||T[z]===n.minIterations)&&$++}if($===o)break}}for(var G=Ii(o,c,h),j=Oi(o,l,G),V={},W=0;W<G.length;W++)V[G[W]]=[];for(var H=0;H<r.length;H++){var q=j[i[r[H].id()]];null!=q&&V[q].push(r[H])}for(var Y=new Array(G.length),X=0;X<G.length;X++)Y[X]=t.collection(V[G[X]]);return Y}),"affinityPropagation"),Di={affinityPropagation:Pi,ap:Pi},Bi=jt({root:void 0,directed:!1}),Fi={hierholzer:s((function(e){if(!$(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r,n,i,a=Bi(e),o=a.root,l=a.directed,u=this,c=!1;o&&(i=D(o)?this.filter(o)[0].id():o[0].id());var h={},d={};l?u.forEach((function(e){var t=e.id();if(e.isNode()){var i=e.indegree(!0),a=e.outdegree(!0),o=i-a,s=a-i;1==o?r?c=!0:r=t:1==s?n?c=!0:n=t:(s>1||o>1)&&(c=!0),h[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&h[t].push(e.id())}))}else d[t]=[void 0,e.target().id()]})):u.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(r?n?c=!0:n=t:r=t),h[t]=[],e.connectedEdges().forEach((function(e){return h[t].push(e.id())}))):d[t]=[e.source().id(),e.target().id()]}));var f={found:!1,trail:void 0};if(c)return f;if(n&&r)if(l){if(i&&n!=i)return f;i=n}else{if(i&&n!=i&&r!=i)return f;i||(i=n)}else i||(i=u[0].id());var p=s((function(e){for(var t,r,n,i=e,a=[e];h[i].length;)t=h[i].shift(),r=d[t][0],i!=(n=d[t][1])?(h[n]=h[n].filter((function(e){return e!=t})),i=n):!l&&i!=r&&(h[r]=h[r].filter((function(e){return e!=t})),i=r),a.unshift(t),a.unshift(i);return a}),"walk"),g=[],m=[];for(m=p(i);1!=m.length;)0==h[m[0]].length?(g.unshift(u.getElementById(m.shift())),g.unshift(u.getElementById(m.shift()))):m=p(m.shift()).concat(m);for(var y in g.unshift(u.getElementById(m.shift())),h)if(h[y].length)return f;return f.found=!0,f.trail=this.spawn(g,!0),f}),"hierholzer")},$i=s((function(){var e=this,t={},r=0,n=0,i=[],a=[],o={},l=s((function(r,n){for(var o=a.length-1,s=[],l=e.spawn();a[o].x!=r||a[o].y!=n;)s.push(a.pop().edge),o--;s.push(a.pop().edge),s.forEach((function(r){var n=r.connectedNodes().intersection(e);l.merge(r),n.forEach((function(r){var n=r.id(),i=r.connectedEdges().intersection(e);l.merge(r),t[n].cutVertex?l.merge(i.filter((function(e){return e.isLoop()}))):l.merge(i)}))})),i.push(l)}),"buildComponent"),u=s((function s(u,c,h){u===h&&(n+=1),t[c]={id:r,low:r++,cutVertex:!1};var d,f,p,g,m=e.getElementById(c).connectedEdges().intersection(e);0===m.size()?i.push(e.spawn(e.getElementById(c))):m.forEach((function(e){d=e.source().id(),f=e.target().id(),(p=d===c?f:d)!==h&&(g=e.id(),o[g]||(o[g]=!0,a.push({x:c,y:p,edge:e})),p in t?t[c].low=Math.min(t[c].low,t[p].id):(s(u,p,c),t[c].low=Math.min(t[c].low,t[p].low),t[c].id<=t[p].low&&(t[c].cutVertex=!0,l(c,p))))}))}),"biconnectedSearch");e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||(n=0,u(r,r),t[r].cutVertex=n>1)}}));var c=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(c),components:i}}),"hopcroftTarjanBiconnected"),zi={hopcroftTarjanBiconnected:$i,htbc:$i,htb:$i,hopcroftTarjanBiconnectedComponents:$i},Ui=s((function(){var e=this,t={},r=0,n=[],i=[],a=e.spawn(e),o=s((function o(s){if(i.push(s),t[s]={index:r,low:r++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach((function(e){var r=e.target().id();r!==s&&(r in t||o(r),t[r].explored||(t[s].low=Math.min(t[s].low,t[r].low)))})),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);n.push(h),a=a.difference(h)}}),"stronglyConnectedSearch");return e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||o(r)}})),{cut:a,components:n}}),"tarjanStronglyConnected"),Gi={};[tr,ar,or,lr,cr,dr,mr,En,An,Rn,Ln,Wn,vi,Ai,Di,Fi,zi,{tarjanStronglyConnected:Ui,tsc:Ui,tscc:Ui,tarjanStronglyConnectedComponents:Ui}].forEach((function(e){fe(Gi,e)}));var ji=s((function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))}),"api");ji.prototype={fulfill:s((function(e){return Vi(this,1,"fulfillValue",e)}),"fulfill"),reject:s((function(e){return Vi(this,2,"rejectReason",e)}),"reject"),then:s((function(e,t){var r=this,n=new ji;return r.onFulfilled.push(qi(e,n,"fulfill")),r.onRejected.push(qi(t,n,"reject")),Wi(r),n.proxy}),"then")};var Vi=s((function(e,t,r,n){return 0===e.state&&(e.state=t,e[r]=n,Wi(e)),e}),"deliver"),Wi=s((function(e){1===e.state?Hi(e,"onFulfilled",e.fulfillValue):2===e.state&&Hi(e,"onRejected",e.rejectReason)}),"execute"),Hi=s((function(e,t,r){if(0!==e[t].length){var n=e[t];e[t]=[];var i=s((function(){for(var e=0;e<n.length;e++)n[e](r)}),"func");"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}}),"execute_handlers"),qi=s((function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var i;try{i=e(n)}catch(e){return void t.reject(e)}Yi(t,i)}}}),"resolver"),Yi=s((function e(t,r){if(t!==r&&t.proxy!==r){var n;if("object"===f(r)&&null!==r||"function"==typeof r)try{n=r.then}catch(e){return void t.reject(e)}if("function"!=typeof n)t.fulfill(r);else{var i=!1;try{n.call(r,(function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):e(t,n))}),(function(e){i||(i=!0,t.reject(e))}))}catch(e){i||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))}),"resolve");ji.all=function(e){return new ji((function(t,r){for(var n=new Array(e.length),i=0,a=s((function(r,a){n[r]=a,++i===e.length&&t(n)}),"fulfill"),o=0;o<e.length;o++)!function(t){var n=e[t];null!=n&&null!=n.then?n.then((function(e){a(t,e)}),(function(e){r(e)})):a(t,n)}(o)}))},ji.resolve=function(e){return new ji((function(t,r){t(e)}))},ji.reject=function(e){return new ji((function(t,r){r(e)}))};var Xi=typeof Promise<"u"?Promise:ji,Ki=s((function(e,t,r){var n=q(e),i=!n,a=this._private=fe({duration:1e3},t,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&B(a.complete)&&a.completes.push(a.complete),i){var o=e.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(n){var s=e.pan();a.startPan={x:s.x,y:s.y},a.startZoom=e.zoom()}this.length=1,this[0]=this}),"Animation"),Zi=Ki.prototype;fe(Zi,{instanceString:s((function(){return"animation"}),"instanceString"),hook:s((function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),V(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this}),"hook"),play:s((function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this}),"play"),playing:s((function(){return this._private.playing}),"playing"),apply:s((function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this}),"apply"),applying:s((function(){return this._private.applying}),"applying"),pause:s((function(){var e=this._private;return e.playing=!1,e.started=!1,this}),"pause"),stop:s((function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this}),"stop"),rewind:s((function(){return this.progress(0)}),"rewind"),fastforward:s((function(){return this.progress(1)}),"fastforward"),time:s((function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)}),"time"),progress:s((function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)}),"progress"),completed:s((function(){return 1===this._private.progress}),"completed"),reverse:s((function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=s((function(t,r){var n=e[t];null!=n&&(e[t]=e[r],e[r]=n)}),"swap");if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var i=e.style[n],a=i.name,o=e.startStyle[a];e.startStyle[a]=i,e.style[n]=o}return t&&this.play(),this}),"reverse"),promise:s((function(e){var t,r=this._private;if("frame"===e)t=r.frames;else t=r.completes;return new Xi((function(e,r){t.push((function(){e()}))}))}),"promise")}),Zi.complete=Zi.completed,Zi.run=Zi.play,Zi.running=Zi.playing;var Qi={animated:s((function(){return s((function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var r=t[0];return r?r._private.animation.current.length>0:void 0}),"animatedImpl")}),"animated"),clearQueue:s((function(){return s((function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<t.length;r++){t[r]._private.animation.queue=[]}return this}),"clearQueueImpl")}),"clearQueue"),delay:s((function(){return s((function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}),"delayImpl")}),"delay"),delayAnimation:s((function(){return s((function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}),"delayAnimationImpl")}),"delayAnimation"),animation:s((function(){return s((function(e,t){var r=this,n=void 0!==r.length,i=n?r:[r],a=this._private.cy||this,o=!n,s=!o;if(!a.styleEnabled())return this;var l=a.style();if(e=fe({},e,t),0===Object.keys(e).length)return new Ki(i[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(s&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),s&&null!=e.renderedPosition){var u=e.renderedPosition,c=a.pan(),h=a.zoom();e.position=xr(u,h,c)}if(o&&null!=e.panBy){var d=e.panBy,f=a.pan();e.pan={x:f.x+d.x,y:f.y+d.y}}var p=e.center||e.centre;if(o&&null!=p){var g=a.getCenterPan(p.eles,e.zoom);null!=g&&(e.pan=g)}if(o&&null!=e.fit){var m=e.fit,y=a.getFitViewport(m.eles||m.boundingBox,m.padding);null!=y&&(e.pan=y.pan,e.zoom=y.zoom)}if(o&&$(e.zoom)){var v=a.getZoomedViewport(e.zoom);null!=v?(v.zoomed&&(e.zoom=v.zoom),v.panned&&(e.pan=v.pan)):e.zoom=null}return new Ki(i[0],e)}),"animationImpl")}),"animation"),animate:s((function(){return s((function(e,t){var r=this,n=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=fe({},e,t));for(var i=0;i<n.length;i++){var a=n[i],o=a.animated()&&(void 0===e.queue||e.queue);a.animation(e,o?{queue:!0}:void 0).play()}return this}),"animateImpl")}),"animate"),stop:s((function(){return s((function(e,t){var r=this,n=void 0!==r.length?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var a=0;a<n.length;a++){for(var o=n[a]._private,s=o.animation.current,l=0;l<s.length;l++){var u=s[l]._private;t&&(u.duration=0)}e&&(o.animation.queue=[]),t||(o.animation.current=[])}return i.notify("draw"),this}),"stopImpl")}),"stop")},Ji=Array.isArray,ea=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ta=/^\w*$/;function ra(e,t){if(Ji(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Qe(e))||(ta.test(e)||!ea.test(e)||null!=t&&e in Object(t))}s(ra,"isKey");var na=ra;function ia(e){if(!we(e))return!1;var t=Ye(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}s(ia,"isFunction");var aa=ia,oa=Se["__core-js_shared__"],sa=function(){var e=/[^.]+$/.exec(oa&&oa.keys&&oa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function la(e){return!!sa&&sa in e}s(la,"isMasked");var ua=la,ca=Function.prototype.toString;function ha(e){if(null!=e){try{return ca.call(e)}catch{}try{return e+""}catch{}}return""}s(ha,"toSource");var da=ha,fa=/^\[object .+?Constructor\]$/,pa=Function.prototype,ga=Object.prototype,ma=pa.toString,ya=ga.hasOwnProperty,va=RegExp("^"+ma.call(ya).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xa(e){return!(!we(e)||ua(e))&&(aa(e)?va:fa).test(da(e))}s(xa,"baseIsNative");var ba=xa;function Ta(e,t){return e?.[t]}s(Ta,"getValue$1");var Ca=Ta;function wa(e,t){var r=Ca(e,t);return ba(r)?r:void 0}s(wa,"getNative");var ka=wa,Ea=ka(Object,"create");function _a(){this.__data__=Ea?Ea(null):{},this.size=0}s(_a,"hashClear");var Aa=_a;function Sa(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}s(Sa,"hashDelete");var Ra=Sa,Na=Object.prototype.hasOwnProperty;function La(e){var t=this.__data__;if(Ea){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Na.call(t,e)?t[e]:void 0}s(La,"hashGet");var Ia=La,Ma=Object.prototype.hasOwnProperty;function Oa(e){var t=this.__data__;return Ea?void 0!==t[e]:Ma.call(t,e)}s(Oa,"hashHas");var Pa=Oa;function Da(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ea&&void 0===t?"__lodash_hash_undefined__":t,this}s(Da,"hashSet");var Ba=Da;function Fa(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(Fa,"Hash"),Fa.prototype.clear=Aa,Fa.prototype.delete=Ra,Fa.prototype.get=Ia,Fa.prototype.has=Pa,Fa.prototype.set=Ba;var $a=Fa;function za(){this.__data__=[],this.size=0}s(za,"listCacheClear");var Ua=za;function Ga(e,t){return e===t||e!=e&&t!=t}s(Ga,"eq");var ja=Ga;function Va(e,t){for(var r=e.length;r--;)if(ja(e[r][0],t))return r;return-1}s(Va,"assocIndexOf");var Wa=Va,Ha=Array.prototype.splice;function qa(e){var t=this.__data__,r=Wa(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ha.call(t,r,1),--this.size,!0)}s(qa,"listCacheDelete");var Ya=qa;function Xa(e){var t=this.__data__,r=Wa(t,e);return r<0?void 0:t[r][1]}s(Xa,"listCacheGet");var Ka=Xa;function Za(e){return Wa(this.__data__,e)>-1}s(Za,"listCacheHas");var Qa=Za;function Ja(e,t){var r=this.__data__,n=Wa(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}s(Ja,"listCacheSet");var eo=Ja;function to(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(to,"ListCache"),to.prototype.clear=Ua,to.prototype.delete=Ya,to.prototype.get=Ka,to.prototype.has=Qa,to.prototype.set=eo;var ro=to,no=ka(Se,"Map");function io(){this.size=0,this.__data__={hash:new $a,map:new(no||ro),string:new $a}}s(io,"mapCacheClear");var ao=io;function oo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}s(oo,"isKeyable");var so=oo;function lo(e,t){var r=e.__data__;return so(t)?r["string"==typeof t?"string":"hash"]:r.map}s(lo,"getMapData");var uo=lo;function co(e){var t=uo(this,e).delete(e);return this.size-=t?1:0,t}s(co,"mapCacheDelete");var ho=co;function fo(e){return uo(this,e).get(e)}s(fo,"mapCacheGet");var po=fo;function go(e){return uo(this,e).has(e)}s(go,"mapCacheHas");var mo=go;function yo(e,t){var r=uo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}s(yo,"mapCacheSet");var vo=yo;function xo(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(xo,"MapCache"),xo.prototype.clear=ao,xo.prototype.delete=ho,xo.prototype.get=po,xo.prototype.has=mo,xo.prototype.set=vo;var bo=xo;function To(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=s((function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o}),"memoized");return r.cache=new(To.Cache||bo),r}s(To,"memoize"),To.Cache=bo;var Co=To;function wo(e){var t=Co(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}s(wo,"memoizeCapped");var ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eo=/\\(\\)?/g,_o=wo((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ko,(function(e,r,n,i){t.push(n?i.replace(Eo,"$1"):r||e)})),t})),Ao=_o;function So(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}s(So,"arrayMap");var Ro=So,No=De?De.prototype:void 0,Lo=No?No.toString:void 0;function Io(e){if("string"==typeof e)return e;if(Ji(e))return Ro(e,Io)+"";if(Qe(e))return Lo?Lo.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}s(Io,"baseToString");var Mo=Io;function Oo(e){return null==e?"":Mo(e)}s(Oo,"toString$1");var Po=Oo;function Do(e,t){return Ji(e)?e:na(e,t)?[e]:Ao(Po(e))}s(Do,"castPath");var Bo=Do;function Fo(e){if("string"==typeof e||Qe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}s(Fo,"toKey");var $o=Fo;function zo(e,t){for(var r=0,n=(t=Bo(t,e)).length;null!=e&&r<n;)e=e[$o(t[r++])];return r&&r==n?e:void 0}s(zo,"baseGet");var Uo=zo;function Go(e,t,r){var n=null==e?void 0:Uo(e,t);return void 0===n?r:n}s(Go,"get");var jo=Go,Vo=function(){try{var e=ka(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Wo=Vo;function Ho(e,t,r){"__proto__"==t&&Wo?Wo(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}s(Ho,"baseAssignValue");var qo=Ho,Yo=Object.prototype.hasOwnProperty;function Xo(e,t,r){var n=e[t];(!Yo.call(e,t)||!ja(n,r)||void 0===r&&!(t in e))&&qo(e,t,r)}s(Xo,"assignValue");var Ko=Xo,Zo=/^(?:0|[1-9]\d*)$/;function Qo(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Zo.test(e))&&e>-1&&e%1==0&&e<t}s(Qo,"isIndex");var Jo=Qo;function es(e,t,r,n){if(!we(e))return e;for(var i=-1,a=(t=Bo(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=$o(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=we(c)?c:Jo(t[i+1])?[]:{})}Ko(s,l,u),s=s[l]}return e}s(es,"baseSet");var ts=es;function rs(e,t,r){return null==e?e:ts(e,t,r)}s(rs,"set");var ns=rs;function is(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}s(is,"copyArray");var as=is;function os(e){return Ji(e)?Ro(e,$o):Qe(e)?[e]:as(Ao(Po(e)))}s(os,"toPath");var ss=os,ls={data:s((function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:s((function(e){}),"beforeGet"),beforeSet:s((function(e,t){}),"beforeSet"),onSet:s((function(e){}),"onSet"),canSet:s((function(e){return!0}),"canSet")};return e=fe({},t,e),s((function(t,r){var n=e,i=this,a=void 0!==i.length,o=a?i:[i],s=a?i[0]:i;if(D(t)){var l,u=-1!==t.indexOf(".")&&ss(t);if(n.allowGetting&&void 0===r)return s&&(n.beforeGet(s),l=u&&void 0===s._private[n.field][t]?jo(s._private[n.field],u):s._private[n.field][t]),l;if(n.allowSetting&&void 0!==r&&!n.immutableKeys[t]){var c=y({},t,r);n.beforeSet(i,c);for(var h=0,d=o.length;h<d;h++){var f=o[h];n.canSet(f)&&(u&&void 0===s._private[n.field][t]?ns(f._private[n.field],u,r):f._private[n.field][t]=r)}n.updateStyle&&i.updateStyle(),n.onSet(i),n.settingTriggersEvent&&i[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&$(t)){var p,g,m=t,v=Object.keys(m);n.beforeSet(i,m);for(var x=0;x<v.length;x++){if(g=m[p=v[x]],!n.immutableKeys[p])for(var b=0;b<o.length;b++){var T=o[b];n.canSet(T)&&(T._private[n.field][p]=g)}}n.updateStyle&&i.updateStyle(),n.onSet(i),n.settingTriggersEvent&&i[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&B(t)){var C=t;i.on(n.bindingEvent,C)}else if(n.allowGetting&&void 0===t){var w;return s&&(n.beforeGet(s),w=s._private[n.field]),w}return i}),"dataImpl")}),"data"),removeData:s((function(e){return e=fe({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),s((function(t){var r=e,n=this,i=void 0!==n.length?n:[n];if(D(t)){for(var a=t.split(/\s+/),o=a.length,s=0;s<o;s++){var l=a[s];if(!K(l))if(!r.immutableKeys[l])for(var u=0,c=i.length;u<c;u++)i[u]._private[r.field][l]=void 0}r.triggerEvent&&n[r.triggerFnName](r.event)}else if(void 0===t){for(var h=0,d=i.length;h<d;h++)for(var f=i[h]._private[r.field],p=Object.keys(f),g=0;g<p.length;g++){var m=p[g];!r.immutableKeys[m]&&(f[m]=void 0)}r.triggerEvent&&n[r.triggerFnName](r.event)}return n}),"removeDataImpl")}),"removeData")},us={eventAliasesOn:s((function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return new Xi((function(e,t){var i=s((function(t){r.off.apply(r,o),e(t)}),"callback"),a=n.concat([i]),o=a.concat([]);r.on.apply(r,a)}))}}),"eventAliasesOn")},cs={};[Qi,ls,us].forEach((function(e){fe(cs,e)}));var hs={animate:cs.animate(),animation:cs.animation(),animated:cs.animated(),clearQueue:cs.clearQueue(),delay:cs.delay(),delayAnimation:cs.delayAnimation(),stop:cs.stop()},ds={classes:s((function(e){var t=this;if(void 0===e){var r=[];return t[0]._private.classes.forEach((function(e){return r.push(e)})),r}F(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],i=new Qt(e),a=0;a<t.length;a++){for(var o=t[a],s=o._private,l=s.classes,u=!1,c=0;c<e.length;c++){var h=e[c];if(!l.has(h)){u=!0;break}}u||(u=l.size!==e.length),u&&(s.classes=i,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),t}),"classes"),addClass:s((function(e){return this.toggleClass(e,!0)}),"addClass"),hasClass:s((function(e){var t=this[0];return null!=t&&t._private.classes.has(e)}),"hasClass"),toggleClass:s((function(e,t){F(e)||(e=e.match(/\S+/g)||[]);for(var r=this,n=void 0===t,i=[],a=0,o=r.length;a<o;a++)for(var s=r[a],l=s._private.classes,u=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h),f=!1;t||n&&!d?(l.add(h),f=!0):(!t||n&&d)&&(l.delete(h),f=!0),!u&&f&&(i.push(s),u=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r}),"toggleClass"),removeClass:s((function(e){return this.toggleClass(e,!1)}),"removeClass"),flashClass:s((function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout((function(){r.removeClass(e)}),t),r}),"flashClass")};ds.className=ds.classNames=ds.classes;var fs={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:oe,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};fs.variable="(?:[\\w-.]|(?:\\\\"+fs.metaChar+"))+",fs.className="(?:[\\w-]|(?:\\\\"+fs.metaChar+"))+",fs.value=fs.string+"|"+fs.number,fs.id=fs.variable,function(){var e,t,r;for(e=fs.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],fs.comparatorOp+="|@"+t;for(e=fs.comparatorOp.split("|"),r=0;r<e.length;r++)!((t=e[r]).indexOf("!")>=0)&&"="!==t&&(fs.comparatorOp+="|\\!"+t)}();var ps=s((function(){return{checks:[]}}),"newQuery"),gs=0,ms=1,ys=2,vs=3,xs=4,bs=5,Ts=6,Cs=7,ws=8,ks=9,Es=10,_s=11,As=12,Ss=13,Rs=14,Ns=15,Ls=16,Is=17,Ms=18,Os=19,Ps=20,Ds=[{selector:":selected",matches:s((function(e){return e.selected()}),"matches")},{selector:":unselected",matches:s((function(e){return!e.selected()}),"matches")},{selector:":selectable",matches:s((function(e){return e.selectable()}),"matches")},{selector:":unselectable",matches:s((function(e){return!e.selectable()}),"matches")},{selector:":locked",matches:s((function(e){return e.locked()}),"matches")},{selector:":unlocked",matches:s((function(e){return!e.locked()}),"matches")},{selector:":visible",matches:s((function(e){return e.visible()}),"matches")},{selector:":hidden",matches:s((function(e){return!e.visible()}),"matches")},{selector:":transparent",matches:s((function(e){return e.transparent()}),"matches")},{selector:":grabbed",matches:s((function(e){return e.grabbed()}),"matches")},{selector:":free",matches:s((function(e){return!e.grabbed()}),"matches")},{selector:":removed",matches:s((function(e){return e.removed()}),"matches")},{selector:":inside",matches:s((function(e){return!e.removed()}),"matches")},{selector:":grabbable",matches:s((function(e){return e.grabbable()}),"matches")},{selector:":ungrabbable",matches:s((function(e){return!e.grabbable()}),"matches")},{selector:":animated",matches:s((function(e){return e.animated()}),"matches")},{selector:":unanimated",matches:s((function(e){return!e.animated()}),"matches")},{selector:":parent",matches:s((function(e){return e.isParent()}),"matches")},{selector:":childless",matches:s((function(e){return e.isChildless()}),"matches")},{selector:":child",matches:s((function(e){return e.isChild()}),"matches")},{selector:":orphan",matches:s((function(e){return e.isOrphan()}),"matches")},{selector:":nonorphan",matches:s((function(e){return e.isChild()}),"matches")},{selector:":compound",matches:s((function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}),"matches")},{selector:":loop",matches:s((function(e){return e.isLoop()}),"matches")},{selector:":simple",matches:s((function(e){return e.isSimple()}),"matches")},{selector:":active",matches:s((function(e){return e.active()}),"matches")},{selector:":inactive",matches:s((function(e){return!e.active()}),"matches")},{selector:":backgrounding",matches:s((function(e){return e.backgrounding()}),"matches")},{selector:":nonbackgrounding",matches:s((function(e){return!e.backgrounding()}),"matches")}].sort((function(e,t){return de(e.selector,t.selector)})),Bs=function(){for(var e,t={},r=0;r<Ds.length;r++)t[(e=Ds[r]).selector]=e.matches;return t}(),Fs=s((function(e,t){return Bs[e](t)}),"stateSelectorMatches"),$s="("+Ds.map((function(e){return e.selector})).join("|")+")",zs=s((function(e){return e.replace(new RegExp("\\\\("+fs.metaChar+")","g"),(function(e,t){return t}))}),"cleanMetaChars"),Us=s((function(e,t,r){e[e.length-1]=r}),"replaceLastQuery"),Gs=[{name:"group",query:!0,regex:"("+fs.group+")",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:gs,value:"*"===n?n:n+"s"})}),"populate")},{name:"state",query:!0,regex:$s,populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:Cs,value:n})}),"populate")},{name:"id",query:!0,regex:"\\#("+fs.id+")",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:ws,value:zs(n)})}),"populate")},{name:"className",query:!0,regex:"\\.("+fs.className+")",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:ks,value:zs(n)})}),"populate")},{name:"dataExists",query:!0,regex:"\\[\\s*("+fs.variable+")\\s*\\]",populate:s((function(e,t,r){var n=v(r,1)[0];t.checks.push({type:xs,field:zs(n)})}),"populate")},{name:"dataCompare",query:!0,regex:"\\[\\s*("+fs.variable+")\\s*("+fs.comparatorOp+")\\s*("+fs.value+")\\s*\\]",populate:s((function(e,t,r){var n=v(r,3),i=n[0],a=n[1],o=n[2];o=null!=new RegExp("^"+fs.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),t.checks.push({type:vs,field:zs(i),operator:a,value:o})}),"populate")},{name:"dataBool",query:!0,regex:"\\[\\s*("+fs.boolOp+")\\s*("+fs.variable+")\\s*\\]",populate:s((function(e,t,r){var n=v(r,2),i=n[0],a=n[1];t.checks.push({type:bs,field:zs(a),operator:i})}),"populate")},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+fs.meta+")\\s*("+fs.comparatorOp+")\\s*("+fs.number+")\\s*\\]\\]",populate:s((function(e,t,r){var n=v(r,3),i=n[0],a=n[1],o=n[2];t.checks.push({type:Ts,field:zs(i),operator:a,value:parseFloat(o)})}),"populate")},{name:"nextQuery",separator:!0,regex:fs.separator,populate:s((function(e,t){var r=e.currentSubject,n=e.edgeCount,i=e.compoundCount,a=e[e.length-1];return null!=r&&(a.subject=r,e.currentSubject=null),a.edgeCount=n,a.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=ps()}),"populate")},{name:"directedEdge",separator:!0,regex:fs.directedEdge,populate:s((function(e,t){if(null==e.currentSubject){var r=ps(),n=t,i=ps();return r.checks.push({type:_s,source:n,target:i}),Us(e,t,r),e.edgeCount++,i}var a=ps(),o=t,s=ps();return a.checks.push({type:As,source:o,target:s}),Us(e,t,a),e.edgeCount++,s}),"populate")},{name:"undirectedEdge",separator:!0,regex:fs.undirectedEdge,populate:s((function(e,t){if(null==e.currentSubject){var r=ps(),n=t,i=ps();return r.checks.push({type:Es,nodes:[n,i]}),Us(e,t,r),e.edgeCount++,i}var a=ps(),o=t,s=ps();return a.checks.push({type:Rs,node:o,neighbor:s}),Us(e,t,a),s}),"populate")},{name:"child",separator:!0,regex:fs.child,populate:s((function(e,t){if(null==e.currentSubject){var r=ps(),n=ps(),i=e[e.length-1];return r.checks.push({type:Ns,parent:i,child:n}),Us(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var a=ps(),o=e[e.length-1],s=ps(),l=ps(),u=ps(),c=ps();return a.checks.push({type:Os,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Ps}],c.checks.push({type:Ps}),s.checks.push({type:Is,parent:c,child:u}),Us(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=ps(),d=ps(),f=[{type:Is,parent:h,child:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}),"populate")},{name:"descendant",separator:!0,regex:fs.descendant,populate:s((function(e,t){if(null==e.currentSubject){var r=ps(),n=ps(),i=e[e.length-1];return r.checks.push({type:Ls,ancestor:i,descendant:n}),Us(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var a=ps(),o=e[e.length-1],s=ps(),l=ps(),u=ps(),c=ps();return a.checks.push({type:Os,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Ps}],c.checks.push({type:Ps}),s.checks.push({type:Ms,ancestor:c,descendant:u}),Us(e,o,a),e.currentSubject=l,e.compoundCount++,u}var h=ps(),d=ps(),f=[{type:Ms,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}),"populate")},{name:"subject",modifier:!0,regex:fs.subject,populate:s((function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return Dt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],n=null==r?null:r.type;n===_s?r.type=Ss:n===Es&&(r.type=Rs,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}),"populate")}];Gs.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var js=s((function(e){for(var t,r,n,i=0;i<Gs.length;i++){var a=Gs[i],o=a.name,s=e.match(a.regexObj);if(null!=s){r=s,t=a,n=o;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:n,remaining:e}}),"consumeExpr"),Vs=s((function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e}),"consumeWhitespace"),Ws=s((function(e){var t=this,r=t.inputText=e,n=t[0]=ps();for(t.length=1,r=Vs(r);;){var i=js(r);if(null==i.expr)return Dt("The selector `"+e+"`is invalid"),!1;var a=i.match.slice(1),o=i.expr.populate(t,n,a);if(!1===o)return!1;if(null!=o&&(n=o),(r=i.remaining).match(/^\s*$/))break}var s=t[t.length-1];null!=t.currentSubject&&(s.subject=t.currentSubject),s.edgeCount=t.edgeCount,s.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var u=t[l];if(u.compoundCount>0&&u.edgeCount>0)return Dt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return Dt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===u.edgeCount&&Dt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0}),"parse"),Hs=s((function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=s((function(e){return e??""}),"clean"),t=s((function(t){return D(t)?'"'+t+'"':e(t)}),"cleanVal"),r=s((function(e){return" "+e+" "}),"space"),n=s((function(n,a){var o=n.type,s=n.value;switch(o){case gs:var l=e(s);return l.substring(0,l.length-1);case vs:var u=n.field,c=n.operator;return"["+u+r(e(c))+t(s)+"]";case bs:var h=n.operator,d=n.field;return"["+e(h)+d+"]";case xs:return"["+n.field+"]";case Ts:var f=n.operator;return"[["+n.field+r(e(f))+t(s)+"]]";case Cs:return s;case ws:return"#"+s;case ks:return"."+s;case Is:case Ns:return i(n.parent,a)+r(">")+i(n.child,a);case Ms:case Ls:return i(n.ancestor,a)+" "+i(n.descendant,a);case Os:var p=i(n.left,a),g=i(n.subject,a),m=i(n.right,a);return p+(p.length>0?" ":"")+g+m;case Ps:return""}}),"checkToString"),i=s((function(e,t){return e.checks.reduce((function(r,i,a){return r+(t===e&&0===a?"$":"")+n(i,t)}),"")}),"queryToString"),a="",o=0;o<this.length;o++){var l=this[o];a+=i(l,l.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}),"toString"),qs={parse:Ws,toString:Hs},Ys=s((function(e,t,r){var n,i,a,o=D(e),s=U(e),l=D(r),u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(o||l||u)&&(i=o||s?""+e:"",a=""+r),u&&(e=i=i.toLowerCase(),r=a=a.toLowerCase()),t){case"*=":n=i.indexOf(a)>=0;break;case"$=":n=i.indexOf(a,i.length-a.length)>=0;break;case"^=":n=0===i.indexOf(a);break;case"=":n=e===r;break;case">":h=!0,n=e>r;break;case">=":h=!0,n=e>=r;break;case"<":h=!0,n=e<r;break;case"<=":h=!0,n=e<=r;break;default:n=!1}return c&&(null!=e||!h)&&(n=!n),n}),"valCmp"),Xs=s((function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}),"boolCmp"),Ks=s((function(e){return void 0!==e}),"existCmp"),Zs=s((function(e,t){return e.data(t)}),"data"),Qs=s((function(e,t){return e[t]()}),"meta"),Js=[],el=s((function(e,t){return e.checks.every((function(e){return Js[e.type](e,t)}))}),"matches");Js[gs]=function(e,t){var r=e.value;return"*"===r||r===t.group()},Js[Cs]=function(e,t){var r=e.value;return Fs(r,t)},Js[ws]=function(e,t){var r=e.value;return t.id()===r},Js[ks]=function(e,t){var r=e.value;return t.hasClass(r)},Js[Ts]=function(e,t){var r=e.field,n=e.operator,i=e.value;return Ys(Qs(t,r),n,i)},Js[vs]=function(e,t){var r=e.field,n=e.operator,i=e.value;return Ys(Zs(t,r),n,i)},Js[bs]=function(e,t){var r=e.field,n=e.operator;return Xs(Zs(t,r),n)},Js[xs]=function(e,t){var r=e.field;return e.operator,Ks(Zs(t,r))},Js[Es]=function(e,t){var r=e.nodes[0],n=e.nodes[1],i=t.source(),a=t.target();return el(r,i)&&el(n,a)||el(n,i)&&el(r,a)},Js[Rs]=function(e,t){return el(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&el(e.neighbor,t)}))},Js[_s]=function(e,t){return el(e.source,t.source())&&el(e.target,t.target())},Js[As]=function(e,t){return el(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&el(e.target,t)}))},Js[Ss]=function(e,t){return el(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&el(e.source,t)}))},Js[Ns]=function(e,t){return el(e.child,t)&&el(e.parent,t.parent())},Js[Is]=function(e,t){return el(e.parent,t)&&t.children().some((function(t){return el(e.child,t)}))},Js[Ls]=function(e,t){return el(e.descendant,t)&&t.ancestors().some((function(t){return el(e.ancestor,t)}))},Js[Ms]=function(e,t){return el(e.ancestor,t)&&t.descendants().some((function(t){return el(e.descendant,t)}))},Js[Os]=function(e,t){return el(e.subject,t)&&el(e.left,t)&&el(e.right,t)},Js[Ps]=function(){return!0},Js[ms]=function(e,t){return e.value.has(t)},Js[ys]=function(e,t){return(0,e.value)(t)};var tl=s((function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===ws)return e.getElementById(t[0].checks[0].value).collection();var r=s((function(e){for(var r=0;r<t.length;r++){var n=t[r];if(el(n,e))return!0}return!1}),"selectorFunction");return null==t.text()&&(r=s((function(){return!0}),"selectorFunction")),e.filter(r)}),"filter"),rl=s((function(e){for(var t=0;t<this.length;t++){var r=this[t];if(el(r,e))return!0}return!1}),"matches"),nl={matches:rl,filter:tl},il=s((function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||D(e)&&e.match(/^\s*$/)||(V(e)?this.addQuery({checks:[{type:ms,value:e.collection()}]}):B(e)?this.addQuery({checks:[{type:ys,value:e}]}):D(e)?this.parse(e)||(this.invalid=!0):Ot("A selector must be created from a string; found "))}),"Selector"),al=il.prototype;[qs,nl].forEach((function(e){return fe(al,e)})),al.text=function(){return this.inputText},al.size=function(){return this.length},al.eq=function(e){return this[e]},al.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},al.addQuery=function(e){this[this.length++]=e},al.selector=al.toString;var ol={allAre:s((function(e){var t=new il(e);return this.every((function(e){return t.matches(e)}))}),"allAre"),is:s((function(e){var t=new il(e);return this.some((function(e){return t.matches(e)}))}),"is"),some:s((function(e,t){for(var r=0;r<this.length;r++){if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0}return!1}),"some"),every:s((function(e,t){for(var r=0;r<this.length;r++){if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1}return!0}),"every"),same:s((function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))}),"same"),anySame:s((function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))}),"anySame"),allAreNeighbors:s((function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))}),"allAreNeighbors"),contains:s((function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}),"contains")};ol.allAreNeighbours=ol.allAreNeighbors,ol.has=ol.contains,ol.equal=ol.equals=ol.same;var sl,ll,ul=s((function(e,t){return s((function(r,n,i,a){var o,s=r,l=this;if(null==s?o="":V(s)&&1===s.length&&(o=s.id()),1===l.length&&o){var u=l[0]._private,c=u.traversalCache=u.traversalCache||{},h=c[t]=c[t]||[],d=wt(o);return h[d]||(h[d]=e.call(l,r,n,i,a))}return e.call(l,r,n,i,a)}),"traversalCache")}),"cache"),cl={parent:s((function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var i=this[n]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)}),"parent"),parents:s((function(e){for(var t=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var i=r[n];t.push(i)}r=r.parent()}return this.spawn(t,!0).filter(e)}),"parents"),commonAncestors:s((function(e){for(var t,r=0;r<this.length;r++){var n=this[r].parents();t=(t=t||n).intersect(n)}return t.filter(e)}),"commonAncestors"),orphans:s((function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)}),"orphans"),nonorphans:s((function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)}),"nonorphans"),children:ul((function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,i=0;i<n.length;i++)t.push(n[i]);return this.spawn(t,!0).filter(e)}),"children"),siblings:s((function(e){return this.parent().children().not(this).filter(e)}),"siblings"),isParent:s((function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length}),"isParent"),isChildless:s((function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length}),"isChildless"),isChild:s((function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent}),"isChild"),isOrphan:s((function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent}),"isOrphan"),descendants:s((function(e){var t=[];function r(e){for(var n=0;n<e.length;n++){var i=e[n];t.push(i),i.children().nonempty()&&r(i.children())}}return s(r,"add"),r(this.children()),this.spawn(t,!0).filter(e)}),"descendants")};function hl(e,t,r,n){for(var i=[],a=new Qt,o=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];r?i.push(l):o&&n(i,a,l)}for(;i.length>0;){var u=i.shift();t(u),a.add(u.id()),o&&n(i,a,u)}return e}function dl(e,t,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];t.has(a.id())||e.push(a)}}function fl(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}function pl(e,t,r){fl(e,t,r),dl(e,t,r)}s(hl,"forEachCompound"),s(dl,"addChildren"),cl.forEachDown=function(e){return hl(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],dl)},s(fl,"addParent"),cl.forEachUp=function(e){return hl(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],fl)},s(pl,"addParentAndChildren"),cl.forEachUpAndDown=function(e){return hl(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],pl)},cl.ancestors=cl.parents,sl=ll={data:cs.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:cs.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:cs.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:cs.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:cs.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:cs.removeData({field:"rscratch",triggerEvent:!1}),id:s((function(){var e=this[0];if(e)return e._private.data.id}),"id")},sl.attr=sl.data,sl.removeAttr=sl.removeData;var gl=ll,ml={};function yl(e){return function(t){var r=this;if(void 0===t&&(t=!0),0===r.length);else if(r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!t&&s.isLoop()||(n+=e(i,s))}return n}}}function vl(e,t){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][e](r);void 0!==o&&(void 0===n||t(o,n))&&(n=o)}return n}}s(yl,"defineDegreeFunction"),fe(ml,{degree:yl((function(e,t){return t.source().same(t.target())?2:1})),indegree:yl((function(e,t){return t.target().same(e)?1:0})),outdegree:yl((function(e,t){return t.source().same(e)?1:0}))}),s(vl,"defineDegreeBoundsFunction"),fe(ml,{minDegree:vl("degree",(function(e,t){return e<t})),maxDegree:vl("degree",(function(e,t){return e>t})),minIndegree:vl("indegree",(function(e,t){return e<t})),maxIndegree:vl("indegree",(function(e,t){return e>t})),minOutdegree:vl("outdegree",(function(e,t){return e<t})),maxOutdegree:vl("outdegree",(function(e,t){return e>t}))}),fe(ml,{totalDegree:s((function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}),"totalDegree")});var xl,bl,Tl=s((function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(!i.locked()){var a=i._private.position,o={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};i.isParent()&&!(0===o.x&&0===o.y)&&i.children().shift(o,r),i.dirtyBoundingBoxCache()}}}),"beforePositionSet"),Cl={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:s((function(e){e.updateCompoundBounds()}),"beforeGet"),beforeSet:s((function(e,t){Tl(e,t,!1)}),"beforeSet"),onSet:s((function(e){e.dirtyCompoundBoundsCache()}),"onSet"),canSet:s((function(e){return!e.locked()}),"canSet")};xl=bl={position:cs.data(Cl),silentPosition:cs.data(fe({},Cl,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:s((function(e,t){Tl(e,t,!0)}),"beforeSet"),onSet:s((function(e){e.dirtyCompoundBoundsCache()}),"onSet")})),positions:s((function(e,t){if($(e))t?this.silentPosition(e):this.position(e);else if(B(e)){var r=e,n=this.cy();n.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=r(o,i))&&(t?o.silentPosition(a):o.position(a))}n.endBatch()}return this}),"positions"),silentPositions:s((function(e){return this.positions(e,!0)}),"silentPositions"),shift:s((function(e,t,r){var n;if($(e)?(n={x:U(e.x)?e.x:0,y:U(e.y)?e.y:0},r=t):D(e)&&U(t)&&((n={x:0,y:0})[e]=t),null!=n){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var s=o.position(),l={x:s.x+n.x,y:s.y+n.y};r?o.silentPosition(l):o.position(l)}}i.endBatch()}return this}),"shift"),silentShift:s((function(e,t){return $(e)?this.shift(e,!0):D(e)&&U(t)&&this.shift(e,t,!0),this}),"silentShift"),renderedPosition:s((function(e,t){var r=this[0],n=this.cy(),i=n.zoom(),a=n.pan(),o=$(e)?e:void 0,s=void 0!==o||void 0!==t&&D(e);if(r&&r.isNode()){if(!s){var l=r.position();return o=vr(l,i,a),void 0===e?o:o[e]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==t?c.position(e,(t-a[e])/i):void 0!==o&&c.position(xr(o,i,a))}}else if(!s)return;return this}),"renderedPosition"),relativePosition:s((function(e,t){var r=this[0],n=this.cy(),i=$(e)?e:void 0,a=void 0!==i||void 0!==t&&D(e),o=n.hasCompoundNodes();if(r&&r.isNode()){if(!a){var s=r.position(),l=o?r.parent():null,u=l&&l.length>0,c=u;u&&(l=l[0]);var h=c?l.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===e?i:i[e]}for(var d=0;d<this.length;d++){var f=this[d],p=o?f.parent():null,g=p&&p.length>0,m=g;g&&(p=p[0]);var y=m?p.position():{x:0,y:0};void 0!==t?f.position(e,t+y[e]):void 0!==i&&f.position({x:i.x+y.x,y:i.y+y.y})}}else if(!a)return;return this}),"relativePosition")},xl.modelPosition=xl.point=xl.position,xl.modelPositions=xl.points=xl.positions,xl.renderedPoint=xl.renderedPosition,xl.relativePoint=xl.relativePosition;var wl,kl,El=bl;wl=kl={},kl.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),a=t.x1*n+i.x,o=t.x2*n+i.x,s=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},kl.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=!1,r.bbCache=null,e||t.emitAndNotify("bounds")}})),this):this},kl.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(e.isParent()){var t=e._private,r=e.children(),n="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),o=t.position;(0===a.w||0===a.h)&&((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2),s(v,"computeBiasValues"),s(x,"computePaddingValues");var l=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(u=100*u/i.width.val);var c=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(c=100*c/i.height.val);var h=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(h=100*h/i.height.val);var d=v(i.width.val-a.w,l,u),f=d.biasDiff,p=d.biasComplementDiff,g=v(i.height.val-a.h,c,h),m=g.biasDiff,y=g.biasComplementDiff;t.autoPadding=x(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,i.width.val),o.x=(-f+a.x1+a.x2+p)/2,t.autoHeight=Math.max(a.h,i.height.val),o.y=(-m+a.y1+a.y2+y)/2}function v(e,t,r){var n=0,i=0,a=t+r;return e>0&&a>0&&(n=t/a*e,i=r/a*e),{biasDiff:n,biasComplementDiff:i}}function x(e,t,r,n){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}}s(r,"update");for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||e)&&(r(i),t.batching()||(a.compoundBoundsClean=!0))}return this};var _l=s((function(e){return e===1/0||e===-1/0?0:e}),"noninf"),Al=s((function(e,t,r,n,i){n-t==0||i-r==0||null==t||null==r||null==n||null==i||(e.x1=t<e.x1?t:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)}),"updateBounds"),Sl=s((function(e,t){return null==t?e:Al(e,t.x1,t.y1,t.x2,t.y2)}),"updateBoundsFromBox"),Rl=s((function(e,t,r){return qt(e,t,r)}),"prefixedProperty"),Nl=s((function(e,t,r){if(!t.cy().headless()){var n,i,a=t._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(n=o.srcX,i=o.srcY):"target"===r?(n=o.tgtX,i=o.tgtY):(n=o.midX,i=o.midY);var l=a.arrowBounds=a.arrowBounds||{},u=l[r]=l[r]||{};u.x1=n-s,u.y1=i-s,u.x2=n+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,Gr(u,1),Al(e,u.x1,u.y1,u.x2,u.y2)}}}),"updateBoundsFromArrow"),Ll=s((function(e,t,r){if(!t.cy().headless()){var n;n=r?r+"-":"";var i=t._private,a=i.rstyle;if(t.pstyle(n+"label").strValue){var o,l,u,c,h=t.pstyle("text-halign"),d=t.pstyle("text-valign"),f=Rl(a,"labelWidth",r),p=Rl(a,"labelHeight",r),g=Rl(a,"labelX",r),m=Rl(a,"labelY",r),y=t.pstyle(n+"text-margin-x").pfValue,v=t.pstyle(n+"text-margin-y").pfValue,x=t.isEdge(),b=t.pstyle(n+"text-rotation"),T=t.pstyle("text-outline-width").pfValue,C=t.pstyle("text-border-width").pfValue/2,w=t.pstyle("text-background-padding").pfValue,k=p,E=f,_=E/2,A=k/2;if(x)o=g-_,l=g+_,u=m-A,c=m+A;else{switch(h.value){case"left":o=g-E,l=g;break;case"center":o=g-_,l=g+_;break;case"right":o=g,l=g+E}switch(d.value){case"top":u=m-k,c=m;break;case"center":u=m-A,c=m+A;break;case"bottom":u=m,c=m+k}}var S=y-Math.max(T,C)-w-2,R=y+Math.max(T,C)+w+2,N=v-Math.max(T,C)-w-2,L=v+Math.max(T,C)+w+2;o+=S,l+=R,u+=N,c+=L;var I=r||"main",M=i.labelBounds,O=M[I]=M[I]||{};O.x1=o,O.y1=u,O.x2=l,O.y2=c,O.w=l-o,O.h=c-u,O.leftPad=S,O.rightPad=R,O.topPad=N,O.botPad=L;var P=x&&"autorotate"===b.strValue,D=null!=b.pfValue&&0!==b.pfValue;if(P||D){var B=P?Rl(i.rstyle,"labelAngle",r):b.pfValue,F=Math.cos(B),$=Math.sin(B),z=(o+l)/2,U=(u+c)/2;if(!x){switch(h.value){case"left":z=l;break;case"right":z=o}switch(d.value){case"top":U=c;break;case"bottom":U=u}}var G=s((function(e,t){return{x:(e-=z)*F-(t-=U)*$+z,y:e*$+t*F+U}}),"rotate"),j=G(o,u),V=G(o,c),W=G(l,u),H=G(l,c);o=Math.min(j.x,V.x,W.x,H.x),l=Math.max(j.x,V.x,W.x,H.x),u=Math.min(j.y,V.y,W.y,H.y),c=Math.max(j.y,V.y,W.y,H.y)}var q=I+"Rot",Y=M[q]=M[q]||{};Y.x1=o,Y.y1=u,Y.x2=l,Y.y2=c,Y.w=l-o,Y.h=c-u,Al(e,o,u,l,c),Al(i.labelBounds.all,o,u,l,c)}return e}}),"updateBoundsFromLabel"),Il=s((function(e,t){if(!t.cy().headless()){var r=t.pstyle("outline-opacity").value,n=t.pstyle("outline-width").value;if(r>0&&n>0){var i=t.pstyle("outline-offset").value,a=t.pstyle("shape").value,o=n+i,s=(e.w+2*o)/e.w,l=(e.h+2*o)/e.h,u=0;["diamond","pentagon","round-triangle"].includes(a)?(s=(e.w+2.4*o)/e.w,u=-o/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?s=(e.w+2.4*o)/e.w:"star"===a?(s=(e.w+2.8*o)/e.w,l=(e.h+2.6*o)/e.h,u=-o/3.8):"triangle"===a?(s=(e.w+2.8*o)/e.w,l=(e.h+2.4*o)/e.h,u=-o/1.4):"vee"===a&&(s=(e.w+4.4*o)/e.w,l=(e.h+3.8*o)/e.h,u=.5*-o);var c=e.h*l-e.h,h=e.w*s-e.w;if(jr(e,[Math.ceil(c/2),Math.ceil(h/2)]),0!==u){var d=$r(e,0,u);zr(e,d)}}}}),"updateBoundsFromOutline"),Ml=s((function(e,t){var r,n,i,a,o,l,u=e._private.cy,c=u.styleEnabled(),h=u.headless(),d=Dr(),f=e._private,p=e.isNode(),g=e.isEdge(),m=f.rstyle,y=p&&c?e.pstyle("bounds-expansion").pfValue:[0],v=s((function(e){return"none"!==e.pstyle("display").value}),"isDisplayed"),x=!c||v(e)&&(!g||v(e.source())&&v(e.target()));if(x){var b=0;c&&t.includeOverlays&&(0!==e.pstyle("overlay-opacity").value&&(b=e.pstyle("overlay-padding").value));var T=0;c&&t.includeUnderlays&&(0!==e.pstyle("underlay-opacity").value&&(T=e.pstyle("underlay-padding").value));var C=Math.max(b,T),w=0;if(c&&(w=e.pstyle("width").pfValue/2),p&&t.includeNodes){var k=e.position();o=k.x,l=k.y;var E=e.outerWidth()/2,_=e.outerHeight()/2;Al(d,r=o-E,i=l-_,n=o+E,a=l+_),c&&t.includeOutlines&&Il(d,e)}else if(g&&t.includeEdges)if(c&&!h){var A=e.pstyle("curve-style").strValue;if(r=Math.min(m.srcX,m.midX,m.tgtX),n=Math.max(m.srcX,m.midX,m.tgtX),i=Math.min(m.srcY,m.midY,m.tgtY),a=Math.max(m.srcY,m.midY,m.tgtY),Al(d,r-=w,i-=w,n+=w,a+=w),"haystack"===A){var S=m.haystackPts;if(S&&2===S.length){if(r=S[0].x,i=S[0].y,r>(n=S[1].x)){var R=r;r=n,n=R}if(i>(a=S[1].y)){var N=i;i=a,a=N}Al(d,r-w,i-w,n+w,a+w)}}else if("bezier"===A||"unbundled-bezier"===A||A.endsWith("segments")||A.endsWith("taxi")){var L;switch(A){case"bezier":case"unbundled-bezier":L=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":L=m.linePts}if(null!=L)for(var I=0;I<L.length;I++){var M=L[I];r=M.x-w,n=M.x+w,i=M.y-w,a=M.y+w,Al(d,r,i,n,a)}}}else{var O=e.source().position(),P=e.target().position();if((r=O.x)>(n=P.x)){var D=r;r=n,n=D}if((i=O.y)>(a=P.y)){var B=i;i=a,a=B}Al(d,r-=w,i-=w,n+=w,a+=w)}if(c&&t.includeEdges&&g&&(Nl(d,e,"mid-source"),Nl(d,e,"mid-target"),Nl(d,e,"source"),Nl(d,e,"target")),c)if("yes"===e.pstyle("ghost").value){var F=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue;Al(d,d.x1+F,d.y1+$,d.x2+F,d.y2+$)}var z=f.bodyBounds=f.bodyBounds||{};Vr(z,d),jr(z,y),Gr(z,1),c&&(r=d.x1,n=d.x2,i=d.y1,a=d.y2,Al(d,r-C,i-C,n+C,a+C));var U=f.overlayBounds=f.overlayBounds||{};Vr(U,d),jr(U,y),Gr(U,1);var G=f.labelBounds=f.labelBounds||{};null!=G.all?Fr(G.all):G.all=Dr(),c&&t.includeLabels&&(t.includeMainLabels&&Ll(d,e,null),g&&(t.includeSourceLabels&&Ll(d,e,"source"),t.includeTargetLabels&&Ll(d,e,"target")))}return d.x1=_l(d.x1),d.y1=_l(d.y1),d.x2=_l(d.x2),d.y2=_l(d.y2),d.w=_l(d.x2-d.x1),d.h=_l(d.y2-d.y1),d.w>0&&d.h>0&&x&&(jr(d,y),Gr(d,1)),d}),"boundingBoxImpl"),Ol=s((function(e){var t=0,r=s((function(e){return(e?1:0)<<t++}),"tf"),n=0;return n+=r(e.incudeNodes),n+=r(e.includeEdges),n+=r(e.includeLabels),n+=r(e.includeMainLabels),n+=r(e.includeSourceLabels),n+=r(e.includeTargetLabels),n+=r(e.includeOverlays),n+=r(e.includeOutlines)}),"getKey"),Pl=s((function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),n=s((function(e){return Math.round(e)}),"r");return Ct([n(t.x),n(t.y),n(r.x),n(r.y)])}return 0}),"getBoundingBoxPosKey"),Dl=s((function(e,t){var r,n=e._private,i=e.isEdge(),a=(null==t?Fl:Ol(t))===Fl,o=Pl(e),l=n.bbCachePosKey===o,u=t.useCache&&l,c=s((function(e){return null==e._private.bbCache||e._private.styleDirty}),"isDirty");if(!u||c(e)||i&&(c(e.source())||c(e.target()))?(l||e.recalculateRenderedStyle(u),r=Ml(e,Bl),n.bbCache=r,n.bbCachePosKey=o):r=n.bbCache,!a){var h=e.isNode();r=Dr(),(t.includeNodes&&h||t.includeEdges&&!h)&&(t.includeOverlays?Sl(r,n.overlayBounds):Sl(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?Sl(r,n.labelBounds.all):(t.includeMainLabels&&Sl(r,n.labelBounds.mainRot),t.includeSourceLabels&&Sl(r,n.labelBounds.sourceRot),t.includeTargetLabels&&Sl(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r}),"cachedBoundingBoxImpl"),Bl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Fl=Ol(Bl),$l=jt(Bl);kl.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=Dr();var r=$l(e=e||Bl),n=this;if(n.cy().styleEnabled())for(var i=0;i<n.length;i++){var a=n[i],o=a._private,s=Pl(a),l=o.bbCachePosKey===s,u=r.useCache&&l&&!o.styleDirty;a.recalculateRenderedStyle(u)}this.updateCompoundBounds(!e.useCache);for(var c=0;c<n.length;c++){var h=n[c];Sl(t,Dl(h,r))}}else e=void 0===e?Bl:$l(e),t=Dl(this[0],e);return t.x1=_l(t.x1),t.y1=_l(t.y1),t.x2=_l(t.x2),t.y2=_l(t.y2),t.w=_l(t.x2-t.x1),t.h=_l(t.y2-t.y1),t},kl.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},kl.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),i=r.collection();if(n&&(i=t.filter((function(e){return e.isParent()})),t=t.not(i)),$(e)){var a=e;e=s((function(){return a}),"fn")}var o=s((function(t,r){return t._private.bbAtOldPos=e(t,r)}),"storeOldPos"),l=s((function(e){return e._private.bbAtOldPos}),"getOldPos");r.startBatch(),t.forEach(o).silentPositions(e),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=Br(this.boundingBox({useCache:!1}));return t.silentPositions(l),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u},wl.boundingbox=wl.bb=wl.boundingBox,wl.renderedBoundingbox=wl.renderedBoundingBox;var zl,Ul,Gl=kl;zl=Ul={};var jl=s((function(e){e.uppercaseName=ae(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=ae(e.outerName),zl[e.name]=s((function(){var t=this[0],r=t._private,n=r.cy._private.styleEnabled;if(t){if(n){if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var i=t.pstyle(e.name);return"label"===i.strValue?(t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):i.pfValue}return 1}}),"dimImpl"),zl["outer"+e.uppercaseName]=s((function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)return r?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1}),"outerDimImpl"),zl["rendered"+e.uppercaseName]=s((function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()}),"renderedDimImpl"),zl["rendered"+e.uppercaseOuterName]=s((function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}),"renderedOuterDimImpl")}),"defineDimFns");jl({name:"width"}),jl({name:"height"}),Ul.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},Ul.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},Ul.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Vl=Ul,Wl=s((function(e,t){if(e.isEdge())return t(e)}),"ifEdge"),Hl=s((function(e,t){if(e.isEdge()){var r=e.cy();return vr(t(e),r.zoom(),r.pan())}}),"ifEdgeRenderedPosition"),ql=s((function(e,t){if(e.isEdge()){var r=e.cy(),n=r.pan(),i=r.zoom();return t(e).map((function(e){return vr(e,i,n)}))}}),"ifEdgeRenderedPositions"),Yl=s((function(e){return e.renderer().getControlPoints(e)}),"controlPoints"),Xl=s((function(e){return e.renderer().getSegmentPoints(e)}),"segmentPoints"),Kl=s((function(e){return e.renderer().getSourceEndpoint(e)}),"sourceEndpoint"),Zl=s((function(e){return e.renderer().getTargetEndpoint(e)}),"targetEndpoint"),Ql=s((function(e){return e.renderer().getEdgeMidpoint(e)}),"midpoint"),Jl={controlPoints:{get:Yl,mult:!0},segmentPoints:{get:Xl,mult:!0},sourceEndpoint:{get:Kl},targetEndpoint:{get:Zl},midpoint:{get:Ql}},eu=s((function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}),"renderedName"),tu=Object.keys(Jl).reduce((function(e,t){var r=Jl[t],n=eu(t);return e[t]=function(){return Wl(this,r.get)},r.mult?e[n]=function(){return ql(this,r.get)}:e[n]=function(){return Hl(this,r.get)},e}),{}),ru=fe({},El,Gl,Vl,tu),nu=s((function(e,t){this.recycle(e,t)}),"Event");function iu(){return!1}function au(){return!0}s(iu,"returnFalse"),s(au,"returnTrue"),nu.prototype={instanceString:s((function(){return"event"}),"instanceString"),recycle:s((function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=iu,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?au:iu):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,n=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:r.x*n+i.x,y:r.y*n+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()}),"recycle"),preventDefault:s((function(){this.isDefaultPrevented=au;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()}),"preventDefault"),stopPropagation:s((function(){this.isPropagationStopped=au;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()}),"stopPropagation"),stopImmediatePropagation:s((function(){this.isImmediatePropagationStopped=au,this.stopPropagation()}),"stopImmediatePropagation"),isDefaultPrevented:iu,isPropagationStopped:iu,isImmediatePropagationStopped:iu};var ou=/^([^.]+)(\.(?:[^.]+))?$/,su={qualifierCompare:s((function(e,t){return e===t}),"qualifierCompare"),eventMatches:s((function(){return!0}),"eventMatches"),addEventFields:s((function(){}),"addEventFields"),callbackContext:s((function(e){return e}),"callbackContext"),beforeEmit:s((function(){}),"beforeEmit"),afterEmit:s((function(){}),"afterEmit"),bubble:s((function(){return!1}),"bubble"),parent:s((function(){return null}),"parent"),context:null},lu=Object.keys(su),uu={};function cu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uu,t=arguments.length>1?arguments[1]:void 0,r=0;r<lu.length;r++){var n=lu[r];this[n]=e[n]||su[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}s(cu,"Emitter");var hu=cu.prototype,du=s((function(e,t,r,n,i,a,o){B(n)&&(i=n,n=null),o&&(a=null==a?o:fe({},a,o));for(var s=F(r)?r:r.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!K(u)){var c=u.match(ou);if(c)if(!1===t(e,u,c[1],c[2]?c[2]:null,n,i,a))break}}}),"forEachEvent"),fu=s((function(e,t){return e.addEventFields(e.context,t),new nu(t.type,t)}),"makeEventObj"),pu=s((function(e,t,r){if(X(r))t(e,r);else if($(r))t(e,fu(e,r));else for(var n=F(r)?r:r.split(/\s+/),i=0;i<n.length;i++){var a=n[i];if(!K(a)){var o=a.match(ou);if(o){var s=o[1],l=o[2]?o[2]:null;t(e,fu(e,{type:s,namespace:l,target:e.context}))}}}}),"forEachEventObj");hu.on=hu.addListener=function(e,t,r,n,i){return du(this,(function(e,t,r,n,i,a,o){B(a)&&e.listeners.push({event:t,callback:a,type:r,namespace:n,qualifier:i,conf:o})}),e,t,r,n,i),this},hu.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})},hu.removeListener=hu.off=function(e,t,r,n){var i=this;0!==this.emitting&&(this.listeners=$t(this.listeners));for(var a=this.listeners,o=s((function(o){var s=a[o];du(i,(function(t,r,n,i,l,u){if((s.type===n||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return a.splice(o,1),!1}),e,t,r,n)}),"_loop"),l=a.length-1;l>=0;l--)o(l);return this},hu.removeAllListeners=function(){return this.removeListener("*")},hu.emit=hu.trigger=function(e,t,r){var n=this.listeners,i=n.length;return this.emitting++,F(t)||(t=[t]),pu(this,(function(e,a){null!=r&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}],i=n.length);for(var o=s((function(r){var i=n[r];if(i.type===a.type&&(!i.namespace||i.namespace===a.namespace||".*"===i.namespace)&&e.eventMatches(e.context,i,a)){var o=[a];null!=t&&Ht(o,t),e.beforeEmit(e.context,i,a),i.conf&&i.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==i})));var s=e.callbackContext(e.context,i,a),l=i.callback.apply(s,o);e.afterEmit(e.context,i,a),!1===l&&(a.stopPropagation(),a.preventDefault())}}),"_loop2"),l=0;l<i;l++)o(l);e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)}),e),this.emitting--,this};var gu={qualifierCompare:s((function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)}),"qualifierCompare"),eventMatches:s((function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&W(r.target)&&n.matches(r.target)}),"eventMatches"),addEventFields:s((function(e,t){t.cy=e.cy(),t.target=e}),"addEventFields"),callbackContext:s((function(e,t,r){return null!=t.qualifier?r.target:e}),"callbackContext"),beforeEmit:s((function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)}),"beforeEmit"),bubble:s((function(){return!0}),"bubble"),parent:s((function(e){return e.isChild()?e.parent():e.cy()}),"parent")},mu=s((function(e){return D(e)?new il(e):e}),"argSelector"),yu={createEmitter:s((function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new cu(gu,t))}return this}),"createEmitter"),emitter:s((function(){return this._private.emitter}),"emitter"),on:s((function(e,t,r){for(var n=mu(t),i=0;i<this.length;i++){this[i].emitter().on(e,n,r)}return this}),"on"),removeListener:s((function(e,t,r){for(var n=mu(t),i=0;i<this.length;i++){this[i].emitter().removeListener(e,n,r)}return this}),"removeListener"),removeAllListeners:s((function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this}),"removeAllListeners"),one:s((function(e,t,r){for(var n=mu(t),i=0;i<this.length;i++){this[i].emitter().one(e,n,r)}return this}),"one"),once:s((function(e,t,r){for(var n=mu(t),i=0;i<this.length;i++){this[i].emitter().on(e,n,r,{once:!0,onceCollection:this})}}),"once"),emit:s((function(e,t){for(var r=0;r<this.length;r++){this[r].emitter().emit(e,t)}return this}),"emit"),emitAndNotify:s((function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}),"emitAndNotify")};cs.eventAliasesOn(yu);var vu={nodes:s((function(e){return this.filter((function(e){return e.isNode()})).filter(e)}),"nodes"),edges:s((function(e){return this.filter((function(e){return e.isEdge()})).filter(e)}),"edges"),byGroup:s((function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?e.push(n):t.push(n)}return{nodes:e,edges:t}}),"byGroup"),filter:s((function(e,t){if(void 0===e)return this;if(D(e)||V(e))return new il(e).filter(this);if(B(e)){for(var r=this.spawn(),n=this,i=0;i<n.length;i++){var a=n[i];(t?e.apply(t,[a,i,n]):e(a,i,n))&&r.push(a)}return r}return this.spawn()}),"filter"),not:s((function(e){if(e){D(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var n=this[r];e.has(n)||t.push(n)}return t}return this}),"not"),absoluteComplement:s((function(){return this.cy().mutableElements().not(this)}),"absoluteComplement"),intersect:s((function(e){if(D(e)){var t=e;return this.filter(t)}for(var r=this.spawn(),n=e,i=this.length<e.length,a=i?this:n,o=i?n:this,s=0;s<a.length;s++){var l=a[s];o.has(l)&&r.push(l)}return r}),"intersect"),xor:s((function(e){var t=this._private.cy;D(e)&&(e=t.$(e));var r=this.spawn(),n=e,i=s((function(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=i._private.data.id;t.hasElementWithId(a)||r.push(i)}}),"add");return i(this,n),i(n,this),r}),"xor"),diff:s((function(e){var t=this._private.cy;D(e)&&(e=t.$(e));var r=this.spawn(),n=this.spawn(),i=this.spawn(),a=e,o=s((function(e,t,r){for(var n=0;n<e.length;n++){var a=e[n],o=a._private.data.id;t.hasElementWithId(o)?i.merge(a):r.push(a)}}),"add");return o(this,a,r),o(a,this,n),{left:r,right:n,both:i}}),"diff"),add:s((function(e){var t=this._private.cy;if(!e)return this;if(D(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=this.spawnSelf(),i=0;i<e.length;i++){var a=e[i];!this.has(a)&&n.push(a)}return n}),"add"),merge:s((function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&D(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=t.map,a=0;a<e.length;a++){var o=e[a],s=o._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=o,i.set(s,{ele:o,index:l})}}return this}),"merge"),unmergeAt:s((function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var n=e===this.length-1;if(this.length>1&&!n){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[e]=a,r.set(o,{ele:a,index:e})}return this.length--,this}),"unmergeAt"),unmergeOne:s((function(e){e=e[0];var t=this._private,r=e._private.data.id,n=t.map.get(r);if(!n)return this;var i=n.index;return this.unmergeAt(i),this}),"unmergeOne"),unmerge:s((function(e){var t=this._private.cy;if(!e)return this;if(e&&D(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this}),"unmerge"),unmergeBy:s((function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this}),"unmergeBy"),map:s((function(e,t){for(var r=[],n=this,i=0;i<n.length;i++){var a=n[i],o=t?e.apply(t,[a,i,n]):e(a,i,n);r.push(o)}return r}),"map"),reduce:s((function(e,t){for(var r=t,n=this,i=0;i<n.length;i++)r=e(r,n[i],i,n);return r}),"reduce"),max:s((function(e,t){for(var r,n=-1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s>n&&(n=s,r=o)}return{value:n,ele:r}}),"max"),min:s((function(e,t){for(var r,n=1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s<n&&(n=s,r=o)}return{value:n,ele:r}}),"min")},xu=vu;xu.u=xu["|"]=xu["+"]=xu.union=xu.or=xu.add,xu["\\"]=xu["!"]=xu["-"]=xu.difference=xu.relativeComplement=xu.subtract=xu.not,xu.n=xu["&"]=xu["."]=xu.and=xu.intersection=xu.intersect,xu["^"]=xu["(+)"]=xu["(-)"]=xu.symmetricDifference=xu.symdiff=xu.xor,xu.fnFilter=xu.filterFn=xu.stdFilter=xu.filter,xu.complement=xu.abscomp=xu.absoluteComplement;var bu={isNode:s((function(){return"nodes"===this.group()}),"isNode"),isEdge:s((function(){return"edges"===this.group()}),"isEdge"),isLoop:s((function(){return this.isEdge()&&this.source()[0]===this.target()[0]}),"isLoop"),isSimple:s((function(){return this.isEdge()&&this.source()[0]!==this.target()[0]}),"isSimple"),group:s((function(){var e=this[0];if(e)return e._private.group}),"group")},Tu=s((function(e,t){var r=e.cy().hasCompoundNodes();function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?Rt:0}s(n,"getDepth");var i=n(e)-n(t);if(0!==i)return i;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}s(a,"getEleDepth");var o=a(e)-a(t);if(0!==o)return o;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==l?l:e.poolIndex()-t.poolIndex()}),"zIndexSort"),Cu={forEach:s((function(e,t){if(B(e))for(var r=this.length,n=0;n<r;n++){var i=this[n];if(!1===(t?e.apply(t,[i,n,this]):e(i,n,this)))break}return this}),"forEach"),toArray:s((function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e}),"toArray"),slice:s((function(e,t){var r=[],n=this.length;null==t&&(t=n),null==e&&(e=0),e<0&&(e=n+e),t<0&&(t=n+t);for(var i=e;i>=0&&i<t&&i<n;i++)r.push(this[i]);return this.spawn(r)}),"slice"),size:s((function(){return this.length}),"size"),eq:s((function(e){return this[e]||this.spawn()}),"eq"),first:s((function(){return this[0]||this.spawn()}),"first"),last:s((function(){return this[this.length-1]||this.spawn()}),"last"),empty:s((function(){return 0===this.length}),"empty"),nonempty:s((function(){return!this.empty()}),"nonempty"),sort:s((function(e){if(!B(e))return this;var t=this.toArray().sort(e);return this.spawn(t)}),"sort"),sortByZIndex:s((function(){return this.sort(Tu)}),"sortByZIndex"),zDepth:s((function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Rt-1}var n=t.source,i=t.target,a=n.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}),"zDepth")};Cu.each=Cu.forEach;var wu=s((function(){var e="undefined";(typeof Symbol>"u"?"undefined":f(Symbol))!=e&&f(Symbol.iterator)!=e&&(Cu[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,n=this.length;return y({next:s((function(){return r<n?t.value=e[r++]:(t.value=void 0,t.done=!0),t}),"next")},Symbol.iterator,(function(){return this}))})}),"defineSymbolIterator");wu();var ku=jt({nodeDimensionsIncludeLabels:!1}),Eu={layoutDimensions:s((function(e){var t;if(e=ku(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return(0===t.w||0===t.h)&&(t.w=t.h=1),t}),"layoutDimensions"),layoutPositions:s((function(e,t,r){var n=this.nodes().filter((function(e){return!e.isParent()})),i=this.cy(),a=t.eles,o=s((function(e){return e.id()}),"getMemoizeKey"),l=te(r,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=s((function(e,t,r){var n=t.x1+t.w/2,i=t.y1+t.h/2;return{x:n+(r.x-n)*e,y:i+(r.y-i)*e}}),"calculateSpacing"),c=t.spacingFactor&&1!==t.spacingFactor,h=s((function(){if(!c)return null;for(var e=Dr(),t=0;t<n.length;t++){var r=n[t],i=l(r,t);Ur(e,i.x,i.y)}return e}),"spacingBb"),d=h(),f=te((function(e,r){var n=l(e,r);if(c){var i=Math.abs(t.spacingFactor);n=u(i,d,n)}return null!=t.transform&&(n=t.transform(e,n)),n}),o);if(t.animate){for(var p=0;p<n.length;p++){var g=n[p],m=f(g,p);if(null==t.animateFilter||t.animateFilter(g,p)){var y=g.animation({position:m,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else g.position(m)}if(t.fit){var v=i.animation({fit:{boundingBox:a.boundingBoxAt(f),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else if(void 0!==t.zoom&&void 0!==t.pan){var x=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Xi.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else n.positions(f),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this}),"layoutPositions"),layout:s((function(e){return this.cy().makeLayout(fe({},e,{eles:this}))}),"layout")};function _u(e,t,r){var n,i=r._private,a=i.styleCache=i.styleCache||[];return null!=(n=a[e])||(n=a[e]=t(r)),n}function Au(e,t){return e=wt(e),s((function(r){return _u(e,t,r)}),"cachedStyleFunction")}function Su(e,t){e=wt(e);var r=s((function(e){return t.call(e)}),"selfFn");return s((function(){var t=this[0];if(t)return _u(e,r,t)}),"cachedPrototypeStyleFunction")}Eu.createLayout=Eu.makeLayout=Eu.layout,s(_u,"styleCache"),s(Au,"cacheStyleFunction"),s(Su,"cachePrototypeStyleFunction");var Ru={recalculateRenderedStyle:s((function(e){var t=this.cy(),r=t.renderer(),n=t.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,e),this}),"recalculateRenderedStyle"),dirtyStyleCache:s((function(){var e,t=this.cy(),r=s((function(e){return e._private.styleCache=null}),"dirty");t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach((function(e){r(e),e.connectedEdges().forEach(r)}));return this}),"dirtyStyleCache"),updateStyle:s((function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var n=r;return e?n.emitAndNotify("style"):n.emit("style"),r.forEach((function(e){return e._private.styleDirty=!0})),this}),"updateStyle"),cleanStyle:s((function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}}),"cleanStyle"),parsedStyle:s((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r)return r._private.styleDirty&&(r._private.styleDirty=!1,n.style().apply(r)),r._private.style[e]??(t?n.style().getDefaultProperty(e):null)}),"parsedStyle"),numericStyle:s((function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}}),"numericStyle"),numericStyleUnits:s((function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units}),"numericStyleUnits"),renderedStyle:s((function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];return r?t.style().getRenderedStyle(r,e):void 0}),"renderedStyle"),style:s((function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,i=r.style();if($(e)){var a=e;i.applyBypass(this,a,n),this.emitAndNotify("style")}else if(D(e)){if(void 0===t){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}i.applyBypass(this,e,t,n),this.emitAndNotify("style")}else if(void 0===e){var s=this[0];return s?i.getRawStyle(s):void 0}return this}),"style"),removeStyle:s((function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=!1,n=t.style(),i=this;if(void 0===e)for(var a=0;a<i.length;a++){var o=i[a];n.removeAllBypasses(o,r)}else{e=e.split(/\s+/);for(var s=0;s<i.length;s++){var l=i[s];n.removeBypasses(l,e,r)}}return this.emitAndNotify("style"),this}),"removeStyle"),show:s((function(){return this.css("display","element"),this}),"show"),hide:s((function(){return this.css("display","none"),this}),"hide"),effectiveOpacity:s((function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=r.pstyle("opacity").value;if(!t)return i;var a=n.data.parent?r.parents():null;if(a)for(var o=0;o<a.length;o++){i*=a[o].pstyle("opacity").value}return i}}),"effectiveOpacity"),transparent:s((function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0}),"transparent"),backgrounding:s((function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}),"backgrounding")};function Nu(e,t){var r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){if(!t(r[n]))return!1}return!0}function Lu(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],a=e.hasCompoundNodes();if(i){var o=i._private;if(!t(i))return!1;if(i.isNode())return!a||Nu(i,n);var s=o.source,l=o.target;return r(s)&&(!a||Nu(s,r))&&(s===l||r(l)&&(!a||Nu(l,r)))}}}s(Nu,"checkCompound"),s(Lu,"defineDerivedStateFunction");var Iu=Au("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));Ru.takesUpSpace=Su("takesUpSpace",Lu({ok:Iu}));var Mu=Au("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&Iu(e)})),Ou=Au("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&Iu(e)}));Ru.interactive=Su("interactive",Lu({ok:Mu,parentOk:Ou,edgeOkViaNode:Iu})),Ru.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var Pu=Au("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&Iu(e)})),Du=Iu;Ru.visible=Su("visible",Lu({ok:Pu,edgeOkViaNode:Du})),Ru.hidden=function(){var e=this[0];if(e)return!e.visible()},Ru.isBundledBezier=Su("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),Ru.bypass=Ru.css=Ru.style,Ru.renderedCss=Ru.renderedStyle,Ru.removeBypass=Ru.removeCss=Ru.removeStyle,Ru.pstyle=Ru.parsedStyle;var Bu={};function Fu(e){return function(){var t=arguments,r=[];if(2===t.length){var n=t[0],i=t[1];this.on(e.event,n,i)}else if(1===t.length&&B(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&F(t[0])){for(var o=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[e.field]=e.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(e.event),o&&d.emit(o)}return this}}function $u(e){Bu[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},Bu[e.on]=Fu({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Bu[e.off]=Fu({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}s(Fu,"defineSwitchFunction"),s($u,"defineSwitchSet"),$u({field:"locked",overrideField:s((function(e){return!!e.cy().autolock()||void 0}),"overrideField"),on:"lock",off:"unlock"}),$u({field:"grabbable",overrideField:s((function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0}),"overrideField"),on:"grabify",off:"ungrabify"}),$u({field:"selected",ableField:"selectable",overrideAble:s((function(e){return!e.cy().autounselectify()&&void 0}),"overrideAble"),on:"select",off:"unselect"}),$u({field:"selectable",overrideField:s((function(e){return!e.cy().autounselectify()&&void 0}),"overrideField"),on:"selectify",off:"unselectify"}),Bu.deselect=Bu.unselect,Bu.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},$u({field:"active",on:"activate",off:"unactivate"}),$u({field:"pannable",on:"panify",off:"unpanify"}),Bu.inactive=function(){var e=this[0];if(e)return!e._private.active};var zu={},Uu=s((function(e){return s((function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var l=o[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){a=!0;break}}a||r.push(i)}}return this.spawn(r,!0).filter(t)}),"dagExtremityImpl")}),"defineDagExtremity"),Gu=s((function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target();e.outgoing&&l===i?(r.push(s),r.push(u)):e.incoming&&u===i&&(r.push(s),r.push(l))}}return this.spawn(r,!0).filter(t)}}),"defineDagOneHop"),ju=s((function(e){return function(t){for(var r=this,n=[],i={};;){var a=e.outgoing?r.outgoers():r.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();i[u]||(i[u]=!0,n.push(l),o=!0)}if(!o)break;r=a}return this.spawn(n,!0).filter(t)}}),"defineDagAllHops");function Vu(e){return s((function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n]._private[e.attr];i&&r.push(i)}return this.spawn(r,!0).filter(t)}),"sourceImpl")}function Wu(e){return s((function(t){var r=[],n=this._private.cy,i=e||{};D(t)&&(t=n.$(t));for(var a=0;a<t.length;a++)for(var o=t[a]._private.edges,s=0;s<o.length;s++){var l=o[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);(c||h)&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||r.push(l))}return this.spawn(r,!0)}),"edgesWithImpl")}function Hu(e){return e=fe({},{codirected:!1},e),s((function(t){for(var r=[],n=this.edges(),i=e,a=0;a<n.length;a++)for(var o=n[a]._private,s=o.source,l=s._private.data.id,u=o.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,g=f.source,m=p===u&&g===l,y=l===p&&u===g;(i.codirected&&m||!i.codirected&&(m||y))&&r.push(d)}return this.spawn(r,!0).filter(t)}),"parallelEdgesImpl")}zu.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},fe(zu,{roots:Uu({noIncomingEdges:!0}),leaves:Uu({noOutgoingEdges:!0}),outgoers:ul(Gu({outgoing:!0}),"outgoers"),successors:ju({outgoing:!0}),incomers:ul(Gu({incoming:!0}),"incomers"),predecessors:ju({incoming:!0})}),fe(zu,{neighborhood:ul((function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)}),"neighborhood"),closedNeighborhood:s((function(e){return this.neighborhood().add(this).filter(e)}),"closedNeighborhood"),openNeighborhood:s((function(e){return this.neighborhood(e)}),"openNeighborhood")}),zu.neighbourhood=zu.neighborhood,zu.closedNeighbourhood=zu.closedNeighborhood,zu.openNeighbourhood=zu.openNeighborhood,fe(zu,{source:ul(s((function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t}),"sourceImpl"),"source"),target:ul(s((function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t}),"targetImpl"),"target"),sources:Vu({attr:"source"}),targets:Vu({attr:"target"})}),s(Vu,"defineSourceFunction"),fe(zu,{edgesWith:ul(Wu(),"edgesWith"),edgesTo:ul(Wu({thisIsSrc:!0}),"edgesTo")}),s(Wu,"defineEdgesWithFunction"),fe(zu,{connectedEdges:ul((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var i=n._private.edges,a=0;a<i.length;a++){var o=i[a];t.push(o)}}return this.spawn(t,!0).filter(e)}),"connectedEdges"),connectedNodes:ul((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)}),"connectedNodes"),parallelEdges:ul(Hu(),"parallelEdges"),codirectedEdges:ul(Hu({codirected:!0}),"codirectedEdges")}),s(Hu,"defineParallelEdgesFunction"),fe(zu,{components:s((function(e){var t=this,r=t.cy(),n=r.collection(),i=null==e?t.nodes():e.nodes(),a=[];null!=e&&i.empty()&&(i=e.sources());var o=s((function(e,t){n.merge(e),i.unmerge(e),t.merge(e)}),"visitInComponent");if(i.empty())return t.spawn();var l=s((function(){var e=r.collection();a.push(e);var n=i[0];o(n,e),t.bfs({directed:!1,roots:n,visit:s((function(t){return o(t,e)}),"visit")}),e.forEach((function(r){r.connectedEdges().forEach((function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)}))}))}),"_loop");do{l()}while(i.length>0);return a}),"components"),component:s((function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}),"component")}),zu.componentsOf=zu.components;var qu=s((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var i=new Kt,a=!1;if(t){if(t.length>0&&$(t[0])&&!W(t[0])){a=!0;for(var o=[],l=new Qt,u=0,c=t.length;u<c;u++){var h=t[u];null==h.data&&(h.data={});var d=h.data;if(null==d.id)d.id=zt();else if(e.hasElementWithId(d.id)||l.has(d.id))continue;var f=new Jt(e,h,!1);o.push(f),l.add(d.id)}t=o}}else t=[];this.length=0;for(var p=0,g=t.length;p<g;p++){var m=t[p][0];if(null!=m){var y=m._private.data.id;(!r||!i.has(y))&&(r&&i.set(y,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:s((function(){for(var e=this.lazyMap=new Kt,t=this.eles,r=0;r<t.length;r++){var n=t[r];e.set(n.id(),{index:r,ele:n})}}),"rebuildMap")},r&&(this._private.map=i),a&&!n&&this.restore()}else Ot("A collection must have a reference to the core")}),"Collection"),Yu=Jt.prototype=qu.prototype=Object.create(Array.prototype);Yu.instanceString=function(){return"collection"},Yu.spawn=function(e,t){return new qu(this.cy(),e,t)},Yu.spawnSelf=function(){return this.spawn(this)},Yu.cy=function(){return this._private.cy},Yu.renderer=function(){return this._private.cy.renderer()},Yu.element=function(){return this[0]},Yu.collection=function(){return H(this)?this:new qu(this._private.cy,[this])},Yu.unique=function(){return new qu(this._private.cy,this,!0)},Yu.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},Yu.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new qu(t)},Yu.$id=Yu.getElementById,Yu.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},Yu.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},Yu.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},Yu.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var n=t._private;if($(e)){if(r.startBatch(),e.data){t.data(e.data);var i=n.data;if(t.isEdge()){var a=!1,o={},l=e.data.source,u=e.data.target;null!=l&&l!=i.source&&(o.source=""+l,a=!0),null!=u&&u!=i.target&&(o.target=""+u,a=!0),a&&(t=t.move(o))}else{var c="parent"in e.data,h=e.data.parent;c&&(null!=h||null!=i.parent)&&h!=i.parent&&(void 0===h&&(h=null),null!=h&&(h=""+h),t=t.move({parent:h}))}}e.position&&t.position(e.position);var d=s((function(r,i,a){var o=e[r];null!=o&&o!==n[r]&&(o?t[i]():t[a]())}),"checkSwitch");return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var f={data:Ft(n.data),position:Ft(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};f.classes="";var p=0;return n.classes.forEach((function(e){return f.classes+=0==p++?e:" "+e})),f}}},Yu.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},Yu.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=this[r].json(),i=new Jt(e,n,!1);t.push(i)}return new qu(e,t)},Yu.copy=Yu.clone,Yu.restore=function(){for(var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.cy(),a=i._private,o=[],l=[],u=0,c=n.length;u<c;u++){var h=n[u];r&&!h.removed()||(h.isNode()?o.push(h):l.push(h))}e=o.concat(l);var d,f=s((function(){e.splice(d,1),d--}),"removeFromElements");for(d=0;d<e.length;d++){var p=e[d],g=p._private,m=g.data;if(p.clearTraversalCache(),r||g.removed)if(void 0===m.id)m.id=zt();else if(U(m.id))m.id=""+m.id;else{if(K(m.id)||!D(m.id)){Ot("Can not create element with invalid string ID `"+m.id+"`"),f();continue}if(i.hasElementWithId(m.id)){Ot("Can not create second element with ID `"+m.id+"`"),f();continue}}var y=m.id;if(p.isNode()){var v=g.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(p.isEdge()){for(var x=p,b=["source","target"],T=b.length,C=!1,w=0;w<T;w++){var k=b[w],E=m[k];U(E)&&(E=m[k]=""+m[k]),null==E||""===E?(Ot("Can not create edge `"+y+"` with unspecified "+k),C=!0):i.hasElementWithId(E)||(Ot("Can not create edge `"+y+"` with nonexistant "+k+" `"+E+"`"),C=!0)}if(C){f();continue}var _=i.getElementById(m.source),A=i.getElementById(m.target);_.same(A)?_._private.edges.push(x):(_._private.edges.push(x),A._private.edges.push(x)),x._private.source=_,x._private.target=A}g.map=new Kt,g.map.set(y,{ele:p,index:0}),g.removed=!1,r&&i.addToPool(p)}for(var S=0;S<o.length;S++){var R=o[S],N=R._private.data;U(N.parent)&&(N.parent=""+N.parent);var L=N.parent;if(null!=L||R._private.parent){var I=R._private.parent?i.collection().merge(R._private.parent):i.getElementById(L);if(I.empty())N.parent=void 0;else if(I[0].removed())Dt("Node added with missing parent, reference to parent removed"),N.parent=void 0,R._private.parent=null;else{for(var M=!1,O=I;!O.empty();){if(R.same(O)){M=!0,N.parent=void 0;break}O=O.parent()}M||(I[0]._private.children.push(R),R._private.parent=I[0],a.hasCompoundNodes=!0)}}}if(e.length>0){for(var P=e.length===n.length?n:new qu(i,e),B=0;B<P.length;B++){var F=P[B];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}(a.hasCompoundNodes?i.collection().merge(P).merge(P.connectedNodes()).merge(P.parent()):P).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?P.emitAndNotify("add"):r&&P.emit("add")}return n},Yu.removed=function(){var e=this[0];return e&&e._private.removed},Yu.inside=function(){var e=this[0];return e&&!e._private.removed},Yu.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=[],i={},a=r._private.cy;function o(e){for(var t=e._private.edges,r=0;r<t.length;r++)u(t[r])}function l(e){for(var t=e._private.children,r=0;r<t.length;r++)u(t[r])}function u(e){var r=i[e.id()];t&&e.removed()||r||(i[e.id()]=!0,e.isNode()?(n.push(e),o(e),l(e)):n.unshift(e))}s(o,"addConnectedEdges"),s(l,"addChildren"),s(u,"add");for(var c=0,h=r.length;c<h;c++){u(r[c])}function d(e,t){var r=e._private.edges;Vt(r,t),e.clearTraversalCache()}function f(e){e.clearTraversalCache()}s(d,"removeEdgeRef"),s(f,"removeParallelRef");var p=[];function g(e,t){t=t[0];var r=(e=e[0])._private.children,n=e.id();Vt(r,t),t._private.parent=null,p.ids[n]||(p.ids[n]=!0,p.push(e))}p.ids={},s(g,"removeChildRef"),r.dirtyCompoundBoundsCache(),t&&a.removeFromPool(n);for(var m=0;m<n.length;m++){var y=n[m];if(y.isEdge()){var v=y.source()[0],x=y.target()[0];d(v,y),d(x,y);for(var b=y.parallelEdges(),T=0;T<b.length;T++){var C=b[T];f(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var w=y.parent();0!==w.length&&g(w,y)}t&&(y._private.removed=!0)}var k=a._private.elements;a._private.hasCompoundNodes=!1;for(var E=0;E<k.length;E++){if(k[E].isParent()){a._private.hasCompoundNodes=!0;break}}var _=new qu(this.cy(),n);_.size()>0&&(e?_.emitAndNotify("remove"):t&&_.emit("remove"));for(var A=0;A<p.length;A++){var S=p[A];(!t||!S.removed())&&S.updateStyle()}return _},Yu.move=function(e){var t=this._private.cy,r=this,n=!1,i=!1,a=s((function(e){return null==e?e:""+e}),"toString");if(void 0!==e.source||void 0!==e.target){var o=a(e.source),l=a(e.target),u=null!=o&&t.hasElementWithId(o),c=null!=l&&t.hasElementWithId(l);(u||c)&&(t.batch((function(){r.remove(n,i),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],a=t._private.data;t.isEdge()&&(u&&(a.source=o),c&&(a.target=l))}r.restore(n,i)})),r.emitAndNotify("move"))}else if(void 0!==e.parent){var h=a(e.parent);if(null===h||t.hasElementWithId(h)){var d=null===h?void 0:h;t.batch((function(){var e=r.remove(n,i);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var a=r[t],o=a._private.data;a.isNode()&&(o.parent=d)}e.restore(n,i)})),r.emitAndNotify("move")}}return this},[Gi,hs,ds,ol,cl,gl,ml,ru,yu,vu,bu,Cu,Eu,Ru,Bu,zu].forEach((function(e){fe(Yu,e)}));var Xu={add:s((function(e){var t,r=this;if(V(e)){var n=e;if(n._private.cy===r)t=n.restore();else{for(var i=[],a=0;a<n.length;a++){var o=n[a];i.push(o.json())}t=new qu(r,i)}}else if(F(e)){t=new qu(r,e)}else if($(e)&&(F(e.nodes)||F(e.edges))){for(var s=e,l=[],u=["nodes","edges"],c=0,h=u.length;c<h;c++){var d=u[c],f=s[d];if(F(f))for(var p=0,g=f.length;p<g;p++){var m=fe({group:d},f[p]);l.push(m)}}t=new qu(r,l)}else{t=new Jt(r,e).collection()}return t}),"add"),remove:s((function(e){if(!V(e)&&D(e)){var t=e;e=this.$(t)}return e.remove()}),"remove")};function Ku(e,t,r,n){var i=.1,a=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var o=0;o<4;++o)if("number"!=typeof arguments[o]||isNaN(arguments[o])||!isFinite(arguments[o]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var l=a?new Float32Array(11):new Array(11);function u(e,t){return 1-3*t+3*e}function c(e,t){return 3*t-6*e}function h(e){return 3*e}function d(e,t,r){return((u(t,r)*e+c(t,r))*e+h(t))*e}function f(e,t,r){return 3*u(t,r)*e*e+2*c(t,r)*e+h(t)}function p(t,n){for(var i=0;i<4;++i){var a=f(n,e,r);if(0===a)return n;n-=(d(n,e,r)-t)/a}return n}function g(){for(var t=0;t<11;++t)l[t]=d(t*i,e,r)}function m(t,n,i){var a,o,s=0;do{(a=d(o=n+(i-n)/2,e,r)-t)>0?i=o:n=o}while(Math.abs(a)>1e-7&&++s<10);return o}function y(t){for(var n=0,a=1;10!==a&&l[a]<=t;++a)n+=i;--a;var o=n+(t-l[a])/(l[a+1]-l[a])*i,s=f(o,e,r);return s>=.001?p(t,o):0===s?o:m(t,n,n+i)}s(u,"A"),s(c,"B"),s(h,"C"),s(d,"calcBezier"),s(f,"getSlope"),s(p,"newtonRaphsonIterate"),s(g,"calcSampleValues"),s(m,"binarySubdivide"),s(y,"getTForX");var v=!1;function x(){v=!0,(e!==t||r!==n)&&g()}s(x,"precompute");var b=s((function(i){return v||x(),e===t&&r===n?i:0===i?0:1===i?1:d(y(i),t,n)}),"f");b.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var T="generateBezier("+[e,t,r,n]+")";return b.toString=function(){return T},b}s(Ku,"generateCubicBezier");var Zu=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var i={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function r(r,n){var i={dx:r.v,dv:e(r)},a=t(r,.5*n,i),o=t(r,.5*n,a),s=t(r,n,o),l=1/6*(i.dx+2*(a.dx+o.dx)+s.dx),u=1/6*(i.dv+2*(a.dv+o.dv)+s.dv);return r.x=r.x+l*n,r.v=r.v+u*n,r}return s(e,"springAccelerationForState"),s(t,"springEvaluateStateWithDerivative"),s(r,"springIntegrateState"),s((function e(t,n,i){var a,o,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,h=1e-4;for(t=parseFloat(t)||500,n=parseFloat(n)||20,i=i||null,l.tension=t,l.friction=n,(a=null!==i)?o=(c=e(t,n))/i*.016:o=.016;s=r(s||l,o),u.push(1+s.x),c+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return a?function(e){return u[e*(u.length-1)|0]}:c}),"springRK4Factory")}(),Qu=s((function(e,t,r,n){var i=Ku(e,t,r,n);return function(e,t,r){return e+(t-e)*i(r)}}),"cubicBezier"),Ju={linear:s((function(e,t,r){return e+(t-e)*r}),"linear"),ease:Qu(.25,.1,.25,1),"ease-in":Qu(.42,0,1,1),"ease-out":Qu(0,0,.58,1),"ease-in-out":Qu(.42,0,.58,1),"ease-in-sine":Qu(.47,0,.745,.715),"ease-out-sine":Qu(.39,.575,.565,1),"ease-in-out-sine":Qu(.445,.05,.55,.95),"ease-in-quad":Qu(.55,.085,.68,.53),"ease-out-quad":Qu(.25,.46,.45,.94),"ease-in-out-quad":Qu(.455,.03,.515,.955),"ease-in-cubic":Qu(.55,.055,.675,.19),"ease-out-cubic":Qu(.215,.61,.355,1),"ease-in-out-cubic":Qu(.645,.045,.355,1),"ease-in-quart":Qu(.895,.03,.685,.22),"ease-out-quart":Qu(.165,.84,.44,1),"ease-in-out-quart":Qu(.77,0,.175,1),"ease-in-quint":Qu(.755,.05,.855,.06),"ease-out-quint":Qu(.23,1,.32,1),"ease-in-out-quint":Qu(.86,0,.07,1),"ease-in-expo":Qu(.95,.05,.795,.035),"ease-out-expo":Qu(.19,1,.22,1),"ease-in-out-expo":Qu(1,0,0,1),"ease-in-circ":Qu(.6,.04,.98,.335),"ease-out-circ":Qu(.075,.82,.165,1),"ease-in-out-circ":Qu(.785,.135,.15,.86),spring:s((function(e,t,r){if(0===r)return Ju.linear;var n=Zu(e,t,r);return function(e,t,r){return e+(t-e)*n(r)}}),"spring"),"cubic-bezier":Qu};function ec(e,t,r,n,i){if(1===n||t===r)return r;var a=i(t,r,n);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function tc(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function rc(e,t,r,n,i){var a=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var o=tc(e,i),s=tc(t,i);if(U(o)&&U(s))return ec(a,o,s,r,n);if(F(o)&&F(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],h=s[u];if(null!=c&&null!=h){var d=ec(a,c,h,r,n);l.push(d)}else l.push(h)}return l}}function nc(e,t,r,n){var i=!n,a=e._private,o=t._private,s=o.easing,l=o.startTime,u=(n?e:e.cy()).style();if(!o.easingImpl)if(null==s)o.easingImpl=Ju.linear;else{var c,h,d;if(D(s))c=u.parse("transition-timing-function",s).value;else c=s;D(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map((function(e){return+e}))),d.length>0?("spring"===h&&d.push(o.duration),o.easingImpl=Ju[h].apply(null,d)):o.easingImpl=Ju[h]}var f,p=o.easingImpl;if(f=0===o.duration?1:(r-l)/o.duration,o.applying&&(f=o.progress),f<0?f=0:f>1&&(f=1),null==o.delay){var g=o.startPosition,m=o.position;if(m&&i&&!e.locked()){var y={};ic(g.x,m.x)&&(y.x=rc(g.x,m.x,f,p)),ic(g.y,m.y)&&(y.y=rc(g.y,m.y,f,p)),e.position(y)}var v=o.startPan,x=o.pan,b=a.pan,T=null!=x&&n;T&&(ic(v.x,x.x)&&(b.x=rc(v.x,x.x,f,p)),ic(v.y,x.y)&&(b.y=rc(v.y,x.y,f,p)),e.emit("pan"));var C=o.startZoom,w=o.zoom,k=null!=w&&n;k&&(ic(C,w)&&(a.zoom=Pr(a.minZoom,rc(C,w,f,p),a.maxZoom)),e.emit("zoom")),(T||k)&&e.emit("viewport");var E=o.style;if(E&&E.length>0&&i){for(var _=0;_<E.length;_++){var A=E[_],S=A.name,R=A,N=o.startStyle[S],L=rc(N,R,f,p,u.properties[N.name]);u.overrideBypass(e,S,L)}e.emit("style")}}return o.progress=f,f}function ic(e,t){return null!=e&&null!=t&&(!(!U(e)||!U(t))||!(!e||!t))}function ac(e,t,r,n){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function oc(e,t){var r=t._private.aniEles,n=[];function i(t,r){var i=t._private,a=i.animation.current,o=i.animation.queue,l=!1;if(0===a.length){var u=o.shift();u&&a.push(u)}for(var c=s((function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)}),"callbacks"),h=a.length-1;h>=0;h--){var d=a[h],f=d._private;f.stopped?(a.splice(h,1),f.hooked=!1,f.playing=!1,f.started=!1,c(f.frames)):!f.playing&&!f.applying||(f.playing&&f.applying&&(f.applying=!1),f.started||ac(0,d,e),nc(t,d,e,r),f.applying&&(f.applying=!1),c(f.frames),null!=f.step&&f.step(e),d.completed()&&(a.splice(h,1),f.hooked=!1,f.playing=!1,f.started=!1,c(f.completes)),l=!0)}return!r&&0===a.length&&0===o.length&&n.push(t),l}s(i,"stepOne");for(var a=!1,o=0;o<r.length;o++){var l=i(r[o]);a=a||l}var u=i(t,!0);(a||u)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}s(ec,"getEasedValue"),s(tc,"getValue"),s(rc,"ease"),s(nc,"step$1"),s(ic,"valid"),s(ac,"startAnimation"),s(oc,"stepAll");var sc={animate:cs.animate(),animation:cs.animation(),animated:cs.animated(),clearQueue:cs.clearQueue(),delay:cs.delay(),delayAnimation:cs.delayAnimation(),stop:cs.stop(),addToAnimationPool:s((function(e){this.styleEnabled()&&this._private.aniEles.merge(e)}),"addToAnimationPool"),stopAnimationLoop:s((function(){this._private.animationsRunning=!1}),"stopAnimationLoop"),startAnimationLoop:s((function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){s(r,"headlessStep");var t=e.renderer();t&&t.beforeRender?t.beforeRender(s((function(t,r){oc(r,e)}),"rendererAnimationStep"),t.beforeRenderPriorities.animations):r()}function r(){e._private.animationsRunning&&dt(s((function(t){oc(t,e),r()}),"animationStep"))}}),"startAnimationLoop")},lc={qualifierCompare:s((function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)}),"qualifierCompare"),eventMatches:s((function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&W(r.target)&&n.matches(r.target)}),"eventMatches"),addEventFields:s((function(e,t){t.cy=e,t.target=e}),"addEventFields"),callbackContext:s((function(e,t,r){return null!=t.qualifier?r.target:e}),"callbackContext")},uc=s((function(e){return D(e)?new il(e):e}),"argSelector"),cc={createEmitter:s((function(){var e=this._private;return e.emitter||(e.emitter=new cu(lc,this)),this}),"createEmitter"),emitter:s((function(){return this._private.emitter}),"emitter"),on:s((function(e,t,r){return this.emitter().on(e,uc(t),r),this}),"on"),removeListener:s((function(e,t,r){return this.emitter().removeListener(e,uc(t),r),this}),"removeListener"),removeAllListeners:s((function(){return this.emitter().removeAllListeners(),this}),"removeAllListeners"),one:s((function(e,t,r){return this.emitter().one(e,uc(t),r),this}),"one"),once:s((function(e,t,r){return this.emitter().one(e,uc(t),r),this}),"once"),emit:s((function(e,t){return this.emitter().emit(e,t),this}),"emit"),emitAndNotify:s((function(e,t){return this.emit(e),this.notify(e,t),this}),"emitAndNotify")};cs.eventAliasesOn(cc);var hc={png:s((function(e){return e=e||{},this._private.renderer.png(e)}),"png"),jpg:s((function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}),"jpg")};hc.jpeg=hc.jpg;var dc={layout:s((function(e){var t=this;if(null!=e)if(null!=e.name){var r,n=e.name,i=t.extension("layout",n);if(null!=i)return r=D(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$(),new i(fe({},e,{cy:t,eles:r}));Ot("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Ot("A `name` must be specified to make a layout");else Ot("Layout options must be specified to make a layout")}),"layout")};dc.createLayout=dc.makeLayout=dc.layout;var fc={notify:s((function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&n.merge(t)}else if(r.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}}),"notify"),notifications:s((function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)}),"notifications"),noNotifications:s((function(e){this.notifications(!1),e(),this.notifications(!0)}),"noNotifications"),batching:s((function(){return this._private.batchCount>0}),"batching"),startBatch:s((function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this}),"startBatch"),endBatch:s((function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(r){var n=e.batchNotifications[r];n.empty()?t.notify(r):t.notify(r,n)}))}return this}),"endBatch"),batch:s((function(e){return this.startBatch(),e(),this.endBatch(),this}),"batch"),batchData:s((function(e){var t=this;return this.batch((function(){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n],a=e[i];t.getElementById(i).data(a)}}))}),"batchData")},pc=jt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:12,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),gc={renderTo:s((function(e,t,r,n){return this._private.renderer.renderTo(e,t,r,n),this}),"renderTo"),renderer:s((function(){return this._private.renderer}),"renderer"),forceRender:s((function(){return this.notify("draw"),this}),"forceRender"),resize:s((function(){return this.invalidateSize(),this.emitAndNotify("resize"),this}),"resize"),initRenderer:s((function(e){var t=this,r=t.extension("renderer",e.name);if(null!=r){void 0!==e.wheelSensitivity&&Dt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=pc(e);n.cy=t,t._private.renderer=new r(n),this.notify("init")}else Ot("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))}),"initRenderer"),destroyRenderer:s((function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))}),"destroyRenderer"),onRender:s((function(e){return this.on("render",e)}),"onRender"),offRender:s((function(e){return this.off("render",e)}),"offRender")};gc.invalidateDimensions=gc.resize;var mc={collection:s((function(e,t){return D(e)?this.$(e):V(e)?e.collection():F(e)?(t||(t={}),new qu(this,e,t.unique,t.removed)):new qu(this)}),"collection"),nodes:s((function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t}),"nodes"),edges:s((function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t}),"edges"),$:s((function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()}),"$"),mutableElements:s((function(){return this._private.elements}),"mutableElements")};mc.elements=mc.filter=mc.$;var yc={},vc="t";yc.apply=function(e){for(var t=this,r=t._private.cy.collection(),n=0;n<e.length;n++){var i=e[n],a=t.getContextMeta(i);if(!a.empty){var o=t.getContextStyle(a),s=t.applyContextStyle(a,o,i);i._private.appliedInitStyle?t.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0,t.updateStyleHints(i)&&r.push(i)}}return r},yc.getPropertiesDiff=function(e,t){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,a=n[i];if(a)return a;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],c=e[l]===vc,h=t[l]===vc,d=c!==h,f=u.mappedProperties.length>0;if(d||h&&f){var p=void 0;d&&f||d?p=u.properties:f&&(p=u.mappedProperties);for(var g=0;g<p.length;g++){for(var m=p[g],y=m.name,v=!1,x=l+1;x<r.length;x++){var b=r[x];if(t[x]===vc&&(v=null!=b.properties[m.name]))break}!s[y]&&!v&&(s[y]=!0,o.push(y))}}}return n[i]=o,o},yc.getContextMeta=function(e){for(var t,r=this,n="",i=e._private.styleCxtKey||"",a=0;a<r.length;a++){var o=r[a];n+=o.selector&&o.selector.matches(e)?vc:"f"}return t=r.getPropertiesDiff(i,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},yc.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},i=0;i<this.length;i++){var a=this[i];if(t[i]===vc)for(var o=0;o<a.properties.length;o++){var s=a.properties[o];n[s.name]=s}}return r[t]=n,n},yc.applyContextStyle=function(e,t,r){for(var n=e.diffPropNames,i={},a=this.types,o=0;o<n.length;o++){var s=n[o],l=t[s],u=r.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(r,l),h.next=r.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},yc.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=s((function(e,t,n){return r.getPropertiesHash(e,t,n)}),"propHash"),o=t.styleKey;if(e.removed())return!1;var l="nodes"===t.group,u=e._private.style;n=Object.keys(u);for(var c=0;c<i.length;c++){var h=i[c];t.styleKeys[h]=[pt,gt]}for(var d=s((function(e,r){return t.styleKeys[r][0]=yt(e,t.styleKeys[r][0])}),"updateGrKey1"),f=s((function(e,r){return t.styleKeys[r][1]=vt(e,t.styleKeys[r][1])}),"updateGrKey2"),p=s((function(e,t){d(e,t),f(e,t)}),"updateGrKey"),g=s((function(e,t){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);d(n,t),f(n,t)}}),"updateGrKeyWStr"),m=s((function(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e}),"cleanNum"),y=0;y<n.length;y++){var v=n[y],x=u[v];if(null!=x){var b=this.properties[v],T=b.type,C=b.groupKey,w=void 0;null!=b.hashOverride?w=b.hashOverride(e,x):null!=x.pfValue&&(w=x.pfValue);var k=null==b.enums?x.value:null,E=null!=w,_=E||null!=k,A=x.units;if(T.number&&_&&!T.multiple)p(m(E?w:k),C),!E&&null!=A&&g(A,C);else g(x.strValue,C)}}for(var S=[pt,gt],R=0;R<i.length;R++){var N=i[R],L=t.styleKeys[N];S[0]=yt(L[0],S[0]),S[1]=vt(L[1],S[1])}t.styleKey=xt(S[0],S[1]);var I=t.styleKeys;t.labelDimsKey=bt(I.labelDimensions);var M=a(e,["label"],I.labelDimensions);if(t.labelKey=bt(M),t.labelStyleKey=bt(Tt(I.commonLabel,M)),!l){var O=a(e,["source-label"],I.labelDimensions);t.sourceLabelKey=bt(O),t.sourceLabelStyleKey=bt(Tt(I.commonLabel,O));var P=a(e,["target-label"],I.labelDimensions);t.targetLabelKey=bt(P),t.targetLabelStyleKey=bt(Tt(I.commonLabel,P))}if(l){var D=t.styleKeys,B=D.nodeBody,F=D.nodeBorder,$=D.nodeOutline,z=D.backgroundImage,U=D.compound,G=D.pie,j=[B,F,$,z,U,G].filter((function(e){return null!=e})).reduce(Tt,[pt,gt]);t.nodeKey=bt(j),t.hasPie=null!=G&&G[0]!==pt&&G[1]!==gt}return o!==t.styleKey},yc.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},yc.applyParsedProperty=function(e,t){var r,n=this,i=t,a=e._private.style,o=n.types,l=n.properties[i.name].type,u=i.bypass,c=a[i.name],h=c&&c.bypass,d=e._private,f="mapping",p=s((function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value}),"getVal"),g=s((function(){var t=p(c),r=p(i);n.checkTriggers(e,i.name,t,r)}),"checkTriggers");if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",u)),i.delete)return a[i.name]=void 0,g(),!0;if(i.deleteBypassed)return c?!!c.bypass&&(c.bypassed=void 0,g(),!0):(g(),!0);if(i.deleteBypass)return c?!!c.bypass&&(a[i.name]=c.bypassed,g(),!0):(g(),!0);var m=s((function(){Dt("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")}),"printMappingErr");switch(i.mapped){case o.mapData:for(var y=i.field.split("."),v=d.data,x=0;x<y.length&&v;x++){v=v[y[x]]}if(null==v)return m(),!1;var b;if(!U(v))return Dt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+v+"` for `"+e.id()+"` is non-numeric)"),!1;var T=i.fieldMax-i.fieldMin;if((b=0===T?0:(v-i.fieldMin)/T)<0?b=0:b>1&&(b=1),l.color){var C=i.valueMin[0],w=i.valueMax[0],k=i.valueMin[1],E=i.valueMax[1],_=i.valueMin[2],A=i.valueMax[2],S=null==i.valueMin[3]?1:i.valueMin[3],R=null==i.valueMax[3]?1:i.valueMax[3],N=[Math.round(C+(w-C)*b),Math.round(k+(E-k)*b),Math.round(_+(A-_)*b),Math.round(S+(R-S)*b)];r={bypass:i.bypass,name:i.name,value:N,strValue:"rgb("+N[0]+", "+N[1]+", "+N[2]+")"}}else{if(!l.number)return!1;var L=i.valueMin+(i.valueMax-i.valueMin)*b;r=this.parse(i.name,L,i.bypass,f)}if(!r)return m(),!1;r.mapping=i,i=r;break;case o.data:for(var I=i.field.split("."),M=d.data,O=0;O<I.length&&M;O++){M=M[I[O]]}if(null!=M&&(r=this.parse(i.name,M,i.bypass,f)),!r)return m(),!1;r.mapping=i,i=r;break;case o.fn:var P=i.value,D=null!=i.fnValue?i.fnValue:P(e);if(i.prevFnValue=D,null==D)return Dt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(r=this.parse(i.name,D,i.bypass,f)))return Dt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;r.mapping=Ft(i),i=r;break;case void 0:break;default:return!1}return u?(i.bypassed=h?c.bypassed:c,a[i.name]=i):h?c.bypassed=i:a[i.name]=i,g(),!0},yc.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),t)for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else n._private.style={}}},yc.update=function(){this._private.cy.mutableElements().updateStyle()},yc.updateTransitions=function(e,t){var r=this,n=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),d=t[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,g=!1,m=void 0,y=1e-6;f&&(U(f.pfValue)&&U(p.pfValue)?(g=p.pfValue-f.pfValue,m=f.pfValue+y*g):U(f.value)&&U(p.value)?(g=p.value-f.value,m=f.value+y*g):F(f.value)&&F(p.value)&&(g=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],m=f.strValue),g&&(s[c]=p.strValue,this.applyBypass(e,c,m),l=!0))}}if(!l)return;n.transitioning=!0,new Xi((function(t){o>0?e.delayAnimation(o).play().promise().then(t):t()})).then((function(){return e.animation({style:s,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1)},yc.checkTrigger=function(e,t,r,n,i,a){var o=this.properties[t],s=i(o);null!=s&&s(r,n)&&a(o)},yc.checkZOrderTrigger=function(e,t,r,n){var i=this;this.checkTrigger(e,t,r,n,(function(e){return e.triggersZOrder}),(function(){i._private.cy.notify("zorder",e)}))},yc.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBounds}),(function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&"curve-style"===t&&("bezier"===r||"bezier"===n)&&e.parallelEdges().forEach((function(e){e.dirtyBoundingBoxCache()})),i.triggersBoundsOfConnectedEdges&&"display"===t&&("none"===r||"none"===n)&&e.connectedEdges().forEach((function(e){e.dirtyBoundingBoxCache()}))}))},yc.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n)};var xc={applyBypass:function(e,t,r,n){var i=[];if("*"===t||"**"===t){if(void 0!==r)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,r,!0);s&&i.push(s)}}else if(D(t)){var l=this.parse(t,r,!0);l&&i.push(l)}else{if(!$(t))return!1;var u=t;n=r;for(var c=Object.keys(u),h=0;h<c.length;h++){var d=c[h],f=u[d];if(void 0===f&&(f=u[ne(d)]),void 0!==f){var p=this.parse(d,f,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var g=!1,m=0;m<e.length;m++){for(var y=e[m],v={},x=void 0,b=0;b<i.length;b++){var T=i[b];if(n){var C=y.pstyle(T.name);x=v[T.name]={prev:C}}g=this.applyParsedProperty(y,Ft(T))||g,n&&(x.next=y.pstyle(T.name))}g&&this.updateStyleHints(y),n&&this.updateTransitions(y,v,true)}return g},overrideBypass:function(e,t,r){t=re(t);for(var n=0;n<e.length;n++){var i=e[n],a=i._private.style[t],o=this.properties[t].type,s=o.color,l=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,null!=a.pfValue&&(a.pfValue=r),a.strValue=s?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,u,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var n=0;n<e.length;n++){for(var i=e[n],a={},o=0;o<t.length;o++){var s=t[o],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=a[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,a,true)}}},bc={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),n=t.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(e)}},Tc={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var n={},i=0;i<r.properties.length;i++){var a=r.properties[i],o=r.getStylePropertyValue(e,a.name,t);null!=o&&(n[a.name]=o,n[ne(a.name)]=o)}return n}},getIndexedStyle:function(e,t,r,n){return e.pstyle(t)[r][n]??e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var n=this.properties[t];n.alias&&(n=n.pointsTo);var i=n.type,a=e.pstyle(n.name);if(a){var o=a.value,l=a.units,u=a.strValue;if(r&&i.number&&null!=o&&U(o)){var c=e.cy().zoom(),h=s((function(e){return e*c}),"getRenderedValue"),d=s((function(e,t){return h(e)+t}),"getValueStringWithUnits"),f=F(o),p=f?l.every((function(e){return null!=e})):null!=l;return p?f?o.map((function(e,t){return d(e,l[t])})).join(" "):d(o,l):f?o.map((function(e){return D(e)?e:""+h(e)})).join(" "):""+h(o)}if(null!=u)return u}return null}},getAnimationStartStyle:function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n].name,a=e.pstyle(i);void 0!==a&&(a=$(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(r[i]=a)}return r},getPropsList:function(e){var t=[],r=e,n=this.properties;if(r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],s=r[o],l=n[o]||n[re(o)],u=this.parse(l.name,s);u&&t.push(u)}return t},getNonDefaultPropertiesHash:function(e,t,r){var n,i,a,o,s,l,u=r.slice();for(s=0;s<t.length;s++)if(n=t[s],null!=(i=e.pstyle(n,!1)))if(null!=i.pfValue)u[0]=yt(o,u[0]),u[1]=vt(o,u[1]);else for(a=i.strValue,l=0;l<a.length;l++)o=a.charCodeAt(l),u[0]=yt(o,u[0]),u[1]=vt(o,u[1]);return u}};Tc.getPropertiesHash=Tc.getNonDefaultPropertiesHash;var Cc={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r],i=n.selector,a=n.style||n.css,o=Object.keys(a);t.selector(i);for(var s=0;s<o.length;s++){var l=o[s],u=a[l];t.css(l,u)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:n?n.toString():"core",style:a})}return e}},wc={appendFromString:function(e){var t,r,n,i=this,a=""+e;function o(){a=a.length>t.length?a.substr(t.length):""}function l(){r=r.length>n.length?r.substr(n.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,""),s(o,"removeSelAndBlockFromRemaining"),s(l,"removePropAndValFromRem");;){if(a.match(/^\s*$/))break;var u=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){Dt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}t=u[0];var c=u[1];if("core"!==c)if(new il(c).invalid){Dt("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),o();continue}var h=u[2],d=!1;r=h;for(var f=[];;){if(r.match(/^\s*$/))break;var p=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){Dt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),d=!0;break}n=p[0];var g=p[1],m=p[2];if(this.properties[g])i.parse(g,m)?(f.push({name:g,val:m}),l()):(Dt("Skipping property: Invalid property definition in: "+n),l());else Dt("Skipping property: Invalid property name in: "+n),l()}if(d){o();break}i.selector(c);for(var y=0;y<f.length;y++){var v=f[y];i.css(v.name,v.val)}o()}return i},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},kc={};!function(){var e=oe,t=le,r=ce,n=s((function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"}),"data"),i=s((function(n){var i=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+n+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"}),"mapData"),a=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];kc.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:a,singleRegexMatchValue:!0},urls:{regexes:a,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:s((function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return D(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}),"validate")},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:s((function(e){var t=e.length;return 1===t||2===t||4===t}),"validate")}};var o={zeroNonZero:s((function(e,t){return(null==e||null==t)&&e!==t||0==e&&0!=t||0!=e&&0==t}),"zeroNonZero"),any:s((function(e,t){return e!=t}),"any"),emptyNonEmpty:s((function(e,t){var r=K(e),n=K(t);return r&&!n||!r&&n}),"emptyNonEmpty")},l=kc.types,u=[{name:"label",type:l.text,triggersBounds:o.any,triggersZOrder:o.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:o.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:o.any}],c=[{name:"source-label",type:l.text,triggersBounds:o.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:o.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:o.any},{name:"source-text-offset",type:l.size,triggersBounds:o.any}],h=[{name:"target-label",type:l.text,triggersBounds:o.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:o.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:o.any},{name:"target-text-offset",type:l.size,triggersBounds:o.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:o.any},{name:"font-style",type:l.fontStyle,triggersBounds:o.any},{name:"font-weight",type:l.fontWeight,triggersBounds:o.any},{name:"font-size",type:l.size,triggersBounds:o.any},{name:"text-transform",type:l.textTransform,triggersBounds:o.any},{name:"text-wrap",type:l.textWrap,triggersBounds:o.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:o.any},{name:"text-max-width",type:l.size,triggersBounds:o.any},{name:"text-outline-width",type:l.size,triggersBounds:o.any},{name:"line-height",type:l.positiveNumber,triggersBounds:o.any}],f=[{name:"text-valign",type:l.valign,triggersBounds:o.any},{name:"text-halign",type:l.halign,triggersBounds:o.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:o.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:o.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:o.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:o.any},{name:"text-justification",type:l.justification}],p=[{name:"events",type:l.bool,triggersZOrder:o.any},{name:"text-events",type:l.bool,triggersZOrder:o.any}],g=[{name:"display",type:l.display,triggersZOrder:o.any,triggersBounds:o.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:l.visibility,triggersZOrder:o.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:o.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:o.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:o.any},{name:"z-index",type:l.number,triggersZOrder:o.any}],m=[{name:"overlay-padding",type:l.size,triggersBounds:o.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:o.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:o.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:o.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:o.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:o.any},{name:"underlay-corner-radius",type:l.cornerRadius}],v=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],x=s((function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue}),"nodeSizeHashOverride"),b=[{name:"height",type:l.nodeSize,triggersBounds:o.any,hashOverride:x},{name:"width",type:l.nodeSize,triggersBounds:o.any,hashOverride:x},{name:"shape",type:l.nodeShape,triggersBounds:o.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:o.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:o.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:o.any}],T=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:o.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],C=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:o.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:o.any}],w=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],k=[{name:"position",type:l.position,triggersBounds:o.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:o.any},{name:"min-width",type:l.size,triggersBounds:o.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"min-height",type:l.size,triggersBounds:o.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:o.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:o.any}],E=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:o.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:o.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:o.any},{name:"control-point-step-size",type:l.size,triggersBounds:o.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:o.any},{name:"control-point-weights",type:l.numbers,triggersBounds:o.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:o.any},{name:"segment-weights",type:l.numbers,triggersBounds:o.any},{name:"segment-radii",type:l.numbers,triggersBounds:o.any},{name:"radius-type",type:l.radiusType,triggersBounds:o.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:o.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:o.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:o.any},{name:"taxi-radius",type:l.number,triggersBounds:o.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:o.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:o.any},{name:"loop-direction",type:l.angle,triggersBounds:o.any},{name:"loop-sweep",type:l.angle,triggersBounds:o.any},{name:"source-distance-from-node",type:l.size,triggersBounds:o.any},{name:"target-distance-from-node",type:l.size,triggersBounds:o.any}],_=[{name:"ghost",type:l.bool,triggersBounds:o.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:o.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:o.any},{name:"ghost-opacity",type:l.zeroOneNumber}],A=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],S=[];kc.pieBackgroundN=16,S.push({name:"pie-size",type:l.sizeMaybePercent});for(var R=1;R<=kc.pieBackgroundN;R++)S.push({name:"pie-"+R+"-background-color",type:l.color}),S.push({name:"pie-"+R+"-background-size",type:l.percent}),S.push({name:"pie-"+R+"-background-opacity",type:l.zeroOneNumber});var N=[],L=kc.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:o.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach((function(e){L.forEach((function(t){var r=t+"-"+e.name,n=e.type,i=e.triggersBounds;N.push({name:r,type:n,triggersBounds:i})}))}),{});var I=kc.properties=[].concat(p,v,g,m,y,_,f,d,u,c,h,b,T,C,w,S,k,E,N,A),M=kc.propertyGroups={behavior:p,transition:v,visibility:g,overlay:m,underlay:y,ghost:_,commonLabel:f,labelDimensions:d,mainLabel:u,sourceLabel:c,targetLabel:h,nodeBody:b,nodeBorder:T,nodeOutline:C,backgroundImage:w,pie:S,compound:k,edgeLine:E,edgeArrow:N,core:A},O=kc.propertyGroupNames={};(kc.propertyGroupKeys=Object.keys(M)).forEach((function(e){O[e]=M[e].map((function(e){return e.name})),M[e].forEach((function(t){return t.groupKey=e}))}));var P=kc.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];kc.propertyNames=I.map((function(e){return e.name}));for(var B=0;B<I.length;B++){var F=I[B];I[F.name]=F}for(var $=0;$<P.length;$++){var z=P[$],U=I[z.pointsTo],G={name:z.name,alias:!0,pointsTo:U};I.push(G),I[z.name]=G}}(),kc.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},kc.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=fe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var r=1;r<=kc.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r),i=t.value;e[n]=i}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(e,t){return kc.arrowPrefixes.forEach((function(r){var n=r+"-"+t.name,i=t.value;e[n]=i})),e}),{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=t[a],s=this.parse(a,o);r[a]=s}}return e.defaultProperties=r,e.defaultProperties},kc.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ec={parse:function(e,t,r,n){var i=this;if(B(t))return i.parseImplWarn(e,t,r,n);var a,o=kt(e,""+t,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),s=i.propCache=i.propCache||[];return(a=s[o])||(a=s[o]=i.parseImplWarn(e,t,r,n)),(r||"mapping"===n)&&((a=Ft(a))&&(a.value=Ft(a.value))),a},parseImplWarn:function(e,t,r,n){var i=this.parseImpl(e,t,r,n);return!i&&null!=t&&Dt("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&Dt("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(e,t,r,n){var i=this;e=re(e);var a=i.properties[e],o=t,l=i.types;if(!a||void 0===t)return null;a.alias&&(a=a.pointsTo,e=a.name);var u=D(t);u&&(t=t.trim());var c,h,d=a.type;if(!d)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(B(t))return{name:e,value:t,strValue:"fn",mapped:l.fn,bypass:r};if(!(!u||n||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(c=new RegExp(l.data.regex).exec(t))){if(r)return!1;var f=l.data;return{name:e,value:c,strValue:""+t,mapped:f,field:c[1],bypass:r}}if(t.length>=10&&"m"===t[0]&&(h=new RegExp(l.mapData.regex).exec(t))){if(r||d.multiple)return!1;var p=l.mapData;if(!d.color&&!d.number)return!1;var g=this.parse(e,h[4]);if(!g||g.mapped)return!1;var m=this.parse(e,h[5]);if(!m||m.mapped)return!1;if(g.pfValue===m.pfValue||g.strValue===m.strValue)return Dt("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+g.strValue+"`"),this.parse(e,g.strValue);if(d.color){var y=g.value,v=m.value;if(!(y[0]!==v[0]||y[1]!==v[1]||y[2]!==v[2]||y[3]!==v[3]&&(null!=y[3]&&1!==y[3]||null!=v[3]&&1!==v[3])))return!1}return{name:e,value:h,strValue:""+t,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:g.value,valueMax:m.value,bypass:r}}}if(d.multiple&&"multiple"!==n){var x;if(x=u?t.split(/\s+/):F(t)?t:[t],d.evenMultiple&&x.length%2!=0)return null;for(var b=[],T=[],C=[],w="",k=!1,E=0;E<x.length;E++){var _=i.parse(e,x[E],r,"multiple");k=k||D(_.value),b.push(_.value),C.push(null!=_.pfValue?_.pfValue:_.value),T.push(_.units),w+=(E>0?" ":"")+_.strValue}return d.validate&&!d.validate(b,T)?null:d.singleEnum&&k?1===b.length&&D(b[0])?{name:e,value:b[0],strValue:b[0],bypass:r}:null:{name:e,value:b,pfValue:C,strValue:w,bypass:r,units:T}}var A=s((function(){for(var n=0;n<d.enums.length;n++){if(d.enums[n]===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null}),"checkEnums");if(d.number){var S,R="px";if(d.units&&(S=d.units),d.implicitUnits&&(R=d.implicitUnits),!d.unitless)if(u){var N="px|em"+(d.allowPercent?"|\\%":"");S&&(N=S);var L=t.match("^("+oe+")("+N+")?$");L&&(t=L[1],S=L[2]||R)}else(!S||d.implicitUnits)&&(S=R);if(t=parseFloat(t),isNaN(t)&&void 0===d.enums)return null;if(isNaN(t)&&void 0!==d.enums)return t=o,A();if(d.integer&&!G(t)||void 0!==d.min&&(t<d.min||d.strictMin&&t===d.min)||void 0!==d.max&&(t>d.max||d.strictMax&&t===d.max))return null;var I={name:e,value:t,strValue:""+t+(S||""),units:S,bypass:r};return d.unitless||"px"!==S&&"em"!==S?I.pfValue=t:I.pfValue="px"!==S&&S?this.getEmSizeInPixels()*t:t,("ms"===S||"s"===S)&&(I.pfValue="ms"===S?t:1e3*t),("deg"===S||"rad"===S)&&(I.pfValue="rad"===S?t:Er(t)),"%"===S&&(I.pfValue=t/100),I}if(d.propList){var M=[],O=""+t;if("none"!==O){for(var P=O.split(/\s*,\s*|\s+/),$=0;$<P.length;$++){var z=P[$].trim();i.properties[z]?M.push(z):Dt("`"+z+"` is not a valid property name")}if(0===M.length)return null}return{name:e,value:M,strValue:0===M.length?"none":M.join(" "),bypass:r}}if(d.color){var U=ve(t);return U?{name:e,value:U,pfValue:U,strValue:"rgb("+U[0]+","+U[1]+","+U[2]+")",bypass:r}:null}if(d.regex||d.regexes){if(d.enums){var j=A();if(j)return j}for(var V=d.regexes?d.regexes:[d.regex],W=0;W<V.length;W++){var H=new RegExp(V[W]).exec(t);if(H)return{name:e,value:d.singleRegexMatchValue?H[1]:H,strValue:""+t,bypass:r}}return null}return d.string?{name:e,value:""+t,strValue:""+t,bypass:r}:d.enums?A():null}},_c=s((function e(t){if(!(this instanceof e))return new e(t);q(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):Ot("A style must have a core reference")}),"Style"),Ac=_c.prototype;Ac.instanceString=function(){return"style"},Ac.clear=function(){for(var e=this._private,t=e.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach((function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1})),this},Ac.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Ac.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Ac.selector=function(e){var t="core"===e?null:new il(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},Ac.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],r=0;r<this.properties.length;r++){var n=this.properties[r],i=t[n.name];void 0===i&&(i=t[ne(n.name)]),void 0!==i&&this.cssRule(n.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},Ac.style=Ac.css,Ac.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},Ac.append=function(e){return Y(e)?e.appendToStyle(this):F(e)?this.appendFromJson(e):D(e)&&this.appendFromString(e),this},_c.fromJson=function(e,t){var r=new _c(e);return r.fromJson(t),r},_c.fromString=function(e,t){return new _c(e).fromString(t)},[yc,xc,bc,Tc,Cc,wc,kc,Ec].forEach((function(e){fe(Ac,e)})),_c.types=Ac.types,_c.properties=Ac.properties,_c.propertyGroups=Ac.propertyGroups,_c.propertyGroupNames=Ac.propertyGroupNames,_c.propertyGroupKeys=Ac.propertyGroupKeys;var Sc={style:s((function(e){e&&this.setStyle(e).update();return this._private.style}),"style"),setStyle:s((function(e){var t=this._private;return Y(e)?t.style=e.generateStyle(this):F(e)?t.style=_c.fromJson(this,e):D(e)?t.style=_c.fromString(this,e):t.style=_c(this),t.style}),"setStyle"),updateStyle:s((function(){this.mutableElements().updateStyle()}),"updateStyle")},Rc={autolock:s((function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)}),"autolock"),autoungrabify:s((function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)}),"autoungrabify"),autounselectify:s((function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)}),"autounselectify"),selectionType:s((function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:(("additive"===e||"single"===e)&&(t.selectionType=e),this)}),"selectionType"),panningEnabled:s((function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)}),"panningEnabled"),userPanningEnabled:s((function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)}),"userPanningEnabled"),zoomingEnabled:s((function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)}),"zoomingEnabled"),userZoomingEnabled:s((function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)}),"userZoomingEnabled"),boxSelectionEnabled:s((function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)}),"boxSelectionEnabled"),pan:s((function(){var e,t,r,n,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(D(a[0]))return o[e=a[0]];if($(a[0])){if(!this._private.panningEnabled)return this;n=(r=a[0]).x,i=r.y,U(n)&&(o.x=n),U(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[1],("x"===(e=a[0])||"y"===e)&&U(t)&&(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this}),"pan"),panBy:s((function(e,t){var r,n,i,a,o,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:$(e)&&(a=(i=s[0]).x,o=i.y,U(a)&&(l.x+=a),U(o)&&(l.y+=o),this.emit("pan viewport"));break;case 2:n=t,("x"===(r=e)||"y"===r)&&U(n)&&(l[r]+=n),this.emit("pan viewport")}return this.notify("viewport"),this}),"panBy"),gc:s((function(){this.notify("gc")}),"gc"),fit:s((function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this}),"fit"),getFitViewport:s((function(e,t){if(U(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(D(e)){var n=e;e=this.$(n)}else if(Q(e)){var i=e;(r={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else V(e)||(e=this.mutableElements());if(!V(e)||!e.empty()){r=r||e.boundingBox();var a,o=this.width(),s=this.height();if(t=U(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:a=(a=(a=Math.min((o-2*t)/r.w,(s-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(o-a*(r.x1+r.x2))/2,y:(s-a*(r.y1+r.y2))/2}}}}}),"getFitViewport"),zoomRange:s((function(e,t){var r=this._private;if(null==t){var n=e;e=n.min,t=n.max}return U(e)&&U(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):U(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:U(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this}),"zoomRange"),minZoom:s((function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})}),"minZoom"),maxZoom:s((function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})}),"maxZoom"),getZoomedViewport:s((function(e){var t,r,n=this._private,i=n.pan,a=n.zoom,o=!1;if(n.zoomingEnabled||(o=!0),U(e)?r=e:$(e)&&(r=e.level,null!=e.position?t=vr(e.position,a,i):null!=e.renderedPosition&&(t=e.renderedPosition),null!=t&&!n.panningEnabled&&(o=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,o||!U(r)||r===a||null!=t&&(!U(t.x)||!U(t.y)))return null;if(null!=t){var s=i,l=a,u=r;return{zoomed:!0,panned:!0,zoom:u,pan:{x:-u/l*(t.x-s.x)+t.x,y:-u/l*(t.y-s.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:i}}),"getZoomedViewport"),zoom:s((function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed?(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this}),"zoom"),viewport:s((function(e){var t=this._private,r=!0,n=!0,i=[],a=!1,o=!1;if(!e)return this;if(U(e.zoom)||(r=!1),$(e.pan)||(n=!1),!r&&!n)return this;if(r){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=s,i.push("zoom"))}if(n&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;U(l.x)&&(t.pan.x=l.x,o=!1),U(l.y)&&(t.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this}),"viewport"),center:s((function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this}),"center"),getCenterPan:s((function(e,t){if(this._private.panningEnabled){if(D(e)){var r=e;e=this.mutableElements().filter(r)}else V(e)||(e=this.mutableElements());if(0!==e.length){var n=e.boundingBox(),i=this.width(),a=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(n.x1+n.x2))/2,y:(a-t*(n.y1+n.y2))/2}}}}),"getCenterPan"),reset:s((function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this}),"reset"),invalidateSize:s((function(){this._private.sizeCache=null}),"invalidateSize"),size:s((function(){var e=this._private,t=e.container,r=this;return e.sizeCache=e.sizeCache||(t?function(){var e=r.window().getComputedStyle(t),n=s((function(t){return parseFloat(e.getPropertyValue(t))}),"val");return{width:t.clientWidth-n("padding-left")-n("padding-right"),height:t.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})}),"size"),width:s((function(){return this.size().width}),"width"),height:s((function(){return this.size().height}),"height"),extent:s((function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n}),"extent"),renderedExtent:s((function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}),"renderedExtent"),multiClickDebounceTime:s((function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}),"multiClickDebounceTime")};Rc.centre=Rc.center,Rc.autolockNodes=Rc.autolock,Rc.autoungrabifyNodes=Rc.autoungrabify;var Nc={data:cs.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:cs.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:cs.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:cs.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Nc.attr=Nc.data,Nc.removeAttr=Nc.removeData;var Lc=s((function(e){var t=this,r=(e=fe({},e)).container;r&&!j(r)&&j(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var i=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=t;var a=void 0!==R&&void 0!==r&&!e.headless,o=e;o.layout=fe({name:a?"grid":"null"},o.layout),o.renderer=fe({name:a?"canvas":"null"},o.renderer);var l=s((function(e,t,r){return void 0!==t?t:void 0!==r?r:e}),"defVal"),u=this._private={container:r,ready:!1,options:o,elements:new qu(this),listeners:[],aniEles:new qu(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:U(o.zoom)?o.zoom:1,pan:{x:$(o.pan)&&U(o.pan.x)?o.pan.x:0,y:$(o.pan)&&U(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=s((function(e,t){if(e.some(J))return Xi.all(e).then(t);t(e)}),"loadExtData");u.styleEnabled&&t.setStyle([]);var h=fe({},o,o.renderer);t.initRenderer(h);var d=s((function(e,r,n){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&($(e)||F(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",n),t.emit("done")}));var a=fe({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()}),"setElesAndLayout");c([o.style,o.elements],(function(e){var r=e[0],a=e[1];u.styleEnabled&&t.style().append(r),d(a,(function(){t.startAnimationLoop(),u.ready=!0,B(o.ready)&&t.on("ready",o.ready);for(var e=0;e<i.length;e++){var r=i[e];t.on("ready",r)}n&&(n.readies=[]),t.emit("ready")}),o.done)}))}),"Core"),Ic=Lc.prototype;fe(Ic,{instanceString:s((function(){return"core"}),"instanceString"),isReady:s((function(){return this._private.ready}),"isReady"),destroyed:s((function(){return this._private.destroyed}),"destroyed"),ready:s((function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this}),"ready"),destroy:s((function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e}),"destroy"),hasElementWithId:s((function(e){return this._private.elements.hasElementWithId(e)}),"hasElementWithId"),getElementById:s((function(e){return this._private.elements.getElementById(e)}),"getElementById"),hasCompoundNodes:s((function(){return this._private.hasCompoundNodes}),"hasCompoundNodes"),headless:s((function(){return this._private.renderer.isHeadless()}),"headless"),styleEnabled:s((function(){return this._private.styleEnabled}),"styleEnabled"),addToPool:s((function(e){return this._private.elements.merge(e),this}),"addToPool"),removeFromPool:s((function(e){return this._private.elements.unmerge(e),this}),"removeFromPool"),container:s((function(){return this._private.container||null}),"container"),window:s((function(){if(null==this._private.container)return R;var e=this._private.container.ownerDocument;return void 0===e||null==e?R:e.defaultView||R}),"window"),mount:s((function(e){if(null!=e){var t=this,r=t._private,n=r.options;return!j(e)&&j(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(fe({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),t.startAnimationLoop(),t.style(n.style),t.emit("mount"),t}}),"mount"),unmount:s((function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e}),"unmount"),options:s((function(){return Ft(this._private.options)}),"options"),json:s((function(e){var t=this,r=t._private,n=t.mutableElements(),i=s((function(e){return t.getElementById(e.id())}),"getFreshRef");if($(e)){if(t.startBatch(),e.elements){var a={},o=s((function(e,r){for(var n=[],i=[],o=0;o<e.length;o++){var s=e[o];if(s.data.id){var l=""+s.data.id,u=t.getElementById(l);a[l]=!0,0!==u.length?i.push({ele:u,json:s}):(r&&(s.group=r),n.push(s))}else Dt("cy.json() cannot handle elements without an ID attribute")}t.add(n);for(var c=0;c<i.length;c++){var h=i[c],d=h.ele,f=h.json;d.json(f)}}),"updateEles");if(F(e.elements))o(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],h=e.elements[c];F(h)&&o(h,c)}var d=t.collection();n.filter((function(e){return!a[e.id()]})).forEach((function(e){e.isParent()?d.merge(e):e.remove()})),d.forEach((function(e){return e.children().move({parent:null})})),d.forEach((function(e){return i(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<f.length;p++){var g=f[p];null!=e[g]&&t[g](e[g])}return t.endBatch(),this}var m={};!!e?m.elements=this.elements().map((function(e){return e.json()})):(m.elements={},n.forEach((function(e){var t=e.group();m.elements[t]||(m.elements[t]=[]),m.elements[t].push(e.json())}))),this._private.styleEnabled&&(m.style=t.style().json()),m.data=Ft(t.data());var y=r.options;return m.zoomingEnabled=r.zoomingEnabled,m.userZoomingEnabled=r.userZoomingEnabled,m.zoom=r.zoom,m.minZoom=r.minZoom,m.maxZoom=r.maxZoom,m.panningEnabled=r.panningEnabled,m.userPanningEnabled=r.userPanningEnabled,m.pan=Ft(r.pan),m.boxSelectionEnabled=r.boxSelectionEnabled,m.renderer=Ft(y.renderer),m.hideEdgesOnViewport=y.hideEdgesOnViewport,m.textureOnViewport=y.textureOnViewport,m.wheelSensitivity=y.wheelSensitivity,m.motionBlur=y.motionBlur,m.multiClickDebounceTime=y.multiClickDebounceTime,m}),"json")}),Ic.$id=Ic.getElementById,[Xu,sc,cc,hc,dc,fc,gc,mc,Sc,Rc,Nc].forEach((function(e){fe(Ic,e)}));var Mc={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")},Oc={maximal:!1,acyclic:!1},Pc=s((function(e){return e.scratch("breadthfirst")}),"getInfo"),Dc=s((function(e,t){return e.scratch("breadthfirst",t)}),"setInfo");function Bc(e){this.options=fe({},Mc,Oc,e)}s(Bc,"BreadthFirstLayout"),Bc.prototype.run=function(){var e,t=this.options,r=t.cy,n=t.eles,i=n.nodes().filter((function(e){return e.isChildless()})),a=n,o=t.directed,l=t.acyclic||t.maximal||t.maximalAdjustments>0,u=!!t.boundingBox,c=r.extent(),h=Dr(u?t.boundingBox:{x1:c.x1,y1:c.y1,w:c.w,h:c.h});if(V(t.roots))e=t.roots;else if(F(t.roots)){for(var d=[],f=0;f<t.roots.length;f++){var p=t.roots[f],g=r.getElementById(p);d.push(g)}e=r.collection(d)}else if(D(t.roots))e=r.$(t.roots);else if(o)e=i.roots();else{var m=n.components();e=r.collection();for(var y=s((function(t){var r=m[t],n=r.maxDegree(!1),i=r.filter((function(e){return e.degree(!1)===n}));e=e.add(i)}),"_loop"),v=0;v<m.length;v++)y(v)}var x=[],b={},T=s((function(e,t){null==x[t]&&(x[t]=[]);var r=x[t].length;x[t].push(e),Dc(e,{index:r,depth:t})}),"addToDepth"),C=s((function(e,t){var r=Pc(e),n=r.depth,i=r.index;x[n][i]=null,e.isChildless()&&T(e,t)}),"changeDepth");a.bfs({roots:e,directed:t.directed,visit:s((function(e,t,r,n,i){var a=e[0],o=a.id();a.isChildless()&&T(a,i),b[o]=!0}),"visit")});for(var w=[],k=0;k<i.length;k++){var E=i[k];b[E.id()]||w.push(E)}var _=s((function(e){for(var t=x[e],r=0;r<t.length;r++){var n=t[r];null!=n?Dc(n,{depth:e,index:r}):(t.splice(r,1),r--)}}),"assignDepthsAt"),A=s((function(e,r){for(var i=Pc(e),a=e.incomers().filter((function(e){return e.isNode()&&n.has(e)})),o=-1,s=e.id(),l=0;l<a.length;l++){var u=a[l],c=Pc(u);o=Math.max(o,c.depth)}if(i.depth<=o){if(!t.acyclic&&r[s])return null;var h=o+1;return C(e,h),r[s]=h,!0}return!1}),"adjustMaximally");if(o&&l){var S=[],R={},N=s((function(e){return S.push(e)}),"enqueue"),L=s((function(){return S.shift()}),"dequeue");for(i.forEach((function(e){return S.push(e)}));S.length>0;){var I=L(),M=A(I,R);if(M)I.outgoers().filter((function(e){return e.isNode()&&n.has(e)})).forEach(N);else if(null===M){Dt("Detected double maximal shift for node `"+I.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var O=0;if(t.avoidOverlap)for(var P=0;P<i.length;P++){var B=i[P].layoutDimensions(t),$=B.w,z=B.h;O=Math.max(O,$,z)}var U={},G=s((function(e){if(U[e.id()])return U[e.id()];for(var t=Pc(e).depth,r=e.neighborhood(),n=0,a=0,o=0;o<r.length;o++){var s=r[o];if(!s.isEdge()&&!s.isParent()&&i.has(s)){var l=Pc(s);if(null!=l){var u=l.index,c=l.depth;if(null!=u&&null!=c){var h=x[c].length;c<t&&(n+=u/h,a++)}}}}return n/=a=Math.max(1,a),0===a&&(n=0),U[e.id()]=n,n}),"getWeightedPercent"),j=s((function(e,t){var r=G(e)-G(t);return 0===r?he(e.id(),t.id()):r}),"sortFn");void 0!==t.depthSort&&(j=t.depthSort);for(var W=x.length,H=0;H<W;H++)x[H].sort(j),_(H);for(var q=[],Y=0;Y<w.length;Y++)q.push(w[Y]);var X=s((function(){for(var e=0;e<W;e++)_(e)}),"assignDepths");q.length&&(x.unshift(q),W=x.length,X());for(var K=0,Z=0;Z<W;Z++)K=Math.max(x[Z].length,K);var Q=h.x1+h.w/2,J=h.y1+h.h/2,ee=i.reduce((function(e,r){return function(t){return{w:-1===e.w?t.w:(e.w+t.w)/2,h:-1===e.h?t.h:(e.h+t.h)/2}}(r.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))}),{w:-1,h:-1}),te=Math.max(1===W?0:u?(h.h-2*t.padding-ee.h)/(W-1):(h.h-2*t.padding-ee.h)/(W+1),O),re=x.reduce((function(e,t){return Math.max(e,t.length)}),0),ne=s((function(e){var r=Pc(e),n=r.depth,i=r.index;if(t.circle){var a=Math.min(h.w/2/W,h.h/2/W),o=(a=Math.max(a,O))*n+a-(W>0&&x[0].length<=3?a/2:0),s=2*Math.PI/x[n].length*i;return 0===n&&1===x[0].length&&(o=1),{x:Q+o*Math.cos(s),y:J+o*Math.sin(s)}}var l=x[n].length,c=Math.max(1===l?0:u?(h.w-2*t.padding-ee.w)/((t.grid?re:l)-1):(h.w-2*t.padding-ee.w)/((t.grid?re:l)+1),O);return{x:Q+(i+1-(l+1)/2)*c,y:J+(n+1-(W+1)/2)*te}}),"getPosition");return n.nodes().layoutPositions(this,t,ne),this};var Fc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function $c(e){this.options=fe({},Fc,e)}s($c,"CircleLayout"),$c.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=n.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var o,l=Dr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:l.x1+l.w/2,y:l.y1+l.h/2},c=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),h=0,d=0;d<a.length;d++){var f=a[d].layoutDimensions(t),p=f.w,g=f.h;h=Math.max(h,p,g)}if(o=U(t.radius)?t.radius:a.length<=1?0:Math.min(l.h,l.w)/2-h,a.length>1&&t.avoidOverlap){h*=1.75;var m=Math.cos(c)-Math.cos(0),y=Math.sin(c)-Math.sin(0),v=Math.sqrt(h*h/(m*m+y*y));o=Math.max(v,o)}var x=s((function(e,r){var n=t.startAngle+r*c*(i?1:-1),a=o*Math.cos(n),s=o*Math.sin(n);return{x:u.x+a,y:u.y+s}}),"getPos");return n.nodes().layoutPositions(this,t,x),this};var zc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:s((function(e){return e.degree()}),"concentric"),levelWidth:s((function(e){return e.maxDegree()/4}),"levelWidth"),animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function Uc(e){this.options=fe({},zc,e)}s(Uc,"ConcentricLayout"),Uc.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=e.cy,i=t.eles,a=i.nodes().not(":parent"),o=Dr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<a.length;c++){var h,d=a[c];h=t.concentric(d),l.push({value:h,node:d}),d._private.scratch.concentric=h}a.updateStyle();for(var f=0;f<a.length;f++){var p=a[f].layoutDimensions(t);u=Math.max(u,p.w,p.h)}l.sort((function(e,t){return t.value-e.value}));for(var g=t.levelWidth(a),m=[[]],y=m[0],v=0;v<l.length;v++){var x=l[v];if(y.length>0)Math.abs(y[0].value-x.value)>=g&&(y=[],m.push(y));y.push(x)}var b=u+t.minNodeSpacing;if(!t.avoidOverlap){var T=m.length>0&&m[0].length>1,C=(Math.min(o.w,o.h)/2-b)/(m.length+T?1:0);b=Math.min(b,C)}for(var w=0,k=0;k<m.length;k++){var E=m[k],_=void 0===t.sweep?2*Math.PI-2*Math.PI/E.length:t.sweep,A=E.dTheta=_/Math.max(1,E.length-1);if(E.length>1&&t.avoidOverlap){var S=Math.cos(A)-Math.cos(0),R=Math.sin(A)-Math.sin(0),N=Math.sqrt(b*b/(S*S+R*R));w=Math.max(N,w)}E.r=w,w+=b}if(t.equidistant){for(var L=0,I=0,M=0;M<m.length;M++){var O=m[M].r-I;L=Math.max(L,O)}I=0;for(var P=0;P<m.length;P++){var D=m[P];0===P&&(I=D.r),D.r=I,I+=L}}for(var B={},F=0;F<m.length;F++)for(var $=m[F],z=$.dTheta,U=$.r,G=0;G<$.length;G++){var j=$[G],V=t.startAngle+(r?1:-1)*z*G,W={x:s.x+U*Math.cos(V),y:s.y+U*Math.sin(V)};B[j.node.id()]=W}return i.nodes().layoutPositions(this,t,(function(e){var t=e.id();return B[t]})),this};var Gc,jc={ready:s((function(){}),"ready"),stop:s((function(){}),"stop"),animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:s((function(e){return 2048}),"nodeRepulsion"),nodeOverlap:4,idealEdgeLength:s((function(e){return 32}),"idealEdgeLength"),edgeElasticity:s((function(e){return 32}),"edgeElasticity"),nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Vc(e){this.options=fe({},jc,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges().filter((function(e){var r=e.source().data("id"),n=e.target().data("id"),i=t.some((function(e){return e.data("id")===r})),a=t.some((function(e){return e.data("id")===n}));return!i||!a}));this.options.eles=this.options.eles.not(r)}s(Vc,"CoseLayout"),Vc.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(!0===e.animate||!1===e.animate)&&r.emit({type:"layoutstart",layout:r}),Gc=!0===e.debug;var n=Wc(t,r,e);Gc&&undefined(n),e.randomize&&Yc(n);var i=ft(),a=s((function(){Kc(n,t,e),!0===e.fit&&t.fit(e.padding)}),"refresh"),o=s((function(t){return!(r.stopped||t>=e.numIter||(Zc(n,e),n.temperature=n.temperature*e.coolingFactor,n.temperature<e.minTemp))}),"mainLoop"),l=s((function(){if(!0===e.animate||!1===e.animate)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),i=Xc(n,e,t);t.layoutPositions(r,e,i)}}),"done"),u=0,c=!0;if(!0===e.animate){var h=s((function t(){for(var r=0;c&&r<e.refresh;)c=o(u),u++,r++;c?(ft()-i>=e.animationThreshold&&a(),dt(t)):(uh(n,e),l())}),"frame");h()}else{for(;c;)c=o(u),u++;uh(n,e),l()}return this},Vc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Vc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Wc=s((function(e,t,r){for(var n=r.eles.edges(),i=r.eles.nodes(),a=Dr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},s=r.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],h=0;h<c.length;h++){l[c[h].id()]=u}for(u=0;u<o.nodeSize;u++){var d=(y=i[u]).layoutDimensions(r);(M={}).isLocked=y.locked(),M.id=y.data("id"),M.parentId=y.data("parent"),M.cmptId=l[y.id()],M.children=[],M.positionX=y.position("x"),M.positionY=y.position("y"),M.offsetX=0,M.offsetY=0,M.height=d.w,M.width=d.h,M.maxX=M.positionX+M.width/2,M.minX=M.positionX-M.width/2,M.maxY=M.positionY+M.height/2,M.minY=M.positionY-M.height/2,M.padLeft=parseFloat(y.style("padding")),M.padRight=parseFloat(y.style("padding")),M.padTop=parseFloat(y.style("padding")),M.padBottom=parseFloat(y.style("padding")),M.nodeRepulsion=B(r.nodeRepulsion)?r.nodeRepulsion(y):r.nodeRepulsion,o.layoutNodes.push(M),o.idToIndex[M.id]=u}var f=[],p=0,g=-1,m=[];for(u=0;u<o.nodeSize;u++){var y,v=(y=o.layoutNodes[u]).parentId;null!=v?o.layoutNodes[o.idToIndex[v]].children.push(y.id):(f[++g]=y.id,m.push(y.id))}for(o.graphSet.push(m);p<=g;){var x=f[p++],b=o.idToIndex[x],T=o.layoutNodes[b].children;if(T.length>0){o.graphSet.push(T);for(u=0;u<T.length;u++)f[++g]=T[u]}}for(u=0;u<o.graphSet.length;u++){var C=o.graphSet[u];for(h=0;h<C.length;h++){var w=o.idToIndex[C[h]];o.indexToGraph[w]=u}}for(u=0;u<o.edgeSize;u++){var k=n[u],E={};E.id=k.data("id"),E.sourceId=k.data("source"),E.targetId=k.data("target");var _=B(r.idealEdgeLength)?r.idealEdgeLength(k):r.idealEdgeLength,A=B(r.edgeElasticity)?r.edgeElasticity(k):r.edgeElasticity,S=o.idToIndex[E.sourceId],R=o.idToIndex[E.targetId];if(o.indexToGraph[S]!=o.indexToGraph[R]){for(var N=Hc(E.sourceId,E.targetId,o),L=o.graphSet[N],I=0,M=o.layoutNodes[S];-1===L.indexOf(M.id);)M=o.layoutNodes[o.idToIndex[M.parentId]],I++;for(M=o.layoutNodes[R];-1===L.indexOf(M.id);)M=o.layoutNodes[o.idToIndex[M.parentId]],I++;_*=I*r.nestingFactor}E.idealLength=_,E.elasticity=A,o.layoutEdges.push(E)}return o}),"createLayoutInfo"),Hc=s((function(e,t,r){var n=qc(e,t,0,r);return 2>n.count?0:n.graph}),"findLCA"),qc=s((function e(t,r,n,i){var a=i.graphSet[n];if(-1<a.indexOf(t)&&-1<a.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var l=a[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=e(t,r,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2===++o)break}}}return{count:o,graph:n}}),"findLCA_aux"),Yc=s((function(e,t){for(var r=e.clientWidth,n=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0===a.children.length&&!a.isLocked&&(a.positionX=Math.random()*r,a.positionY=Math.random()*n)}}),"randomizePositions"),Xc=s((function(e,t,r){var n=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach((function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,r.positionX),i.x2=Math.max(i.x2,r.positionX),i.y1=Math.min(i.y1,r.positionY),i.y2=Math.max(i.y2,r.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(r,a){var o=e.layoutNodes[e.idToIndex[r.data("id")]];if(t.boundingBox){var s=(o.positionX-i.x1)/i.w,l=(o.positionY-i.y1)/i.h;return{x:n.x1+s*n.w,y:n.y1+l*n.h}}return{x:o.positionX,y:o.positionY}}}),"getScaleInBoundsFn"),Kc=s((function(e,t,r){var n=r.layout,i=r.eles.nodes(),a=Xc(e,r,i);i.positions(a),!0!==e.ready&&(e.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))}),"refreshPositions"),Zc=s((function(e,t,r){Qc(e,t),nh(e),ih(e,t),ah(e),oh(e)}),"step"),Qc=s((function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var n=e.graphSet[r],i=n.length,a=0;a<i;a++)for(var o=e.layoutNodes[e.idToIndex[n[a]]],s=a+1;s<i;s++){var l=e.layoutNodes[e.idToIndex[n[s]]];eh(o,l,e,t)}}),"calculateNodeForces"),Jc=s((function(e){return-e+2*e*Math.random()}),"randomDistance"),eh=s((function(e,t,r,n){if(e.cmptId===t.cmptId||r.isCompound){var i=t.positionX-e.positionX,a=t.positionY-e.positionY;0===i&&0===a&&(i=Jc(1),a=Jc(1));var o=th(e,t,i,a);if(o>0)var s=(u=n.nodeOverlap*o)*i/(g=Math.sqrt(i*i+a*a)),l=u*a/g;else{var u,c=rh(e,i,a),h=rh(t,-1*i,-1*a),d=h.x-c.x,f=h.y-c.y,p=d*d+f*f,g=Math.sqrt(p);s=(u=(e.nodeRepulsion+t.nodeRepulsion)/p)*d/g,l=u*f/g}e.isLocked||(e.offsetX-=s,e.offsetY-=l),t.isLocked||(t.offsetX+=s,t.offsetY+=l)}}),"nodeRepulsion"),th=s((function(e,t,r,n){if(r>0)var i=e.maxX-t.minX;else i=t.maxX-e.minX;if(n>0)var a=e.maxY-t.minY;else a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0}),"nodesOverlap"),rh=s((function(e,t,r){var n=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=r/t,l=a/o,u={};return 0===t&&0<r||0===t&&0>r?(u.x=n,u.y=i+a/2,u):0<t&&-1*l<=s&&s<=l?(u.x=n+o/2,u.y=i+o*r/2/t,u):0>t&&-1*l<=s&&s<=l?(u.x=n-o/2,u.y=i-o*r/2/t,u):0<r&&(s<=-1*l||s>=l)?(u.x=n+a*t/2/r,u.y=i+a/2,u):(0>r&&(s<=-1*l||s>=l)&&(u.x=n-a*t/2/r,u.y=i-a/2),u)}),"findClippingPoint"),nh=s((function(e,t){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],i=e.idToIndex[n.sourceId],a=e.layoutNodes[i],o=e.idToIndex[n.targetId],s=e.layoutNodes[o],l=s.positionX-a.positionX,u=s.positionY-a.positionY;if(0!==l||0!==u){var c=rh(a,l,u),h=rh(s,-1*l,-1*u),d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f),g=Math.pow(n.idealLength-p,2)/n.elasticity;if(0!==p)var m=g*d/p,y=g*f/p;else m=0,y=0;a.isLocked||(a.offsetX+=m,a.offsetY+=y),s.isLocked||(s.offsetX-=m,s.offsetY-=y)}}}),"calculateEdgeForces"),ih=s((function(e,t){if(0!==t.gravity)for(var r=0;r<e.graphSet.length;r++){var n=e.graphSet[r],i=n.length;if(0===r)var a=e.clientHeight/2,o=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[n[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]];a=l.positionX,o=l.positionY}for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[n[u]]];if(!c.isLocked){var h=a-c.positionX,d=o-c.positionY,f=Math.sqrt(h*h+d*d);if(f>1){var p=t.gravity*h/f,g=t.gravity*d/f;c.offsetX+=p,c.offsetY+=g}}}}}),"calculateGravityForces"),ah=s((function(e,t){var r=[],n=0,i=-1;for(r.push.apply(r,e.graphSet[0]),i+=e.graphSet[0].length;n<=i;){var a=r[n++],o=e.idToIndex[a],s=e.layoutNodes[o],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,r[++i]=l[h]}s.offsetX=0,s.offsetY=0}}}),"propagateForces"),oh=s((function(e,t){for(var r=0;r<e.nodeSize;r++){0<(i=e.layoutNodes[r]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(r=0;r<e.nodeSize;r++){if(!(0<(i=e.layoutNodes[r]).children.length||i.isLocked)){var n=sh(i.offsetX,i.offsetY,e.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,lh(i,e)}}for(r=0;r<e.nodeSize;r++){var i;0<(i=e.layoutNodes[r]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}}),"updatePositions"),sh=s((function(e,t,r){var n=Math.sqrt(e*e+t*t);if(n>r)var i={x:r*e/n,y:r*t/n};else i={x:e,y:t};return i}),"limitForce"),lh=s((function e(t,r){var n=t.parentId;if(null!=n){var i=r.layoutNodes[r.idToIndex[n]],a=!1;if((null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,a=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,a=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,a=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,a=!0),a)return e(i,r)}}),"updateAncestryBoundaries"),uh=s((function(e,t){for(var r=e.layoutNodes,n=[],i=0;i<r.length;i++){var a=r[i],o=a.cmptId;(n[o]=n[o]||[]).push(a)}var s=0;for(i=0;i<n.length;i++){if(g=n[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var u=g[l];g.x1=Math.min(g.x1,u.positionX-u.width/2),g.x2=Math.max(g.x2,u.positionX+u.width/2),g.y1=Math.min(g.y1,u.positionY-u.height/2),g.y2=Math.max(g.y2,u.positionY+u.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}}n.sort((function(e,t){return t.w*t.h-e.w*e.h}));var c=0,h=0,d=0,f=0,p=Math.sqrt(s)*e.clientWidth/e.clientHeight;for(i=0;i<n.length;i++){var g;if(g=n[i]){for(l=0;l<g.length;l++){(u=g[l]).isLocked||(u.positionX+=c-g.x1,u.positionY+=h-g.y1)}c+=g.w+t.componentSpacing,d+=g.w+t.componentSpacing,f=Math.max(f,g.h),d>p&&(h+=f+t.componentSpacing,c=0,d=0,f=0)}}}),"separateComponents"),ch={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:s((function(e){}),"position"),sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function hh(e){this.options=fe({},ch,e)}s(hh,"GridLayout"),hh.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=n.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var a=Dr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)n.nodes().layoutPositions(this,t,(function(e){return{x:a.x1,y:a.y1}}));else{var o=i.size(),l=Math.sqrt(o*a.h/a.w),u=Math.round(l),c=Math.round(a.w/a.h*l),h=s((function(e){if(null==e)return Math.min(u,c);Math.min(u,c)==u?u=e:c=e}),"small"),d=s((function(e){if(null==e)return Math.max(u,c);Math.max(u,c)==u?u=e:c=e}),"large"),f=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=p)u=f,c=p;else if(null!=f&&null==p)u=f,c=Math.ceil(o/u);else if(null==f&&null!=p)c=p,u=Math.ceil(o/c);else if(c*u>o){var g=h(),m=d();(g-1)*m>=o?h(g-1):(m-1)*g>=o&&d(m-1)}else for(;c*u<o;){var y=h(),v=d();(v+1)*y>=o?d(v+1):h(y+1)}var x=a.w/c,b=a.h/u;if(t.condense&&(x=0,b=0),t.avoidOverlap)for(var T=0;T<i.length;T++){var C=i[T],w=C._private.position;(null==w.x||null==w.y)&&(w.x=0,w.y=0);var k=C.layoutDimensions(t),E=t.avoidOverlapPadding,_=k.w+E,A=k.h+E;x=Math.max(x,_),b=Math.max(b,A)}for(var S={},R=s((function(e,t){return!!S["c-"+e+"-"+t]}),"used"),N=s((function(e,t){S["c-"+e+"-"+t]=!0}),"use"),L=0,I=0,M=s((function(){++I>=c&&(I=0,L++)}),"moveToNextCell"),O={},P=0;P<i.length;P++){var D=i[P],B=t.position(D);if(B&&(void 0!==B.row||void 0!==B.col)){var F={row:B.row,col:B.col};if(void 0===F.col)for(F.col=0;R(F.row,F.col);)F.col++;else if(void 0===F.row)for(F.row=0;R(F.row,F.col);)F.row++;O[D.id()]=F,N(F.row,F.col)}}var $=s((function(e,t){var r,n;if(e.locked()||e.isParent())return!1;var i=O[e.id()];if(i)r=i.col*x+x/2+a.x1,n=i.row*b+b/2+a.y1;else{for(;R(L,I);)M();r=I*x+x/2+a.x1,n=L*b+b/2+a.y1,N(L,I),M()}return{x:r,y:n}}),"getPos");i.layoutPositions(this,t,$)}return this};var dh={ready:s((function(){}),"ready"),stop:s((function(){}),"stop")};function fh(e){this.options=fe({},dh,e)}s(fh,"NullLayout"),fh.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},fh.prototype.stop=function(){return this};var ph={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function gh(e){this.options=fe({},ph,e)}s(gh,"PresetLayout"),gh.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=B(e.positions);function n(t){return null==e.positions?yr(t.position()):r?e.positions(t):e.positions[t._private.data.id]??null}return s(n,"getPosition"),t.layoutPositions(this,e,(function(e,t){var r=n(e);return!e.locked()&&null!=r&&r})),this};var mh={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:s((function(e,t){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:s((function(e,t){return t}),"transform")};function yh(e){this.options=fe({},mh,e)}s(yh,"RandomLayout"),yh.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=Dr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),i=s((function(e,t){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}}),"getPos");return r.nodes().layoutPositions(this,e,i),this};var vh=[{name:"breadthfirst",impl:Bc},{name:"circle",impl:$c},{name:"concentric",impl:Uc},{name:"cose",impl:Vc},{name:"grid",impl:hh},{name:"null",impl:fh},{name:"preset",impl:gh},{name:"random",impl:yh}];function xh(e){this.options=e,this.notifications=0}s(xh,"NullRenderer");var bh=s((function(){}),"noop"),Th=s((function(){throw new Error("A headless instance can not render images")}),"throwImgErr");xh.prototype={recalculateRenderedStyle:bh,notify:s((function(){this.notifications++}),"notify"),init:bh,isHeadless:s((function(){return!0}),"isHeadless"),png:Th,jpg:Th};var Ch={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=s((function(e,t,r,n,i,a,o){var s=i.x-r/2-o,l=i.x+r/2+o,u=i.y-r/2-o,c=i.y+r/2+o;return s<=e&&e<=l&&u<=t&&t<=c}),"bbCollide"),n=s((function(e,t,r,n,i){var a=e*Math.cos(n)-t*Math.sin(n),o=(e*Math.sin(n)+t*Math.cos(n))*r;return{x:a*r+i.x,y:o+i.y}}),"transform"),i=s((function(e,t,r,i){for(var a=[],o=0;o<e.length;o+=2){var s=e[o],l=e[o+1];a.push(n(s,l,t,r,i))}return a}),"transformPoints"),a=s((function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.x,n.y)}return t}),"pointsToArr"),o=s((function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2}),"standardGap"),l=s((function(n,l){D(l)&&(l=e[l]),e[n]=fe({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:s((function(e,t,r,n,o,s){var l=a(i(this.points,r+2*s,n,o));return rn(e,t,l)}),"collide"),roughCollide:r,draw:s((function(e,r,n,a){var o=i(this.points,r,n,a);t.arrowShapeImpl("polygon")(e,o)}),"draw"),spacing:s((function(e){return 0}),"spacing"),gap:o},l)}),"defineArrowShape");l("none",{collide:Lt,roughCollide:Lt,draw:Mt,spacing:It,gap:It}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:s((function(e,r,a,o,s){var l=i(this.points,r,a,o),u=this.controlPoint,c=n(u[0],u[1],r,a,o);t.arrowShapeImpl(this.name)(e,l,c)}),"draw"),gap:s((function(e){return.8*o(e)}),"gap")}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:s((function(e,t,r,n,o,s,l){var u=a(i(this.points,r+2*l,n,o)),c=a(i(this.pointsTee,r+2*l,n,o));return rn(e,t,u)||rn(e,t,c)}),"collide"),draw:s((function(e,r,n,a,o){var s=i(this.points,r,n,a),l=i(this.pointsTee,r,n,a);t.arrowShapeImpl(this.name)(e,s,l)}),"draw")}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:s((function(e,t,r,n,o,s,l){var u=o,c=Math.pow(u.x-e,2)+Math.pow(u.y-t,2)<=Math.pow((r+2*l)*this.radius,2),h=a(i(this.points,r+2*l,n,o));return rn(e,t,h)||c}),"collide"),draw:s((function(e,r,n,a,o){var s=i(this.pointsTr,r,n,a);t.arrowShapeImpl(this.name)(e,s,a.x,a.y,this.radius*r)}),"draw"),spacing:s((function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}),"spacing")}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:s((function(e,t){var r=this.baseCrossLinePts.slice(),n=t/e;return r[3]=r[3]-n,r[5]=r[5]-n,r}),"crossLinePts"),collide:s((function(e,t,r,n,o,s,l){var u=a(i(this.points,r+2*l,n,o)),c=a(i(this.crossLinePts(r,s),r+2*l,n,o));return rn(e,t,u)||rn(e,t,c)}),"collide"),draw:s((function(e,r,n,a,o){var s=i(this.points,r,n,a),l=i(this.crossLinePts(r,o),r,n,a);t.arrowShapeImpl(this.name)(e,s,l)}),"draw")}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:s((function(e){return.525*o(e)}),"gap")}),l("circle",{radius:.15,collide:s((function(e,t,r,n,i,a,o){var s=i;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((r+2*o)*this.radius,2)}),"collide"),draw:s((function(e,r,n,i,a){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*r)}),"draw"),spacing:s((function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}),"spacing")}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:s((function(e){return 1}),"spacing"),gap:s((function(e){return 1}),"gap")}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:s((function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}),"gap")}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:s((function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}),"gap")})}},wh={projectIntoViewport:function(e,t){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=r.pan(),l=r.zoom();return[((e-i)/o-s.x)/l,((t-a)/o-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),n=s((function(e){return parseFloat(r.getPropertyValue(e))}),"styleValue"),i=n("padding-left"),a=n("padding-right"),o=n("padding-top"),l=n("padding-bottom"),u=n("border-left-width"),c=n("border-right-width"),h=n("border-top-width"),d=(n("border-bottom-width"),e.clientWidth),f=e.clientHeight,p=i+a,g=o+l,m=u+c,y=t.width/(d+m),v=d-p,x=f-g,b=t.left+i+u,T=t.top+o+h;return this.containerBB=[b,T,v,x,y]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},findNearestElements:function(e,t,r,n){var i,a,o=this,l=this,u=l.getCachedZSortedEles(),c=[],h=l.cy.zoom(),d=l.cy.hasCompoundNodes(),f=(n?24:8)/h,p=(n?8:2)/h,g=(n?8:2)/h,m=1/0;function y(e,t){if(e.isNode()){if(a)return;a=e,c.push(e)}if(e.isEdge()&&(null==t||t<m))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<c.length;r++)if(c[r].isEdge()){c[r]=e,i=e,m=t??m;break}}else c.push(e),i=e,m=t??m}function v(r){var n=r.outerWidth()+2*p,i=r.outerHeight()+2*p,a=n/2,s=i/2,u=r.position(),c="auto"===r.pstyle("corner-radius").value?"auto":r.pstyle("corner-radius").pfValue,h=r._private.rscratch;if(u.x-a<=e&&e<=u.x+a&&u.y-s<=t&&t<=u.y+s&&l.nodeShapes[o.getNodeShape(r)].checkPoint(e,t,0,n,i,u.x,u.y,c,h))return y(r,0),!0}function x(r){var n,i=r._private,a=i.rscratch,s=r.pstyle("width").pfValue,u=r.pstyle("arrow-scale").value,h=s/2+f,p=h*h,g=2*h,m=i.source,x=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var b=a.allpts,T=0;T+3<b.length;T+=2)if(Kr(e,t,b[T],b[T+1],b[T+2],b[T+3],g)&&p>(n=tn(e,t,b[T],b[T+1],b[T+2],b[T+3])))return y(r,n),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(b=a.allpts,T=0;T+5<a.allpts.length;T+=4)if(Zr(e,t,b[T],b[T+1],b[T+2],b[T+3],b[T+4],b[T+5],g)&&p>(n=en(e,t,b[T],b[T+1],b[T+2],b[T+3],b[T+4],b[T+5])))return y(r,n),!0;m=m||i.source,x=x||i.target;var C=o.getArrowWidth(s,u),w=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(T=0;T<w.length;T++){var k=w[T],E=l.arrowShapes[r.pstyle(k.name+"-arrow-shape").value],_=r.pstyle("width").pfValue;if(E.roughCollide(e,t,C,k.angle,{x:k.x,y:k.y},_,f)&&E.collide(e,t,C,k.angle,{x:k.x,y:k.y},_,f))return y(r),!0}d&&c.length>0&&(v(m),v(x))}function b(e,t,r){return qt(e,t,r)}function T(r,n){var i,a=r._private,o=g;i=n?n+"-":"",r.boundingBox();var l=a.labelBounds[n||"main"],u=r.pstyle(i+"label").value;if("yes"===r.pstyle("text-events").strValue&&u){var c=b(a.rscratch,"labelX",n),h=b(a.rscratch,"labelY",n),d=b(a.rscratch,"labelAngle",n),f=r.pstyle(i+"text-margin-x").pfValue,p=r.pstyle(i+"text-margin-y").pfValue,m=l.x1-o-f,v=l.x2+o-f,x=l.y1-o-p,T=l.y2+o-p;if(d){var C=Math.cos(d),w=Math.sin(d),k=s((function(e,t){return{x:(e-=c)*C-(t-=h)*w+c,y:e*w+t*C+h}}),"rotate"),E=k(m,x),_=k(m,T),A=k(v,x),S=k(v,T),R=[E.x+f,E.y+p,A.x+f,A.y+p,S.x+f,S.y+p,_.x+f,_.y+p];if(rn(e,t,R))return y(r),!0}else if(Hr(l,e,t))return y(r),!0}}r&&(u=u.interactive),s(y,"addEle"),s(v,"checkNode"),s(x,"checkEdge"),s(b,"preprop"),s(T,"checkLabel");for(var C=u.length-1;C>=0;C--){var w=u[C];w.isNode()?v(w)||T(w):x(w)||T(w)||T(w,"source")||T(w,"target")}return c},getAllInBox:function(e,t,r,n){for(var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(e,r),s=Math.max(e,r),l=Math.min(t,n),u=Math.max(t,n),c=Dr({x1:e=o,y1:t=l,x2:r=s,y2:n=u}),h=0;h<i.length;h++){var d=i[h];if(d.isNode()){var f=d,p=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Wr(c,p)&&!Yr(p,c)&&a.push(f)}else{var g=d,m=g._private,y=m.rscratch;if(null!=y.startX&&null!=y.startY&&!Hr(c,y.startX,y.startY)||null!=y.endX&&null!=y.endY&&!Hr(c,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var v=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,x=!0,b=0;b<v.length;b++)if(!qr(c,v[b])){x=!1;break}x&&a.push(g)}else("haystack"===y.edgeType||"straight"===y.edgeType)&&a.push(g)}}return a}},kh={calculateArrowAngles:function(e){var t,r,n,i,a,o,s=e._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;if(l?(n=s.haystackPts[0],i=s.haystackPts[1],a=s.haystackPts[2],o=s.haystackPts[3]):(n=s.arrowStartX,i=s.arrowStartY,a=s.arrowEndX,o=s.arrowEndY),g=s.midX,m=s.midY,h)t=n-s.segpts[0],r=i-s.segpts[1];else if(c||d||f||u){var p=s.allpts;t=n-Ir(p[0],p[2],p[4],.1),r=i-Ir(p[1],p[3],p[5],.1)}else t=n-g,r=i-m;s.srcArrowAngle=_r(t,r);var g=s.midX,m=s.midY;if(l&&(g=(n+a)/2,m=(i+o)/2),t=a-n,r=o-i,h)if((p=s.allpts).length/2%2==0){var y=(E=p.length/2)-2;t=p[E]-p[y],r=p[E+1]-p[y+1]}else if(s.isRound)t=s.midVector[1],r=-s.midVector[0];else{y=(E=p.length/2-1)-2;t=p[E]-p[y],r=p[E+1]-p[y+1]}else if(c||d||f){var v,x,b,T,p=s.allpts;if(s.ctrlpts.length/2%2==0){var C=(w=(k=p.length/2-1)+2)+2;v=Ir(p[k],p[w],p[C],0),x=Ir(p[k+1],p[w+1],p[C+1],0),b=Ir(p[k],p[w],p[C],1e-4),T=Ir(p[k+1],p[w+1],p[C+1],1e-4)}else{var w,k;C=(w=p.length/2-1)+2;v=Ir(p[k=w-2],p[w],p[C],.4999),x=Ir(p[k+1],p[w+1],p[C+1],.4999),b=Ir(p[k],p[w],p[C],.5),T=Ir(p[k+1],p[w+1],p[C+1],.5)}t=b-v,r=T-x}if((s.midtgtArrowAngle=_r(t,r),s.midDispX=t,s.midDispY=r,t*=-1,r*=-1,h)&&((p=s.allpts).length/2%2!=0&&!s.isRound)){var E,_=(E=p.length/2-1)+2;t=-(p[_]-p[E]),r=-(p[_+1]-p[E+1])}if(s.midsrcArrowAngle=_r(t,r),h)t=a-s.segpts[s.segpts.length-2],r=o-s.segpts[s.segpts.length-1];else if(c||d||f||u){var A=(p=s.allpts).length;t=a-Ir(p[A-6],p[A-4],p[A-2],.9),r=o-Ir(p[A-5],p[A-3],p[A-1],.9)}else t=a-g,r=o-m;s.tgtArrowAngle=_r(t,r)}};kh.getArrowWidth=kh.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=n,n)};var Eh,_h,Ah,Sh,Rh,Nh,Lh,Ih,Mh,Oh,Ph,Dh,Bh,Fh,$h,zh,Uh,Gh={},jh={},Vh=s((function(e,t,r){r.x=t.x-e.x,r.y=t.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)}),"asVec"),Wh=s((function(e,t){t.x=-1*e.x,t.y=-1*e.y,t.nx=-1*e.nx,t.ny=-1*e.ny,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang}),"invertVec"),Hh=s((function(e,t,r,n,i){if(e!==Uh?Vh(t,e,Gh):Wh(jh,Gh),Vh(t,r,jh),Ah=Gh.nx*jh.ny-Gh.ny*jh.nx,Sh=Gh.nx*jh.nx-Gh.ny*-jh.ny,Lh=Math.asin(Math.max(-1,Math.min(1,Ah))),Math.abs(Lh)<1e-6)return Eh=t.x,_h=t.y,void(Mh=Ph=0);Rh=1,Nh=!1,Sh<0?Lh<0?Lh=Math.PI+Lh:(Lh=Math.PI-Lh,Rh=-1,Nh=!0):Lh>0&&(Rh=-1,Nh=!0),Ph=void 0!==t.radius?t.radius:n,Ih=Lh/2,Dh=Math.min(Gh.len/2,jh.len/2),i?(Oh=Math.abs(Math.cos(Ih)*Ph/Math.sin(Ih)))>Dh?(Oh=Dh,Mh=Math.abs(Oh*Math.sin(Ih)/Math.cos(Ih))):Mh=Ph:(Oh=Math.min(Dh,Ph),Mh=Math.abs(Oh*Math.sin(Ih)/Math.cos(Ih))),$h=t.x+jh.nx*Oh,zh=t.y+jh.ny*Oh,Eh=$h-jh.ny*Mh*Rh,_h=zh+jh.nx*Mh*Rh,Bh=t.x+Gh.nx*Oh,Fh=t.y+Gh.ny*Oh,Uh=t}),"calcCornerArc");function qh(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Yh(e,t,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===n||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Hh(e,t,r,n,i),{cx:Eh,cy:_h,radius:Mh,startX:Bh,startY:Fh,stopX:$h,stopY:zh,startAngle:Gh.ang+Math.PI/2*Rh,endAngle:jh.ang-Math.PI/2*Rh,counterClockwise:Nh})}s(qh,"drawPreparedRoundCorner"),s(Yh,"getRoundCorner");var Xh={};function Kh(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];t.push({x:n,y:i})}return t}}Xh.findMidptPtsEtc=function(e,t){var r,n=t.posPts,i=t.intersectionPts,a=t.vectorNormInverse,o=e.pstyle("source-endpoint"),l=e.pstyle("target-endpoint"),u=null!=o.units&&null!=l.units,c=s((function(e,t,r,n){var i=n-t,a=r-e,o=Math.sqrt(a*a+i*i);return{x:-i/o,y:a/o}}),"recalcVectorNormInverse");switch(e.pstyle("edge-distances").value){case"node-position":r=n;break;case"intersection":r=i;break;case"endpoints":if(u){var h=v(this.manualEndptToPx(e.source()[0],o),2),d=h[0],f=h[1],p=v(this.manualEndptToPx(e.target()[0],l),2),g=p[0],m=p[1],y={x1:d,y1:f,x2:g,y2:m};a=c(d,f,g,m),r=y}else Dt("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=i}return{midptPts:r,vectorNormInverse:a}},Xh.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,i=n.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),h=s.width(),d=o.height(),f=s.height(),p=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*h*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},Xh.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),o=e.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var h=n.pfValue[c],d=i.pfValue[c],f=1-h,p=h,g=this.findMidptPtsEtc(e,t),m=g.midptPts,y=g.vectorNormInverse,v={x:m.x1*f+m.x2*p,y:m.y1*f+m.y2*p};r.segpts.push(v.x+y.x*d,v.y+y.y*d),r.radii.push(void 0!==a.pfValue[c]?a.pfValue[c]:l),r.isArcRadius.push("arc-radius"===(void 0!==o.pfValue[c]?o.pfValue[c]:u))}},Xh.findLoopPoints=function(e,t,r,n){var i=e._private.rscratch,a=t.dirCounts,o=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=r,f=h;n&&(d=0,f=l);var p=u-Math.PI/2,g=p-c/2,m=p+c/2,y=u+"_"+c;d=void 0===a[y]?a[y]=0:++a[y],i.ctrlpts=[o.x+1.4*Math.cos(g)*f*(d/3+1),o.y+1.4*Math.sin(g)*f*(d/3+1),o.x+1.4*Math.cos(m)*f*(d/3+1),o.y+1.4*Math.sin(m)*f*(d/3+1)]},Xh.findCompoundLoopPoints=function(e,t,r,n){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,o=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=r,g=h;n&&(p=0,g=f);var m={x:a.x-s/2,y:a.y-l/2},y={x:o.x-u/2,y:o.y-c/2},v={x:Math.min(m.x,y.x),y:Math.min(m.y,y.y)},x=Math.max(.5,Math.log(.01*s)),b=Math.max(.5,Math.log(.01*u));i.ctrlpts=[v.x,v.y-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*x,v.x-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*b,v.y]},Xh.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},Xh.findBezierPoints=function(e,t,r,n,i){var a=e._private.rscratch,o=e.pstyle("control-point-step-size").pfValue,s=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,h=l.value[0],d=n;a.edgeType=d?"multibezier":"bezier",a.ctrlpts=[];for(var f=0;f<u;f++){var p=(.5-t.eles.length/2+r)*o*(i?-1:1),g=void 0,m=Sr(p);d&&(c=s?s.pfValue[f]:o,h=l.value[f]);var y=void 0!==(g=n?c:void 0!==c?m*c:void 0)?g:p,v=1-h,x=h,b=this.findMidptPtsEtc(e,t),T=b.midptPts,C=b.vectorNormInverse,w={x:T.x1*v+T.x2*x,y:T.y1*v+T.y2*x};a.ctrlpts.push(w.x+C.x*y,w.y+C.y*y)}},Xh.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",l="downward",u="upward",c=t.posPts,h=t.srcW,d=t.srcH,f=t.tgtW,p=t.tgtH,g="node-position"!==e.pstyle("edge-distances").value,m=e.pstyle("taxi-direction").value,y=m,v=e.pstyle("taxi-turn"),x="%"===v.units,b=v.pfValue,T=b<0,C=e.pstyle("taxi-turn-min-distance").pfValue,w=g?(h+f)/2:0,k=g?(d+p)/2:0,E=c.x2-c.x1,_=c.y2-c.y1,A=s((function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)}),"subDWH"),S=A(E,w),R=A(_,k),N=!1;"auto"===y?m=Math.abs(S)>Math.abs(R)?i:n:y===u||y===l?(m=n,N=!0):(y===a||y===o)&&(m=i,N=!0);var L,I=m===n,M=I?R:S,O=I?_:E,P=Sr(O),D=!1;((!N||!x&&!T)&&(y===l&&O<0||y===u&&O>0||y===a&&O>0||y===o&&O<0)&&(M=(P*=-1)*Math.abs(M),D=!0),x)?L=(b<0?1+b:b)*M:L=(b<0?M:0)+b*P;var B=s((function(e){return Math.abs(e)<C||Math.abs(e)>=Math.abs(M)}),"getIsTooClose"),F=B(L),$=B(Math.abs(M)-Math.abs(L));if((F||$)&&!D)if(I){var z=Math.abs(O)<=d/2,U=Math.abs(E)<=f/2;if(z){var G=(c.x1+c.x2)/2,j=c.y1,V=c.y2;r.segpts=[G,j,G,V]}else if(U){var W=(c.y1+c.y2)/2,H=c.x1,q=c.x2;r.segpts=[H,W,q,W]}else r.segpts=[c.x1,c.y2]}else{var Y=Math.abs(O)<=h/2,X=Math.abs(_)<=p/2;if(Y){var K=(c.y1+c.y2)/2,Z=c.x1,Q=c.x2;r.segpts=[Z,K,Q,K]}else if(X){var J=(c.x1+c.x2)/2,ee=c.y1,te=c.y2;r.segpts=[J,ee,J,te]}else r.segpts=[c.x2,c.y1]}else if(I){var re=c.y1+L+(g?d/2*P:0),ne=c.x1,ie=c.x2;r.segpts=[ne,re,ie,re]}else{var ae=c.x1+L+(g?h/2*P:0),oe=c.y1,se=c.y2;r.segpts=[ae,oe,ae,se]}if(r.isRound){var le=e.pstyle("taxi-radius").value,ue="arc-radius"===e.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(le),r.isArcRadius=new Array(r.segpts.length/2).fill(ue)}},Xh.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var n=t.srcPos,i=t.tgtPos,a=t.srcW,o=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,h=t.srcCornerRadius,d=t.tgtCornerRadius,f=t.srcRs,p=t.tgtRs,g=!U(r.startX)||!U(r.startY),m=!U(r.arrowStartX)||!U(r.arrowStartY),y=!U(r.endX)||!U(r.endY),v=!U(r.arrowEndX)||!U(r.arrowEndY),x=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),b=Rr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),T=b<x,C=Rr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),w=C<x,k=!1;if(g||m||T){k=!0;var E={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},_=Math.sqrt(E.x*E.x+E.y*E.y),A={x:E.x/_,y:E.y/_},S=Math.max(a,o),R={x:r.ctrlpts[0]+2*A.x*S,y:r.ctrlpts[1]+2*A.y*S},N=u.intersectLine(n.x,n.y,a,o,R.x,R.y,0,h,f);T?(r.ctrlpts[0]=r.ctrlpts[0]+A.x*(x-b),r.ctrlpts[1]=r.ctrlpts[1]+A.y*(x-b)):(r.ctrlpts[0]=N[0]+A.x*x,r.ctrlpts[1]=N[1]+A.y*x)}if(y||v||w){k=!0;var L={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},I=Math.sqrt(L.x*L.x+L.y*L.y),M={x:L.x/I,y:L.y/I},O=Math.max(a,o),P={x:r.ctrlpts[0]+2*M.x*O,y:r.ctrlpts[1]+2*M.y*O},D=c.intersectLine(i.x,i.y,s,l,P.x,P.y,0,d,p);w?(r.ctrlpts[0]=r.ctrlpts[0]+M.x*(x-C),r.ctrlpts[1]=r.ctrlpts[1]+M.y*(x-C)):(r.ctrlpts[0]=D[0]+M.x*x,r.ctrlpts[1]=D[1]+M.y*x)}k&&this.findEndpoints(e)}},Xh.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var n;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,t.midX=Ir(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=Ir(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var a=t.radii[i/2-1],o=t.isArcRadius[i/2-1];t.roundCorners.push(Yh({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:a},{x:t.allpts[i+2],y:t.allpts[i+3]},a,o))}}if(t.segpts.length%4==0){var s=t.segpts.length/2,l=s-2;t.midX=(t.segpts[l]+t.segpts[s])/2,t.midY=(t.segpts[l+1]+t.segpts[s+1])/2}else{var u=t.segpts.length/2-1;if(t.isRound){var c={x:t.segpts[u],y:t.segpts[u+1]},h=t.roundCorners[u/2],d=[c.x-h.cx,c.y-h.cy],f=h.radius/Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2));d=d.map((function(e){return e*f})),t.midX=h.cx+d[0],t.midY=h.cy+d[1],t.midVector=d}else t.midX=t.segpts[u],t.midY=t.segpts[u+1]}}},Xh.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||U(t.startX)&&U(t.startY)&&U(t.endX)&&U(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Dt("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Xh.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,n=r.cy.hasCompoundNodes(),i={map:new Kt,get:s((function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null}),"get"),set:s((function(e,t){var r=this.map.get(e[0]);null==r&&(r=new Kt,this.map.set(e[0],r)),r.set(e[1],t)}),"set")},a=[],o=[],l=0;l<e.length;l++){var u=e[l],c=u._private,h=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace()){if("haystack"===h){o.push(u);continue}var d="unbundled-bezier"===h||h.endsWith("segments")||"straight"===h||"straight-triangle"===h||h.endsWith("taxi"),f="unbundled-bezier"===h||"bezier"===h,p=c.source,g=c.target,m=[p.poolIndex(),g.poolIndex()].sort(),y=i.get(m);null==y&&(y={eles:[]},i.set(m,y),a.push(m)),y.eles.push(u),d&&(y.hasUnbundled=!0),f&&(y.hasBezier=!0)}}for(var v=s((function(e){var o=a[e],s=i.get(o),l=void 0;if(!s.hasUnbundled){var u=s.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));Wt(s.eles),u.forEach((function(e){return s.eles.push(e)})),s.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var c=s.eles[0],h=c.source(),d=c.target();if(h.poolIndex()>d.poolIndex()){var f=h;h=d,d=f}var p=s.srcPos=h.position(),g=s.tgtPos=d.position(),m=s.srcW=h.outerWidth(),y=s.srcH=h.outerHeight(),v=s.tgtW=d.outerWidth(),x=s.tgtH=d.outerHeight(),b=s.srcShape=r.nodeShapes[t.getNodeShape(h)],T=s.tgtShape=r.nodeShapes[t.getNodeShape(d)],C=s.srcCornerRadius="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue,w=s.tgtCornerRadius="auto"===d.pstyle("corner-radius").value?"auto":d.pstyle("corner-radius").pfValue,k=s.tgtRs=d._private.rscratch,E=s.srcRs=h._private.rscratch;s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _=0;_<s.eles.length;_++){var A=s.eles[_],S=A[0]._private.rscratch,R=A.pstyle("curve-style").value,N="unbundled-bezier"===R||R.endsWith("segments")||R.endsWith("taxi"),L=!h.same(A.source());if(!s.calculatedIntersection&&h!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var I=b.intersectLine(p.x,p.y,m,y,g.x,g.y,0,C,E),M=s.srcIntn=I,O=T.intersectLine(g.x,g.y,v,x,p.x,p.y,0,w,k),P=s.tgtIntn=O,D=s.intersectionPts={x1:I[0],x2:O[0],y1:I[1],y2:O[1]},B=s.posPts={x1:p.x,x2:g.x,y1:p.y,y2:g.y},F=O[1]-I[1],$=O[0]-I[0],z=Math.sqrt($*$+F*F),G=s.vector={x:$,y:F},j=s.vectorNorm={x:G.x/z,y:G.y/z},V={x:-j.y,y:j.x};s.nodesOverlap=!U(z)||T.checkPoint(I[0],I[1],0,v,x,g.x,g.y,w,k)||b.checkPoint(O[0],O[1],0,m,y,p.x,p.y,C,E),s.vectorNormInverse=V,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,srcRs:k,tgtPos:p,tgtRs:E,srcW:v,srcH:x,tgtW:m,tgtH:y,srcIntn:P,tgtIntn:M,srcShape:T,tgtShape:b,posPts:{x1:B.x2,y1:B.y2,x2:B.x1,y2:B.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-G.x,y:-G.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-V.x,y:-V.y}}}var W=L?l:s;S.nodesOverlap=W.nodesOverlap,S.srcIntn=W.srcIntn,S.tgtIntn=W.tgtIntn,S.isRound=R.startsWith("round"),n&&(h.isParent()||h.isChild()||d.isParent()||d.isChild())&&(h.parents().anySame(d)||d.parents().anySame(h)||h.same(d)&&h.isParent())?t.findCompoundLoopPoints(A,W,_,N):h===d?t.findLoopPoints(A,W,_,N):R.endsWith("segments")?t.findSegmentsPoints(A,W):R.endsWith("taxi")?t.findTaxiPoints(A,W):"straight"===R||!N&&s.eles.length%2==1&&_===Math.floor(s.eles.length/2)?t.findStraightEdgePoints(A):t.findBezierPoints(A,W,_,N,L),t.findEndpoints(A),t.tryToCorrectInvalidPoints(A,W),t.checkForInvalidEdgeWarning(A),t.storeAllpts(A),t.storeEdgeProjections(A),t.calculateArrowAngles(A),t.recalculateEdgeLabelProjections(A),t.calculateLabelAngles(A)}}),"_loop"),x=0;x<a.length;x++)v(x);this.findHaystackPoints(o)}},s(Kh,"getPts"),Xh.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return Kh(t.segpts)},Xh.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return Kh(t.ctrlpts)},Xh.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Zh={manualEndptToPx:function(e,t){var r=e.position(),n=e.outerWidth(),i=e.outerHeight(),a=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*n),"%"===t.units[1]&&(o[1]=o[1]*i),o[0]+=r.x,o[1]+=r.y,o}var s=t.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(n,i),u=[r.x+Math.cos(s)*l,r.y+Math.sin(s)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,n,i,u[0],u[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,a)},findEndpoints:function(e){var t,r,n,i,a,o=this,s=e.source()[0],l=e.target()[0],u=s.position(),c=l.position(),h=e.pstyle("target-arrow-shape").value,d=e.pstyle("source-arrow-shape").value,f=e.pstyle("target-distance-from-node").pfValue,p=e.pstyle("source-distance-from-node").pfValue,g=s._private.rscratch,m=l._private.rscratch,y=e.pstyle("curve-style").value,v=e._private.rscratch,x=v.edgeType,b="self"===x||"compound"===x,T="bezier"===x||"multibezier"===x||b,C="bezier"!==x,w="straight"===x||"segments"===x,k="segments"===x,E=T||C||w,_=b||"taxi"===y,A=e.pstyle("source-endpoint"),S=_?"outside-to-node":A.value,R="auto"===s.pstyle("corner-radius").value?"auto":s.pstyle("corner-radius").pfValue,N=e.pstyle("target-endpoint"),L=_?"outside-to-node":N.value,I="auto"===l.pstyle("corner-radius").value?"auto":l.pstyle("corner-radius").pfValue;if(v.srcManEndpt=A,v.tgtManEndpt=N,T){var M=[v.ctrlpts[0],v.ctrlpts[1]];r=C?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:M,n=M}else if(w){var O=k?v.segpts.slice(0,2):[c.x,c.y];r=k?v.segpts.slice(v.segpts.length-2):[u.x,u.y],n=O}if("inside-to-node"===L)t=[c.x,c.y];else if(N.units)t=this.manualEndptToPx(l,N);else if("outside-to-line"===L)t=v.tgtIntn;else if("outside-to-node"===L||"outside-to-node-or-label"===L?i=r:("outside-to-line"===L||"outside-to-line-or-label"===L)&&(i=[u.x,u.y]),t=o.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0,I,m),"outside-to-node-or-label"===L||"outside-to-line-or-label"===L){var P=l._private.rscratch,D=P.labelWidth,B=P.labelHeight,F=P.labelX,$=P.labelY,z=D/2,G=B/2,j=l.pstyle("text-valign").value;"top"===j?$-=G:"bottom"===j&&($+=G);var V=l.pstyle("text-halign").value;"left"===V?F-=z:"right"===V&&(F+=z);var W=fn(i[0],i[1],[F-z,$-G,F+z,$-G,F+z,$+G,F-z,$+G],c.x,c.y);if(W.length>0){var H=u,q=Nr(H,br(t)),Y=Nr(H,br(W)),X=q;if(Y<q&&(t=W,X=Y),W.length>2)Nr(H,{x:W[2],y:W[3]})<X&&(t=[W[2],W[3]])}}var K=gn(t,r,o.arrowShapes[h].spacing(e)+f),Z=gn(t,r,o.arrowShapes[h].gap(e)+f);if(v.endX=Z[0],v.endY=Z[1],v.arrowEndX=K[0],v.arrowEndY=K[1],"inside-to-node"===S)t=[u.x,u.y];else if(A.units)t=this.manualEndptToPx(s,A);else if("outside-to-line"===S)t=v.srcIntn;else if("outside-to-node"===S||"outside-to-node-or-label"===S?a=n:("outside-to-line"===S||"outside-to-line-or-label"===S)&&(a=[c.x,c.y]),t=o.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),a[0],a[1],0,R,g),"outside-to-node-or-label"===S||"outside-to-line-or-label"===S){var Q=s._private.rscratch,J=Q.labelWidth,ee=Q.labelHeight,te=Q.labelX,re=Q.labelY,ne=J/2,ie=ee/2,ae=s.pstyle("text-valign").value;"top"===ae?re-=ie:"bottom"===ae&&(re+=ie);var oe=s.pstyle("text-halign").value;"left"===oe?te-=ne:"right"===oe&&(te+=ne);var se=fn(a[0],a[1],[te-ne,re-ie,te+ne,re-ie,te+ne,re+ie,te-ne,re+ie],u.x,u.y);if(se.length>0){var le=c,ue=Nr(le,br(t)),ce=Nr(le,br(se)),he=ue;if(ce<ue&&(t=[se[0],se[1]],he=ce),se.length>2)Nr(le,{x:se[2],y:se[3]})<he&&(t=[se[2],se[3]])}}var de=gn(t,n,o.arrowShapes[d].spacing(e)+p),fe=gn(t,n,o.arrowShapes[d].gap(e)+p);v.startX=fe[0],v.startY=fe[1],v.arrowStartX=de[0],v.arrowStartY=de[1],E&&(U(v.startX)&&U(v.startY)&&U(v.endX)&&U(v.endY)?v.badLine=!1:v.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},Qh={};function Jh(e,t,r){for(var n=s((function(e,t,r,n){return Ir(e,t,r,n)}),"qbezierAt$1"),i=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var o=e.bezierProjPcts[a];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}s(Jh,"pushBezierPts"),Qh.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)Jh(this,e,r.allpts.slice(i,i+6))}else if("segments"===n){var a=t.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===n){var o=r.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Qh.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var ed={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!K(t)){var r,n,i=e._private,a=e.width(),o=e.height(),s=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(u){case"left":r=l.x-a/2-s;break;case"right":r=l.x+a/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}h.labelX=r,h.labelY=n,d.labelX=r,d.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},td=s((function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r}),"lineAngleFromDelta"),rd=s((function(e,t){var r=t.x-e.x,n=t.y-e.y;return td(r,n)}),"lineAngle"),nd=s((function(e,t,r,n){var i=Pr(0,n-.001,1),a=Pr(0,n+.001,1),o=Mr(e,t,r,i),s=Mr(e,t,r,a);return rd(o,s)}),"bezierAngle");ed.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:n.midX,y:n.midY};var o=s((function(e,t,n){Yt(r.rscratch,e,t,n),Yt(r.rstyle,e,t,n)}),"setRs");o("labelX",null,t.x),o("labelY",null,t.y);var l=td(n.midDispX,n.midDispY);o("labelAutoAngle",null,l);var u=s((function e(){if(e.cache)return e.cache;for(var t=[],a=0;a+5<n.allpts.length;a+=4){var o={x:n.allpts[a],y:n.allpts[a+1]},l={x:n.allpts[a+2],y:n.allpts[a+3]},u={x:n.allpts[a+4],y:n.allpts[a+5]};t.push({p0:o,p1:l,p2:u,startDist:0,length:0,segments:[]})}var c=r.rstyle.bezierPts,h=i.bezierProjPcts.length;function d(e,t,r,n,i){var a=Rr(t,r),o=e.segments[e.segments.length-1],s={p0:t,p1:r,t0:n,t1:i,startDist:o?o.startDist+o.length:0,length:a};e.segments.push(s),e.length+=a}s(d,"addSegment");for(var f=0;f<t.length;f++){var p=t[f],g=t[f-1];g&&(p.startDist=g.startDist+g.length),d(p,p.p0,c[f*h],0,i.bezierProjPcts[0]);for(var m=0;m<h-1;m++)d(p,c[f*h+m],c[f*h+m+1],i.bezierProjPcts[m],i.bezierProjPcts[m+1]);d(p,c[f*h+h-1],p.p2,i.bezierProjPcts[h-1],1)}return e.cache=t}),"createControlPointInfo"),c=s((function(r){var i,s="source"===r;if(a[r]){var l=e.pstyle(r+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=u(),d=0,f=0,p=0;p<h.length;p++){for(var g=h[s?p:h.length-1-p],m=0;m<g.segments.length;m++){var y=g.segments[s?m:g.segments.length-1-m],v=p===h.length-1&&m===g.segments.length-1;if(d=f,(f+=y.length)>=l||v){c={cp:g,segment:y};break}}if(c)break}var x=c.cp,b=c.segment,T=(l-d)/b.length,C=b.t1-b.t0,w=s?b.t0+C*T:b.t1-C*T;w=Pr(0,w,1),t=Mr(x.p0,x.p1,x.p2,w),i=nd(x.p0,x.p1,x.p2,w);break;case"straight":case"segments":case"haystack":for(var k,E,_,A,S=0,R=n.allpts.length,N=0;N+3<R&&(s?(_={x:n.allpts[N],y:n.allpts[N+1]},A={x:n.allpts[N+2],y:n.allpts[N+3]}):(_={x:n.allpts[R-2-N],y:n.allpts[R-1-N]},A={x:n.allpts[R-4-N],y:n.allpts[R-3-N]}),E=S,!((S+=k=Rr(_,A))>=l));N+=2);var L=(l-E)/k;L=Pr(0,L,1),t=Or(_,A,L),i=rd(_,A)}o("labelX",r,t.x),o("labelY",r,t.y),o("labelAutoAngle",r,i)}}),"calculateEndProjection");c("source"),c("target"),this.applyLabelDimensions(e)}},ed.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},ed.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,n),a=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,s=qt(r.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==o?1:Math.max(s.length,1),u=i.height/l,c=u*a,h=i.width,d=i.height+(l-1)*(a-1)*u;Yt(r.rstyle,"labelWidth",t,h),Yt(r.rscratch,"labelWidth",t,h),Yt(r.rstyle,"labelHeight",t,d),Yt(r.rscratch,"labelHeight",t,d),Yt(r.rscratch,"labelLineHeight",t,c)},ed.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",i=e.pstyle(n+"label").strValue,a=e.pstyle("text-transform").value,o=s((function(e,n){return n?(Yt(r.rscratch,e,t,n),n):qt(r.rscratch,e,t)}),"rscratch");if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var l=e.pstyle("text-wrap").value;if("wrap"===l){var u=o("labelKey");if(null!=u&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var c=i.split("\n"),h=e.pstyle("text-max-width").pfValue,d="anywhere"===e.pstyle("text-overflow-wrap").value,f=[],p=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var m=c[g],y=this.calculateLabelDimensions(e,m).width;if(d){var v=m.split("").join("​");m=v}if(y>h){var x,b="",T=0,C=S(m.matchAll(p));try{for(C.s();!(x=C.n()).done;){var w=x.value,k=w[0],E=m.substring(T,w.index);T=w.index+k.length;var _=0===b.length?E:b+E+k;this.calculateLabelDimensions(e,_).width<=h?b+=E+k:(b&&f.push(b),b=E+k)}}catch(e){C.e(e)}finally{C.f()}b.match(/^[\s\u200b]+$/)||f.push(b)}else f.push(m)}o("labelWrapCachedLines",f),i=o("labelWrapCachedText",f.join("\n")),o("labelWrapKey",u)}else if("ellipsis"===l){var A=e.pstyle("text-max-width").pfValue,R="",N=!1;if(this.calculateLabelDimensions(e,i).width<A)return i;for(var L=0;L<i.length;L++){if(this.calculateLabelDimensions(e,R+i[L]+"…").width>A)break;R+=i[L],L===i.length-1&&(N=!0)}return N||(R+="…"),R}return i},ed.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},ed.calculateLabelDimensions=function(e,t){var r=this,n=r.cy.window().document,i=wt(t,e._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),o=a[i];if(null!=o)return o;var s=e.pstyle("font-style").strValue,l=e.pstyle("font-size").pfValue,u=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,h=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=n.createElement("canvas"),d=this.labelCalcCanvasContext=h.getContext("2d");var f=h.style;f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none"}d.font="".concat(s," ").concat(c," ").concat(l,"px ").concat(u);for(var p=0,g=0,m=t.split("\n"),y=0;y<m.length;y++){var v=m[y],x=d.measureText(v),b=Math.ceil(x.width),T=l;p=Math.max(b,p),g+=T}return p+=0,g+=0,a[i]={width:p,height:g}},ed.calculateLabelAngle=function(e,t){var r=e._private.rscratch,n=e.isEdge(),i=t?t+"-":"",a=e.pstyle(i+"text-rotation"),o=a.strValue;return"none"===o?0:n&&"autorotate"===o?r.labelAutoAngle:"autorotate"===o?0:a.pfValue},ed.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),n=e._private.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var id={},ad=!1;id.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return ad||(Dt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ad=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var od={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,n=s((function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),r)for(var n=0;n<e.length;n++){var i=e[n]._private.rstyle;i.clean=!1,i.cleanConnected=!1}}),"enqueue");r.binder(e).on("bounds.* dirty.*",s((function(e){var t=e.target;n(t)}),"onDirtyBounds")).on("style.* background.*",s((function(e){var t=e.target;n(t,!1)}),"onDirtyStyle"));var i=s((function(i){if(i){var a=r.onUpdateEleCalcsFns;t.cleanStyle();for(var o=0;o<t.length;o++){var s=t[o],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(n(s.connectedEdges()),l.cleanConnected=!0)}if(a)for(var u=0;u<a.length;u++){(0,a[u])(i,t)}r.recalculateRenderedStyle(t),t=e.collection()}}),"updateEleCalcs");r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=s((function(e){return e._private.rstyle.cleanConnected}),"isCleanConnected"),n=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var o=e[a],l=o._private,u=l.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),!(t&&u.clean||o.removed())&&"none"!==o.pstyle("display").value&&("nodes"===l.group?i.push(o):n.push(o),u.clean=!0)}for(var c=0;c<i.length;c++){var h=i[c],d=h._private.rstyle,f=h.position();this.recalculateNodeLabelProjection(h),d.nodeX=f.x,d.nodeY=f.y,d.nodeW=h.pstyle("width").pfValue,d.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var g=n[p]._private,m=g.rstyle,y=g.rscratch;m.srcX=y.arrowStartX,m.srcY=y.arrowStartY,m.tgtX=y.arrowEndX,m.tgtY=y.arrowEndY,m.midX=y.midX,m.midY=y.midY,m.labelAngle=y.labelAngle,m.sourceLabelAngle=y.sourceLabelAngle,m.targetLabelAngle=y.targetLabelAngle}}}},sd={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=(i=e[r])._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):n.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(r=0;r<t.length;r++){var i=t[r];e.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Tu),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},ld={};[wh,kh,Xh,Zh,Qh,ed,id,od,sd].forEach((function(e){fe(ld,e)}));var ud={getCachedImage:function(e,t,r){var n=this.imageCache=this.imageCache||{},i=n[e];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var a=(i=n[e]=n[e]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",(function(){a.error=!0}));var o="data:";return e.substring(0,5).toLowerCase()===o||(t="null"===t?null:t,a.crossOrigin=t),a.src=e,a}},cd={registerBinding:function(e,t,r,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var a=[],o=0;o<e.length;o++){var s=e[o];if(void 0!==s){var l=this.binder(s);a.push(l.on.apply(l,i))}}return a}return(l=this.binder(e)).on.apply(l,i)},binder:function(e){var t=this,r=t.cy.window(),n=e===r||e===r.document||e===r.document.body||Z(e);if(null==t.supportsPassiveEvents){var i=!1;try{var a=Object.defineProperty({},"passive",{get:s((function(){return i=!0,!0}),"get")});r.addEventListener("test",null,a)}catch{}t.supportsPassiveEvents=i}var o=s((function(r,i,a){var o=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(o[2]={capture:a??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:o}),(e.addEventListener||e.on).apply(e,o),this}),"on");return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()},load:function(){var e=this,t=e.cy.window(),r=s((function(e){return e.selected()}),"isSelected"),n=s((function(e){var t=e.getRootNode();if(t&&11===t.nodeType&&void 0!==t.host)return t}),"getShadowRoot"),i=s((function(t,r,n,i){null==t&&(t=e.cy);for(var a=0;a<r.length;a++){var o=r[a];t.emit({originalEvent:n,type:o,position:i})}}),"triggerEvents"),a=s((function(e){return e.shiftKey||e.metaKey||e.ctrlKey}),"isMultSelKeyDown"),o=s((function(t,r){var n=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var i=0;r&&i<r.length;i++){if((t=r[i]).isNode()&&t.isParent()&&!t.pannable()){n=!1;break}}else n=!0;return n}),"allowPanningPassthrough"),l=s((function(e){e[0]._private.grabbed=!0}),"setGrabbed"),u=s((function(e){e[0]._private.grabbed=!1}),"setFreed"),c=s((function(e){e[0]._private.rscratch.inDragLayer=!0}),"setInDragLayer"),h=s((function(e){e[0]._private.rscratch.inDragLayer=!1}),"setOutDragLayer"),d=s((function(e){e[0]._private.rscratch.isGrabTarget=!0}),"setGrabTarget"),f=s((function(e){e[0]._private.rscratch.isGrabTarget=!1}),"removeGrabTarget"),p=s((function(e,t){var r=t.addToList;!r.has(e)&&e.grabbable()&&!e.locked()&&(r.merge(e),l(e))}),"addToDragList"),g=s((function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(c),r.connectedEdges().forEach(c)),t.addToList&&p(r,t)}}),"addDescendantsToDrag"),m=s((function(t,r){r=r||{};var n=t.cy().hasCompoundNodes();r.inDragLayer&&(t.forEach(c),t.neighborhood().stdFilter((function(e){return!n||e.isEdge()})).forEach(c)),r.addToList&&t.forEach((function(e){p(e,r)})),g(t,r),x(t,{inDragLayer:r.inDragLayer}),e.updateCachedGrabbedEles()}),"addNodesToDrag"),y=m,v=s((function(t){t&&(e.getCachedZSortedEles().forEach((function(e){u(e),h(e),f(e)})),e.updateCachedGrabbedEles())}),"freeDraggedElements"),x=s((function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var n=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),i=n.connectedEdges();t.inDragLayer&&(i.forEach(c),n.forEach(c)),t.addToList&&n.forEach((function(e){p(e,t)}))}}}),"updateAncestorsInDragLayer"),b=s((function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()}),"blurActiveDomElement"),T=typeof MutationObserver<"u",C=typeof ResizeObserver<"u";T?(e.removeObserver=new MutationObserver((function(t){for(var r=0;r<t.length;r++){var n=t[r].removedNodes;if(n)for(var i=0;i<n.length;i++){if(n[i]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var w=lt((function(){e.cy.resize()}),100);T&&(e.styleObserver=new MutationObserver(w),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",w),C&&(e.resizeObserver=new ResizeObserver(w),e.resizeObserver.observe(e.container));var k=s((function(e,t){for(;null!=e;)t(e),e=e.parentNode}),"forEachUp"),E=s((function(){e.invalidateContainerClientCoordsCache()}),"invalidateCoords");k(e.container,(function(t){e.registerBinding(t,"transitionend",E),e.registerBinding(t,"animationend",E),e.registerBinding(t,"scroll",E)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var _=s((function(){return 0!==e.selection[4]}),"inBoxSelection"),A=s((function(t){for(var r=e.findContainerClientCoords(),n=r[0],i=r[1],a=r[2],o=r[3],s=t.touches?t.touches:[t],l=!1,u=0;u<s.length;u++){var c=s[u];if(n<=c.clientX&&c.clientX<=n+a&&i<=c.clientY&&c.clientY<=i+o){l=!0;break}}if(!l)return!1;for(var h=e.container,d=t.target.parentNode,f=!1;d;){if(d===h){f=!0;break}d=d.parentNode}return!!f}),"eventInContainer");e.registerBinding(e.container,"mousedown",s((function(t){if(A(t)&&(1!==e.hoverData.which||1===t.which)){t.preventDefault(),b(),e.hoverData.capture=!0,e.hoverData.which=t.which;var r=e.cy,n=[t.clientX,t.clientY],a=e.projectIntoViewport(n[0],n[1]),o=e.selection,l=e.findNearestElements(a[0],a[1],!0,!1),u=l[0],c=e.dragData.possibleDragElements;e.hoverData.mdownPos=a,e.hoverData.mdownGPos=n;var h=s((function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}})}}),e.tapholdDuration)}),"checkForTaphold");if(3==t.which){e.hoverData.cxtStarted=!0;var f={originalEvent:t,type:"cxttapstart",position:{x:a[0],y:a[1]}};u?(u.activate(),u.emit(f),e.hoverData.down=u):r.emit(f),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var p=s((function(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}}),"makeEvent"),g=s((function(e){e.emit(p("grab"))}),"triggerGrab");if(d(u),u.selected()){c=e.dragData.possibleDragElements=r.collection();var v=r.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));m(v,{addToList:c}),u.emit(p("grabon")),v.forEach(g)}else c=e.dragData.possibleDragElements=r.collection(),y(u,{addToList:c}),u.emit(p("grabon")).emit(p("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=l,e.hoverData.downTime=(new Date).getTime(),i(u,["mousedown","tapstart","vmousedown"],t,{x:a[0],y:a[1]}),null==u?(o[4]=1,e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()):u.pannable()&&(o[4]=1),h()}o[0]=o[2]=a[0],o[1]=o[3]=a[1]}}),"mousedownHandler"),!1);var S,R,N,L=n(e.container);e.registerBinding([t,L],"mousemove",s((function(t){if(e.hoverData.capture||A(t)){var r=!1,n=e.cy,l=n.zoom(),u=[t.clientX,t.clientY],c=e.projectIntoViewport(u[0],u[1]),h=e.hoverData.mdownPos,d=e.hoverData.mdownGPos,f=e.selection,p=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(p=e.findNearestElement(c[0],c[1],!0,!1));var g,y=e.hoverData.last,x=e.hoverData.down,b=[c[0]-f[2],c[1]-f[3]],T=e.dragData.possibleDragElements;if(d){var C=u[0]-d[0],w=C*C,k=u[1]-d[1],E=w+k*k;e.hoverData.isOverThresholdDrag=g=E>=e.desktopTapThreshold2}var _=a(t);g&&(e.hoverData.tapholdCancelled=!0);var S=s((function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(b[0]),t.push(b[1])):(t[0]+=b[0],t[1]+=b[1])}),"updateDragDelta");r=!0,i(p,["mousemove","vmousemove","tapdrag"],t,{x:c[0],y:c[1]});var R=s((function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||n.emit({originalEvent:t,type:"boxstart",position:{x:c[0],y:c[1]}}),f[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()}),"goIntoBoxMode");if(3===e.hoverData.which){if(g){var N={originalEvent:t,type:"cxtdrag",position:{x:c[0],y:c[1]}};x?x.emit(N):n.emit(N),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||p!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:c[0],y:c[1]}}),e.hoverData.cxtOver=p,p&&p.emit({originalEvent:t,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(e.hoverData.dragging){if(r=!0,n.panningEnabled()&&n.userPanningEnabled()){var L;if(e.hoverData.justStartedPan){var I=e.hoverData.mdownPos;L={x:(c[0]-I[0])*l,y:(c[1]-I[1])*l},e.hoverData.justStartedPan=!1}else L={x:b[0]*l,y:b[1]*l};n.panBy(L),n.emit("dragpan"),e.hoverData.dragged=!0}c=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=f[4]||null!=x&&!x.pannable()){if(x&&x.pannable()&&x.active()&&x.unactivate(),(!x||!x.grabbed())&&p!=y&&(y&&i(y,["mouseout","tapdragout"],t,{x:c[0],y:c[1]}),p&&i(p,["mouseover","tapdragover"],t,{x:c[0],y:c[1]}),e.hoverData.last=p),x)if(g){if(n.boxSelectionEnabled()&&_)x&&x.grabbed()&&(v(T),x.emit("freeon"),T.emit("free"),e.dragData.didDrag&&(x.emit("dragfreeon"),T.emit("dragfree"))),R();else if(x&&x.grabbed()&&e.nodeIsDraggable(x)){var M=!e.dragData.didDrag;M&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||m(T,{inDragLayer:!0});var O={x:0,y:0};if(U(b[0])&&U(b[1])&&(O.x+=b[0],O.y+=b[1],M)){var P=e.hoverData.dragDelta;P&&U(P[0])&&U(P[1])&&(O.x+=P[0],O.y+=P[1])}e.hoverData.draggingEles=!0,T.silentShift(O).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else S();r=!0}else if(g){if(e.hoverData.dragging||!n.boxSelectionEnabled()||!_&&n.panningEnabled()&&n.userPanningEnabled()){if(!e.hoverData.selecting&&n.panningEnabled()&&n.userPanningEnabled()){o(x,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,f[4]=0,e.data.bgActivePosistion=br(h),e.redrawHint("select",!0),e.redraw())}}else R();x&&x.pannable()&&x.active()&&x.unactivate()}if(f[2]=c[0],f[3]=c[1],r)return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}),"mousemoveHandler"),!1),e.registerBinding(t,"mouseup",s((function(t){if((1!==e.hoverData.which||1===t.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var n=e.cy,o=e.projectIntoViewport(t.clientX,t.clientY),l=e.selection,u=e.findNearestElement(o[0],o[1],!0,!1),c=e.dragData.possibleDragElements,h=e.hoverData.down,d=a(t);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,h&&h.unactivate(),3===e.hoverData.which){var f={originalEvent:t,type:"cxttapend",position:{x:o[0],y:o[1]}};if(h?h.emit(f):n.emit(f),!e.hoverData.cxtDragged){var p={originalEvent:t,type:"cxttap",position:{x:o[0],y:o[1]}};h?h.emit(p):n.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(i(u,["mouseup","tapend","vmouseup"],t,{x:o[0],y:o[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(i(h,["click","tap","vclick"],t,{x:o[0],y:o[1]}),R=!1,t.timeStamp-N<=n.multiClickDebounceTime()?(S&&clearTimeout(S),R=!0,N=null,i(h,["dblclick","dbltap","vdblclick"],t,{x:o[0],y:o[1]})):(S=setTimeout((function(){R||i(h,["oneclick","onetap","voneclick"],t,{x:o[0],y:o[1]})}),n.multiClickDebounceTime()),N=t.timeStamp)),null==h&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!a(t)&&(n.$(r).unselect(["tapunselect"]),c.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=c=n.collection()),u==h&&!e.dragData.didDrag&&!e.hoverData.selecting&&null!=u&&u._private.selectable&&(e.hoverData.dragging||("additive"===n.selectionType()||d?u.selected()?u.unselect(["tapunselect"]):u.select(["tapselect"]):d||(n.$(r).unmerge(u).unselect(["tapunselect"]),u.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var g=n.collection(e.getAllInBox(l[0],l[1],l[2],l[3]));e.redrawHint("select",!0),g.length>0&&e.redrawHint("eles",!0),n.emit({type:"boxend",originalEvent:t,position:{x:o[0],y:o[1]}});var m=s((function(e){return e.selectable()&&!e.selected()}),"eleWouldBeSelected");"additive"===n.selectionType()||d||n.$(r).unmerge(g).unselect(),g.emit("box").stdFilter(m).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!l[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var y=h&&h.grabbed();v(c),y&&(h.emit("freeon"),c.emit("free"),e.dragData.didDrag&&(h.emit("dragfreeon"),c.emit("dragfree")))}}l[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}),"mouseupHandler"),!1);var I=s((function(t){if(!e.scrollingPage){var r=e.cy,n=r.zoom(),i=r.pan(),a=e.projectIntoViewport(t.clientX,t.clientY),o=[a[0]*n+i.x,a[1]*n+i.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||_())return void t.preventDefault();if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){var s;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),s=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,s*=e.wheelSensitivity,1===t.deltaMode&&(s*=33);var l=r.zoom()*Math.pow(10,s);"gesturechange"===t.type&&(l=e.gestureStartZoom*t.scale),r.zoom({level:l,renderedPosition:{x:o[0],y:o[1]}}),r.emit("gesturechange"===t.type?"pinchzoom":"scrollzoom")}}}),"wheelHandler");e.registerBinding(e.container,"wheel",I,!0),e.registerBinding(t,"scroll",s((function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),"scrollHandler"),!0),e.registerBinding(e.container,"gesturestart",s((function(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()}),"gestureStartHandler"),!0),e.registerBinding(e.container,"gesturechange",(function(t){e.hasTouchStarted||I(t)}),!0),e.registerBinding(e.container,"mouseout",s((function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})}),"mouseOutHandler"),!1),e.registerBinding(e.container,"mouseover",s((function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})}),"mouseOverHandler"),!1);var M,O,P,D,B,F,$,z,G,j,V,W,H,q,Y,X,K,Z,Q,J,ee=s((function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))}),"distance"),te=s((function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)}),"distanceSq");if(e.registerBinding(e.container,"touchstart",q=s((function(t){if(e.hasTouchStarted=!0,A(t)){b(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,n=e.touchData.now,a=e.touchData.earlier;if(t.touches[0]){var o=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);n[0]=o[0],n[1]=o[1]}if(t.touches[1]){o=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);n[2]=o[0],n[3]=o[1]}if(t.touches[2]){o=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);n[4]=o[0],n[5]=o[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,v(e.dragData.touchDragEles);var l=e.findContainerClientCoords();G=l[0],j=l[1],V=l[2],W=l[3],M=t.touches[0].clientX-G,O=t.touches[0].clientY-j,P=t.touches[1].clientX-G,D=t.touches[1].clientY-j,H=0<=M&&M<=V&&0<=P&&P<=V&&0<=O&&O<=W&&0<=D&&D<=W;var u=r.pan(),c=r.zoom();B=ee(M,O,P,D),F=te(M,O,P,D),z=[(($=[(M+P)/2,(O+D)/2])[0]-u.x)/c,($[1]-u.y)/c];if(F<4e4&&!t.touches[2]){var h=e.findNearestElement(n[0],n[1],!0,!0),f=e.findNearestElement(n[2],n[3],!0,!0);return h&&h.isNode()?(h.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:n[0],y:n[1]}}),e.touchData.start=h):f&&f.isNode()?(f.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:n[0],y:n[1]}}),e.touchData.start=f):r.emit({originalEvent:t,type:"cxttapstart",position:{x:n[0],y:n[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])r.boxSelectionEnabled()&&t.preventDefault();else if(!t.touches[1]&&t.touches[0]){var p=e.findNearestElements(n[0],n[1],!0,!0),g=p[0];if(null!=g&&(g.activate(),e.touchData.start=g,e.touchData.starts=p,e.nodeIsGrabbable(g))){var x=e.dragData.touchDragEles=r.collection(),T=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),g.selected()?(T=r.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),m(T,{addToList:x})):y(g,{addToList:x}),d(g);var C=s((function(e){return{originalEvent:t,type:e,position:{x:n[0],y:n[1]}}}),"makeEvent");g.emit(C("grabon")),T?T.forEach((function(e){e.emit(C("grab"))})):g.emit(C("grab"))}i(g,["touchstart","tapstart","vmousedown"],t,{x:n[0],y:n[1]}),null==g&&(e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1===e.touchData.singleTouchMoved&&!e.pinching&&!e.touchData.selecting&&i(e.touchData.start,["taphold"],t,{x:n[0],y:n[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var w=e.touchData.startPosition=[null,null,null,null,null,null],k=0;k<n.length;k++)w[k]=a[k]=n[k];var E=t.touches[0];e.touchData.startGPosition=[E.clientX,E.clientY]}}}),"touchstartHandler"),!1),e.registerBinding(t,"touchmove",Y=s((function(t){var r=e.touchData.capture;if(r||A(t)){var n=e.selection,a=e.cy,s=e.touchData.now,l=e.touchData.earlier,u=a.zoom();if(t.touches[0]){var c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=c[0],s[5]=c[1]}var h,d=e.touchData.startGPosition;if(r&&t.touches[0]&&d){for(var f=[],p=0;p<s.length;p++)f[p]=s[p]-l[p];var g=t.touches[0].clientX-d[0],y=g*g,x=t.touches[0].clientY-d[1];h=y+x*x>=e.touchTapThreshold2}if(r&&e.touchData.cxt){t.preventDefault();var b=t.touches[0].clientX-G,T=t.touches[0].clientY-j,C=t.touches[1].clientX-G,w=t.touches[1].clientY-j,k=te(b,T,C,w);if(k/F>=2.25||k>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var E={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(E),e.touchData.start=null):a.emit(E)}}if(r&&e.touchData.cxt){E={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(E):a.emit(E),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var _=e.findNearestElement(s[0],s[1],!0,!0);(!e.touchData.cxtOver||_!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}}),e.touchData.cxtOver=_,_&&_.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&t.touches[2]&&a.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||a.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,n[4]=1,n&&0!==n.length&&void 0!==n[0]?(n[2]=(s[0]+s[2]+s[4])/3,n[3]=(s[1]+s[3]+s[5])/3):(n[0]=(s[0]+s[2]+s[4])/3,n[1]=(s[1]+s[3]+s[5])/3,n[2]=(s[0]+s[2]+s[4])/3+1,n[3]=(s[1]+s[3]+s[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(r&&t.touches[1]&&!e.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),Q=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var S=0;S<Q.length;S++){var R=Q[S]._private;R.grabbed=!1,R.rscratch.inDragLayer=!1}}var N=e.touchData.start,L=(b=t.touches[0].clientX-G,T=t.touches[0].clientY-j,C=t.touches[1].clientX-G,w=t.touches[1].clientY-j,ee(b,T,C,w)),I=L/B;if(H){var $=(b-M+(C-P))/2,V=(T-O+(w-D))/2,W=a.zoom(),q=W*I,Y=a.pan(),X=z[0]*W+Y.x,K=z[1]*W+Y.y,Z={x:-q/W*(X-Y.x-$)+X,y:-q/W*(K-Y.y-V)+K};if(N&&N.active()){var Q=e.dragData.touchDragEles;v(Q),e.redrawHint("drag",!0),e.redrawHint("eles",!0),N.unactivate().emit("freeon"),Q.emit("free"),e.dragData.didDrag&&(N.emit("dragfreeon"),Q.emit("dragfree"))}a.viewport({zoom:q,pan:Z,cancelOnFailedZoom:!0}),a.emit("pinchzoom"),B=L,M=b,O=T,P=C,D=w,e.pinching=!0}if(t.touches[0]){c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=c[0],s[5]=c[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var J=e.touchData.start,re=e.touchData.last;if(!e.hoverData.draggingEles&&!e.swipePanning&&(_=e.findNearestElement(s[0],s[1],!0,!0)),r&&null!=J&&t.preventDefault(),r&&null!=J&&e.nodeIsDraggable(J))if(h){Q=e.dragData.touchDragEles;var ne=!e.dragData.didDrag;ne&&m(Q,{inDragLayer:!0}),e.dragData.didDrag=!0;var ie={x:0,y:0};if(U(f[0])&&U(f[1])&&(ie.x+=f[0],ie.y+=f[1],ne))e.redrawHint("eles",!0),(ae=e.touchData.dragDelta)&&U(ae[0])&&U(ae[1])&&(ie.x+=ae[0],ie.y+=ae[1]);e.hoverData.draggingEles=!0,Q.silentShift(ie).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ae;0===(ae=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ae.push(f[0]),ae.push(f[1])):(ae[0]+=f[0],ae[1]+=f[1])}if(i(J||_,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),(!J||!J.grabbed())&&_!=re&&(re&&re.emit({originalEvent:t,type:"tapdragout",position:{x:s[0],y:s[1]}}),_&&_.emit({originalEvent:t,type:"tapdragover",position:{x:s[0],y:s[1]}})),e.touchData.last=_,r)for(S=0;S<s.length;S++)s[S]&&e.touchData.startPosition[S]&&h&&(e.touchData.singleTouchMoved=!0);if(r&&(null==J||J.pannable())&&a.panningEnabled()&&a.userPanningEnabled()){o(J,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=br(e.touchData.startPosition)),e.swipePanning?(a.panBy({x:f[0]*u,y:f[1]*u}),a.emit("dragpan")):h&&(e.swipePanning=!0,a.panBy({x:g*u,y:x*u}),a.emit("dragpan"),J&&(J.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=c[0],s[1]=c[1]}}for(p=0;p<s.length;p++)l[p]=s[p];r&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}}),"touchmoveHandler"),!1),e.registerBinding(t,"touchcancel",X=s((function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),"touchcancelHandler")),e.registerBinding(t,"touchend",K=s((function(t){var n=e.touchData.start;if(e.touchData.capture){0===t.touches.length&&(e.touchData.capture=!1),t.preventDefault();var a=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var o,l=e.cy,u=l.zoom(),c=e.touchData.now,h=e.touchData.earlier;if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);c[4]=d[0],c[5]=d[1]}if(n&&n.unactivate(),e.touchData.cxt){if(o={originalEvent:t,type:"cxttapend",position:{x:c[0],y:c[1]}},n?n.emit(o):l.emit(o),!e.touchData.cxtDragged){var f={originalEvent:t,type:"cxttap",position:{x:c[0],y:c[1]}};n?n.emit(f):l.emit(f)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!t.touches[2]&&l.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=l.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,e.redrawHint("select",!0),l.emit({type:"boxend",originalEvent:t,position:{x:c[0],y:c[1]}});var g=s((function(e){return e.selectable()&&!e.selected()}),"eleWouldBeSelected");p.emit("box").stdFilter(g).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(n?.unactivate(),t.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!t.touches[1]&&!t.touches[0]&&!t.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var m=e.dragData.touchDragEles;if(null!=n){var y=n._private.grabbed;v(m),e.redrawHint("drag",!0),e.redrawHint("eles",!0),y&&(n.emit("freeon"),m.emit("free"),e.dragData.didDrag&&(n.emit("dragfreeon"),m.emit("dragfree"))),i(n,["touchend","tapend","vmouseup","tapdragout"],t,{x:c[0],y:c[1]}),n.unactivate(),e.touchData.start=null}else{var x=e.findNearestElement(c[0],c[1],!0,!0);i(x,["touchend","tapend","vmouseup","tapdragout"],t,{x:c[0],y:c[1]})}var b=e.touchData.startPosition[0]-c[0],T=b*b,C=e.touchData.startPosition[1]-c[1],w=(T+C*C)*u*u;e.touchData.singleTouchMoved||(n||l.$(":selected").unselect(["tapunselect"]),i(n,["tap","vclick"],t,{x:c[0],y:c[1]}),Z=!1,t.timeStamp-J<=l.multiClickDebounceTime()?(Q&&clearTimeout(Q),Z=!0,J=null,i(n,["dbltap","vdblclick"],t,{x:c[0],y:c[1]})):(Q=setTimeout((function(){Z||i(n,["onetap","voneclick"],t,{x:c[0],y:c[1]})}),l.multiClickDebounceTime()),J=t.timeStamp)),null!=n&&!e.dragData.didDrag&&n._private.selectable&&w<e.touchTapThreshold2&&!e.pinching&&("single"===l.selectionType()?(l.$(r).unmerge(n).unselect(["tapunselect"]),n.select(["tapselect"])):n.selected()?n.unselect(["tapunselect"]):n.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var k=0;k<c.length;k++)h[k]=c[k];e.dragData.didDrag=!1,0===t.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),t.touches.length<2&&(1===t.touches.length&&(e.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}}),"touchendHandler"),!1),typeof TouchEvent>"u"){var re=[],ne=s((function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}}),"makeTouch"),ie=s((function(e){return{event:e,touch:ne(e)}}),"makePointer"),ae=s((function(e){re.push(ie(e))}),"addPointer"),oe=s((function(e){for(var t=0;t<re.length;t++){if(re[t].event.pointerId===e.pointerId)return void re.splice(t,1)}}),"removePointer"),se=s((function(e){var t=re.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=ne(e)}),"updatePointer"),le=s((function(e){e.touches=re.map((function(e){return e.touch}))}),"addTouchesToEvent"),ue=s((function(e){return"mouse"===e.pointerType||4===e.pointerType}),"pointerIsMouse");e.registerBinding(e.container,"pointerdown",(function(e){ue(e)||(e.preventDefault(),ae(e),le(e),q(e))})),e.registerBinding(e.container,"pointerup",(function(e){ue(e)||(oe(e),le(e),K(e))})),e.registerBinding(e.container,"pointercancel",(function(e){ue(e)||(oe(e),le(e),X(e))})),e.registerBinding(e.container,"pointermove",(function(e){ue(e)||(e.preventDefault(),se(e),le(e),Y(e))}))}}},hd={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl("polygon",e,t,r,n,i,this.points)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){return fn(i,a,this.points,e,t,r/2,n/2,o)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){return nn(e,t,this.points,a,o,n,i,[0,-1],r)}),"checkPoint")}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){return ln(i,a,e,t,r/2+o,n/2+o)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){return un(e,t,n,i,a,o,r)}),"checkPoint")}},generateRoundPolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:s((function(e,r,n,i,a,o,s){if(void 0!==o[s]&&o[s+"-cx"]===e&&o[s+"-cy"]===r)return o[s];o[s]=new Array(t.length/2),o[s+"-cx"]=e,o[s+"-cy"]=r;var l=n/2,u=i/2;a="auto"===a?bn(n,i):a;for(var c=new Array(t.length/2),h=0;h<t.length/2;h++)c[h]={x:e+l*t[2*h],y:r+u*t[2*h+1]};var d,f,p,g,m=c.length;for(f=c[m-1],d=0;d<m;d++)p=c[d%m],g=c[(d+1)%m],o[s][d]=Yh(f,p,g,a),f=p,p=g;return o[s]}),"getOrCreateCorners"),draw:s((function(e,t,r,n,i,a,o){this.renderer.nodeShapeImpl("round-polygon",e,t,r,n,i,this.points,this.getOrCreateCorners(t,r,n,i,a,o,"drawCorners"))}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s,l){return pn(i,a,this.points,e,t,r,n,o,this.getOrCreateCorners(e,t,r,n,s,l,"corners"))}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s,l){return an(e,t,this.points,a,o,n,i,this.getOrCreateCorners(a,o,n,i,s,l,"corners"))}),"checkPoint")}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:mn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,this.points,a)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){return Xr(i,a,e,t,r,n,o,s)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){var l=n/2,u=i/2;s="auto"===s?xn(n,i):s;var c=2*(s=Math.min(l,u,s));return!!(nn(e,t,this.points,a,o,n,i-c,[0,-1],r)||nn(e,t,this.points,a,o,n-c,i,[0,-1],r)||un(e,t,c,c,a-l+s,o-u+s,r)||un(e,t,c,c,a+l-s,o-u+s,r)||un(e,t,c,c,a+l-s,o+u-s,r)||un(e,t,c,c,a-l+s,o+u-s,r))}),"checkPoint")}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Tn(),points:mn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,null,a)}),"draw"),generateCutTrianglePts:s((function(e,t,r,n,i){var a="auto"===i?this.cornerLength:i,o=t/2,s=e/2,l=r-s,u=r+s,c=n-o,h=n+o;return{topLeft:[l,c+a,l+a,c,l+a,c+a],topRight:[u-a,c,u,c+a,u-a,c+a],bottomRight:[u,h-a,u-a,h,u-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}}),"generateCutTrianglePts"),intersectLine:s((function(e,t,r,n,i,a,o,s){var l=this.generateCutTrianglePts(r+2*o,n+2*o,e,t,s),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return fn(i,a,u,e,t)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){var l="auto"===s?this.cornerLength:s;if(nn(e,t,this.points,a,o,n,i-2*l,[0,-1],r)||nn(e,t,this.points,a,o,n-2*l,i,[0,-1],r))return!0;var u=this.generateCutTrianglePts(n,i,a,o);return rn(e,t,u.topLeft)||rn(e,t,u.topRight)||rn(e,t,u.bottomRight)||rn(e,t,u.bottomLeft)}),"checkPoint")}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:mn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,l){var u=this.generateBarrelBezierPts(r+2*o,n+2*o,e,t),c=s((function(e){var t=Mr({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=Mr({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),n=Mr({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,n.x,n.y,e[4],e[5]]}),"approximateBarrelCurvePts"),h=[].concat(c(u.topLeft),c(u.topRight),c(u.bottomRight),c(u.bottomLeft));return fn(i,a,h,e,t)}),"intersectLine"),generateBarrelBezierPts:s((function(e,t,r,n){var i=t/2,a=e/2,o=r-a,s=r+a,l=n-i,u=n+i,c=wn(e,t),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*e,p={topLeft:[o,l+h,o+f,l,o+d,l],topRight:[s-d,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-d,u],bottomLeft:[o+d,u,o+f,u,o,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p}),"generateBarrelBezierPts"),checkPoint:s((function(e,t,r,n,i,a,o,l){var u=wn(n,i),c=u.heightOffset,h=u.widthOffset;if(nn(e,t,this.points,a,o,n,i-2*c,[0,-1],r)||nn(e,t,this.points,a,o,n-2*h,i,[0,-1],r))return!0;for(var d=this.generateBarrelBezierPts(n,i,a,o),f=s((function(e,t,r){var n=r[4],i=r[2],a=r[0],o=r[5],s=r[1],l=Math.min(n,a),u=Math.max(n,a),c=Math.min(o,s),h=Math.max(o,s);if(l<=e&&e<=u&&c<=t&&t<=h){var d=Cn(n,i,a),f=Qr(d[0],d[1],d[2],e).filter((function(e){return 0<=e&&e<=1}));if(f.length>0)return f[0]}return null}),"getCurveT"),p=Object.keys(d),g=0;g<p.length;g++){var m=d[p[g]],y=f(e,t,m);if(null!=y){var v=m[5],x=m[3],b=m[1],T=Ir(v,x,b,y);if(m.isTop&&T<=t||m.isBottom&&t<=T)return!0}}return!1}),"checkPoint")}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:mn(4,0),draw:s((function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,this.points,a)}),"draw"),intersectLine:s((function(e,t,r,n,i,a,o,s){var l=t-(n/2+o),u=dn(i,a,e,t,e-(r/2+o),l,e+(r/2+o),l,!1);return u.length>0?u:Xr(i,a,e,t,r,n,o,s)}),"intersectLine"),checkPoint:s((function(e,t,r,n,i,a,o,s){var l=2*(s="auto"===s?xn(n,i):s);if(nn(e,t,this.points,a,o,n,i-l,[0,-1],r)||nn(e,t,this.points,a,o,n-l,i,[0,-1],r))return!0;var u=n/2+2*r,c=i/2+2*r;return!!(rn(e,t,[a-u,o-c,a-u,o,a+u,o,a+u,o-c])||un(e,t,l,l,a+n/2-s,o+i/2-s,r)||un(e,t,l,l,a-n/2+s,o+i/2-s,r))}),"checkPoint")}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",mn(3,0)),this.generateRoundPolygon("round-triangle",mn(3,0)),this.generatePolygon("rectangle",mn(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",mn(5,0)),this.generateRoundPolygon("round-pentagon",mn(5,0)),this.generatePolygon("hexagon",mn(6,0)),this.generateRoundPolygon("round-hexagon",mn(6,0)),this.generatePolygon("heptagon",mn(7,0)),this.generateRoundPolygon("round-heptagon",mn(7,0)),this.generatePolygon("octagon",mn(8,0)),this.generateRoundPolygon("round-octagon",mn(8,0));var n=new Array(20),i=vn(5,0),a=vn(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[2*s]*=o,a[2*s+1]*=o;for(s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=a[2*s],n[4*s+3]=a[2*s+1];n=yn(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,n="polygon-"+e.join("$");return(r=this[n])?r:t.generatePolygon(n,e)}}},dd={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Gt();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&Ot("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort((function(e,t){return t.priority-e.priority}))}}},fd=s((function(e,t,r){for(var n=e.beforeRenderCallbacks,i=0;i<n.length;i++)n[i].fn(t,r)}),"beforeRenderCallbacks");dd.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=s((function r(n){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){fd(e,!0,n);var i=ft();e.render(e.renderOptions);var a=e.lastDrawTime=ft();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=a-i;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else fd(e,!1,n);e.skipFrame=!1,dt(r)}}),"renderFn");dt(r)}};var pd=s((function(e){this.init(e)}),"BaseRenderer"),gd=pd,md=gd.prototype;md.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],md.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),n=t.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=null!=i.getElementById(o);if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!l){var u=i.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",a.insertBefore(u,a.children[0])}"static"===n.getComputedStyle(r).getPropertyValue("position")&&Dt("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=U(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},md.notify=function(e,t){var r=this,n=r.cy;if(!this.destroyed){if("init"===e)return void r.load();if("destroy"===e)return void r.destroy();("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"gc"===e&&r.redrawHint("gc",!0),("load"===e||"resize"===e||"mount"===e)&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},md.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],n=r.target;(n.off||n.removeEventListener).apply(n,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},md.isHeadless=function(){return!1},[Ch,ld,ud,cd,hd,dd].forEach((function(e){fe(md,e)}));var yd=1e3/60,vd={setupDequeueing:s((function(e){return s((function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var n=lt((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),e.deqRedrawThreshold),i=s((function(i,a){var o=ft(),s=r.averageRedrawTime,l=r.lastRedrawTime,u=[],c=r.cy.extent(),h=r.getPixelRatio();for(i||r.flushRenderedStyleQueue();;){var d=ft(),f=d-o,p=d-a;if(l<yd){var g=yd-(i?s:0);if(p>=e.deqFastCost*g)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*yd)break;var m=e.deq(t,h,c);if(!(m.length>0))break;for(var y=0;y<m.length;y++)u.push(m[y])}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,h,c)&&n())}),"dequeue"),a=e.priority||Mt;r.beforeRender(i,a(t))}}),"setupDequeueingImpl")}),"setupDequeueing")},xd=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;p(this,e),this.idsByKey=new Kt,this.keyForId=new Kt,this.cachesByLvl=new Kt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return s(e,"ElementTextureCacheLookup"),m(e,[{key:"getIdsFor",value:s((function(e){null==e&&Ot("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new Qt,t.set(e,r)),r}),"getIdsFor")},{key:"addIdForKey",value:s((function(e,t){null!=e&&this.getIdsFor(e).add(t)}),"addIdForKey")},{key:"deleteIdForKey",value:s((function(e,t){null!=e&&this.getIdsFor(e).delete(t)}),"deleteIdForKey")},{key:"getNumberOfIdsForKey",value:s((function(e){return null==e?0:this.getIdsFor(e).size}),"getNumberOfIdsForKey")},{key:"updateKeyMappingFor",value:s((function(e){var t=e.id(),r=this.keyForId.get(t),n=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(n,t),this.keyForId.set(t,n)}),"updateKeyMappingFor")},{key:"deleteKeyMappingFor",value:s((function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}),"deleteKeyMappingFor")},{key:"keyHasChangedFor",value:s((function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}),"keyHasChangedFor")},{key:"isInvalid",value:s((function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}),"isInvalid")},{key:"getCachesAt",value:s((function(e){var t=this.cachesByLvl,r=this.lvls,n=t.get(e);return n||(n=new Kt,t.set(e,n),r.push(e)),n}),"getCachesAt")},{key:"getCache",value:s((function(e,t){return this.getCachesAt(t).get(e)}),"getCache")},{key:"get",value:s((function(e,t){var r=this.getKey(e),n=this.getCache(r,t);return null!=n&&this.updateKeyMappingFor(e),n}),"get")},{key:"getForCachedKey",value:s((function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}),"getForCachedKey")},{key:"hasCache",value:s((function(e,t){return this.getCachesAt(t).has(e)}),"hasCache")},{key:"has",value:s((function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}),"has")},{key:"setCache",value:s((function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}),"setCache")},{key:"set",value:s((function(e,t,r){var n=this.getKey(e);this.setCache(n,t,r),this.updateKeyMappingFor(e)}),"set")},{key:"deleteCache",value:s((function(e,t){this.getCachesAt(t).delete(e)}),"deleteCache")},{key:"delete",value:s((function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}),"_delete")},{key:"invalidateKey",value:s((function(e){var t=this;this.lvls.forEach((function(r){return t.deleteCache(e,r)}))}),"invalidateKey")},{key:"invalidate",value:s((function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var n=this.doesEleInvalidateKey(e);return n&&this.invalidateKey(r),n||0===this.getNumberOfIdsForKey(r)}),"invalidate")}]),e}(),bd={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Td=jt({getKey:null,doesEleInvalidateKey:Lt,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Nt,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Cd=s((function(e,t){var r=this;r.renderer=e,r.onDequeues=[];var n=Td(t);fe(r,n),r.lookup=new xd(n.getKey,n.doesEleInvalidateKey),r.setupDequeueing()}),"ElementTextureCache"),wd=Cd.prototype;wd.reasons=bd,wd.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},wd.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},wd.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new nr((function(e,t){return t.reqs-e.reqs}))},wd.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},wd.getElement=function(e,t,r,n,i){var a=this,o=this.renderer,l=o.cy.zoom(),u=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(null==n&&(n=Math.ceil(Ar(l*r))),n<-4)n=-4;else if(l>=7.99||n>3)return null;var c=Math.pow(2,n),h=t.h*c,d=t.w*c,f=o.eleTextBiggerThanMin(e,c);if(!this.isVisible(e,f))return null;var p,g=u.get(e,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;if(p=h<=25?25:h<=50?50:50*Math.ceil(h/50),h>1024||d>1024)return null;var m=a.getTextureQueue(p),y=m[m.length-2],v=s((function(){return a.recycleTexture(p,d)||a.addTexture(p,d)}),"addNewTxr");y||(y=m[m.length-1]),y||(y=v()),y.width-y.usedWidth<d&&(y=v());for(var x,b=s((function(e){return e&&e.scaledLabelShown===f}),"scalableFrom"),T=i&&i===bd.dequeue,C=i&&i===bd.highQuality,w=i&&i===bd.downscale,k=n+1;k<=3;k++){var E=u.get(e,k);if(E){x=E;break}}var _=x&&x.level===n+1?x:null,A=s((function(){y.context.drawImage(_.texture.canvas,_.x,0,_.width,_.height,y.usedWidth,0,d,h)}),"downscale");if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,d,p),b(_))A();else if(b(x)){if(!C)return a.queueElement(e,x.level-1),x;for(var S=x.level;S>n;S--)_=a.getElement(e,t,r,S,bd.downscale);A()}else{var R;if(!T&&!C&&!w)for(var N=n-1;N>=-4;N--){var L=u.get(e,N);if(L){R=L;break}}if(b(R))return a.queueElement(e,n),R;y.context.translate(y.usedWidth,0),y.context.scale(c,c),this.drawElement(y.context,e,t,f,!1),y.context.scale(1/c,1/c),y.context.translate(-y.usedWidth,0)}return g={x:y.usedWidth,texture:y,level:n,scale:c,width:d,height:h,scaledLabelShown:f},y.usedWidth+=Math.ceil(d+8),y.eleCaches.push(g),u.set(e,n,g),a.checkTextureFullness(y),g},wd.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},wd.invalidateElement=function(e){var t=this,r=t.lookup,n=[];if(r.isInvalid(e)){for(var i=-4;i<=3;i++){var a=r.getForCachedKey(e,i);a&&n.push(a)}if(r.invalidate(e))for(var o=0;o<n.length;o++){var s=n[o],l=s.texture;l.invalidatedWidth+=s.width,s.invalidated=!0,t.checkTextureUtility(l)}t.removeFromQueue(e)}},wd.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},wd.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?Vt(t,e):e.fullnessChecks++},wd.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),n=this.lookup;Vt(r,e),e.retired=!0;for(var i=e.eleCaches,a=0;a<i.length;a++){var o=i[a];n.deleteCache(o.key,o.level)}Wt(i),this.getRetiredTextureQueue(t).push(e)},wd.addTexture=function(e,t){var r={};return this.getTextureQueue(e).push(r),r.eleCaches=[],r.height=e,r.width=Math.max(1024,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},wd.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),n=this.getRetiredTextureQueue(e),i=0;i<n.length;i++){var a=n[i];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Wt(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Vt(n,a),r.push(a),a}},wd.queueElement=function(e,t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(e),a=n[i];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:i};r.push(o),n[i]=o}},wd.dequeue=function(e){for(var t=this,r=t.getElementQueue(),n=t.getElementKeyToQueue(),i=[],a=t.lookup,o=0;o<1&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],c=a.hasCache(u,s.level);if(n[l]=null,!c){i.push(s);var h=t.getBoundingBox(u);t.getElement(u,h,e,s.level,bd.dequeue)}}return i},wd.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(e),i=r[n];null!=i&&(1===i.eles.length?(i.reqs=Rt,t.updateItem(i),t.pop(),r[n]=null):i.eles.unmerge(e))},wd.onDequeue=function(e){this.onDequeues.push(e)},wd.offDequeue=function(e){Vt(this.onDequeues,e)},wd.setupDequeueing=vd.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:s((function(e,t,r){return e.dequeue(t,r)}),"deq"),onDeqd:s((function(e,t){for(var r=0;r<e.onDequeues.length;r++){(0,e.onDequeues[r])(t)}}),"onDeqd"),shouldRedraw:s((function(e,t,r,n){for(var i=0;i<t.length;i++)for(var a=t[i].eles,o=0;o<a.length;o++){var s=a[o].boundingBox();if(Wr(s,n))return!0}return!1}),"shouldRedraw"),priority:s((function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}),"priority")});var kd=s((function(e){var t=this,r=t.renderer=e,n=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=ft()-500,t.skipping=!1,t.eleTxrDeqs=n.collection(),t.scheduleElementRefinement=lt((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),50),r.beforeRender((function(e,r){r-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);var i=s((function(e,t){return t.reqs-e.reqs}),"qSort");t.layersQueue=new nr(i),t.setupDequeueing()}),"LayeredTextureCache"),Ed=kd.prototype,_d=0,Ad=Math.pow(2,53)-1;Ed.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),i=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(n,i),o={id:_d=++_d%Ad,bb:e,level:t,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o},Ed.getLayers=function(e,t,r){var n=this,i=n.renderer.cy.zoom(),a=n.firstGet;if(n.firstGet=!1,null==r)if((r=Math.ceil(Ar(i*t)))<-4)r=-4;else if(i>=3.99||r>2)return null;n.validateLayersElesOrdering(r,e);var o,l,u=n.layersByLevel,c=Math.pow(2,r),h=u[r]=u[r]||[],d=n.levelIsComplete(r,e),f=s((function(){var t=s((function(t){if(n.validateLayersElesOrdering(t,e),n.levelIsComplete(t,e))return l=u[t],!0}),"canUseAsTmpLvl"),i=s((function(e){if(!l)for(var n=r+e;-4<=n&&n<=2&&!t(n);n+=e);}),"checkLvls");i(1),i(-1);for(var a=h.length-1;a>=0;a--){var o=h[a];o.invalid&&Vt(h,o)}}),"checkTempLevels");if(d)return h;f();var p=s((function(){if(!o){o=Dr();for(var t=0;t<e.length;t++)zr(o,e[t].boundingBox())}return o}),"getBb"),g=s((function(e){var t=(e=e||{}).after;p();var i=Math.ceil(o.w*c),a=Math.ceil(o.h*c);if(i>32767||a>32767)return null;if(i*a>16e6)return null;var s=n.makeLayer(o,r);if(null!=t){var l=h.indexOf(t)+1;h.splice(l,0,s)}else(void 0===e.insert||e.insert)&&h.unshift(s);return s}),"makeLayer");if(n.skipping&&!a)return null;for(var m=null,y=e.length/1,v=!a,x=0;x<e.length;x++){var b=e[x],T=b._private.rscratch,C=T.imgLayerCaches=T.imgLayerCaches||{},w=C[r];if(w)m=w;else{if((!m||m.eles.length>=y||!Yr(m.bb,b.boundingBox()))&&!(m=g({insert:!0,after:m})))return null;l||v?n.queueLayer(m,b):n.drawEleInLayer(m,b,r,t),m.eles.push(b),C[r]=m}}return l||(v?null:h)},Ed.getEleLevelForLayerLevel=function(e,t){return e},Ed.drawEleInLayer=function(e,t,r,n){var i=this.renderer,a=e.context,o=t.boundingBox();0===o.w||0===o.h||!t.visible()||(r=this.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(a,!1),i.drawCachedElement(a,t,null,null,r,true),i.setImgSmoothing(a,!0))},Ed.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var n=0,i=0;i<r.length;i++){var a=r[i];if(a.reqs>0||a.invalid)return!1;n+=a.eles.length}return n===t.length},Ed.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,o=0;o<t.length;o++)if(i.eles[0]===t[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var s=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==t[s+o]){this.invalidateLayer(i);break}}}},Ed.updateElementsInLayers=function(e,t){for(var r=W(e[0]),n=0;n<e.length;n++)for(var i=r?null:e[n],a=r?e[n]:e[n].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,a,i))}},Ed.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},Ed.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=ft(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,s((function(e,r,n){t.invalidateLayer(e)}),"invalAssocLayers")))},Ed.invalidateLayer=function(e){if(this.lastInvalidationTime=ft(),!e.invalid){var t=e.level,r=e.eles,n=this.layersByLevel[t];Vt(n,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},Ed.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,s((function(e,r,n){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)t.queueLayer(i,i.eles[a])}),"refineEachEle"))},Ed.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},Ed.queueLayer=function(e,t){var r=this.layersQueue,n=e.elesQueue,i=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;n.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},Ed.dequeue=function(e){for(var t=this,r=t.layersQueue,n=[],i=0;i<1&&0!==r.size();){var a=r.peek();if(a.replacement)r.pop();else if(a.replaces&&a!==a.replaces.replacement)r.pop();else if(a.invalid)r.pop();else{var o=a.elesQueue.shift();o&&(t.drawEleInLayer(a,o,a.level,e),i++),0===n.length&&n.push(!0),0===a.elesQueue.length&&(r.pop(),a.reqs=0,a.replaces&&t.applyLayerReplacement(a),t.requestRedraw())}}return n},Ed.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,n=t.indexOf(r);if(!(n<0||r.invalid)){t[n]=e;for(var i=0;i<e.eles.length;i++){var a=e.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},Ed.requestRedraw=lt((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),Ed.setupDequeueing=vd.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:s((function(e,t){return e.dequeue(t)}),"deq"),onDeqd:Mt,shouldRedraw:Nt,priority:s((function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}),"priority")});var Sd,Rd={};function Nd(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function Ld(e,t,r){for(var n,i=0;i<t.length;i++){var a=t[i];0===i&&(n=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Id(e,t,r){e.beginPath&&e.beginPath();for(var n=t,i=0;i<n.length;i++){var a=n[i];e.lineTo(a.x,a.y)}var o=r,s=r[0];e.moveTo(s.x,s.y);for(i=1;i<o.length;i++){a=o[i];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function Md(e,t,r,n,i){e.beginPath&&e.beginPath(),e.arc(r,n,i,0,2*Math.PI,!1);var a=t,o=a[0];e.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var l=a[s];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function Od(e,t,r,n){e.arc(t,r,n,0,2*Math.PI,!1)}s(Nd,"polygon"),s(Ld,"triangleBackcurve"),s(Id,"triangleTee"),s(Md,"circleTriangle"),s(Od,"circle"),Rd.arrowShapeImpl=function(e){return(Sd||(Sd={polygon:Nd,"triangle-backcurve":Ld,"triangle-tee":Id,"circle-triangle":Md,"triangle-cross":Id,circle:Od}))[e]};var Pd={drawElement:function(e,t,r,n,i,a){t.isNode()?this.drawNode(e,t,r,n,i,a):this.drawEdge(e,t,r,n,i,a)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,n,i,a,o,s){var l=this,u=r.getBoundingBox(t);if(0!==u.w&&0!==u.h){var c=r.getElement(t,u,n,i,a);if(null!=c){var h=s(l,t);if(0===h)return;var d,f,p,g,m,y,v=o(l,t),x=u.x1,b=u.y1,T=u.w,C=u.h;if(0!==v){var w=r.getRotationPoint(t);p=w.x,g=w.y,e.translate(p,g),e.rotate(v),(m=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var k=r.getRotationOffset(t);d=k.x,f=k.y}else d=x,f=b;1!==h&&(y=e.globalAlpha,e.globalAlpha=y*h),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,f,T,C),1!==h&&(e.globalAlpha=y),0!==v&&(e.rotate(-v),e.translate(-p,-g),m||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},Dd=s((function(){return 0}),"getZeroRotation"),Bd=s((function(e,t){return e.getTextAngle(t,null)}),"getLabelRotation"),Fd=s((function(e,t){return e.getTextAngle(t,"source")}),"getSourceLabelRotation"),$d=s((function(e,t){return e.getTextAngle(t,"target")}),"getTargetLabelRotation"),zd=s((function(e,t){return t.effectiveOpacity()}),"getOpacity"),Ud=s((function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()}),"getTextOpacity");Pd.drawCachedElement=function(e,t,r,n,i,a){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,d=t.boundingBox(),f=!0===a?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!n||Wr(d,n))){var p=t.isEdge(),g=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t),o.drawCachedElementPortion(e,t,l,r,i,f,Dd,zd),(!p||!g)&&o.drawCachedElementPortion(e,t,u,r,i,f,Bd,Ud),p&&!g&&(o.drawCachedElementPortion(e,t,c,r,i,f,Fd,Ud),o.drawCachedElementPortion(e,t,h,r,i,f,$d,Ud)),o.drawElementOverlay(e,t)}},Pd.drawElements=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.drawElement(e,n)}},Pd.drawCachedElements=function(e,t,r,n){for(var i=0;i<t.length;i++){var a=t[i];this.drawCachedElement(e,a,r,n)}},Pd.drawCachedNodes=function(e,t,r,n){for(var i=0;i<t.length;i++){var a=t[i];a.isNode()&&this.drawCachedElement(e,a,r,n)}},Pd.drawLayeredElements=function(e,t,r,n){var i=this.data.lyrTxrCache.getLayers(t,r);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0===s.w||0===s.h||e.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,r,n)};var Gd={drawEdge:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,l=t._private.rscratch;if((!a||t.visible())&&!l.badLine&&null!=l.allpts&&!isNaN(l.allpts[0])){var u;r&&(u=r,e.translate(-u.x1,-u.y1));var c=a?t.pstyle("opacity").value:1,h=a?t.pstyle("line-opacity").value:1,d=t.pstyle("curve-style").value,f=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,g=t.pstyle("line-cap").value,m=t.pstyle("line-outline-width").value,y=t.pstyle("line-outline-color").value,v=c*h,x=c*h,b=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;"straight-triangle"===d?(o.eleStrokeStyle(e,t,r),o.drawEdgeTrianglePath(t,e,l.allpts)):(e.lineWidth=p,e.lineCap=g,o.eleStrokeStyle(e,t,r),o.drawEdgePath(t,e,l.allpts,f),e.lineCap="butt")}),"drawLine"),T=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;e.lineWidth=p+m,e.lineCap=g,m>0?(o.colorStrokeStyle(e,y[0],y[1],y[2],r),"straight-triangle"===d?o.drawEdgeTrianglePath(t,e,l.allpts):(o.drawEdgePath(t,e,l.allpts,f),e.lineCap="butt")):e.lineCap="butt"}),"drawLineOutline"),C=s((function(){i&&o.drawEdgeOverlay(e,t)}),"drawOverlay"),w=s((function(){i&&o.drawEdgeUnderlay(e,t)}),"drawUnderlay"),k=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;o.drawArrowheads(e,t,r)}),"drawArrows"),E=s((function(){o.drawElementText(e,t,null,n)}),"drawText");if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var _=t.pstyle("ghost-offset-x").pfValue,A=t.pstyle("ghost-offset-y").pfValue,S=t.pstyle("ghost-opacity").value,R=v*S;e.translate(_,A),b(R),k(R),e.translate(-_,-A)}else T();w(),b(),k(),C(),E(),r&&e.translate(u.x1,u.y1)}}},jd=s((function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r){if(r.visible()){var n=r.pstyle("".concat(e,"-opacity")).value;if(0!==n){var i=this,a=i.usePaths(),o=r._private.rscratch,s=2*r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-color")).value;t.lineWidth=s,"self"!==o.edgeType||a?t.lineCap="round":t.lineCap="butt",i.colorStrokeStyle(t,l[0],l[1],l[2],n),i.drawEdgePath(r,t,o.allpts,"solid")}}}}),"drawEdgeOverlayUnderlay");Gd.drawEdgeOverlay=jd("overlay"),Gd.drawEdgeUnderlay=jd("underlay"),Gd.drawEdgePath=function(e,t,r,n){var i,a=e._private.rscratch,o=t,s=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var h=r.join("$");a.pathCacheKey&&a.pathCacheKey===h?(i=t=a.pathCache,s=!0):(i=t=new Path2D,a.pathCacheKey=h,a.pathCache=i)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=c;break;case"solid":o.setLineDash([])}if(!s&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)t.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"haystack":for(var f=2;f+1<r.length;f+=2)t.lineTo(r[f],r[f+1]);break;case"segments":if(a.isRound){var p,g=S(a.roundCorners);try{for(g.s();!(p=g.n()).done;){qh(t,p.value)}}catch(e){g.e(e)}finally{g.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)t.lineTo(r[m],r[m+1])}t=o,l?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},Gd.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var n=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*n/2,s[1]*n/2];t.beginPath(),t.moveTo(r[i]-l[0],r[i+1]-l[1]),t.lineTo(r[i]+l[0],r[i+1]+l[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}},Gd.drawArrowheads=function(e,t,r){var n=t._private.rscratch,i="haystack"===n.edgeType;i||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},Gd.drawArrowhead=function(e,t,r,n,i,a,o){if(!(isNaN(n)||null==n||isNaN(i)||null==i||isNaN(a)||null==a)){var s=this,l=t.pstyle(r+"-arrow-shape").value;if("none"!==l){var u="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",c=t.pstyle(r+"-arrow-fill").value,h=t.pstyle("width").pfValue,d=t.pstyle(r+"-arrow-width"),f="match-line"===d.value?h:d.pfValue;"%"===d.units&&(f*=h);var p=t.pstyle("opacity").value;void 0===o&&(o=p);var g=e.globalCompositeOperation;(1!==o||"hollow"===c)&&(e.globalCompositeOperation="destination-out",s.colorFillStyle(e,255,255,255,1),s.colorStrokeStyle(e,255,255,255,1),s.drawArrowShape(t,e,u,h,l,f,n,i,a),e.globalCompositeOperation=g);var m=t.pstyle(r+"-arrow-color").value;s.colorFillStyle(e,m[0],m[1],m[2],o),s.colorStrokeStyle(e,m[0],m[1],m[2],o),s.drawArrowShape(t,e,c,h,l,f,n,i,a)}}},Gd.drawArrowShape=function(e,t,r,n,i,a,o,s,l){var u,c=this,h=this.usePaths()&&"triangle-cross"!==i,d=!1,f=t,p={x:o,y:s},g=e.pstyle("arrow-scale").value,m=this.getArrowWidth(n,g),y=c.arrowShapes[i];if(h){var v=c.arrowPathCache=c.arrowPathCache||[],x=wt(i),b=v[x];null!=b?(u=t=b,d=!0):(u=t=new Path2D,v[x]=u)}d||(t.beginPath&&t.beginPath(),h?y.draw(t,1,0,{x:0,y:0},1):y.draw(t,m,l,p,n),t.closePath&&t.closePath()),t=f,h&&(t.translate(o,s),t.rotate(l),t.scale(m,m)),("filled"===r||"both"===r)&&(h?t.fill(u):t.fill()),("hollow"===r||"both"===r)&&(t.lineWidth=a/(h?m:1),t.lineJoin="miter",h?t.stroke(u):t.stroke()),h&&(t.scale(1/m,1/m),t.rotate(-l),t.translate(-o,-s))};var Vd={safeDrawImage:function(e,t,r,n,i,a,o,s,l,u){if(!(i<=0||a<=0||l<=0||u<=0))try{e.drawImage(t,r,n,i,a,o,s,l,u)}catch(e){Dt(e)}},drawInscribedImage:function(e,t,r,n,i){var a=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),h=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),f=r.width(),p=r.height(),g=2*r.padding(),m=f+("inner"===c(r,"background-width-relative-to","value",n)?0:g),y=p+("inner"===c(r,"background-height-relative-to","value",n)?0:g),v=r._private.rscratch,x="node"===c(r,"background-clip","value",n),b=c(r,"background-image-opacity","value",n)*i,T=c(r,"background-image-smoothing","value",n),C=r.pstyle("corner-radius").value;"auto"!==C&&(C=r.pstyle("corner-radius").pfValue);var w=t.width||t.cachedW,k=t.height||t.cachedH;(null==w||null==k)&&(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,k=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var E=w,_=k;if("auto"!==c(r,"background-width","value",n)&&(E="%"===c(r,"background-width","units",n)?c(r,"background-width","pfValue",n)*m:c(r,"background-width","pfValue",n)),"auto"!==c(r,"background-height","value",n)&&(_="%"===c(r,"background-height","units",n)?c(r,"background-height","pfValue",n)*y:c(r,"background-height","pfValue",n)),0!==E&&0!==_){if("contain"===h)E*=A=Math.min(m/E,y/_),_*=A;else if("cover"===h){var A;E*=A=Math.max(m/E,y/_),_*=A}var S=s-m/2,R=c(r,"background-position-x","units",n),N=c(r,"background-position-x","pfValue",n);S+="%"===R?(m-E)*N:N;var L=c(r,"background-offset-x","units",n),I=c(r,"background-offset-x","pfValue",n);S+="%"===L?(m-E)*I:I;var M=l-y/2,O=c(r,"background-position-y","units",n),P=c(r,"background-position-y","pfValue",n);M+="%"===O?(y-_)*P:P;var D=c(r,"background-offset-y","units",n),B=c(r,"background-offset-y","pfValue",n);M+="%"===D?(y-_)*B:B,v.pathCache&&(S-=s,M-=l,s=0,l=0);var F=e.globalAlpha;e.globalAlpha=b;var $=a.getImgSmoothing(e),z=!1;if("no"===T&&$?(a.setImgSmoothing(e,!1),z=!0):"yes"===T&&!$&&(a.setImgSmoothing(e,!0),z=!0),"no-repeat"===d)x&&(e.save(),v.pathCache?e.clip(v.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(e,s,l,m,y,C,v),e.clip())),a.safeDrawImage(e,t,0,0,w,k,S,M,E,_),x&&e.restore();else{var U=e.createPattern(t,d);e.fillStyle=U,a.nodeShapes[a.getNodeShape(r)].draw(e,s,l,m,y,C,v),e.translate(S,M),e.fill(),e.translate(-S,-M)}e.globalAlpha=F,z&&a.setImgSmoothing(e,$)}}},Wd={};function Hd(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),o?e.stroke():e.fill()}Wd.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(Ar(r*n));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Wd.drawElementText=function(e,t,r,n,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==n){if(a&&!o.eleTextBiggerThanMin(t))return}else if(!1===n)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),h=t.pstyle("source-label"),d=t.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var f,p=!r;r&&(f=r,e.translate(-f.x1,-f.y1)),null==i?(o.drawText(e,t,null,p,a),t.isEdge()&&(o.drawText(e,t,"source",p,a),o.drawText(e,t,"target",p,a))):o.drawText(e,t,i,p,a),r&&e.translate(f.x1,f.y1)},Wd.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},Wd.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=n+" "+o+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},s(Hd,"roundRect"),Wd.getTextAngle=function(e,t){var r,n=e._private.rscratch,i=t?t+"-":"",a=e.pstyle(i+"text-rotation");if("autorotate"===a.strValue){var o=qt(n,"labelAngle",t);r=e.isEdge()?o:0}else r="none"===a.strValue?0:a.pfValue;return r},Wd.drawText=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var s,l,u=qt(a,"labelX",r),c=qt(a,"labelY",r),h=this.getLabelText(t,r);if(null!=h&&""!==h&&!isNaN(u)&&!isNaN(c)){this.setupTextStyle(e,t,i);var d,f=r?r+"-":"",p=qt(a,"labelWidth",r),g=qt(a,"labelHeight",r),m=t.pstyle(f+"text-margin-x").pfValue,y=t.pstyle(f+"text-margin-y").pfValue,v=t.isEdge(),x=t.pstyle("text-halign").value,b=t.pstyle("text-valign").value;switch(v&&(x="center",b="center"),u+=m,c+=y,0!==(d=n?this.getTextAngle(t,r):0)&&(s=u,l=c,e.translate(s,l),e.rotate(d),u=0,c=0),b){case"top":break;case"center":c+=g/2;break;case"bottom":c+=g}var T=t.pstyle("text-background-opacity").value,C=t.pstyle("text-border-opacity").value,w=t.pstyle("text-border-width").pfValue,k=t.pstyle("text-background-padding").pfValue,E=0===t.pstyle("text-background-shape").strValue.indexOf("round");if(T>0||w>0&&C>0){var _=u-k;switch(x){case"left":_-=p;break;case"center":_-=p/2}var A=c-g-k,S=p+2*k,R=g+2*k;if(T>0){var N=e.fillStyle,L=t.pstyle("text-background-color").value;e.fillStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+T*o+")",E?Hd(e,_,A,S,R,2):e.fillRect(_,A,S,R),e.fillStyle=N}if(w>0&&C>0){var I=e.strokeStyle,M=e.lineWidth,O=t.pstyle("text-border-color").value,P=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+C*o+")",e.lineWidth=w,e.setLineDash)switch(P){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=w/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(E?Hd(e,_,A,S,R,2,"stroke"):e.strokeRect(_,A,S,R),"double"===P){var D=w/2;E?Hd(e,_+D,A+D,S-2*D,R-2*D,2,"stroke"):e.strokeRect(_+D,A+D,S-2*D,R-2*D)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=I}}var B=2*t.pstyle("text-outline-width").pfValue;if(B>0&&(e.lineWidth=B),"wrap"===t.pstyle("text-wrap").value){var F=qt(a,"labelWrapCachedLines",r),$=qt(a,"labelLineHeight",r),z=p/2,U=this.getLabelJustification(t);switch("auto"===U||("left"===x?"left"===U?u+=-p:"center"===U&&(u+=-z):"center"===x?"left"===U?u+=-z:"right"===U&&(u+=z):"right"===x&&("center"===U?u+=z:"right"===U&&(u+=p))),b){case"top":case"center":case"bottom":c-=(F.length-1)*$}for(var G=0;G<F.length;G++)B>0&&e.strokeText(F[G],u,c),e.fillText(F[G],u,c),c+=$}else B>0&&e.strokeText(h,u,c),e.fillText(h,u,c);0!==d&&(e.rotate(-d),e.translate(-s,-l))}}};var qd={drawNode:function(e,t,r){var n,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,c=t._private,h=c.rscratch,d=t.position();if(U(d.x)&&U(d.y)&&(!l||t.visible())){var f,p,g=l?t.effectiveOpacity():1,m=u.usePaths(),y=!1,v=t.padding();n=t.width()+2*v,i=t.height()+2*v,r&&(p=r,e.translate(-p.x1,-p.y1));for(var x=t.pstyle("background-image").value,b=new Array(x.length),T=new Array(x.length),C=0,w=0;w<x.length;w++){var k=x[w];if(b[w]=null!=k&&"none"!==k){var E=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",w);C++,T[w]=u.getCachedImage(k,E,(function(){c.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var _=t.pstyle("background-blacken").value,A=t.pstyle("border-width").pfValue,S=t.pstyle("background-opacity").value*g,R=t.pstyle("border-color").value,N=t.pstyle("border-style").value,L=t.pstyle("border-join").value,I=t.pstyle("border-cap").value,M=t.pstyle("border-position").value,O=t.pstyle("border-dash-pattern").pfValue,P=t.pstyle("border-dash-offset").pfValue,D=t.pstyle("border-opacity").value*g,B=t.pstyle("outline-width").pfValue,F=t.pstyle("outline-color").value,$=t.pstyle("outline-style").value,z=t.pstyle("outline-opacity").value*g,G=t.pstyle("outline-offset").value,j=t.pstyle("corner-radius").value;"auto"!==j&&(j=t.pstyle("corner-radius").pfValue);var V=s((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;u.eleFillStyle(e,t,r)}),"setupShapeColor"),W=s((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;u.colorStrokeStyle(e,R[0],R[1],R[2],t)}),"setupBorderColor"),H=s((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;u.colorStrokeStyle(e,F[0],F[1],F[2],t)}),"setupOutlineColor"),q=s((function(e,t,r,n){var i,a=u.nodePathCache=u.nodePathCache||[],o=kt("polygon"===r?r+","+n.join(","):r,""+t,""+e,""+j),s=a[o],l=!1;return null!=s?(i=s,l=!0,h.pathCache=i):(i=new Path2D,a[o]=h.pathCache=i),{path:i,cacheHit:l}}),"getPath"),Y=t.pstyle("shape").strValue,X=t.pstyle("shape-polygon-points").pfValue;if(m){e.translate(d.x,d.y);var K=q(n,i,Y,X);f=K.path,y=K.cacheHit}var Z=s((function(){if(!y){var r=d;m&&(r={x:0,y:0}),u.nodeShapes[u.getNodeShape(t)].draw(f||e,r.x,r.y,n,i,j,h)}m?e.fill(f):e.fill()}),"drawShape"),Q=s((function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=c.backgrounding,a=0,o=0;o<T.length;o++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",o);n&&"over"===s||!n&&"inside"===s?a++:b[o]&&T[o].complete&&!T[o].error&&(a++,u.drawInscribedImage(e,T[o],t,o,r))}c.backgrounding=a!==C,i!==c.backgrounding&&t.updateStyle(!1)}),"drawImages"),J=s((function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;u.hasPie(t)&&(u.drawPie(e,t,a),r&&(m||u.nodeShapes[u.getNodeShape(t)].draw(e,d.x,d.y,n,i,j,h)))}),"drawPie"),ee=s((function(){var t=(_>0?_:-_)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:g),r=_>0?0:255;0!==_&&(u.colorFillStyle(e,r,r,r,t),m?e.fill(f):e.fill())}),"darken"),te=s((function(){if(A>0){if(e.lineWidth=A,e.lineCap=I,e.lineJoin=L,e.setLineDash)switch(N){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(O),e.lineDashOffset=P;break;case"solid":case"double":e.setLineDash([])}if("center"!==M){if(e.save(),e.lineWidth*=2,"inside"===M)m?e.clip(f):e.clip();else{var t=new Path2D;t.rect(-n/2-A,-i/2-A,n+2*A,i+2*A),t.addPath(f),e.clip(t,"evenodd")}m?e.stroke(f):e.stroke(),e.restore()}else m?e.stroke(f):e.stroke();if("double"===N){e.lineWidth=A/3;var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(f):e.stroke(),e.globalCompositeOperation=r}e.setLineDash&&e.setLineDash([])}}),"drawBorder"),re=s((function(){if(B>0){if(e.lineWidth=B,e.lineCap="butt",e.setLineDash)switch($){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var r=d;m&&(r={x:0,y:0});var a=u.getNodeShape(t),o=A;"inside"===M&&(o=0),"outside"===M&&(o*=2);var s,l=(n+o+(B+G))/n,c=(i+o+(B+G))/i,h=n*l,f=i*c,p=u.nodeShapes[a].points;if(m)s=q(h,f,a,p).path;if("ellipse"===a)u.drawEllipsePath(s||e,r.x,r.y,h,f);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var g=0,y=0,v=0;"round-diamond"===a?g=1.4*(o+G+B):"round-heptagon"===a?(g=1.075*(o+G+B),v=-(o/2+G+B)/35):"round-hexagon"===a?g=1.12*(o+G+B):"round-pentagon"===a?(g=1.13*(o+G+B),v=-(o/2+G+B)/15):"round-tag"===a?(g=1.12*(o+G+B),y=.07*(o/2+B+G)):"round-triangle"===a&&(g=(o+G+B)*(Math.PI/2),v=-(o+G/2+B)/Math.PI),0!==g&&(h=n*(l=(n+g)/n),["round-hexagon","round-tag"].includes(a)||(f=i*(c=(i+g)/i)));for(var x=h/2,b=f/2,T=(j="auto"===j?bn(h,f):j)+(o+B+G)/2,C=new Array(p.length/2),w=new Array(p.length/2),k=0;k<p.length/2;k++)C[k]={x:r.x+y+x*p[2*k],y:r.y+v+b*p[2*k+1]};var E,_,S,R,N=C.length;for(_=C[N-1],E=0;E<N;E++)S=C[E%N],R=C[(E+1)%N],w[E]=Yh(_,S,R,T),_=S,S=R;u.drawRoundPolygonPath(s||e,r.x+y,r.y+v,n*l,i*c,p,w)}else if(["roundrectangle","round-rectangle"].includes(a))j="auto"===j?xn(h,f):j,u.drawRoundRectanglePath(s||e,r.x,r.y,h,f,j+(o+B+G)/2);else if(["cutrectangle","cut-rectangle"].includes(a))j="auto"===j?Tn():j,u.drawCutRectanglePath(s||e,r.x,r.y,h,f,null,j+(o+B+G)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(a))j="auto"===j?xn(h,f):j,u.drawBottomRoundRectanglePath(s||e,r.x,r.y,h,f,j+(o+B+G)/2);else if("barrel"===a)u.drawBarrelPath(s||e,r.x,r.y,h,f);else if(a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)){p=on(sn(p,(o+B+G)/n)),u.drawPolygonPath(s||e,r.x,r.y,n,i,p)}else{p=on(sn(p,-((o+B+G)/n))),u.drawPolygonPath(s||e,r.x,r.y,n,i,p)}if(m?e.stroke(s):e.stroke(),"double"===$){e.lineWidth=o/3;var L=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(s):e.stroke(),e.globalCompositeOperation=L}e.setLineDash&&e.setLineDash([])}}),"drawOutline"),ne=s((function(){o&&u.drawNodeOverlay(e,t,d,n,i)}),"drawOverlay"),ie=s((function(){o&&u.drawNodeUnderlay(e,t,d,n,i)}),"drawUnderlay"),ae=s((function(){u.drawElementText(e,t,null,a)}),"drawText");if("yes"===t.pstyle("ghost").value){var oe=t.pstyle("ghost-offset-x").pfValue,se=t.pstyle("ghost-offset-y").pfValue,le=t.pstyle("ghost-opacity").value,ue=le*g;e.translate(oe,se),H(),re(),V(le*S),Z(),Q(ue,!0),W(le*D),te(),J(0!==_||0!==A),Q(ue,!1),ee(ue),e.translate(-oe,-se)}m&&e.translate(-d.x,-d.y),ie(),m&&e.translate(d.x,d.y),H(),re(),V(),Z(),Q(g,!0),W(),te(),J(0!==_||0!==A),Q(g,!1),ee(),m&&e.translate(-d.x,-d.y),ae(),ne(),r&&e.translate(p.x1,p.y1)}}},Yd=s((function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r,n,i,a){if(r.visible()){var o=r.pstyle("".concat(e,"-padding")).pfValue,s=r.pstyle("".concat(e,"-opacity")).value,l=r.pstyle("".concat(e,"-color")).value,u=r.pstyle("".concat(e,"-shape")).value,c=r.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(n=n||r.position(),null==i||null==a){var h=r.padding();i=r.width()+2*h,a=r.height()+2*h}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,n.x,n.y,i+2*o,a+2*o,c),t.fill()}}}}),"drawNodeOverlayUnderlay");qd.drawNodeOverlay=Yd("overlay"),qd.drawNodeUnderlay=Yd("underlay"),qd.hasPie=function(e){return(e=e[0])._private.hasPie},qd.drawPie=function(e,t,r,n){t=t[0],n=n||t.position();var i=t.cy().style(),a=t.pstyle("pie-size"),o=n.x,s=n.y,l=t.width(),u=t.height(),c=Math.min(l,u)/2,h=0;this.usePaths()&&(o=0,s=0),"%"===a.units?c*=a.pfValue:void 0!==a.pfValue&&(c=a.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var f=t.pstyle("pie-"+d+"-background-size").value,p=t.pstyle("pie-"+d+"-background-color").value,g=t.pstyle("pie-"+d+"-background-opacity").value*r,m=f/100;m+h>1&&(m=1-h);var y=1.5*Math.PI+2*Math.PI*h,v=y+2*Math.PI*m;0===f||h>=1||h+m>1||(e.beginPath(),e.moveTo(o,s),e.arc(o,s,c,y,v),e.closePath(),this.colorFillStyle(e,p[0],p[1],p[2],g),e.fill(),h+=m)}};var Xd,Kd={};function Zd(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(n));return n}function Qd(e,t,r){var n=Zd(e,e.VERTEX_SHADER,t),i=Zd(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,n),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function Jd(e,t,r){void 0===r&&(r=t);var n=e.makeOffscreenCanvas(t,r),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function ef(e){var t=e.pixelRatio,r=e.cy.zoom(),n=e.cy.pan();return{zoom:r*t,pan:{x:n.x*t,y:n.y*t}}}function tf(e,t,r,n,i){var a=n*r+t.x,o=i*r+t.y;return[a,o=Math.round(e.canvasHeight-o)]}function rf(e,t,r){var n=e[0]/255,i=e[1]/255,a=e[2]/255,o=t,s=r||new Array(4);return s[0]=n*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function nf(e,t){var r=t||new Array(4);return r[0]=(255&e)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function af(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function of(e,t){var r=e.createTexture();return r.buffer=function(t){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}function sf(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function lf(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function uf(e,t,r,n,i,a){switch(t){case e.FLOAT:return new Float32Array(r.buffer,a*n,i);case e.INT:return new Int32Array(r.buffer,a*n,i)}}function cf(e,t,r,n){var i=v(sf(e,t),2),a=i[0],o=i[1],s=lf(e,o,n),l=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,a,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,a,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null),l}function hf(e,t,r,n){var i=v(sf(e,r),3),a=i[0],o=i[1],s=i[2],l=lf(e,o,t*a),u=a*s,c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,t*u,e.DYNAMIC_DRAW),e.enableVertexAttribArray(n),o===e.FLOAT?e.vertexAttribPointer(n,a,o,!1,u,0):o===e.INT&&e.vertexAttribIPointer(n,a,o,u,0),e.vertexAttribDivisor(n,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var h=new Array(t),d=0;d<t;d++)h[d]=uf(e,o,l,u,a,d);return c.dataArray=l,c.stride=u,c.size=a,c.getView=function(e){return h[e]},c.setPoint=function(e,t,r){var n=h[e];n[0]=t,n[1]=r},c.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,c),t?e.bufferSubData(e.ARRAY_BUFFER,0,l,0,t*a):e.bufferSubData(e.ARRAY_BUFFER,0,l)},c}function df(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(t,n){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}Kd.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r},Kd.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if((t=r[i]).context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},Kd.createGradientStyleFor=function(e,t,r,n,i){var a,o=this.usePaths(),s=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),d=Rr(u,h),f=Rr(c,h);a=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=o?{x:0,y:0}:r.position(),g=r.paddedWidth(),m=r.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,m))}else if(r.isEdge()){var y=r.sourceEndpoint(),v=r.targetEndpoint();a=e.createLinearGradient(y.x,y.y,v.x,v.y)}else{var x=o?{x:0,y:0}:r.position(),b=r.paddedWidth()/2,T=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(x.x,x.y-T,x.x,x.y+T);break;case"to-top":a=e.createLinearGradient(x.x,x.y+T,x.x,x.y-T);break;case"to-left":a=e.createLinearGradient(x.x+b,x.y,x.x-b,x.y);break;case"to-right":a=e.createLinearGradient(x.x-b,x.y,x.x+b,x.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(x.x-b,x.y-T,x.x+b,x.y+T);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(x.x-b,x.y+T,x.x+b,x.y-T);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(x.x+b,x.y-T,x.x-b,x.y+T);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(x.x+b,x.y+T,x.x-b,x.y-T)}}if(!a)return null;for(var C=l.length===s.length,w=s.length,k=0;k<w;k++)a.addColorStop(C?l[k]:k/(w-1),"rgba("+s[k][0]+","+s[k][1]+","+s[k][2]+","+i+")");return a},Kd.gradientFillStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"background",t,r,n);if(!i)return null;e.fillStyle=i},Kd.colorFillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"},Kd.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(e,t,n,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},Kd.gradientStrokeStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"line",t,r,n);if(!i)return null;e.strokeStyle=i},Kd.colorStrokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"},Kd.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(e,t,n,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},Kd.matchCanvasSize=function(e){var t=this,r=t.data,n=t.findContainerClientCoords(),i=n[2],a=n[3],o=t.getPixelRatio(),s=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l,u=i*o,c=a*o;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=r.canvasContainer;h.style.width=i+"px",h.style.height=a+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=r.canvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=a+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=r.bufferCanvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=a+"px";t.textureMult=1,o<=1&&(l=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=u*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c,t.pixelRatio=o}},Kd.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},Kd.clearCanvas=function(){var e=this,t=e.data;function r(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}s(r,"clear"),r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])},Kd.render=function(e){var t=this;e=e||Gt();var r=t.cy,n=e.forcedContext,i=e.drawAllLayers,a=e.drawOnlyNodeLayer,o=e.forcedZoom,l=e.forcedPan,u=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,c=t.data,h=c.canvasNeedsRedraw,d=t.textureOnViewport&&!n&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),f=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,p=t.motionBlurPxRatio,g=r.hasCompoundNodes(),m=t.hoverData.draggingEles,y=!(!t.hoverData.selecting&&!t.touchData.selecting),v=f=f&&!n&&t.motionBlurEnabled&&!y;n||(t.prevPxRatio!==u&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=u),!n&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),f&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(v=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!d&&(h[t.NODE]=!0,h[t.SELECT_BOX]=!0);var x=r.style(),b=r.zoom(),T=void 0!==o?o:b,C=r.pan(),w={x:C.x,y:C.y},k={zoom:b,pan:{x:C.x,y:C.y}},E=t.prevViewport;!(void 0===E||k.zoom!==E.zoom||k.pan.x!==E.pan.x||k.pan.y!==E.pan.y)&&!(m&&!g)&&(t.motionBlurPxRatio=1),l&&(w=l),T*=u,w.x*=u,w.y*=u;var _=t.getCachedZSortedEles();function A(e,r,n,i,a){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",t.colorFillStyle(e,255,255,255,t.motionBlurTransparency),e.fillRect(r,n,i,a),e.globalCompositeOperation=o}function S(e,r){var a,s,u,h;t.clearingMotionBlur||e!==c.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&e!==c.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(a=w,s=T,u=t.canvasWidth,h=t.canvasHeight):(a={x:C.x*p,y:C.y*p},s=b*p,u=t.canvasWidth*p,h=t.canvasHeight*p),e.setTransform(1,0,0,1,0,0),"motionBlur"===r?A(e,0,0,u,h):!n&&(void 0===r||r)&&e.clearRect(0,0,u,h),i||(e.translate(a.x,a.y),e.scale(s,s)),l&&e.translate(l.x,l.y),o&&e.scale(o,o)}if(s(A,"mbclear"),s(S,"setContextTransform"),d||(t.textureDrawLastFrame=!1),d){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var R=t.data.bufferContexts[t.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:u*t.textureMult}),(k=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}h[t.DRAG]=!1,h[t.NODE]=!1;var N=c.contexts[t.NODE],L=t.textureCache.texture;k=t.textureCache.viewport;N.setTransform(1,0,0,1,0,0),f?A(N,0,0,k.width,k.height):N.clearRect(0,0,k.width,k.height);var I=x.core("outside-texture-bg-color").value,M=x.core("outside-texture-bg-opacity").value;t.colorFillStyle(N,I[0],I[1],I[2],M),N.fillRect(0,0,k.width,k.height);b=r.zoom();S(N,!1),N.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/u,k.height/k.zoom/u),N.drawImage(L,k.mpan.x,k.mpan.y,k.width/k.zoom/u,k.height/k.zoom/u)}else t.textureOnViewport&&!n&&(t.textureCache=null);var O=r.extent(),P=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),D=t.hideEdgesOnViewport&&P,B=[];if(B[t.NODE]=!h[t.NODE]&&f&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,B[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),B[t.DRAG]=!h[t.DRAG]&&f&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,B[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),h[t.NODE]||i||a||B[t.NODE]){var F=f&&!B[t.NODE]&&1!==p;S(N=n||(F?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:c.contexts[t.NODE]),f&&!F?"motionBlur":void 0),D?t.drawCachedNodes(N,_.nondrag,u,O):t.drawLayeredElements(N,_.nondrag,u,O),t.debug&&t.drawDebugPoints(N,_.nondrag),!i&&!f&&(h[t.NODE]=!1)}if(!a&&(h[t.DRAG]||i||B[t.DRAG])){F=f&&!B[t.DRAG]&&1!==p;S(N=n||(F?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:c.contexts[t.DRAG]),f&&!F?"motionBlur":void 0),D?t.drawCachedNodes(N,_.drag,u,O):t.drawCachedElements(N,_.drag,u,O),t.debug&&t.drawDebugPoints(N,_.drag),!i&&!f&&(h[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,S),f&&1!==p){var $=c.contexts[t.NODE],z=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],U=c.contexts[t.DRAG],G=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],j=s((function(e,r,n){e.setTransform(1,0,0,1,0,0),n||!v?e.clearRect(0,0,t.canvasWidth,t.canvasHeight):A(e,0,0,t.canvasWidth,t.canvasHeight);var i=p;e.drawImage(r,0,0,t.canvasWidth*i,t.canvasHeight*i,0,0,t.canvasWidth,t.canvasHeight)}),"drawMotionBlur");(h[t.NODE]||B[t.NODE])&&(j($,z,B[t.NODE]),h[t.NODE]=!1),(h[t.DRAG]||B[t.DRAG])&&(j(U,G,B[t.DRAG]),h[t.DRAG]=!1)}t.prevViewport=k,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),f&&(t.motionBlurTimeout=setTimeout((function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!d,t.mbFrames=0,h[t.NODE]=!0,h[t.DRAG]=!0,t.redraw()}),100)),n||r.emit("render")},Kd.drawSelectionRectangle=function(e,t){var r=this,n=r.cy,i=r.data,a=n.style(),o=e.drawOnlyNodeLayer,s=e.drawAllLayers,l=i.canvasNeedsRedraw,u=e.forcedContext;if(r.showFps||!o&&l[r.SELECT_BOX]&&!s){var c=u||i.contexts[r.SELECT_BOX];if(t(c),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)){var h=r.cy.zoom(),d=a.core("selection-box-border-width").value/h;c.lineWidth=d,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){h=r.cy.zoom();var f=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(f.x,f.y,a.core("active-bg-size").pfValue/h,0,2*Math.PI),c.fill()}var p=r.lastRedrawTime;if(r.showFps&&p){p=Math.round(p);var g=Math.round(1e3/p),m="1 frame = "+p+" ms = "+g+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Xd){var y=c.measureText(m);Xd=y.actualBoundingBoxAscent}c.fillText(m,0,Xd);c.strokeRect(0,Xd+10,250,20),c.fillRect(0,Xd+10,250*Math.min(g/60,1),20)}s||(l[r.SELECT_BOX]=!1)}},s(Zd,"compileShader"),s(Qd,"createProgram"),s(Jd,"createTextureCanvas"),s(ef,"getEffectivePanZoom"),s(tf,"modelToRenderedPosition"),s(rf,"toWebGLColor"),s(nf,"indexToVec4"),s(af,"vec4ToIndex"),s(of,"createTexture"),s(sf,"getTypeInfo"),s(lf,"createTypedArray"),s(uf,"createTypedArrayView"),s(cf,"createBufferStaticDraw"),s(hf,"createBufferDynamicDraw"),s(df,"createPickingFrameBuffer");var ff=typeof Float32Array<"u"?Float32Array:Array;function pf(){var e=new ff(9);return ff!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function gf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function mf(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=r[0],f=r[1],p=r[2],g=r[3],m=r[4],y=r[5],v=r[6],x=r[7],b=r[8];return e[0]=d*n+f*o+p*u,e[1]=d*i+f*s+p*c,e[2]=d*a+f*l+p*h,e[3]=g*n+m*o+y*u,e[4]=g*i+m*s+y*c,e[5]=g*a+m*l+y*h,e[6]=v*n+x*o+b*u,e[7]=v*i+x*s+b*c,e[8]=v*a+x*l+b*h,e}function yf(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=r[0],f=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=d*n+f*o+u,e[7]=d*i+f*s+c,e[8]=d*a+f*l+h,e}function vf(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=Math.sin(r),f=Math.cos(r);return e[0]=f*n+d*o,e[1]=f*i+d*s,e[2]=f*a+d*l,e[3]=f*o-d*n,e[4]=f*s-d*i,e[5]=f*l-d*a,e[6]=u,e[7]=c,e[8]=h,e}function xf(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function bf(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),s(pf,"create"),s(gf,"identity"),s(mf,"multiply"),s(yf,"translate"),s(vf,"rotate"),s(xf,"scale"),s(bf,"projection");var Tf={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Cf=jt({getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:null,getPadding:null}),wf=function(){function e(t,r){p(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.atlasSize=r.webglTexSize,this.rows=r.webglTexRows,this.enableWrapping=r.enableWrapping,this.texHeight=Math.floor(this.atlasSize/this.rows),this.maxTexWidth=this.atlasSize,this.texture=null,this.canvas=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=r.createTextureCanvas(t,this.atlasSize,this.atlasSize),this.scratch=r.createTextureCanvas(t,this.atlasSize,this.texHeight,"scratch")}return s(e,"Atlas"),m(e,[{key:"getKeys",value:s((function(){return new Set(this.keyToLocation.keys())}),"getKeys")},{key:"getScale",value:s((function(e){var t=e.w,r=e.h,n=this.texHeight,i=this.maxTexWidth,a=n/r,o=t*a,s=r*a;return o>i&&(o=t*(a=i/t),s=r*a),{scale:a,texW:o,texH:s}}),"getScale")},{key:"draw",value:s((function(e,t,r){var n=this,i=this.atlasSize,a=this.rows,o=this.texHeight,l=this.getScale(t),u=l.scale,c=l.texW,h=l.texH,d=[null,null],f=s((function(e,n){if(r&&n){var i=n.context,a=e.x,s=e.row,l=a,c=o*s;i.save(),i.translate(l,c),i.scale(u,u),r(i,t),i.restore()}}),"drawAt"),p=s((function(){f(n.freePointer,n.canvas),d[0]={x:n.freePointer.x,y:n.freePointer.row*o,w:c,h:h},d[1]={x:n.freePointer.x+c,y:n.freePointer.row*o,w:0,h:h},n.freePointer.x+=c,n.freePointer.x==i&&(n.freePointer.x=0,n.freePointer.row++)}),"drawNormal"),g=s((function(){var e=n.scratch,t=n.canvas;e.clear(),f({x:0,row:0},e);var r=i-n.freePointer.x,a=c-r,s=o,l=n.freePointer.x,u=n.freePointer.row*o,p=r;t.context.drawImage(e,0,0,p,s,l,u,p,s),d[0]={x:l,y:u,w:p,h:h};var g=r,m=(n.freePointer.row+1)*o,y=a;t&&t.context.drawImage(e,g,0,y,s,0,m,y,s),d[1]={x:0,y:m,w:y,h:h},n.freePointer.x=a,n.freePointer.row++}),"drawWrapped"),m=s((function(){n.freePointer.x=0,n.freePointer.row++}),"moveToStartOfNextRow");if(this.freePointer.x+c<=i)p();else{if(this.freePointer.row>=a-1)return!1;this.freePointer.x===i?(m(),p()):this.enableWrapping?g():(m(),p())}return this.keyToLocation.set(e,d),this.needsBuffer=!0,d}),"draw")},{key:"getOffsets",value:s((function(e){return this.keyToLocation.get(e)}),"getOffsets")},{key:"isEmpty",value:s((function(){return 0===this.freePointer.x&&0===this.freePointer.row}),"isEmpty")},{key:"canFit",value:s((function(e){var t=this.atlasSize,r=this.rows,n=this.getScale(e).texW;return!(this.freePointer.x+n>t)||this.freePointer.row<r-1}),"canFit")},{key:"bufferIfNeeded",value:s((function(e){this.texture||(this.texture=of(e,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1)}),"bufferIfNeeded")},{key:"dispose",value:s((function(){this.texture&&(this.texture.deleteTexture(),this.texture=null,this.needsBuffer=!0)}),"dispose")}]),e}(),kf=function(){function e(t,r){p(this,e),this.r=t,this.opts=r,this.keyToIds=new Map,this.idToKey=new Map,this.atlases=[],this.styleKeyToAtlas=new Map,this.styleKeyNeedsRedraw=new Set,this.forceGC=!1}return s(e,"AtlasCollection"),m(e,[{key:"getKeys",value:s((function(){return new Set(this.styleKeyToAtlas.keys())}),"getKeys")},{key:"getIdsFor",value:s((function(e){var t=this.keyToIds.get(e);return t||(t=new Set,this.keyToIds.set(e,t)),t}),"getIdsFor")},{key:"_createAtlas",value:s((function(){var e=this.r,t=this.opts;return new wf(e,t)}),"_createAtlas")},{key:"_getScratchCanvas",value:s((function(){if(!this.scratch){var e=this.r,t=this.opts,r=t.webglTexSize,n=Math.floor(r/t.webglTexRows);this.scratch=t.createTextureCanvas(e,r,n,"scratch")}return this.scratch}),"_getScratchCanvas")},{key:"draw",value:s((function(e,t,r,n){if(this.styleKeyNeedsRedraw.has(t)){this.styleKeyNeedsRedraw.delete(t),this.deleteKey(e,t);var i=this.styleKeyToAtlas.get(t);i&&(i.forceGC=!0),this.styleKeyToAtlas.delete(t)}var a=this.styleKeyToAtlas.get(t);return a||((!(a=this.atlases[this.atlases.length-1])||!a.canFit(r))&&(a=this._createAtlas(),this.atlases.push(a)),a.draw(t,r,n),this.styleKeyToAtlas.set(t,a),this.getIdsFor(t).add(e),this.idToKey.set(e,t)),a}),"draw")},{key:"getAtlas",value:s((function(e){return this.styleKeyToAtlas.get(e)}),"getAtlas")},{key:"hasAtlas",value:s((function(e){return this.styleKeyToAtlas.has(e)}),"hasAtlas")},{key:"deleteKey",value:s((function(e,t){this.idToKey.delete(e),this.getIdsFor(t).delete(e)}),"deleteKey")},{key:"checkKeyIsInvalid",value:s((function(e,t){if(!this.idToKey.has(e))return!1;var r=this.idToKey.get(e);return r!=t&&(this.deleteKey(e,r),!0)}),"checkKeyIsInvalid")},{key:"_getKeysToCollect",value:s((function(){var e,t=new Set,r=S(this.styleKeyToAtlas.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;0==this.getIdsFor(n).size&&t.add(n)}}catch(e){r.e(e)}finally{r.f()}return t}),"_getKeysToCollect")},{key:"gc",value:s((function(){var e=this,t=this.atlases.some((function(e){return e.forceGC})),r=this._getKeysToCollect();if(0!==r.size||t){var n,i=[],a=new Map,o=null,l=S(this.atlases);try{var u=s((function(){var t=n.value,s=t.getKeys(),l=Ef(r,s);if(0===l.size&&!t.forceGC)return i.push(t),s.forEach((function(e){return a.set(e,t)})),"continue";o||(o=e._createAtlas(),i.push(o));var u,c=S(s);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(!l.has(h)){var d=v(t.getOffsets(h),2),f=d[0],p=d[1];o.canFit({w:f.w+p.w,h:f.h})||(o=e._createAtlas(),i.push(o)),e._copyTextureToNewAtlas(h,t,o),a.set(h,o)}}}catch(e){c.e(e)}finally{c.f()}}),"_loop");for(l.s();!(n=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}this.atlases=i,this.styleKeyToAtlas=a}else console.log("nothing to garbage collect")}),"gc")},{key:"_copyTextureToNewAtlas",value:s((function(e,t,r){var n=v(t.getOffsets(e),2),i=n[0],a=n[1];if(0===a.w)r.draw(e,i,(function(e){e.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h)}));else{var o=this._getScratchCanvas();o.clear(),o.context.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h),o.context.drawImage(t.canvas,a.x,a.y,a.w,a.h,i.w,0,a.w,a.h);var s=i.w+a.w,l=i.h;r.draw(e,{w:s,h:l},(function(e){e.drawImage(o,0,0,s,l,0,0,s,l)}))}}),"_copyTextureToNewAtlas")},{key:"getCounts",value:s((function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}),"getCounts")}]),e}();function Ef(e,t){return e.intersection?e.intersection(t):new Set(x(e).filter((function(e){return t.has(e)})))}s(Ef,"intersection");var _f=function(){function e(t,r){p(this,e),this.r=t;var n=r;this.globalOptions=n,this.maxAtlases=n.webglTexPerBatch,this.atlasSize=n.webglTexSize,this.renderTypes=new Map,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.batchAtlases=[],this._cacheScratchCanvas(n)}return s(e,"AtlasManager"),m(e,[{key:"_cacheScratchCanvas",value:s((function(e){var t=-1,r=-1,n=null,i=e.createTextureCanvas;e.createTextureCanvas=function(e,a,o,s){return s?((!n||a!=t||o!=r)&&(t=a,r=o,n=i(e,a,o)),n):i(e,a,o)}}),"_cacheScratchCanvas")},{key:"addRenderType",value:s((function(e,t){var r=new kf(this.r,this.globalOptions),n=t;this.renderTypes.set(e,fe({type:e,atlasCollection:r},n))}),"addRenderType")},{key:"getRenderTypes",value:s((function(){return x(this.renderTypes.values())}),"getRenderTypes")},{key:"getRenderTypeOpts",value:s((function(e){return this.renderTypes.get(e)}),"getRenderTypeOpts")},{key:"invalidate",value:s((function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.forceRedraw,i=void 0!==n&&n,a=r.filterEle,o=void 0===a?function(){return!0}:a,s=r.filterType,l=void 0===s?function(){return!0}:s,u=!1,c=S(e);try{for(c.s();!(t=c.n()).done;){var h=t.value;if(o(h)){var d,f=h.id(),p=S(this.getRenderTypes());try{for(p.s();!(d=p.n()).done;){var g=d.value;if(l(g.type)){var m=g.getKey(h);i?(g.atlasCollection.deleteKey(f,m),g.atlasCollection.styleKeyNeedsRedraw.add(m),u=!0):u|=g.atlasCollection.checkKeyIsInvalid(f,m)}}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){c.e(e)}finally{c.f()}return u}),"invalidate")},{key:"gc",value:s((function(){var e,t=S(this.getRenderTypes());try{for(t.s();!(e=t.n()).done;){e.value.atlasCollection.gc()}}catch(e){t.e(e)}finally{t.f()}}),"gc")},{key:"isRenderable",value:s((function(e,t){var r=this.getRenderTypeOpts(t);return r&&r.isVisible(e)}),"isRenderable")},{key:"startBatch",value:s((function(){this.batchAtlases=[]}),"startBatch")},{key:"getAtlasCount",value:s((function(){return this.batchAtlases.length}),"getAtlasCount")},{key:"getAtlases",value:s((function(){return this.batchAtlases}),"getAtlases")},{key:"getOrCreateAtlas",value:s((function(e,t,r){var n=this.renderTypes.get(r),i=n.getKey(e),a=e.id();return n.atlasCollection.draw(a,i,t,(function(r){n.drawElement(r,e,t,!0,!0)}))}),"getOrCreateAtlas")},{key:"getAtlasIndexForBatch",value:s((function(e){var t=this.batchAtlases.indexOf(e);if(t<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(e),t=this.batchAtlases.length-1}return t}),"getAtlasIndexForBatch")},{key:"getIndexArray",value:s((function(){return Array.from({length:this.maxAtlases},(function(e,t){return t}))}),"getIndexArray")},{key:"getAtlasInfo",value:s((function(e,t){var r=this.renderTypes.get(t),n=r.getBoundingBox(e),i=this.getOrCreateAtlas(e,n,t),a=this.getAtlasIndexForBatch(i);if(void 0!==a){var o=r.getKey(e),s=v(i.getOffsets(o),2),l=s[0];return{atlasID:a,tex:l,tex1:l,tex2:s[1],bb:n,type:t,styleKey:o}}}),"getAtlasInfo")},{key:"canAddToCurrentBatch",value:s((function(e,t){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var r=this.renderTypes.get(t),n=r.getKey(e),i=r.atlasCollection.getAtlas(n);return i&&this.batchAtlases.includes(i)}return!0}),"canAddToCurrentBatch")},{key:"setTransformMatrix",value:s((function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.bb,a=t.type,o=t.tex1,s=t.tex2,l=this.getRenderTypeOpts(a),u=l.getPadding?l.getPadding(r):0,c=o.w/(o.w+s.w);n||(c=1-c);var h,d,f=this.getAdjustedBB(i,u,n,c);gf(e);var p=l.getRotation?l.getRotation(r):0;if(0!==p){var g=l.getRotationPoint(r);yf(e,e,[g.x,g.y]),vf(e,e,p);var m=l.getRotationOffset(r);h=m.x+f.xOffset,d=m.y}else h=f.x1,d=f.y1;yf(e,e,[h,d]),xf(e,e,[f.w,f.h])}),"setTransformMatrix")},{key:"getTransformMatrix",value:s((function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=pf();return this.setTransformMatrix(n,e,t,r),n}),"getTransformMatrix")},{key:"getAdjustedBB",value:s((function(e,t,r,n){var i=e.x1,a=e.y1,o=e.w,s=e.h;t&&(i-=t,a-=t,o+=2*t,s+=2*t);var l=0,u=o*n;return r&&n<1?o=u:!r&&n<1&&(i+=l=o-u,o=u),{x1:i,y1:a,w:o,h:s,xOffset:l}}),"getAdjustedBB")},{key:"getDebugInfo",value:s((function(){var e,t=[],r=S(this.renderTypes);try{for(r.s();!(e=r.n()).done;){var n=v(e.value,2),i=n[0],a=n[1].atlasCollection.getCounts(),o=a.keyCount,s=a.atlasCount;t.push({type:i,keyCount:o,atlasCount:s})}}catch(e){r.e(e)}finally{r.f()}return t}),"getDebugInfo")}]),e}(),Af=function(){function e(t,r,n){p(this,e),this.r=t,this.gl=r,this.maxInstances=n.webglBatchSize,this.maxAtlases=n.webglTexPerBatch,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,n.enableWrapping=!0,n.createTextureCanvas=Jd,this.atlasManager=new _f(t,n),this.program=this.createShaderProgram(Tf.SCREEN),this.pickingProgram=this.createShaderProgram(Tf.PICKING),this.vao=this.createVAO(),this.debugInfo=[]}return s(e,"ElementDrawingWebGL"),m(e,[{key:"addTextureRenderType",value:s((function(e,t){this.atlasManager.addRenderType(e,t)}),"addTextureRenderType")},{key:"invalidate",value:s((function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,r=this.atlasManager;return t?r.invalidate(e,{filterType:s((function(e){return e===t}),"filterType"),forceRedraw:!0}):r.invalidate(e)}),"invalidate")},{key:"gc",value:s((function(){this.atlasManager.gc()}),"gc")},{key:"createShaderProgram",value:s((function(e){var t=this.gl,r="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; \n\n      // what are we rendering?\n      in int aVertType;\n\n      // for picking\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex1; // x/y/w/h of texture in atlas\n      in vec4 aTex2; \n\n      // for any transforms that are needed\n      in vec4 aScaleRotate1;  // vectors use fewer attributes than matrices\n      in vec2 aTranslate1;\n      in vec4 aScaleRotate2;\n      in vec2 aTranslate2;\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in float aLineWidth;\n      in vec4 aEdgeColor;\n\n      out vec2 vTexCoord;\n      out vec4 vEdgeColor;\n      flat out int vAtlasId;\n      flat out vec4 vIndex;\n      flat out int vVertType;\n\n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition;\n\n        if(aVertType == ".concat(0,") {\n          float texX;\n          float texY;\n          float texW;\n          float texH;\n          mat3  texMatrix;\n\n          int vid = gl_VertexID;\n          if(vid <= 5) {\n            texX = aTex1.x;\n            texY = aTex1.y;\n            texW = aTex1.z;\n            texH = aTex1.w;\n            texMatrix = mat3(\n              vec3(aScaleRotate1.xy, 0.0),\n              vec3(aScaleRotate2.zw, 0.0),\n              vec3(aTranslate1,      1.0)\n            );\n          } else {\n            texX = aTex2.x;\n            texY = aTex2.y;\n            texW = aTex2.z;\n            texH = aTex2.w;\n            texMatrix = mat3(\n              vec3(aScaleRotate2.xy, 0.0),\n              vec3(aScaleRotate2.zw, 0.0),\n              vec3(aTranslate2,      1.0)\n            );\n          }\n\n          if(vid == 1 || vid == 2 || vid == 4 || vid == 7 || vid == 8 || vid == 10) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5 || vid == 8 || vid == 10 || vid == 11) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * texMatrix * vec3(position, 1.0), 1.0);\n        } \n        else if(aVertType == ").concat(1," && vid < 6) {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vEdgeColor = aEdgeColor;\n        } \n        else if(aVertType == ").concat(2," && vid < 6) {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0 = pointA;\n          vec2 p1 = pointB;\n          vec2 p2 = pointC;\n          vec2 pos = position;\n          if(position.x == 1.0) {\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth;\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vEdgeColor = aEdgeColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2( 0.0,   0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          mat3 transform = mat3(\n            vec3(aScaleRotate1.xy, 0.0),\n            vec3(aScaleRotate1.zw, 0.0),\n            vec3(aTranslate1,      1.0)\n          );\n          gl_Position = vec4(uPanZoomMatrix * transform * vec3(position, 1.0), 1.0);\n          vEdgeColor = aEdgeColor;\n        } else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vIndex = aIndex;\n        vVertType = aVertType;\n      }\n    "),n=this.atlasManager.getIndexArray(),i="#version 300 es\n      precision highp float;\n\n      // define texture unit for each node in the batch\n      ".concat(n.map((function(e){return"uniform sampler2D uTexture".concat(e,";")})).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n\n      in vec2 vTexCoord;\n      in vec4 vEdgeColor;\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n\n      out vec4 outColor;\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          ").concat(n.map((function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")})).join("\n\telse "),"\n        } else if(vVertType == ").concat(3,") {\n          // blend arrow color with background (using premultiplied alpha)\n          outColor.rgb = vEdgeColor.rgb + (uBGColor.rgb * (1.0 - vEdgeColor.a)); \n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        } else {\n          outColor = vEdgeColor;\n        }\n\n        ").concat(e.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "),a=Qd(t,r,i);a.aPosition=t.getAttribLocation(a,"aPosition"),a.aIndex=t.getAttribLocation(a,"aIndex"),a.aVertType=t.getAttribLocation(a,"aVertType"),a.aAtlasId=t.getAttribLocation(a,"aAtlasId"),a.aTex1=t.getAttribLocation(a,"aTex1"),a.aTex2=t.getAttribLocation(a,"aTex2"),a.aScaleRotate1=t.getAttribLocation(a,"aScaleRotate1"),a.aTranslate1=t.getAttribLocation(a,"aTranslate1"),a.aScaleRotate2=t.getAttribLocation(a,"aScaleRotate2"),a.aTranslate2=t.getAttribLocation(a,"aTranslate2"),a.aPointAPointB=t.getAttribLocation(a,"aPointAPointB"),a.aPointCPointD=t.getAttribLocation(a,"aPointCPointD"),a.aLineWidth=t.getAttribLocation(a,"aLineWidth"),a.aEdgeColor=t.getAttribLocation(a,"aEdgeColor"),a.uPanZoomMatrix=t.getUniformLocation(a,"uPanZoomMatrix"),a.uAtlasSize=t.getUniformLocation(a,"uAtlasSize"),a.uBGColor=t.getUniformLocation(a,"uBGColor"),a.uTextures=[];for(var o=0;o<this.atlasManager.maxAtlases;o++)a.uTextures.push(t.getUniformLocation(a,"uTexture".concat(o)));return a}),"createShaderProgram")},{key:"createVAO",value:s((function(){var e=[0,0,1,0,1,1,0,0,1,1,0,1],t=[].concat(e,e);this.vertexCount=t.length/2;var r=this.maxInstances,n=this.gl,i=this.program,a=n.createVertexArray();return n.bindVertexArray(a),cf(n,"vec2",i.aPosition,t),this.indexBuffer=hf(n,r,"vec4",i.aIndex),this.vertTypeBuffer=hf(n,r,"int",i.aVertType),this.atlasIdBuffer=hf(n,r,"int",i.aAtlasId),this.tex1Buffer=hf(n,r,"vec4",i.aTex1),this.tex2Buffer=hf(n,r,"vec4",i.aTex2),this.scaleRotate1Buffer=hf(n,r,"vec4",i.aScaleRotate1),this.translate1Buffer=hf(n,r,"vec2",i.aTranslate1),this.scaleRotate2Buffer=hf(n,r,"vec4",i.aScaleRotate2),this.translate2Buffer=hf(n,r,"vec2",i.aTranslate2),this.pointAPointBBuffer=hf(n,r,"vec4",i.aPointAPointB),this.pointCPointDBuffer=hf(n,r,"vec4",i.aPointCPointD),this.lineWidthBuffer=hf(n,r,"float",i.aLineWidth),this.edgeColorBuffer=hf(n,r,"vec4",i.aEdgeColor),n.bindVertexArray(null),a}),"createVAO")},{key:"buffers",get:s((function(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter((function(e){return e.endsWith("Buffer")})).map((function(t){return e[t]}))),this._buffers}),"get")},{key:"startFrame",value:s((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tf.SCREEN;this.panZoomMatrix=e,this.debugInfo=t,this.renderTarget=r,this.startBatch()}),"startFrame")},{key:"startBatch",value:s((function(){this.instanceCount=0,this.atlasManager.startBatch()}),"startBatch")},{key:"endFrame",value:s((function(){this.endBatch()}),"endFrame")},{key:"getTempMatrix",value:s((function(){return this.tempMatrix=this.tempMatrix||pf()}),"getTempMatrix")},{key:"drawTexture",value:s((function(e,t,r){var n=this.atlasManager;if(n.isRenderable(e,r)){n.canAddToCurrentBatch(e,r)||this.endBatch();var i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=0,nf(t,this.indexBuffer.getView(i));var a=n.getAtlasInfo(e,r,a),o=a.atlasID,s=a.tex1,l=a.tex2;this.atlasIdBuffer.getView(i)[0]=o;var u=this.tex1Buffer.getView(i);u[0]=s.x,u[1]=s.y,u[2]=s.w,u[3]=s.h;var c=this.tex2Buffer.getView(i);c[0]=l.x,c[1]=l.y,c[2]=l.w,c[3]=l.h;for(var h=this.getTempMatrix(),d=0,f=[1,2];d<f.length;d++){var p=f[d];n.setTransformMatrix(h,a,e,1===p);var g=this["scaleRotate".concat(p,"Buffer")].getView(i);g[0]=h[0],g[1]=h[1],g[2]=h[3],g[3]=h[4];var m=this["translate".concat(p,"Buffer")].getView(i);m[0]=h[6],m[1]=h[7]}this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}),"drawTexture")},{key:"drawEdgeArrow",value:s((function(e,t,r){var n,i,a,o=e._private.rscratch;if(("source"===r?(n=o.arrowStartX,i=o.arrowStartY,a=o.srcArrowAngle):(n=o.arrowEndX,i=o.arrowEndY,a=o.tgtArrowAngle),!(isNaN(n)||null==n||isNaN(i)||null==i||isNaN(a)||null==a))&&"none"!==e.pstyle(r+"-arrow-shape").value){var s=e.pstyle(r+"-arrow-color").value,l=e.pstyle("opacity").value*e.pstyle("line-opacity").value,u=e.pstyle("width").pfValue,c=e.pstyle("arrow-scale").value,h=this.r.getArrowWidth(u,c),d=this.getTempMatrix();gf(d),yf(d,d,[n,i]),xf(d,d,[h,h]),vf(d,d,a);var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=3,nf(t,this.indexBuffer.getView(f)),rf(s,l,this.edgeColorBuffer.getView(f));var p=this.scaleRotate1Buffer.getView(f);p[0]=d[0],p[1]=d[1],p[2]=d[3],p[3]=d[4];var g=this.translate1Buffer.getView(f);g[0]=d[6],g[1]=d[7],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}),"drawEdgeArrow")},{key:"drawEdgeLine",value:s((function(e,t){var r=e.pstyle("opacity").value,n=e.pstyle("line-opacity").value,i=e.pstyle("width").pfValue,a=e.pstyle("line-color").value,o=r*n,s=this.getEdgePoints(e);if(s.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==s.length){var l=this.instanceCount;this.vertTypeBuffer.getView(l)[0]=1,nf(t,this.indexBuffer.getView(l)),rf(a,o,this.edgeColorBuffer.getView(l)),this.lineWidthBuffer.getView(l)[0]=i;var u=this.pointAPointBBuffer.getView(l);u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var c=0;c<s.length-2;c+=2){var h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=2,nf(t,this.indexBuffer.getView(h)),rf(a,o,this.edgeColorBuffer.getView(h)),this.lineWidthBuffer.getView(h)[0]=i;var d=s[c-2],f=s[c-1],p=s[c],g=s[c+1],m=s[c+2],y=s[c+3],v=s[c+4],x=s[c+5];0==c&&(d=2*p-m+.001,f=2*g-y+.001),c==s.length-4&&(v=2*m-p+.001,x=2*y-g+.001);var b=this.pointAPointBBuffer.getView(h);b[0]=d,b[1]=f,b[2]=p,b[3]=g;var T=this.pointCPointDBuffer.getView(h);T[0]=m,T[1]=y,T[2]=v,T[3]=x,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}),"drawEdgeLine")},{key:"getEdgePoints",value:s((function(e){var t=e._private.rscratch.allpts;if(4==t.length)return t;var r=this.getNumSegments(e);return this.getCurveSegmentPoints(t,r)}),"getEdgePoints")},{key:"getNumSegments",value:s((function(e){return Math.min(Math.max(15,5),this.maxInstances)}),"getNumSegments")},{key:"getCurveSegmentPoints",value:s((function(e,t){if(4==e.length)return e;for(var r=Array(2*(t+1)),n=0;n<=t;n++)if(0==n)r[0]=e[0],r[1]=e[1];else if(n==t)r[2*n]=e[e.length-2],r[2*n+1]=e[e.length-1];else{var i=n/t;this.setCurvePoint(e,i,r,2*n)}return r}),"getCurveSegmentPoints")},{key:"setCurvePoint",value:s((function(e,t,r,n){if(!(e.length<=2)){for(var i=Array(e.length-2),a=0;a<i.length;a+=2){var o=(1-t)*e[a]+t*e[a+2],s=(1-t)*e[a+1]+t*e[a+3];i[a]=o,i[a+1]=s}return this.setCurvePoint(i,t,r,n)}r[n]=e[0],r[n+1]=e[1]}),"setCurvePoint")},{key:"endBatch",value:s((function(){var e=this.gl,t=this.vao,r=this.vertexCount,n=this.instanceCount;if(0!==n){var i=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(i),e.bindVertexArray(t);var a,o=S(this.buffers);try{for(o.s();!(a=o.n()).done;){a.value.bufferSubData(n)}}catch(e){o.e(e)}finally{o.f()}for(var s=this.atlasManager.getAtlases(),l=0;l<s.length;l++)s[l].bufferIfNeeded(e);for(var u=0;u<s.length;u++)e.activeTexture(e.TEXTURE0+u),e.bindTexture(e.TEXTURE_2D,s[u].texture),e.uniform1i(i.uTextures[u],u);e.uniformMatrix3fv(i.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(i.uAtlasSize,this.atlasManager.atlasSize);var c=rf(this.bgColor,1);e.uniform4fv(i.uBGColor,c),e.drawArraysInstanced(e.TRIANGLES,0,r,n),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debugInfo&&this.debugInfo.push({count:n,atlasCount:s.length}),this.startBatch()}}),"endBatch")},{key:"getDebugInfo",value:s((function(){return this.debugInfo}),"getDebugInfo")},{key:"getAtlasDebugInfo",value:s((function(){return this.atlasManager.getDebugInfo()}),"getAtlasDebugInfo")}]),e}();function Sf(e,t){return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(t,")")}s(Sf,"fillStyle");var Rf=function(){function e(t){p(this,e),this.r=t}return s(e,"OverlayUnderlayRenderer"),m(e,[{key:"getStyleKey",value:s((function(e,t){var r=this.getStyle(e,t),n=r.shape,i=r.opacity,a=r.color;if(!n)return null;var o=t.width(),s=t.height(),l=Sf(a,i);return wt("".concat(n,"-").concat(o,"-").concat(s,"-").concat(l))}),"getStyleKey")},{key:"isVisible",value:s((function(e,t){return t.pstyle("".concat(e,"-opacity")).value>0}),"isVisible")},{key:"getStyle",value:s((function(e,t){return{opacity:t.pstyle("".concat(e,"-opacity")).value,color:t.pstyle("".concat(e,"-color")).value,shape:t.pstyle("".concat(e,"-shape")).value}}),"getStyle")},{key:"getPadding",value:s((function(e,t){return t.pstyle("".concat(e,"-padding")).pfValue}),"getPadding")},{key:"draw",value:s((function(e,t,r,n){if(this.isVisible(e,r)){var i=this.r,a=n.w,o=n.h,s=a/2,l=o/2,u=this.getStyle(e,r),c=u.shape,h=u.color,d=u.opacity;t.save(),t.fillStyle=Sf(h,d),"round-rectangle"===c||"roundrectangle"===c?i.drawRoundRectanglePath(t,s,l,a,o,"auto"):"ellipse"===c&&i.drawEllipsePath(t,s,l,a,o),t.fill(),t.restore()}}),"draw")}]),e}();function Nf(e){var t=e&&e.style&&e.style.backgroundColor||"white";return ve(t)}s(Nf,"getBGColor");var Lf={};function If(e){var t=e.render;e.render=function(r){r=r||{};var n=e.cy;e.webgl&&(n.zoom()>7.99?(Mf(e),t.call(e,r)):(Of(e),Gf(e,r,Tf.SCREEN)))};var r=e.matchCanvasSize;e.matchCanvasSize=function(t){r.call(e,t),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(t,r,n,i){return Uf(e,t,r)};var n=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){n.call(e),e.pickingFrameBuffer.needsDraw=!0};var i=e.notify;e.notify=function(t,r){i.call(e,t,r),"viewport"===t||"bounds"===t?e.pickingFrameBuffer.needsDraw=!0:"background"===t&&e.eleDrawing.invalidate(r,{type:"node-body"})}}function Mf(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}function Of(e){var t=s((function(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.canvasWidth,e.canvasHeight),t.restore()}),"clear");t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}function Pf(e){var t=e.canvasWidth,r=e.canvasHeight,n=ef(e),i=n.pan,a=n.zoom,o=pf();yf(o,o,[i.x,i.y]),xf(o,o,[a,a]);var s=pf();bf(s,t,r);var l=pf();return mf(l,s,o),l}function Df(e,t){var r=e.canvasWidth,n=e.canvasHeight,i=ef(e),a=i.pan,o=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,n),t.translate(a.x,a.y),t.scale(o,o)}function Bf(e,t){e.drawSelectionRectangle(t,(function(t){return Df(e,t)}))}function Ff(e){var t=e.data.contexts[e.NODE];t.save(),Df(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}function $f(e){var t=s((function(t,r,n){for(var i=t.atlasManager.getRenderTypeOpts(r),a=e.data.contexts[e.NODE],o=i.atlasCollection.atlases,s=0;s<o.length;s++){var l=o[s].canvas,u=l.width,c=l.height,h=u*s,d=l.height*n;a.save(),a.scale(.125,.125),a.drawImage(l,h,d),a.strokeStyle="black",a.rect(h,d,u,c),a.stroke(),a.restore()}}),"draw"),r=0;t(e.eleDrawing,"node-body",r++),t(e.eleDrawing,"node-label",r++)}function zf(e,t,r,n,i){var a,o,s,l,u=ef(e),c=u.pan,h=u.zoom;if(void 0===n||void 0===i){var d=v(tf(e,c,h,t,r),2);a=d[0]-3,o=d[1]-3,s=6,l=6}else{var f=v(tf(e,c,h,t,r),2),p=f[0],g=f[1],m=v(tf(e,c,h,n,i),2),y=m[0],x=m[1];a=p,o=x,s=Math.abs(y-p),l=Math.abs(x-g)}if(0===s||0===l)return[];var b=e.data.contexts[e.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),Gf(e,null,Tf.PICKING),e.pickingFrameBuffer.needsDraw=!1);var T=s*l,C=new Uint8Array(4*T);b.readPixels(a,o,s,l,b.RGBA,b.UNSIGNED_BYTE,C),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var w=new Set,k=0;k<T;k++){var E=af(C.slice(4*k,4*k+4))-1;E>=0&&w.add(E)}return w}function Uf(e,t,r){var n,i,a,o=zf(e,t,r),s=e.getCachedZSortedEles(),l=S(o);try{for(l.s();!(a=l.n()).done;){var u=s[a.value];if(!n&&u.isNode()&&(n=u),!i&&u.isEdge()&&(i=u),n&&i)break}}catch(e){l.e(e)}finally{l.f()}return[n,i].filter(Boolean)}function Gf(e,t,r){var n,i;e.webglDebug&&(i=[],n=performance.now());var a=e.eleDrawing,o=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&Bf(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var l=s((function(e,t){t+=1,e.isNode()?(a.drawTexture(e,t,"node-underlay"),a.drawTexture(e,t,"node-body"),a.drawTexture(e,t,"node-label"),a.drawTexture(e,t,"node-overlay")):(a.drawEdgeLine(e,t),a.drawEdgeArrow(e,t,"source"),a.drawEdgeArrow(e,t,"target"),a.drawTexture(e,t,"edge-label"))}),"draw"),u=e.data.contexts[e.WEBGL];r.screen?(u.clearColor(0,0,0,0),u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA)):u.disable(u.BLEND),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.viewport(0,0,u.canvas.width,u.canvas.height);var c=Pf(e),h=e.getCachedZSortedEles();if(o=h.length,a.startFrame(c,i,r),r.screen){for(var d=0;d<h.nondrag.length;d++)l(h.nondrag[d],d);for(var f=0;f<h.drag.length;f++)l(h.drag[f],-1)}else if(r.picking)for(var p=0;p<h.length;p++)l(h[p],p);a.endFrame(),e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,a.gc()),r.screen&&e.webglDebugShowAtlases&&(Ff(e),$f(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var g,m=performance.now(),y=0,v=0,x=S(i);try{for(x.s();!(g=x.n()).done;){var b=g.value;y++,v+=b.count}}catch(e){x.e(e)}finally{x.f()}Math.ceil(m-n);var T="".concat(o," elements, ").concat(v," rectangles, ").concat(y," batches");console.log("WebGL (".concat(r.name,") - ").concat(T))}}Lf.initWebgl=function(e,t){var r=this,n=r.data.contexts[r.WEBGL],i=e.cy.container();e.bgColor=Nf(i),e.webglTexSize=Math.min(e.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,console.log("max texture units",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),console.log("max texture size",n.getParameter(n.MAX_TEXTURE_SIZE)),console.log("webgl options",e),r.pickingFrameBuffer=df(n),r.pickingFrameBuffer.needsDraw=!0;var a=s((function(e){return r.getTextAngle(e,null)}),"getLabelRotation"),o=s((function(e){var t=e.pstyle("label");return t&&t.value}),"isLabelVisible");r.eleDrawing=new Af(r,n,e);var l=new Rf(r);r.eleDrawing.addTextureRenderType("node-body",Cf({getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement,isVisible:s((function(e){return e.visible()}),"isVisible")})),r.eleDrawing.addTextureRenderType("node-label",Cf({getKey:t.getLabelKey,getBoundingBox:t.getLabelBox,drawElement:t.drawLabel,getRotation:a,getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:o})),r.eleDrawing.addTextureRenderType("node-overlay",Cf({getBoundingBox:t.getElementBox,getKey:s((function(e){return l.getStyleKey("overlay",e)}),"getKey"),drawElement:s((function(e,t,r){return l.draw("overlay",e,t,r)}),"drawElement"),isVisible:s((function(e){return l.isVisible("overlay",e)}),"isVisible"),getPadding:s((function(e){return l.getPadding("overlay",e)}),"getPadding")})),r.eleDrawing.addTextureRenderType("node-underlay",Cf({getBoundingBox:t.getElementBox,getKey:s((function(e){return l.getStyleKey("underlay",e)}),"getKey"),drawElement:s((function(e,t,r){return l.draw("underlay",e,t,r)}),"drawElement"),isVisible:s((function(e){return l.isVisible("underlay",e)}),"isVisible"),getPadding:s((function(e){return l.getPadding("underlay",e)}),"getPadding")})),r.eleDrawing.addTextureRenderType("edge-label",Cf({getKey:t.getLabelKey,getBoundingBox:t.getLabelBox,drawElement:t.drawLabel,getRotation:a,getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:o}));var u=lt((function(){console.log("garbage collect flag set"),r.data.gc=!0}),1e4);r.onUpdateEleCalcs((function(e,t){var n=!1;t&&t.length>0&&(n|=r.eleDrawing.invalidate(t)),n&&u()})),If(r)},s(If,"overrideCanvasRendererFunctions"),s(Mf,"clearWebgl"),s(Of,"clearCanvas"),s(Pf,"createPanZoomMatrix"),s(Df,"setContextTransform"),s(Bf,"drawSelectionRectangle"),s(Ff,"drawAxes"),s($f,"drawAtlases"),s(zf,"getPickingIndexes"),s(Uf,"findNearestElementsWebgl"),s(Gf,"renderWebgl");var jf,Vf={drawPolygonPath:function(e,t,r,n,i,a){var o=n/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],r+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],r+s*a[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,n,i,a,o){o.forEach((function(t){return qh(e,t)})),e.closePath()},drawRoundRectanglePath:function(e,t,r,n,i,a){var o=n/2,s=i/2,l="auto"===a?xn(n,i):Math.min(a,s,o);e.beginPath&&e.beginPath(),e.moveTo(t,r-s),e.arcTo(t+o,r-s,t+o,r,l),e.arcTo(t+o,r+s,t,r+s,l),e.arcTo(t-o,r+s,t-o,r,l),e.arcTo(t-o,r-s,t,r-s,l),e.lineTo(t,r-s),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,n,i,a){var o=n/2,s=i/2,l="auto"===a?xn(n,i):a;e.beginPath&&e.beginPath(),e.moveTo(t,r-s),e.lineTo(t+o,r-s),e.lineTo(t+o,r),e.arcTo(t+o,r+s,t,r+s,l),e.arcTo(t-o,r+s,t-o,r,l),e.lineTo(t-o,r-s),e.lineTo(t,r-s),e.closePath()},drawCutRectanglePath:function(e,t,r,n,i,a,o){var s=n/2,l=i/2,u="auto"===o?Tn():o;e.beginPath&&e.beginPath(),e.moveTo(t-s+u,r-l),e.lineTo(t+s-u,r-l),e.lineTo(t+s,r-l+u),e.lineTo(t+s,r+l-u),e.lineTo(t+s-u,r+l),e.lineTo(t-s+u,r+l),e.lineTo(t-s,r+l-u),e.lineTo(t-s,r-l+u),e.closePath()},drawBarrelPath:function(e,t,r,n,i){var a=n/2,o=i/2,s=t-a,l=t+a,u=r-o,c=r+o,h=wn(n,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+p,c,s+d,c),e.lineTo(l-d,c),e.quadraticCurveTo(l-p,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-p,u,l-d,u),e.lineTo(s+d,u),e.quadraticCurveTo(s+p,u,s,u+f),e.closePath()}},Wf=Math.sin(0),Hf=Math.cos(0),qf={},Yf={},Xf=Math.PI/40;for(jf=0*Math.PI;jf<2*Math.PI;jf+=Xf)qf[jf]=Math.sin(jf),Yf[jf]=Math.cos(jf);Vf.drawEllipsePath=function(e,t,r,n,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=Xf)a=t-s*qf[u]*Wf+s*Yf[u]*Hf,o=r+l*Yf[u]*Wf+l*qf[u]*Hf,0===u?e.moveTo(a,o):e.lineTo(a,o);e.closePath()};var Kf={};function Zf(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:t})}function Qf(e){var t=e.indexOf(",");return e.substr(t+1)}function Jf(e,t,r){var n=s((function(){return t.toDataURL(r,e.quality)}),"getB64Uri");switch(e.output){case"blob-promise":return new Xi((function(n,i){try{t.toBlob((function(e){null!=e?n(e):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,e.quality)}catch(e){i(e)}}));case"blob":return Zf(Qf(n()),r);case"base64":return Qf(n());default:return n()}}Kf.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},Kf.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),n=this.findContainerClientCoords(),i=e.full?Math.ceil(r.w):n[2],a=e.full?Math.ceil(r.h):n[3],o=U(e.maxWidth)||U(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,l=e.scale;else if(o){var u=1/0,c=1/0;U(e.maxWidth)&&(u=l*e.maxWidth/i),U(e.maxHeight)&&(c=l*e.maxHeight/a),i*=l=Math.min(u,c),a*=l}o||(i*=s,a*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=a,h.style.width=i+"px",h.style.height=a+"px";var d=h.getContext("2d");if(i>0&&a>0){d.clearRect(0,0,i,a),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)d.translate(-r.x1*l,-r.y1*l),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(r.x1*l,r.y1*l);else{var p=t.pan(),g={x:p.x*l,y:p.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,i,a),d.fill())}return h},s(Zf,"b64ToBlob"),s(Qf,"b64UriToB64"),s(Jf,"output"),Kf.png=function(e){return Jf(e,this.bufferCanvasImage(e),"image/png")},Kf.jpg=function(e){return Jf(e,this.bufferCanvasImage(e),"image/jpeg")};var ep={nodeShapeImpl:function(e,t,r,n,i,a,o,s){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,i,a);case"polygon":return this.drawPolygonPath(t,r,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,i,a,s);case"barrel":return this.drawBarrelPath(t,r,n,i,a)}}},tp=np,rp=np.prototype;function np(e){var t=this,r=t.cy.window().document;e.webgl&&(rp.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(rp.CANVAS_LAYERS),contexts:new Array(rp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(rp.CANVAS_LAYERS),bufferCanvases:new Array(rp.BUFFER_COUNT),bufferContexts:new Array(rp.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";t.data.canvasContainer=r.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=i,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[n]=i;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ee()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<rp.CANVAS_LAYERS;u++){var c=t.data.canvases[u]=r.createElement("canvas"),h=rp.CANVAS_TYPES[u];t.data.contexts[u]=c.getContext(h),t.data.contexts[u]||Ot("Could not create canvas of type "+h),Object.keys(l).forEach((function(e){c.style[e]=l[e]})),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(rp.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(c),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[rp.NODE].setAttribute("data-id","layer"+rp.NODE+"-node"),t.data.canvases[rp.SELECT_BOX].setAttribute("data-id","layer"+rp.SELECT_BOX+"-selectbox"),t.data.canvases[rp.DRAG].setAttribute("data-id","layer"+rp.DRAG+"-drag"),t.data.canvases[rp.WEBGL]&&t.data.canvases[rp.WEBGL].setAttribute("data-id","layer"+rp.WEBGL+"-webgl");for(u=0;u<rp.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=r.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0;var d=Dr(),f=s((function(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}),"getBoxCenter"),p=s((function(e){return{x:-e.w/2,y:-e.h/2}}),"getCenterOffset"),g=s((function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)}),"backgroundTimestampHasChanged"),m=s((function(e){return e[0]._private.nodeKey}),"getStyleKey"),y=s((function(e){return e[0]._private.labelStyleKey}),"getLabelKey"),v=s((function(e){return e[0]._private.sourceLabelStyleKey}),"getSourceLabelKey"),x=s((function(e){return e[0]._private.targetLabelStyleKey}),"getTargetLabelKey"),b=s((function(e,r,n,i,a){return t.drawElement(e,r,n,!1,!1,a)}),"drawElement"),T=s((function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"main",a)}),"drawLabel"),C=s((function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"source",a)}),"drawSourceLabel"),w=s((function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"target",a)}),"drawTargetLabel"),k=s((function(e){return e.boundingBox(),e[0]._private.bodyBounds}),"getElementBox"),E=s((function(e){return e.boundingBox(),e[0]._private.labelBounds.main||d}),"getLabelBox"),_=s((function(e){return e.boundingBox(),e[0]._private.labelBounds.source||d}),"getSourceLabelBox"),A=s((function(e){return e.boundingBox(),e[0]._private.labelBounds.target||d}),"getTargetLabelBox"),S=s((function(e,t){return t}),"isLabelVisibleAtScale"),R=s((function(e){return f(k(e))}),"getElementRotationPoint"),N=s((function(e,t,r){var n=e?e+"-":"";return{x:t.x+r.pstyle(n+"text-margin-x").pfValue,y:t.y+r.pstyle(n+"text-margin-y").pfValue}}),"addTextMargin"),L=s((function(e,t,r){var n=e[0]._private.rscratch;return{x:n[t],y:n[r]}}),"getRsPt"),I=s((function(e){return N("",L(e,"labelX","labelY"),e)}),"getLabelRotationPoint"),M=s((function(e){return N("source",L(e,"sourceLabelX","sourceLabelY"),e)}),"getSourceLabelRotationPoint"),O=s((function(e){return N("target",L(e,"targetLabelX","targetLabelY"),e)}),"getTargetLabelRotationPoint"),P=s((function(e){return p(k(e))}),"getElementRotationOffset"),D=s((function(e){return p(_(e))}),"getSourceLabelRotationOffset"),B=s((function(e){return p(A(e))}),"getTargetLabelRotationOffset"),F=s((function(e){var t=E(e),r=p(E(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w-(t.leftPad||0);break;case"right":r.x=-(t.rightPad||0)}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h-(t.topPad||0);break;case"bottom":r.y=-(t.botPad||0)}}return r}),"getLabelRotationOffset"),$=t.data.eleTxrCache=new Cd(t,{getKey:m,doesEleInvalidateKey:g,drawElement:b,getBoundingBox:k,getRotationPoint:R,getRotationOffset:P,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),z=t.data.lblTxrCache=new Cd(t,{getKey:y,drawElement:T,getBoundingBox:E,getRotationPoint:I,getRotationOffset:F,isVisible:S}),U=t.data.slbTxrCache=new Cd(t,{getKey:v,drawElement:C,getBoundingBox:_,getRotationPoint:M,getRotationOffset:D,isVisible:S}),G=t.data.tlbTxrCache=new Cd(t,{getKey:x,drawElement:w,getBoundingBox:A,getRotationPoint:O,getRotationOffset:B,isVisible:S}),j=t.data.lyrTxrCache=new kd(t);t.onUpdateEleCalcs(s((function(e,t){$.invalidateElements(t),z.invalidateElements(t),U.invalidateElements(t),G.invalidateElements(t),j.invalidateElements(t);for(var r=0;r<t.length;r++){var n=t[r]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}}),"invalidateTextureCaches"));var V=s((function(e){for(var t=0;t<e.length;t++)j.enqueueElementRefinement(e[t].ele)}),"refineInLayers");$.onDequeue(V),z.onDequeue(V),U.onDequeue(V),G.onDequeue(V),e.webgl&&t.initWebgl(e,{getStyleKey:m,getLabelKey:y,drawElement:b,drawLabel:T,getElementBox:k,getLabelBox:E,getElementRotationPoint:R,getElementRotationOffset:P,getLabelRotationPoint:I,getLabelRotationOffset:F})}rp.CANVAS_LAYERS=3,rp.SELECT_BOX=0,rp.DRAG=1,rp.NODE=2,rp.WEBGL=3,rp.CANVAS_TYPES=["2d","2d","2d","webgl2"],rp.BUFFER_COUNT=3,rp.TEXTURE_BUFFER=0,rp.MOTIONBLUR_BUFFER_NODE=1,rp.MOTIONBLUR_BUFFER_DRAG=2,s(np,"CanvasRenderer"),rp.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[rp.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[rp.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[rp.SELECT_BOX]=t;break;case"gc":r.data.gc=!0}};var ip=typeof Path2D<"u";rp.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},rp.usePaths=function(){return ip&&this.pathsEnabled},rp.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},rp.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},rp.makeOffscreenCanvas=function(e,t){var r;"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":f(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t);return r},[Rd,Pd,Gd,Vd,Wd,qd,Kd,Lf,Vf,Kf,ep].forEach((function(e){fe(rp,e)}));var ap=[{type:"layout",extensions:vh},{type:"renderer",extensions:[{name:"null",impl:xh},{name:"base",impl:gd},{name:"canvas",impl:tp}]}],op={},sp={};function lp(e,t,r){var n=r,i=s((function(r){Dt("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")}),"overrideErr");if("core"===e){if(Lc.prototype[t])return i(t);Lc.prototype[t]=r}else if("collection"===e){if(qu.prototype[t])return i(t);qu.prototype[t]=r}else if("layout"===e){for(var a=s((function(e){this.options=e,r.call(this,e),$(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()}),"Layout"),o=a.prototype=Object.create(r.prototype),l=[],u=0;u<l.length;u++){var c=l[u];o[c]=o[c]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var h=r.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return h?h.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=s((function(e){return e._private.cy}),"getCy"),f={addEventFields:s((function(e,t){t.layout=e,t.cy=d(e),t.target=e}),"addEventFields"),bubble:s((function(){return!0}),"bubble"),parent:s((function(e){return d(e)}),"parent")};fe(o,{createEmitter:s((function(){return this._private.emitter=new cu(f,this),this}),"createEmitter"),emitter:s((function(){return this._private.emitter}),"emitter"),on:s((function(e,t){return this.emitter().on(e,t),this}),"on"),one:s((function(e,t){return this.emitter().one(e,t),this}),"one"),once:s((function(e,t){return this.emitter().one(e,t),this}),"once"),removeListener:s((function(e,t){return this.emitter().removeListener(e,t),this}),"removeListener"),removeAllListeners:s((function(){return this.emitter().removeAllListeners(),this}),"removeAllListeners"),emit:s((function(e,t){return this.emitter().emit(e,t),this}),"emit")}),cs.eventAliasesOn(o),n=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var p=up("renderer","base"),g=p.prototype,m=r,y=r.prototype,v=s((function(){p.apply(this,arguments),m.apply(this,arguments)}),"Renderer"),x=v.prototype;for(var b in g){var T=g[b];if(null!=y[b])return i(b);x[b]=T}for(var C in y)x[C]=y[C];g.clientFunctions.forEach((function(e){x[e]=x[e]||function(){Ot("Renderer does not implement `renderer."+e+"()` on its prototype")}})),n=v}else if("__proto__"===e||"constructor"===e||"prototype"===e)return Ot(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return be({map:op,keys:[e,t],value:n})}function up(e,t){return Te({map:op,keys:[e,t]})}function cp(e,t,r,n,i){return be({map:sp,keys:[e,t,r,n],value:i})}function hp(e,t,r,n){return Te({map:sp,keys:[e,t,r,n]})}s(lp,"setExtension"),s(up,"getExtension"),s(cp,"setModule"),s(hp,"getModule");var dp=s((function(){return 2===arguments.length?up.apply(null,arguments):3===arguments.length?lp.apply(null,arguments):4===arguments.length?hp.apply(null,arguments):5===arguments.length?cp.apply(null,arguments):void Ot("Invalid extension access syntax")}),"extension");Lc.prototype.extension=dp,ap.forEach((function(e){e.extensions.forEach((function(t){lp(e.type,t.name,t.impl)}))}));var fp=s((function e(){if(!(this instanceof e))return new e;this.length=0}),"Stylesheet"),pp=fp.prototype;pp.instanceString=function(){return"stylesheet"},pp.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},pp.css=function(e,t){var r=this.length-1;if(D(e))this[r].properties.push({name:e,value:t});else if($(e))for(var n=e,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(null!=s){var l=_c.properties[o]||_c.properties[ne(o)];if(null!=l){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this},pp.style=pp.css,pp.generateStyle=function(e){var t=new _c(e);return this.appendToStyle(t)},pp.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,i=r.properties;e.selector(n);for(var a=0;a<i.length;a++){var o=i[a];e.css(o.name,o.value)}}return e};var gp=s((function(e){return void 0===e&&(e={}),$(e)?new Lc(e):D(e)?dp.apply(dp,arguments):void 0}),"cytoscape");gp.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(gp),e.apply(null,t),this},gp.warnings=function(e){return Pt(e)},gp.version="3.31.0",gp.stylesheet=gp.Stylesheet=fp;
/*! Bundled license information:

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
*/
var mp=class{constructor(e){this.init=e,this.records=this.init()}static{s(this,"ImperativeState")}reset(){this.records=this.init()}};function yp(e,t){e.accDescr&&t.setAccDescription?.(e.accDescr),e.accTitle&&t.setAccTitle?.(e.accTitle),e.title&&t.setDiagramTitle?.(e.title)}function vp(){throw new Error("setTimeout has not been defined")}function xp(){throw new Error("clearTimeout has not been defined")}s(yp,"populateCommonDb");var bp=vp,Tp=xp;function Cp(e){if(bp===setTimeout)return setTimeout(e,0);if((bp===vp||!bp)&&setTimeout)return bp=setTimeout,setTimeout(e,0);try{return bp(e,0)}catch(t){try{return bp.call(null,e,0)}catch(t){return bp.call(this,e,0)}}}"function"==typeof e.setTimeout&&(bp=setTimeout),"function"==typeof e.clearTimeout&&(Tp=clearTimeout);var wp,kp=[],Ep=!1,_p=-1;function Ap(){Ep&&wp&&(Ep=!1,wp.length?kp=wp.concat(kp):_p=-1,kp.length&&Sp())}function Sp(){if(!Ep){var e=Cp(Ap);Ep=!0;for(var t=kp.length;t;){for(wp=kp,kp=[];++_p<t;)wp&&wp[_p].run();_p=-1,t=kp.length}wp=null,Ep=!1,function(e){if(Tp===clearTimeout)return clearTimeout(e);if((Tp===xp||!Tp)&&clearTimeout)return Tp=clearTimeout,clearTimeout(e);try{return Tp(e)}catch(t){try{return Tp.call(null,e)}catch(t){return Tp.call(this,e)}}}(e)}}function Rp(e,t){this.fun=e,this.array=t}Rp.prototype.run=function(){this.fun.apply(null,this.array)};function Np(){}var Lp=Np,Ip=Np,Mp=Np,Op=Np,Pp=Np,Dp=Np,Bp=Np;var Fp=e.performance||{},$p=Fp.now||Fp.mozNow||Fp.msNow||Fp.oNow||Fp.webkitNow||function(){return(new Date).getTime()};var zp=new Date;var Up={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];kp.push(new Rp(e,t)),1!==kp.length||Ep||Cp(Sp)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Lp,addListener:Ip,once:Mp,off:Op,removeListener:Pp,removeAllListeners:Dp,emit:Bp,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*$p.call(Fp),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-zp)/1e3}},Gp="object"==typeof e&&e&&e.Object===Object&&e,jp="object"==typeof self&&self&&self.Object===Object&&self,Vp=Gp||jp||Function("return this")(),Wp=Vp.Symbol,Hp=Object.prototype,qp=Hp.hasOwnProperty,Yp=Hp.toString,Xp=Wp?Wp.toStringTag:void 0;function Kp(e){var t=qp.call(e,Xp),r=e[Xp];try{e[Xp]=void 0;var n=!0}catch{}var i=Yp.call(e);return n&&(t?e[Xp]=r:delete e[Xp]),i}s(Kp,"getRawTag");var Zp=Kp,Qp=Object.prototype.toString;function Jp(e){return Qp.call(e)}s(Jp,"objectToString");var eg=Jp,tg=Wp?Wp.toStringTag:void 0;function rg(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":tg&&tg in Object(e)?Zp(e):eg(e)}s(rg,"baseGetTag");var ng=rg;function ig(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}s(ig,"isObject");var ag=ig;function og(e){if(!ag(e))return!1;var t=ng(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}s(og,"isFunction");var sg=og,lg=Vp["__core-js_shared__"],ug=function(){var e=/[^.]+$/.exec(lg&&lg.keys&&lg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cg(e){return!!ug&&ug in e}s(cg,"isMasked");var hg=cg,dg=Function.prototype.toString;function fg(e){if(null!=e){try{return dg.call(e)}catch{}try{return e+""}catch{}}return""}s(fg,"toSource");var pg=fg,gg=/^\[object .+?Constructor\]$/,mg=Function.prototype,yg=Object.prototype,vg=mg.toString,xg=yg.hasOwnProperty,bg=RegExp("^"+vg.call(xg).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tg(e){return!(!ag(e)||hg(e))&&(sg(e)?bg:gg).test(pg(e))}s(Tg,"baseIsNative");var Cg=Tg;function wg(e,t){return e?.[t]}s(wg,"getValue");var kg=wg;function Eg(e,t){var r=kg(e,t);return Cg(r)?r:void 0}s(Eg,"getNative");var _g=Eg,Ag=_g(Object,"create");function Sg(){this.__data__=Ag?Ag(null):{},this.size=0}s(Sg,"hashClear");var Rg=Sg;function Ng(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}s(Ng,"hashDelete");var Lg=Ng,Ig=Object.prototype.hasOwnProperty;function Mg(e){var t=this.__data__;if(Ag){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Ig.call(t,e)?t[e]:void 0}s(Mg,"hashGet");var Og=Mg,Pg=Object.prototype.hasOwnProperty;function Dg(e){var t=this.__data__;return Ag?void 0!==t[e]:Pg.call(t,e)}s(Dg,"hashHas");var Bg=Dg;function Fg(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ag&&void 0===t?"__lodash_hash_undefined__":t,this}s(Fg,"hashSet");var $g=Fg;function zg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(zg,"Hash"),zg.prototype.clear=Rg,zg.prototype.delete=Lg,zg.prototype.get=Og,zg.prototype.has=Bg,zg.prototype.set=$g;var Ug=zg;function Gg(){this.__data__=[],this.size=0}s(Gg,"listCacheClear");var jg=Gg;function Vg(e,t){return e===t||e!=e&&t!=t}s(Vg,"eq");var Wg=Vg;function Hg(e,t){for(var r=e.length;r--;)if(Wg(e[r][0],t))return r;return-1}s(Hg,"assocIndexOf");var qg=Hg,Yg=Array.prototype.splice;function Xg(e){var t=this.__data__,r=qg(t,e);return!(r<0)&&(r==t.length-1?t.pop():Yg.call(t,r,1),--this.size,!0)}s(Xg,"listCacheDelete");var Kg=Xg;function Zg(e){var t=this.__data__,r=qg(t,e);return r<0?void 0:t[r][1]}s(Zg,"listCacheGet");var Qg=Zg;function Jg(e){return qg(this.__data__,e)>-1}s(Jg,"listCacheHas");var em=Jg;function tm(e,t){var r=this.__data__,n=qg(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}s(tm,"listCacheSet");var rm=tm;function nm(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(nm,"ListCache"),nm.prototype.clear=jg,nm.prototype.delete=Kg,nm.prototype.get=Qg,nm.prototype.has=em,nm.prototype.set=rm;var im=nm,am=_g(Vp,"Map");function om(){this.size=0,this.__data__={hash:new Ug,map:new(am||im),string:new Ug}}s(om,"mapCacheClear");var sm=om;function lm(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}s(lm,"isKeyable");var um=lm;function cm(e,t){var r=e.__data__;return um(t)?r["string"==typeof t?"string":"hash"]:r.map}s(cm,"getMapData");var hm=cm;function dm(e){var t=hm(this,e).delete(e);return this.size-=t?1:0,t}s(dm,"mapCacheDelete");var fm=dm;function pm(e){return hm(this,e).get(e)}s(pm,"mapCacheGet");var gm=pm;function mm(e){return hm(this,e).has(e)}s(mm,"mapCacheHas");var ym=mm;function vm(e,t){var r=hm(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}s(vm,"mapCacheSet");var xm=vm;function bm(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s(bm,"MapCache"),bm.prototype.clear=sm,bm.prototype.delete=fm,bm.prototype.get=gm,bm.prototype.has=ym,bm.prototype.set=xm;var Tm=bm;function Cm(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=s((function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o}),"memoized");return r.cache=new(Cm.Cache||Tm),r}s(Cm,"memoize"),Cm.Cache=Tm;var wm=Cm;function km(e){return function(){return e}}s(km,"constant");var Em=km;function _m(){this.__data__=new im,this.size=0}s(_m,"stackClear");var Am=_m;function Sm(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}s(Sm,"stackDelete");var Rm=Sm;function Nm(e){return this.__data__.get(e)}s(Nm,"stackGet");var Lm=Nm;function Im(e){return this.__data__.has(e)}s(Im,"stackHas");var Mm=Im;function Om(e,t){var r=this.__data__;if(r instanceof im){var n=r.__data__;if(!am||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Tm(n)}return r.set(e,t),this.size=r.size,this}s(Om,"stackSet");var Pm=Om;function Dm(e){var t=this.__data__=new im(e);this.size=t.size}s(Dm,"Stack"),Dm.prototype.clear=Am,Dm.prototype.delete=Rm,Dm.prototype.get=Lm,Dm.prototype.has=Mm,Dm.prototype.set=Pm;var Bm=Dm,Fm=function(){try{var e=_g(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$m=Fm;function zm(e,t,r){"__proto__"==t&&$m?$m(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}s(zm,"baseAssignValue");var Um=zm;function Gm(e,t,r){(void 0!==r&&!Wg(e[t],r)||void 0===r&&!(t in e))&&Um(e,t,r)}s(Gm,"assignMergeValue");var jm=Gm;function Vm(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===r(a[l],l,a))break}return t}}s(Vm,"createBaseFor");var Wm=Vm(),Hm="object"==typeof exports&&exports&&!exports.nodeType&&exports,qm=Hm&&"object"==typeof module&&module&&!module.nodeType&&module,Ym=qm&&qm.exports===Hm?Vp.Buffer:void 0,Xm=Ym?Ym.allocUnsafe:void 0;function Km(e,t){if(t)return e.slice();var r=e.length,n=Xm?Xm(r):new e.constructor(r);return e.copy(n),n}s(Km,"cloneBuffer");var Zm=Km,Qm=Vp.Uint8Array;function Jm(e){var t=new e.constructor(e.byteLength);return new Qm(t).set(new Qm(e)),t}s(Jm,"cloneArrayBuffer");var ey=Jm;function ty(e,t){var r=t?ey(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}s(ty,"cloneTypedArray");var ry=ty;function ny(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}s(ny,"copyArray");var iy=ny,ay=Object.create,oy=function(){function e(){}return s(e,"object"),function(t){if(!ag(t))return{};if(ay)return ay(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),sy=oy;function ly(e,t){return function(r){return e(t(r))}}s(ly,"overArg");var uy=ly,cy=uy(Object.getPrototypeOf,Object),hy=Object.prototype;function dy(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||hy)}s(dy,"isPrototype");var fy=dy;function py(e){return"function"!=typeof e.constructor||fy(e)?{}:sy(cy(e))}s(py,"initCloneObject");var gy=py;function my(e){return null!=e&&"object"==typeof e}s(my,"isObjectLike");var yy=my;function vy(e){return yy(e)&&"[object Arguments]"==ng(e)}s(vy,"baseIsArguments");var xy=vy,by=Object.prototype,Ty=by.hasOwnProperty,Cy=by.propertyIsEnumerable,wy=xy(function(){return arguments}())?xy:function(e){return yy(e)&&Ty.call(e,"callee")&&!Cy.call(e,"callee")},ky=wy,Ey=Array.isArray;function _y(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}s(_y,"isLength");var Ay=_y;function Sy(e){return null!=e&&Ay(e.length)&&!sg(e)}s(Sy,"isArrayLike");var Ry=Sy;function Ny(e){return yy(e)&&Ry(e)}s(Ny,"isArrayLikeObject");var Ly=Ny;function Iy(){return!1}s(Iy,"stubFalse");var My=Iy,Oy="object"==typeof exports&&exports&&!exports.nodeType&&exports,Py=Oy&&"object"==typeof module&&module&&!module.nodeType&&module,Dy=Py&&Py.exports===Oy?Vp.Buffer:void 0,By=(Dy?Dy.isBuffer:void 0)||My,Fy=Function.prototype,$y=Object.prototype,zy=Fy.toString,Uy=$y.hasOwnProperty,Gy=zy.call(Object);function jy(e){if(!yy(e)||"[object Object]"!=ng(e))return!1;var t=cy(e);if(null===t)return!0;var r=Uy.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&zy.call(r)==Gy}s(jy,"isPlainObject");var Vy=jy,Wy={};function Hy(e){return yy(e)&&Ay(e.length)&&!!Wy[ng(e)]}Wy["[object Float32Array]"]=Wy["[object Float64Array]"]=Wy["[object Int8Array]"]=Wy["[object Int16Array]"]=Wy["[object Int32Array]"]=Wy["[object Uint8Array]"]=Wy["[object Uint8ClampedArray]"]=Wy["[object Uint16Array]"]=Wy["[object Uint32Array]"]=!0,Wy["[object Arguments]"]=Wy["[object Array]"]=Wy["[object ArrayBuffer]"]=Wy["[object Boolean]"]=Wy["[object DataView]"]=Wy["[object Date]"]=Wy["[object Error]"]=Wy["[object Function]"]=Wy["[object Map]"]=Wy["[object Number]"]=Wy["[object Object]"]=Wy["[object RegExp]"]=Wy["[object Set]"]=Wy["[object String]"]=Wy["[object WeakMap]"]=!1,s(Hy,"baseIsTypedArray");var qy=Hy;function Yy(e){return function(t){return e(t)}}s(Yy,"baseUnary");var Xy=Yy,Ky="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zy=Ky&&"object"==typeof module&&module&&!module.nodeType&&module,Qy=Zy&&Zy.exports===Ky&&Gp.process,Jy=function(){try{return Zy&&Zy.require&&Zy.require("util").types||Qy&&Qy.binding&&Qy.binding("util")}catch{}}(),ev=Jy&&Jy.isTypedArray,tv=ev?Xy(ev):qy;function rv(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}s(rv,"safeGet");var nv=rv,iv=Object.prototype.hasOwnProperty;function av(e,t,r){var n=e[t];(!iv.call(e,t)||!Wg(n,r)||void 0===r&&!(t in e))&&Um(e,t,r)}s(av,"assignValue");var ov=av;function sv(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?Um(r,s,l):ov(r,s,l)}return r}s(sv,"copyObject");var lv=sv;function uv(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}s(uv,"baseTimes");var cv=uv,hv=/^(?:0|[1-9]\d*)$/;function dv(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&hv.test(e))&&e>-1&&e%1==0&&e<t}s(dv,"isIndex");var fv=dv,pv=Object.prototype.hasOwnProperty;function gv(e,t){var r=Ey(e),n=!r&&ky(e),i=!r&&!n&&By(e),a=!r&&!n&&!i&&tv(e),o=r||n||i||a,s=o?cv(e.length,String):[],l=s.length;for(var u in e)(t||pv.call(e,u))&&(!o||!("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||fv(u,l)))&&s.push(u);return s}s(gv,"arrayLikeKeys");var mv=gv;function yv(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}s(yv,"nativeKeysIn");var vv=yv,xv=Object.prototype.hasOwnProperty;function bv(e){if(!ag(e))return vv(e);var t=fy(e),r=[];for(var n in e)"constructor"==n&&(t||!xv.call(e,n))||r.push(n);return r}s(bv,"baseKeysIn");var Tv=bv;function Cv(e){return Ry(e)?mv(e,!0):Tv(e)}s(Cv,"keysIn");var wv=Cv;function kv(e){return lv(e,wv(e))}s(kv,"toPlainObject");var Ev=kv;function _v(e,t,r,n,i,a,o){var s=nv(e,r),l=nv(t,r),u=o.get(l);if(u)jm(e,r,u);else{var c=a?a(s,l,r+"",e,t,o):void 0,h=void 0===c;if(h){var d=Ey(l),f=!d&&By(l),p=!d&&!f&&tv(l);c=l,d||f||p?Ey(s)?c=s:Ly(s)?c=iy(s):f?(h=!1,c=Zm(l,!0)):p?(h=!1,c=ry(l,!0)):c=[]:Vy(l)||ky(l)?(c=s,ky(s)?c=Ev(s):(!ag(s)||sg(s))&&(c=gy(l))):h=!1}h&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),jm(e,r,c)}}s(_v,"baseMergeDeep");var Av=_v;function Sv(e,t,r,n,i){e!==t&&Wm(t,(function(a,o){if(i||(i=new Bm),ag(a))Av(e,t,o,r,Sv,n,i);else{var s=n?n(nv(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),jm(e,o,s)}}),wv)}s(Sv,"baseMerge");var Rv=Sv;function Nv(e){return e}s(Nv,"identity");var Lv=Nv;function Iv(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}s(Iv,"apply");var Mv=Iv,Ov=Math.max;function Pv(e,t,r){return t=Ov(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Ov(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),Mv(e,this,s)}}s(Pv,"overRest");var Dv=Pv,Bv=$m?function(e,t){return $m(e,"toString",{configurable:!0,enumerable:!1,value:Em(t),writable:!0})}:Lv,Fv=Bv,$v=Date.now;function zv(e){var t=0,r=0;return function(){var n=$v(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}s(zv,"shortOut");var Uv=zv(Fv);function Gv(e,t){return Uv(Dv(e,t,Lv),e+"")}s(Gv,"baseRest");var jv=Gv;function Vv(e,t,r){if(!ag(r))return!1;var n=typeof t;return!!("number"==n?Ry(r)&&fv(t,r.length):"string"==n&&t in r)&&Wg(r[t],e)}s(Vv,"isIterateeCall");var Wv=Vv;function Hv(e){return jv((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&Wv(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t}))}s(Hv,"createAssigner");var qv=Hv,Yv=qv((function(e,t,r){Rv(e,t,r)})),Xv=Yv,Kv=uy(Object.keys,Object),Zv=Object.prototype.hasOwnProperty;function Qv(e){if(!fy(e))return Kv(e);var t=[];for(var r in Object(e))Zv.call(e,r)&&"constructor"!=r&&t.push(r);return t}s(Qv,"baseKeys");var Jv=Qv,ex=_g(Vp,"DataView"),tx=_g(Vp,"Promise"),rx=_g(Vp,"Set"),nx=_g(Vp,"WeakMap"),ix="[object Map]",ax="[object Promise]",ox="[object Set]",sx="[object WeakMap]",lx="[object DataView]",ux=pg(ex),cx=pg(am),hx=pg(tx),dx=pg(rx),fx=pg(nx),px=ng;(ex&&px(new ex(new ArrayBuffer(1)))!=lx||am&&px(new am)!=ix||tx&&px(tx.resolve())!=ax||rx&&px(new rx)!=ox||nx&&px(new nx)!=sx)&&(px=s((function(e){var t=ng(e),r="[object Object]"==t?e.constructor:void 0,n=r?pg(r):"";if(n)switch(n){case ux:return lx;case cx:return ix;case hx:return ax;case dx:return ox;case fx:return sx}return t}),"getTag"));var gx=px,mx=Object.prototype.hasOwnProperty;function yx(e){if(null==e)return!0;if(Ry(e)&&(Ey(e)||"string"==typeof e||"function"==typeof e.splice||By(e)||tv(e)||ky(e)))return!e.length;var t=gx(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(fy(e))return!Jv(e).length;for(var r in e)if(mx.call(e,r))return!1;return!0}s(yx,"isEmpty");var vx=yx;function xx(e){return Ry(e)?mv(e):Jv(e)}s(xx,"keys");var bx=xx;function Tx(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}s(Tx,"arrayEach");var Cx=Tx;function wx(e,t){return e&&lv(t,bx(t),e)}s(wx,"baseAssign");var kx=wx;function Ex(e,t){return e&&lv(t,wv(t),e)}s(Ex,"baseAssignIn");var _x=Ex;function Ax(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}s(Ax,"arrayFilter");var Sx=Ax;function Rx(){return[]}s(Rx,"stubArray");var Nx=Rx,Lx=Object.prototype.propertyIsEnumerable,Ix=Object.getOwnPropertySymbols,Mx=Ix?function(e){return null==e?[]:(e=Object(e),Sx(Ix(e),(function(t){return Lx.call(e,t)})))}:Nx,Ox=Mx;function Px(e,t){return lv(e,Ox(e),t)}s(Px,"copySymbols");var Dx=Px;function Bx(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}s(Bx,"arrayPush");var Fx=Bx,$x=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Fx(t,Ox(e)),e=cy(e);return t}:Nx,zx=$x;function Ux(e,t){return lv(e,zx(e),t)}s(Ux,"copySymbolsIn");var Gx=Ux;function jx(e,t,r){var n=t(e);return Ey(e)?n:Fx(n,r(e))}s(jx,"baseGetAllKeys");var Vx=jx;function Wx(e){return Vx(e,bx,Ox)}s(Wx,"getAllKeys");var Hx=Wx;function qx(e){return Vx(e,wv,zx)}s(qx,"getAllKeysIn");var Yx=qx,Xx=Object.prototype.hasOwnProperty;function Kx(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Xx.call(e,"index")&&(r.index=e.index,r.input=e.input),r}s(Kx,"initCloneArray");var Zx=Kx;function Qx(e,t){var r=t?ey(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}s(Qx,"cloneDataView");var Jx=Qx,eb=/\w*$/;function tb(e){var t=new e.constructor(e.source,eb.exec(e));return t.lastIndex=e.lastIndex,t}s(tb,"cloneRegExp");var rb=tb,nb=Wp?Wp.prototype:void 0,ib=nb?nb.valueOf:void 0;function ab(e){return ib?Object(ib.call(e)):{}}s(ab,"cloneSymbol");var ob=ab;function sb(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return ey(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Jx(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ry(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return rb(e);case"[object Symbol]":return ob(e)}}s(sb,"initCloneByTag");var lb=sb;function ub(e){return yy(e)&&"[object Map]"==gx(e)}s(ub,"baseIsMap");var cb=ub,hb=Jy&&Jy.isMap,db=hb?Xy(hb):cb;function fb(e){return yy(e)&&"[object Set]"==gx(e)}s(fb,"baseIsSet");var pb=fb,gb=Jy&&Jy.isSet,mb=gb?Xy(gb):pb,yb="[object Arguments]",vb="[object Function]",xb="[object Object]",bb={};function Tb(e,t,r,n,i,a){var o,s=1&t,l=2&t,u=4&t;if(r&&(o=i?r(e,n,i,a):r(e)),void 0!==o)return o;if(!ag(e))return e;var c=Ey(e);if(c){if(o=Zx(e),!s)return iy(e,o)}else{var h=gx(e),d=h==vb||"[object GeneratorFunction]"==h;if(By(e))return Zm(e,s);if(h==xb||h==yb||d&&!i){if(o=l||d?{}:gy(e),!s)return l?Gx(e,_x(o,e)):Dx(e,kx(o,e))}else{if(!bb[h])return i?e:{};o=lb(e,h,s)}}a||(a=new Bm);var f=a.get(e);if(f)return f;a.set(e,o),mb(e)?e.forEach((function(n){o.add(Tb(n,t,r,n,e,a))})):db(e)&&e.forEach((function(n,i){o.set(i,Tb(n,t,r,i,e,a))}));var p=c?void 0:(u?l?Yx:Hx:l?wv:bx)(e);return Cx(p||e,(function(n,i){p&&(n=e[i=n]),ov(o,i,Tb(n,t,r,i,e,a))})),o}bb[yb]=bb["[object Array]"]=bb["[object ArrayBuffer]"]=bb["[object DataView]"]=bb["[object Boolean]"]=bb["[object Date]"]=bb["[object Float32Array]"]=bb["[object Float64Array]"]=bb["[object Int8Array]"]=bb["[object Int16Array]"]=bb["[object Int32Array]"]=bb["[object Map]"]=bb["[object Number]"]=bb[xb]=bb["[object RegExp]"]=bb["[object Set]"]=bb["[object String]"]=bb["[object Symbol]"]=bb["[object Uint8Array]"]=bb["[object Uint8ClampedArray]"]=bb["[object Uint16Array]"]=bb["[object Uint32Array]"]=!0,bb["[object Error]"]=bb[vb]=bb["[object WeakMap]"]=!1,s(Tb,"baseClone");var Cb=Tb;function wb(e){return Cb(e,4)}s(wb,"clone");var kb=wb,Eb=Object.prototype,_b=Eb.hasOwnProperty,Ab=jv((function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&Wv(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],o=wv(a),s=-1,l=o.length;++s<l;){var u=o[s],c=e[u];(void 0===c||Wg(c,Eb[u])&&!_b.call(e,u))&&(e[u]=a[u])}return e})),Sb=Ab;function Rb(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}s(Rb,"last");var Nb=Rb;function Lb(e,t){return e&&Wm(e,t,bx)}s(Lb,"baseForOwn");var Ib=Lb;function Mb(e,t){return function(r,n){if(null==r)return r;if(!Ry(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Object(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}s(Mb,"createBaseEach");var Ob=Mb(Ib);function Pb(e){return"function"==typeof e?e:Lv}s(Pb,"castFunction");var Db=Pb;function Bb(e,t){return(Ey(e)?Cx:Ob)(e,Db(t))}s(Bb,"forEach");var Fb=Bb;function $b(e,t){var r=[];return Ob(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}s($b,"baseFilter");var zb=$b;function Ub(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}s(Ub,"setCacheAdd");var Gb=Ub;function jb(e){return this.__data__.has(e)}s(jb,"setCacheHas");var Vb=jb;function Wb(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Tm;++t<r;)this.add(e[t])}s(Wb,"SetCache"),Wb.prototype.add=Wb.prototype.push=Gb,Wb.prototype.has=Vb;var Hb=Wb;function qb(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}s(qb,"arraySome");var Yb=qb;function Xb(e,t){return e.has(t)}s(Xb,"cacheHas");var Kb=Xb;function Zb(e,t,r,n,i,a){var o=1&r,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=2&r?new Hb:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var p=e[h],g=t[h];if(n)var m=o?n(g,p,h,t,e,a):n(p,g,h,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!Yb(t,(function(e,t){if(!Kb(f,t)&&(p===e||i(p,e,r,n,a)))return f.push(t)}))){d=!1;break}}else if(p!==g&&!i(p,g,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d}s(Zb,"equalArrays");var Qb=Zb;function Jb(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}s(Jb,"mapToArray");var eT=Jb;function tT(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}s(tT,"setToArray");var rT=tT,nT=Wp?Wp.prototype:void 0,iT=nT?nT.valueOf:void 0;function aT(e,t,r,n,i,a,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Qm(e),new Qm(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Wg(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=eT;case"[object Set]":var l=1&n;if(s||(s=rT),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=2,o.set(e,t);var c=Qb(s(e),s(t),n,i,a,o);return o.delete(e),c;case"[object Symbol]":if(iT)return iT.call(e)==iT.call(t)}return!1}s(aT,"equalByTag");var oT=aT,sT=Object.prototype.hasOwnProperty;function lT(e,t,r,n,i,a){var o=1&r,s=Hx(e),l=s.length;if(l!=Hx(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:sT.call(t,c)))return!1}var h=a.get(e),d=a.get(t);if(h&&d)return h==t&&d==e;var f=!0;a.set(e,t),a.set(t,e);for(var p=o;++u<l;){var g=e[c=s[u]],m=t[c];if(n)var y=o?n(m,g,c,t,e,a):n(g,m,c,e,t,a);if(!(void 0===y?g===m||i(g,m,r,n,a):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=e.constructor,x=t.constructor;v!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof x&&x instanceof x)&&(f=!1)}return a.delete(e),a.delete(t),f}s(lT,"equalObjects");var uT=lT,cT="[object Arguments]",hT="[object Array]",dT="[object Object]",fT=Object.prototype.hasOwnProperty;function pT(e,t,r,n,i,a){var o=Ey(e),s=Ey(t),l=o?hT:gx(e),u=s?hT:gx(t),c=(l=l==cT?dT:l)==dT,h=(u=u==cT?dT:u)==dT,d=l==u;if(d&&By(e)){if(!By(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new Bm),o||tv(e)?Qb(e,t,r,n,i,a):oT(e,t,l,r,n,i,a);if(!(1&r)){var f=c&&fT.call(e,"__wrapped__"),p=h&&fT.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,m=p?t.value():t;return a||(a=new Bm),i(g,m,r,n,a)}}return!!d&&(a||(a=new Bm),uT(e,t,r,n,i,a))}s(pT,"baseIsEqualDeep");var gT=pT;function mT(e,t,r,n,i){return e===t||(null==e||null==t||!yy(e)&&!yy(t)?e!=e&&t!=t:gT(e,t,r,n,mT,i))}s(mT,"baseIsEqual");var yT=mT;function vT(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=r[i])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var h=new Bm;if(n)var d=n(u,c,l,e,t,h);if(!(void 0===d?yT(c,u,3,n,h):d))return!1}}return!0}s(vT,"baseIsMatch");var xT=vT;function bT(e){return e==e&&!ag(e)}s(bT,"isStrictComparable");var TT=bT;function CT(e){for(var t=bx(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,TT(i)]}return t}s(CT,"getMatchData");var wT=CT;function kT(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}s(kT,"matchesStrictComparable");var ET=kT;function _T(e){var t=wT(e);return 1==t.length&&t[0][2]?ET(t[0][0],t[0][1]):function(r){return r===e||xT(r,e,t)}}s(_T,"baseMatches");var AT=_T;function ST(e){return"symbol"==typeof e||yy(e)&&"[object Symbol]"==ng(e)}s(ST,"isSymbol");var RT=ST,NT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LT=/^\w*$/;function IT(e,t){if(Ey(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!RT(e))||(LT.test(e)||!NT.test(e)||null!=t&&e in Object(t))}s(IT,"isKey");var MT=IT;function OT(e){var t=wm(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}s(OT,"memoizeCapped");var PT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DT=/\\(\\)?/g,BT=OT((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(PT,(function(e,r,n,i){t.push(n?i.replace(DT,"$1"):r||e)})),t})),FT=BT;function $T(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}s($T,"arrayMap");var zT=$T,UT=Wp?Wp.prototype:void 0,GT=UT?UT.toString:void 0;function jT(e){if("string"==typeof e)return e;if(Ey(e))return zT(e,jT)+"";if(RT(e))return GT?GT.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}s(jT,"baseToString");var VT=jT;function WT(e){return null==e?"":VT(e)}s(WT,"toString");var HT=WT;function qT(e,t){return Ey(e)?e:MT(e,t)?[e]:FT(HT(e))}s(qT,"castPath");var YT=qT;function XT(e){if("string"==typeof e||RT(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}s(XT,"toKey");var KT=XT;function ZT(e,t){for(var r=0,n=(t=YT(t,e)).length;null!=e&&r<n;)e=e[KT(t[r++])];return r&&r==n?e:void 0}s(ZT,"baseGet");var QT=ZT;function JT(e,t,r){var n=null==e?void 0:QT(e,t);return void 0===n?r:n}s(JT,"get");var eC=JT;function tC(e,t){return null!=e&&t in Object(e)}s(tC,"baseHasIn");var rC=tC;function nC(e,t,r){for(var n=-1,i=(t=YT(t,e)).length,a=!1;++n<i;){var o=KT(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&Ay(i)&&fv(o,i)&&(Ey(e)||ky(e))}s(nC,"hasPath");var iC=nC;function aC(e,t){return null!=e&&iC(e,t,rC)}s(aC,"hasIn");var oC=aC;function sC(e,t){return MT(e)&&TT(t)?ET(KT(e),t):function(r){var n=eC(r,e);return void 0===n&&n===t?oC(r,e):yT(t,n,3)}}s(sC,"baseMatchesProperty");var lC=sC;function uC(e){return function(t){return t?.[e]}}s(uC,"baseProperty");var cC=uC;function hC(e){return function(t){return QT(t,e)}}s(hC,"basePropertyDeep");var dC=hC;function fC(e){return MT(e)?cC(KT(e)):dC(e)}s(fC,"property");var pC=fC;function gC(e){return"function"==typeof e?e:null==e?Lv:"object"==typeof e?Ey(e)?lC(e[0],e[1]):AT(e):pC(e)}s(gC,"baseIteratee");var mC=gC;function yC(e,t){return(Ey(e)?Sx:zb)(e,mC(t))}s(yC,"filter");var vC=yC;function xC(e,t){var r=-1,n=Ry(e)?Array(e.length):[];return Ob(e,(function(e,i,a){n[++r]=t(e,i,a)})),n}s(xC,"baseMap");var bC=xC;function TC(e,t){return(Ey(e)?zT:bC)(e,mC(t))}s(TC,"map");var CC=TC;function wC(e,t){return zT(t,(function(t){return e[t]}))}s(wC,"baseValues");var kC=wC;function EC(e){return null==e?[]:kC(e,bx(e))}s(EC,"values");var _C=EC;function AC(e){return void 0===e}s(AC,"isUndefined");var SC=AC;function RC(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(void 0===s?o==o&&!RT(o):r(o,s)))var s=o,l=a}return l}s((function(e,t){var r={};return t=mC(t),Ib(e,(function(e,n,i){Um(r,n,t(e,n,i))})),r}),"mapValues"),s(RC,"baseExtremum");var NC=RC;function LC(e,t){return e>t}s(LC,"baseGt");var IC=LC;function MC(e,t,r,n){if(!ag(e))return e;for(var i=-1,a=(t=YT(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var l=KT(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=ag(c)?c:fv(t[i+1])?[]:{})}ov(s,l,u),s=s[l]}return e}s((function(e){return e&&e.length?NC(e,Lv,IC):void 0}),"max"),s(MC,"baseSet");var OC=MC;function PC(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=QT(e,o);r(s,o)&&OC(a,YT(o,e),s)}return a}s(PC,"basePickBy");var DC=PC;function BC(e,t){return DC(e,t,(function(t,r){return oC(e,r)}))}s(BC,"basePick");var FC=BC,$C=Wp?Wp.isConcatSpreadable:void 0;function zC(e){return Ey(e)||ky(e)||!!($C&&e&&e[$C])}s(zC,"isFlattenable");var UC=zC;function GC(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=UC),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?GC(s,t-1,r,n,i):Fx(i,s):n||(i[i.length]=s)}return i}s(GC,"baseFlatten");var jC=GC;function VC(e){return(null==e?0:e.length)?jC(e,1):[]}s(VC,"flatten");var WC=VC;function HC(e){return Uv(Dv(e,void 0,WC),e+"")}function qC(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}s(HC,"flatRest"),HC((function(e,t){return null==e?{}:FC(e,t)})),s(qC,"arrayReduce");var YC=qC;function XC(e,t,r,n,i){return i(e,(function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)})),r}s(XC,"baseReduce");var KC=XC;function ZC(e,t,r){var n=Ey(e)?YC:KC,i=arguments.length<3;return n(e,mC(t),r,i,Ob)}s(ZC,"reduce");var QC=ZC;function JC(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}s(JC,"baseFindIndex");var ew=JC;function tw(e){return e!=e}s(tw,"baseIsNaN");var rw=tw;function nw(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}s(nw,"strictIndexOf");var iw=nw;function aw(e,t,r){return t==t?iw(e,t,r):ew(e,rw,r)}s(aw,"baseIndexOf");var ow=aw;function sw(e,t){return!!(null==e?0:e.length)&&ow(e,t,0)>-1}s(sw,"arrayIncludes");var lw=sw;function uw(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}s(uw,"arrayIncludesWith");var cw=uw;function hw(){}s(hw,"noop");var dw=hw,fw=rx&&1/rT(new rx([,-0]))[1]==1/0?function(e){return new rx(e)}:dw,pw=fw;function gw(e,t,r){var n=-1,i=lw,a=e.length,o=!0,s=[],l=s;if(r)o=!1,i=cw;else if(a>=200){var u=t?null:pw(e);if(u)return rT(u);o=!1,i=Kb,l=new Hb}else l=t?[]:s;e:for(;++n<a;){var c=e[n],h=t?t(c):c;if(c=r||0!==c?c:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(c)}else i(l,h,r)||(l!==s&&l.push(h),s.push(c))}return s}s(gw,"baseUniq");var mw=gw;jv((function(e){return mw(jC(e,1,Ly,!0))}));var yw=/\s/;function vw(e){for(var t=e.length;t--&&yw.test(e.charAt(t)););return t}s(vw,"trimmedEndIndex");var xw=vw,bw=/^\s+/;function Tw(e){return e&&e.slice(0,xw(e)+1).replace(bw,"")}s(Tw,"baseTrim");var Cw=Tw,ww=/^[-+]0x[0-9a-f]+$/i,kw=/^0b[01]+$/i,Ew=/^0o[0-7]+$/i,_w=parseInt;function Aw(e){if("number"==typeof e)return e;if(RT(e))return NaN;if(ag(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ag(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cw(e);var r=kw.test(e);return r||Ew.test(e)?_w(e.slice(2),r?2:8):ww.test(e)?NaN:+e}s(Aw,"toNumber");var Sw=Aw,Rw=1/0;function Nw(e){return e?(e=Sw(e))===Rw||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}s(Nw,"toFinite");var Lw=Nw;function Iw(e){var t=Lw(e),r=t%1;return t==t?r?t-r:t:0}s(Iw,"toInteger");var Mw=Iw,Ow=Object.prototype.hasOwnProperty,Pw=qv((function(e,t){if(fy(t)||Ry(t))lv(t,bx(t),e);else for(var r in t)Ow.call(t,r)&&ov(e,r,t[r])})),Dw=Pw;function Bw(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}s(Bw,"baseSlice");var Fw=Bw,$w=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function zw(e){return $w.test(e)}s(zw,"hasUnicode");var Uw=zw;function Gw(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}s((function(e){return Cb(e,5)}),"cloneDeep"),s(Gw,"compact");var jw=Gw;function Vw(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}s(Vw,"arrayAggregator");var Ww=Vw;function Hw(e,t,r,n){return Ob(e,(function(e,i,a){t(n,e,r(e),a)})),n}s(Hw,"baseAggregator");var qw=Hw;function Yw(e,t){return function(r,n){var i=Ey(r)?Ww:qw,a=t?t():{};return i(r,e,mC(n),a)}}s(Yw,"createAggregator");var Xw=Yw;s((function(){return Vp.Date.now()}),"now");function Kw(e,t,r,n){var i=-1,a=lw,o=!0,s=e.length,l=[],u=t.length;if(!s)return l;r&&(t=zT(t,Xy(r))),n?(a=cw,o=!1):t.length>=200&&(a=Kb,o=!1,t=new Hb(t));e:for(;++i<s;){var c=e[i],h=null==r?c:r(c);if(c=n||0!==c?c:0,o&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else a(t,h,n)||l.push(c)}return l}s(Kw,"baseDifference");var Zw=Kw,Qw=jv((function(e,t){return Ly(e)?Zw(e,jC(t,1,Ly,!0)):[]})),Jw=Qw;function ek(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:Mw(t),Fw(e,t<0?0:t,n)):[]}s(ek,"drop");var tk=ek;function rk(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:Mw(t),Fw(e,0,(t=n-t)<0?0:t)):[]}s(rk,"dropRight");var nk=rk;function ik(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}s(ik,"arrayEvery");var ak=ik;function ok(e,t){var r=!0;return Ob(e,(function(e,n,i){return r=!!t(e,n,i)})),r}s(ok,"baseEvery");var sk=ok;function lk(e,t,r){var n=Ey(e)?ak:sk;return r&&Wv(e,t,r)&&(t=void 0),n(e,mC(t))}s(lk,"every");var uk=lk;function ck(e){return function(t,r,n){var i=Object(t);if(!Ry(t)){var a=mC(r);t=bx(t),r=s((function(e){return a(i[e],e,i)}),"predicate")}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:void 0}}s(ck,"createFind");var hk=ck,dk=Math.max;function fk(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Mw(r);return i<0&&(i=dk(n+i,0)),ew(e,mC(t),i)}s(fk,"findIndex");var pk=hk(fk);function gk(e){return e&&e.length?e[0]:void 0}s(gk,"head");var mk=gk;function yk(e,t){return jC(CC(e,t),1)}s(yk,"flatMap");var vk=yk;s((function(e,t){return null==e?e:Wm(e,Db(t),wv)}),"forIn"),s((function(e,t){return e&&Ib(e,Db(t))}),"forOwn");var xk=Object.prototype.hasOwnProperty,bk=Xw((function(e,t,r){xk.call(e,r)?e[r].push(t):Um(e,r,[t])})),Tk=bk,Ck=Object.prototype.hasOwnProperty;function wk(e,t){return null!=e&&Ck.call(e,t)}s(wk,"baseHas");var kk=wk;function Ek(e,t){return null!=e&&iC(e,t,kk)}s(Ek,"has");var _k=Ek;function Ak(e){return"string"==typeof e||!Ey(e)&&yy(e)&&"[object String]"==ng(e)}s(Ak,"isString");var Sk=Ak,Rk=Math.max;function Nk(e,t,r,n){e=Ry(e)?e:_C(e),r=r&&!n?Mw(r):0;var i=e.length;return r<0&&(r=Rk(i+r,0)),Sk(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&ow(e,t,r)>-1}s(Nk,"includes");var Lk=Nk,Ik=Math.max;function Mk(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Mw(r);return i<0&&(i=Ik(n+i,0)),ow(e,t,i)}s(Mk,"indexOf");var Ok=Mk;function Pk(e){return yy(e)&&"[object RegExp]"==ng(e)}s(Pk,"baseIsRegExp");var Dk=Pk,Bk=Jy&&Jy.isRegExp,Fk=Bk?Xy(Bk):Dk;function $k(e,t){return e<t}s($k,"baseLt");var zk=$k;function Uk(e){return e&&e.length?NC(e,Lv,zk):void 0}s(Uk,"min");var Gk=Uk;s((function(e,t){return e&&e.length?NC(e,mC(t),zk):void 0}),"minBy");function jk(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}s(jk,"negate");var Vk=jk;function Wk(e,t){if(null==e)return{};var r=zT(Yx(e),(function(e){return[e]}));return t=mC(t),DC(e,r,(function(e,r){return t(e,r[0])}))}s(Wk,"pickBy");var Hk=Wk;function qk(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}s(qk,"baseSortBy");var Yk=qk;function Xk(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,a=RT(e),o=void 0!==t,s=null===t,l=t==t,u=RT(t);if(!s&&!u&&!a&&e>t||a&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0}s(Xk,"compareAscending");var Kk=Xk;function Zk(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var l=Kk(i[n],a[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}s(Zk,"compareMultiple");var Qk=Zk;function Jk(e,t,r){t=t.length?zT(t,(function(e){return Ey(e)?function(t){return QT(t,1===e.length?e[0]:e)}:e})):[Lv];var n=-1;t=zT(t,Xy(mC));var i=bC(e,(function(e,r,i){var a=zT(t,(function(t){return t(e)}));return{criteria:a,index:++n,value:e}}));return Yk(i,(function(e,t){return Qk(e,t,r)}))}s(Jk,"baseOrderBy");var eE=Jk,tE=cC("length"),rE="\\ud800-\\udfff",nE="["+rE+"]",iE="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",aE="\\ud83c[\\udffb-\\udfff]",oE="[^"+rE+"]",sE="(?:\\ud83c[\\udde6-\\uddff]){2}",lE="[\\ud800-\\udbff][\\udc00-\\udfff]",uE="(?:"+iE+"|"+aE+")"+"?",cE="[\\ufe0e\\ufe0f]?",hE=cE+uE+("(?:\\u200d(?:"+[oE,sE,lE].join("|")+")"+cE+uE+")*"),dE="(?:"+[oE+iE+"?",iE,sE,lE,nE].join("|")+")",fE=RegExp(aE+"(?="+aE+")|"+dE+hE,"g");function pE(e){for(var t=fE.lastIndex=0;fE.test(e);)++t;return t}s(pE,"unicodeSize");var gE=pE;function mE(e){return Uw(e)?gE(e):tE(e)}s(mE,"stringSize");var yE=mE,vE=Math.ceil,xE=Math.max;function bE(e,t,r,n){for(var i=-1,a=xE(vE((t-e)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=e,e+=r;return o}s(bE,"baseRange");var TE=bE;function CE(e,t){return(Ey(e)?Sx:zb)(e,Vk(mC(t)))}s((function(e){return function(t,r,n){return n&&"number"!=typeof n&&Wv(t,r,n)&&(r=n=void 0),t=Lw(t),void 0===r?(r=t,t=0):r=Lw(r),n=void 0===n?t<r?1:-1:Lw(n),TE(t,r,n,e)}}),"createRange"),s(CE,"reject");var wE=CE;function kE(e,t){var r;return Ob(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}s((function(e){if(null==e)return 0;if(Ry(e))return Sk(e)?yE(e):e.length;var t=gx(e);return"[object Map]"==t||"[object Set]"==t?e.size:Jv(e).length}),"size"),s(kE,"baseSome");var EE=kE;function _E(e,t,r){var n=Ey(e)?Yb:EE;return r&&Wv(e,t,r)&&(t=void 0),n(e,mC(t))}s(_E,"some");var AE=_E;function SE(e){return e&&e.length?mw(e):[]}jv((function(e,t){if(null==e)return[];var r=t.length;return r>1&&Wv(e,t[0],t[1])?t=[]:r>2&&Wv(t[0],t[1],t[2])&&(t=[t[0]]),eE(e,jC(t,1),[])})),s(SE,"uniq");var RE=SE;function NE(e,t){return e&&e.length?mw(e,mC(t)):[]}s(NE,"uniqBy");var LE=NE,IE=0;function ME(e,t,r){for(var n=-1,i=e.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:void 0;r(o,e[n],s)}return o}s((function(e){var t=++IE;return HT(e)+t}),"uniqueId"),s(ME,"baseZipObject");var OE=ME;s((function(e,t){return OE(e||[],t||[],ov)}),"zipObject");
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
var PE=l((e=>{var t;function r(){if(void 0===t)throw new Error("No runtime abstraction layer installed");return t}Object.defineProperty(e,"__esModule",{value:!0}),s(r,"RAL"),function(e){function r(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");t=e}s(r,"install"),e.install=r}(r||(r={})),e.default=r})),DE=l((e=>{function t(e){return!0===e||!1===e}function r(e){return"string"==typeof e||e instanceof String}function n(e){return"number"==typeof e||e instanceof Number}function i(e){return e instanceof Error}function a(e){return"function"==typeof e}function o(e){return Array.isArray(e)}function l(e){return o(e)&&e.every((e=>r(e)))}Object.defineProperty(e,"__esModule",{value:!0}),e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0,s(t,"boolean"),e.boolean=t,s(r,"string"),e.string=r,s(n,"number"),e.number=n,s(i,"error"),e.error=i,s(a,"func"),e.func=a,s(o,"array"),e.array=o,s(l,"stringArray"),e.stringArray=l})),BE=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;var t,r=PE();!function(e){let t={dispose(){}};e.None=function(){return t}}(t||(e.Event=t={}));var n=class{static{s(this,"CallbackList")}add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:s((()=>this.remove(e,t)),"dispose")})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,o=n.length;a<o;a++)try{t.push(n[a].apply(i[a],e))}catch(e){(0,r.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}},i=class e{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(t,r,i)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let a={dispose:s((()=>{this._callbacks&&(this._callbacks.remove(t,r),a.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}),"dispose")};return Array.isArray(i)&&i.push(a),a}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};e.Emitter=i,i._noop=function(){}})),FE=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;var t,r=PE(),n=DE(),i=BE();!function(e){function t(t){let r=t;return r&&(r===e.None||r===e.Cancelled||n.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),s(t,"is"),e.is=t}(t||(e.CancellationToken=t={}));var a=Object.freeze((function(e,t){let n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}})),o=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},l=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=t.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=t.None}};e.CancellationTokenSource=l})),$E={};u($E,{AbstractAstReflection:()=>WE,AbstractCstNode:()=>GD,AbstractLangiumParser:()=>KD,AbstractParserErrorMessageProvider:()=>QD,AbstractThreadedAsyncParser:()=>y$,AstUtils:()=>vS,BiMap:()=>rF,Cancellation:()=>_B,CompositeCstNodeImpl:()=>VD,ContextCache:()=>uF,CstNodeBuilder:()=>UD,CstUtils:()=>zE,DEFAULT_TOKENIZE_OPTIONS:()=>PF,DONE_RESULT:()=>JE,DatatypeSymbol:()=>qD,DefaultAstNodeDescriptionProvider:()=>EF,DefaultAstNodeLocator:()=>AF,DefaultAsyncParser:()=>m$,DefaultCommentProvider:()=>g$,DefaultConfigurationProvider:()=>NF,DefaultDocumentBuilder:()=>LF,DefaultDocumentValidator:()=>TF,DefaultHydrator:()=>b$,DefaultIndexManager:()=>IF,DefaultJsonSerializer:()=>mF,DefaultLangiumDocumentFactory:()=>YB,DefaultLangiumDocuments:()=>XB,DefaultLexer:()=>DF,DefaultLexerErrorMessageProvider:()=>OF,DefaultLinker:()=>ZB,DefaultNameProvider:()=>JB,DefaultReferenceDescriptionProvider:()=>_F,DefaultReferences:()=>eF,DefaultScopeComputation:()=>nF,DefaultScopeProvider:()=>dF,DefaultServiceRegistry:()=>yF,DefaultTokenBuilder:()=>kB,DefaultValueConverter:()=>EB,DefaultWorkspaceLock:()=>x$,DefaultWorkspaceManager:()=>MF,Deferred:()=>BB,Disposable:()=>RF,DisposableCache:()=>sF,DocumentCache:()=>cF,DocumentState:()=>WB,DocumentValidator:()=>xF,EMPTY_SCOPE:()=>oF,EMPTY_STREAM:()=>QE,EmptyFileSystem:()=>D$,EmptyFileSystemProvider:()=>P$,ErrorWithLocation:()=>__,GrammarAST:()=>S_,GrammarUtils:()=>E_,IndentationAwareLexer:()=>M$,IndentationAwareTokenBuilder:()=>I$,JSDocDocumentationProvider:()=>p$,LangiumCompletionParser:()=>eB,LangiumParser:()=>ZD,LangiumParserErrorMessageProvider:()=>JD,LeafCstNodeImpl:()=>jD,LexingMode:()=>N$,MapScope:()=>aF,Module:()=>f$,MultiMap:()=>tF,OperationCancelled:()=>IB,ParserWorker:()=>v$,Reduction:()=>t_,RegExpUtils:()=>MS,RootCstNodeImpl:()=>HD,SimpleCache:()=>lF,StreamImpl:()=>XE,StreamScope:()=>iF,TextDocument:()=>PB,TreeStreamImpl:()=>i_,URI:()=>HB,UriUtils:()=>VB,ValidationCategory:()=>gF,ValidationRegistry:()=>bF,ValueConverter:()=>wB,WorkspaceCache:()=>hF,assertUnreachable:()=>A_,createCompletionParser:()=>bB,createDefaultCoreModule:()=>T$,createDefaultSharedCoreModule:()=>C$,createGrammarConfig:()=>VR,createLangiumParser:()=>TB,createParser:()=>nB,delayNextTick:()=>AB,diagnosticData:()=>vF,eagerLoad:()=>E$,getDiagnosticRange:()=>CF,indentationBuilderDefaultOptions:()=>L$,inject:()=>w$,interruptAndCheck:()=>OB,isAstNode:()=>UE,isAstNodeDescription:()=>jE,isAstNodeWithComment:()=>fF,isCompositeCstNode:()=>HE,isIMultiModeLexerDefinition:()=>FF,isJSDoc:()=>UF,isLeafCstNode:()=>qE,isLinkingError:()=>VE,isNamed:()=>QB,isOperationCancelled:()=>MB,isReference:()=>GE,isRootCstNode:()=>YE,isTokenTypeArray:()=>BF,isTokenTypeDictionary:()=>$F,loadGrammarFromJson:()=>z$,parseJSDoc:()=>zF,prepareLangiumParser:()=>CB,setInterruptionPeriod:()=>LB,startCancelableOperation:()=>NB,stream:()=>e_,toDiagnosticData:()=>kF,toDiagnosticSeverity:()=>wF});var zE={};function UE(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$type}function GE(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$refText}function jE(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name&&"string"==typeof e.type&&"string"==typeof e.path}function VE(e){return"object"==typeof e&&null!==e&&UE(e.container)&&GE(e.reference)&&"string"==typeof e.message}u(zE,{DefaultNameRegexp:()=>d_,RangeComparison:()=>r_,compareRange:()=>c_,findCommentNode:()=>p_,findDeclarationNodeAtOffset:()=>f_,findLeafNodeAtOffset:()=>m_,findLeafNodeBeforeOffset:()=>y_,flattenCst:()=>o_,getInteriorNodes:()=>C_,getNextNode:()=>b_,getPreviousNode:()=>x_,getStartlineNode:()=>T_,inRange:()=>h_,isChildNode:()=>s_,isCommentNode:()=>g_,streamCst:()=>a_,toDocumentSegment:()=>u_,tokenToRange:()=>l_}),s(UE,"isAstNode"),s(GE,"isReference"),s(jE,"isAstNodeDescription"),s(VE,"isLinkingError");var WE=class{static{s(this,"AbstractAstReflection")}constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,t){return UE(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});let n=r[t];if(void 0!==n)return n;{let n=this.computeIsSubtype(e,t);return r[t]=n,n}}getAllSubTypes(e){let t=this.allSubtypes[e];if(t)return t;{let t=this.getAllTypes(),r=[];for(let n of t)this.isSubtype(n,e)&&r.push(n);return this.allSubtypes[e]=r,r}}};function HE(e){return"object"==typeof e&&null!==e&&Array.isArray(e.content)}function qE(e){return"object"==typeof e&&null!==e&&"object"==typeof e.tokenType}function YE(e){return HE(e)&&"string"==typeof e.fullText}s(HE,"isCompositeCstNode"),s(qE,"isLeafCstNode"),s(YE,"isRootCstNode");var XE=class e{static{s(this,"StreamImpl")}constructor(e,t){this.startFn=e,this.nextFn=t}iterator(){let e={state:this.startFn(),next:s((()=>this.nextFn(e.state)),"next"),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){let e=this.iterator(),t=0,r=e.next();for(;!r.done;)t++,r=e.next();return t}toArray(){let e,t=[],r=this.iterator();do{e=r.next(),void 0!==e.value&&t.push(e.value)}while(!e.done);return t}toSet(){return new Set(this)}toMap(e,t){let r=this.map((r=>[e?e(r):r,t?t(r):r]));return new Map(r)}toString(){return this.join()}concat(t){return new e((()=>({first:this.startFn(),firstDone:!1,iterator:t[Symbol.iterator]()})),(e=>{let t;if(!e.firstDone){do{if(t=this.nextFn(e.first),!t.done)return t}while(!t.done);e.firstDone=!0}do{if(t=e.iterator.next(),!t.done)return t}while(!t.done);return JE}))}join(e=","){let t,r=this.iterator(),n="",i=!1;do{t=r.next(),t.done||(i&&(n+=e),n+=KE(t.value)),i=!0}while(!t.done);return n}indexOf(e,t=0){let r=this.iterator(),n=0,i=r.next();for(;!i.done;){if(n>=t&&i.value===e)return n;i=r.next(),n++}return-1}every(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(!e(r.value))return!1;r=t.next()}return!0}some(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(e(r.value))return!0;r=t.next()}return!1}forEach(e){let t=this.iterator(),r=0,n=t.next();for(;!n.done;)e(n.value,r),n=t.next(),r++}map(t){return new e(this.startFn,(e=>{let{done:r,value:n}=this.nextFn(e);return r?JE:{done:!1,value:t(n)}}))}filter(t){return new e(this.startFn,(e=>{let r;do{if(r=this.nextFn(e),!r.done&&t(r.value))return r}while(!r.done);return JE}))}nonNullable(){return this.filter((e=>null!=e))}reduce(e,t){let r=this.iterator(),n=t,i=r.next();for(;!i.done;)n=void 0===n?i.value:e(n,i.value),i=r.next();return n}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(e,t,r){let n=e.next();if(n.done)return r;let i=this.recursiveReduce(e,t,r);return void 0===i?n.value:t(i,n.value)}find(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(e(r.value))return r.value;r=t.next()}}findIndex(e){let t=this.iterator(),r=0,n=t.next();for(;!n.done;){if(e(n.value))return r;n=t.next(),r++}return-1}includes(e){let t=this.iterator(),r=t.next();for(;!r.done;){if(r.value===e)return!0;r=t.next()}return!1}flatMap(t){return new e((()=>({this:this.startFn()})),(e=>{do{if(e.iterator){let t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}let{done:r,value:n}=this.nextFn(e.this);if(!r){let r=t(n);if(!ZE(r))return{done:!1,value:r};e.iterator=r[Symbol.iterator]()}}while(e.iterator);return JE}))}flat(t){if(void 0===t&&(t=1),t<=0)return this;let r=t>1?this.flat(t-1):this;return new e((()=>({this:r.startFn()})),(e=>{do{if(e.iterator){let t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}let{done:t,value:n}=r.nextFn(e.this);if(!t){if(!ZE(n))return{done:!1,value:n};e.iterator=n[Symbol.iterator]()}}while(e.iterator);return JE}))}head(){let e=this.iterator().next();if(!e.done)return e.value}tail(t=1){return new e((()=>{let e=this.startFn();for(let r=0;r<t;r++)if(this.nextFn(e).done)return e;return e}),this.nextFn)}limit(t){return new e((()=>({size:0,state:this.startFn()})),(e=>(e.size++,e.size>t?JE:this.nextFn(e.state))))}distinct(t){return new e((()=>({set:new Set,internalState:this.startFn()})),(e=>{let r;do{if(r=this.nextFn(e.internalState),!r.done){let n=t?t(r.value):r.value;if(!e.set.has(n))return e.set.add(n),r}}while(!r.done);return JE}))}exclude(e,t){let r=new Set;for(let n of e){let e=t?t(n):n;r.add(e)}return this.filter((e=>{let n=t?t(e):e;return!r.has(n)}))}};function KE(e){return"string"==typeof e?e:typeof e>"u"?"undefined":"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function ZE(e){return!!e&&"function"==typeof e[Symbol.iterator]}s(KE,"toString"),s(ZE,"isIterable");var QE=new XE((()=>{}),(()=>JE)),JE=Object.freeze({done:!0,value:void 0});function e_(...e){if(1===e.length){let t=e[0];if(t instanceof XE)return t;if(ZE(t))return new XE((()=>t[Symbol.iterator]()),(e=>e.next()));if("number"==typeof t.length)return new XE((()=>({index:0})),(e=>e.index<t.length?{done:!1,value:t[e.index++]}:JE))}return e.length>1?new XE((()=>({collIndex:0,arrIndex:0})),(t=>{do{if(t.iterator){let e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}if(t.array){if(t.arrIndex<t.array.length)return{done:!1,value:t.array[t.arrIndex++]};t.array=void 0,t.arrIndex=0}if(t.collIndex<e.length){let r=e[t.collIndex++];ZE(r)?t.iterator=r[Symbol.iterator]():r&&"number"==typeof r.length&&(t.array=r)}}while(t.iterator||t.array||t.collIndex<e.length);return JE})):QE}s(e_,"stream");var t_,r_,n_,i_=class extends XE{static{s(this,"TreeStreamImpl")}constructor(e,t,r){super((()=>({iterators:r?.includeRoot?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1})),(e=>{for(e.pruned&&(e.iterators.pop(),e.pruned=!1);e.iterators.length>0;){let r=e.iterators[e.iterators.length-1].next();if(!r.done)return e.iterators.push(t(r.value)[Symbol.iterator]()),r;e.iterators.pop()}return JE}))}iterator(){let e={state:this.startFn(),next:s((()=>this.nextFn(e.state)),"next"),prune:s((()=>{e.state.pruned=!0}),"prune"),[Symbol.iterator]:()=>e};return e}};function a_(e){return new i_(e,(e=>HE(e)?e.content:[]),{includeRoot:!0})}function o_(e){return a_(e).filter(qE)}function s_(e,t){for(;e.container;)if((e=e.container)===t)return!0;return!1}function l_(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function u_(e){if(!e)return;let{offset:t,end:r,range:n}=e;return{range:n,offset:t,end:r,length:r-t}}function c_(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<=t.start.character)return r_.Before;if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>=t.end.character)return r_.After;let r=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character,n=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;return r&&n?r_.Inside:r?r_.OverlapBack:n?r_.OverlapFront:r_.Outside}function h_(e,t){return c_(e,t)>r_.After}!function(e){function t(e){return e.reduce(((e,t)=>e+t),0)}function r(e){return e.reduce(((e,t)=>e*t),0)}function n(e){return e.reduce(((e,t)=>Math.min(e,t)))}function i(e){return e.reduce(((e,t)=>Math.max(e,t)))}s(t,"sum"),e.sum=t,s(r,"product"),e.product=r,s(n,"min"),e.min=n,s(i,"max"),e.max=i}(t_||(t_={})),s(a_,"streamCst"),s(o_,"flattenCst"),s(s_,"isChildNode"),s(l_,"tokenToRange"),s(u_,"toDocumentSegment"),(n_=r_||(r_={}))[n_.Before=0]="Before",n_[n_.After=1]="After",n_[n_.OverlapFront=2]="OverlapFront",n_[n_.OverlapBack=3]="OverlapBack",n_[n_.Inside=4]="Inside",n_[n_.Outside=5]="Outside",s(c_,"compareRange"),s(h_,"inRange");var d_=/^[\w\p{L}]$/u;function f_(e,t,r=d_){if(e){if(t>0){let n=t-e.offset,i=e.text.charAt(n);r.test(i)||t--}return m_(e,t)}}function p_(e,t){if(e){let r=x_(e,!0);if(r&&g_(r,t))return r;if(YE(e)){let r=e.content.findIndex((e=>!e.hidden));for(let n=r-1;n>=0;n--){let r=e.content[n];if(g_(r,t))return r}}}}function g_(e,t){return qE(e)&&t.includes(e.tokenType.name)}function m_(e,t){if(qE(e))return e;if(HE(e)){let r=v_(e,t,!1);if(r)return m_(r,t)}}function y_(e,t){if(qE(e))return e;if(HE(e)){let r=v_(e,t,!0);if(r)return y_(r,t)}}function v_(e,t,r){let n,i=0,a=e.content.length-1;for(;i<=a;){let o=Math.floor((i+a)/2),s=e.content[o];if(s.offset<=t&&s.end>t)return s;s.end<=t?(n=r?s:void 0,i=o+1):a=o-1}return n}function x_(e,t=!0){for(;e.container;){let r=e.container,n=r.content.indexOf(e);for(;n>0;){n--;let e=r.content[n];if(t||!e.hidden)return e}e=r}}function b_(e,t=!0){for(;e.container;){let r=e.container,n=r.content.indexOf(e),i=r.content.length-1;for(;n<i;){n++;let e=r.content[n];if(t||!e.hidden)return e}e=r}}function T_(e){if(0===e.range.start.character)return e;let t,r=e.range.start.line,n=e;for(;e.container;){let i=e.container,a=t??i.content.indexOf(e);if(0===a?(e=i,t=void 0):(t=a-1,e=i.content[t]),e.range.start.line!==r)break;n=e}return n}function C_(e,t){let r=w_(e,t);return r?r.parent.content.slice(r.a+1,r.b):[]}function w_(e,t){let r,n=k_(e),i=k_(t);for(let e=0;e<n.length&&e<i.length;e++){let t=n[e],a=i[e];if(t.parent!==a.parent)break;r={parent:t.parent,a:t.index,b:a.index}}return r}function k_(e){let t=[];for(;e.container;){let r=e.container,n=r.content.indexOf(e);t.push({parent:r,index:n}),e=r}return t.reverse()}s(f_,"findDeclarationNodeAtOffset"),s(p_,"findCommentNode"),s(g_,"isCommentNode"),s(m_,"findLeafNodeAtOffset"),s(y_,"findLeafNodeBeforeOffset"),s(v_,"binarySearch"),s(x_,"getPreviousNode"),s(b_,"getNextNode"),s(T_,"getStartlineNode"),s(C_,"getInteriorNodes"),s(w_,"getCommonParent"),s(k_,"getParentChain");var E_={};u(E_,{findAssignment:()=>vR,findNameAssignment:()=>xR,findNodeForKeyword:()=>mR,findNodeForProperty:()=>fR,findNodesForKeyword:()=>gR,findNodesForKeywordInternal:()=>yR,findNodesForProperty:()=>dR,getActionAtElement:()=>TR,getActionType:()=>LR,getAllReachableRules:()=>lR,getCrossReferenceTerminal:()=>cR,getEntryRule:()=>oR,getExplicitRuleType:()=>RR,getHiddenRules:()=>sR,getRuleType:()=>MR,getRuleTypeName:()=>IR,getTypeName:()=>NR,isArrayCardinality:()=>wR,isArrayOperator:()=>kR,isCommentTerminal:()=>hR,isDataType:()=>AR,isDataTypeRule:()=>ER,isOptionalCardinality:()=>CR,terminalRegex:()=>OR});var __=class extends Error{static{s(this,"ErrorWithLocation")}constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}};function A_(e){throw new Error("Error! The input value was not handled.")}s(A_,"assertUnreachable");var S_={};u(S_,{AbstractElement:()=>G_,AbstractRule:()=>N_,AbstractType:()=>I_,Action:()=>DA,Alternatives:()=>FA,ArrayLiteral:()=>V_,ArrayType:()=>H_,Assignment:()=>zA,BooleanLiteral:()=>Y_,CharacterRange:()=>GA,Condition:()=>O_,Conjunction:()=>K_,CrossReference:()=>VA,Disjunction:()=>Q_,EndOfFile:()=>HA,Grammar:()=>eA,GrammarImport:()=>rA,Group:()=>YA,InferredType:()=>iA,Interface:()=>oA,Keyword:()=>KA,LangiumGrammarAstReflection:()=>mS,LangiumGrammarTerminals:()=>R_,NamedArgument:()=>lA,NegatedToken:()=>QA,Negation:()=>cA,NumberLiteral:()=>dA,Parameter:()=>pA,ParameterReference:()=>mA,ParserRule:()=>vA,ReferenceType:()=>bA,RegexToken:()=>eS,ReturnType:()=>CA,RuleCall:()=>rS,SimpleType:()=>kA,StringLiteral:()=>_A,TerminalAlternatives:()=>iS,TerminalGroup:()=>oS,TerminalRule:()=>SA,TerminalRuleCall:()=>lS,Type:()=>NA,TypeAttribute:()=>IA,TypeDefinition:()=>F_,UnionType:()=>OA,UnorderedGroup:()=>cS,UntilToken:()=>dS,ValueLiteral:()=>z_,Wildcard:()=>pS,isAbstractElement:()=>j_,isAbstractRule:()=>L_,isAbstractType:()=>M_,isAction:()=>BA,isAlternatives:()=>$A,isArrayLiteral:()=>W_,isArrayType:()=>q_,isAssignment:()=>UA,isBooleanLiteral:()=>X_,isCharacterRange:()=>jA,isCondition:()=>P_,isConjunction:()=>Z_,isCrossReference:()=>WA,isDisjunction:()=>J_,isEndOfFile:()=>qA,isFeatureName:()=>D_,isGrammar:()=>tA,isGrammarImport:()=>nA,isGroup:()=>XA,isInferredType:()=>aA,isInterface:()=>sA,isKeyword:()=>ZA,isNamedArgument:()=>uA,isNegatedToken:()=>JA,isNegation:()=>hA,isNumberLiteral:()=>fA,isParameter:()=>gA,isParameterReference:()=>yA,isParserRule:()=>xA,isPrimitiveType:()=>B_,isReferenceType:()=>TA,isRegexToken:()=>tS,isReturnType:()=>wA,isRuleCall:()=>nS,isSimpleType:()=>EA,isStringLiteral:()=>AA,isTerminalAlternatives:()=>aS,isTerminalGroup:()=>sS,isTerminalRule:()=>RA,isTerminalRuleCall:()=>uS,isType:()=>LA,isTypeAttribute:()=>MA,isTypeDefinition:()=>$_,isUnionType:()=>PA,isUnorderedGroup:()=>hS,isUntilToken:()=>fS,isValueLiteral:()=>U_,isWildcard:()=>gS,reflection:()=>yS});var R_={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},N_="AbstractRule";function L_(e){return yS.isInstance(e,N_)}s(L_,"isAbstractRule");var I_="AbstractType";function M_(e){return yS.isInstance(e,I_)}s(M_,"isAbstractType");var O_="Condition";function P_(e){return yS.isInstance(e,O_)}function D_(e){return B_(e)||"current"===e||"entry"===e||"extends"===e||"false"===e||"fragment"===e||"grammar"===e||"hidden"===e||"import"===e||"interface"===e||"returns"===e||"terminal"===e||"true"===e||"type"===e||"infer"===e||"infers"===e||"with"===e||"string"==typeof e&&/\^?[_a-zA-Z][\w_]*/.test(e)}function B_(e){return"string"===e||"number"===e||"boolean"===e||"Date"===e||"bigint"===e}s(P_,"isCondition"),s(D_,"isFeatureName"),s(B_,"isPrimitiveType");var F_="TypeDefinition";function $_(e){return yS.isInstance(e,F_)}s($_,"isTypeDefinition");var z_="ValueLiteral";function U_(e){return yS.isInstance(e,z_)}s(U_,"isValueLiteral");var G_="AbstractElement";function j_(e){return yS.isInstance(e,G_)}s(j_,"isAbstractElement");var V_="ArrayLiteral";function W_(e){return yS.isInstance(e,V_)}s(W_,"isArrayLiteral");var H_="ArrayType";function q_(e){return yS.isInstance(e,H_)}s(q_,"isArrayType");var Y_="BooleanLiteral";function X_(e){return yS.isInstance(e,Y_)}s(X_,"isBooleanLiteral");var K_="Conjunction";function Z_(e){return yS.isInstance(e,K_)}s(Z_,"isConjunction");var Q_="Disjunction";function J_(e){return yS.isInstance(e,Q_)}s(J_,"isDisjunction");var eA="Grammar";function tA(e){return yS.isInstance(e,eA)}s(tA,"isGrammar");var rA="GrammarImport";function nA(e){return yS.isInstance(e,rA)}s(nA,"isGrammarImport");var iA="InferredType";function aA(e){return yS.isInstance(e,iA)}s(aA,"isInferredType");var oA="Interface";function sA(e){return yS.isInstance(e,oA)}s(sA,"isInterface");var lA="NamedArgument";function uA(e){return yS.isInstance(e,lA)}s(uA,"isNamedArgument");var cA="Negation";function hA(e){return yS.isInstance(e,cA)}s(hA,"isNegation");var dA="NumberLiteral";function fA(e){return yS.isInstance(e,dA)}s(fA,"isNumberLiteral");var pA="Parameter";function gA(e){return yS.isInstance(e,pA)}s(gA,"isParameter");var mA="ParameterReference";function yA(e){return yS.isInstance(e,mA)}s(yA,"isParameterReference");var vA="ParserRule";function xA(e){return yS.isInstance(e,vA)}s(xA,"isParserRule");var bA="ReferenceType";function TA(e){return yS.isInstance(e,bA)}s(TA,"isReferenceType");var CA="ReturnType";function wA(e){return yS.isInstance(e,CA)}s(wA,"isReturnType");var kA="SimpleType";function EA(e){return yS.isInstance(e,kA)}s(EA,"isSimpleType");var _A="StringLiteral";function AA(e){return yS.isInstance(e,_A)}s(AA,"isStringLiteral");var SA="TerminalRule";function RA(e){return yS.isInstance(e,SA)}s(RA,"isTerminalRule");var NA="Type";function LA(e){return yS.isInstance(e,NA)}s(LA,"isType");var IA="TypeAttribute";function MA(e){return yS.isInstance(e,IA)}s(MA,"isTypeAttribute");var OA="UnionType";function PA(e){return yS.isInstance(e,OA)}s(PA,"isUnionType");var DA="Action";function BA(e){return yS.isInstance(e,DA)}s(BA,"isAction");var FA="Alternatives";function $A(e){return yS.isInstance(e,FA)}s($A,"isAlternatives");var zA="Assignment";function UA(e){return yS.isInstance(e,zA)}s(UA,"isAssignment");var GA="CharacterRange";function jA(e){return yS.isInstance(e,GA)}s(jA,"isCharacterRange");var VA="CrossReference";function WA(e){return yS.isInstance(e,VA)}s(WA,"isCrossReference");var HA="EndOfFile";function qA(e){return yS.isInstance(e,HA)}s(qA,"isEndOfFile");var YA="Group";function XA(e){return yS.isInstance(e,YA)}s(XA,"isGroup");var KA="Keyword";function ZA(e){return yS.isInstance(e,KA)}s(ZA,"isKeyword");var QA="NegatedToken";function JA(e){return yS.isInstance(e,QA)}s(JA,"isNegatedToken");var eS="RegexToken";function tS(e){return yS.isInstance(e,eS)}s(tS,"isRegexToken");var rS="RuleCall";function nS(e){return yS.isInstance(e,rS)}s(nS,"isRuleCall");var iS="TerminalAlternatives";function aS(e){return yS.isInstance(e,iS)}s(aS,"isTerminalAlternatives");var oS="TerminalGroup";function sS(e){return yS.isInstance(e,oS)}s(sS,"isTerminalGroup");var lS="TerminalRuleCall";function uS(e){return yS.isInstance(e,lS)}s(uS,"isTerminalRuleCall");var cS="UnorderedGroup";function hS(e){return yS.isInstance(e,cS)}s(hS,"isUnorderedGroup");var dS="UntilToken";function fS(e){return yS.isInstance(e,dS)}s(fS,"isUntilToken");var pS="Wildcard";function gS(e){return yS.isInstance(e,pS)}s(gS,"isWildcard");var mS=class extends WE{static{s(this,"LangiumGrammarAstReflection")}getAllTypes(){return[G_,N_,I_,DA,FA,V_,H_,zA,Y_,GA,O_,K_,VA,Q_,HA,eA,rA,YA,iA,oA,KA,lA,QA,cA,dA,pA,mA,vA,bA,eS,CA,rS,kA,_A,iS,oS,SA,lS,NA,IA,F_,OA,cS,dS,z_,pS]}computeIsSubtype(e,t){switch(e){case DA:case FA:case zA:case GA:case VA:case HA:case YA:case KA:case QA:case eS:case rS:case iS:case oS:case lS:case cS:case dS:case pS:return this.isSubtype(G_,t);case V_:case dA:case _A:return this.isSubtype(z_,t);case H_:case bA:case kA:case OA:return this.isSubtype(F_,t);case Y_:return this.isSubtype(O_,t)||this.isSubtype(z_,t);case K_:case Q_:case cA:case mA:return this.isSubtype(O_,t);case iA:case oA:case NA:return this.isSubtype(I_,t);case vA:return this.isSubtype(N_,t)||this.isSubtype(I_,t);case SA:return this.isSubtype(N_,t);default:return!1}}getReferenceType(e){let t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return I_;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return N_;case"Grammar:usedGrammars":return eA;case"NamedArgument:parameter":case"ParameterReference:parameter":return pA;case"TerminalRuleCall:rule":return SA;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case G_:return{name:G_,properties:[{name:"cardinality"},{name:"lookahead"}]};case V_:return{name:V_,properties:[{name:"elements",defaultValue:[]}]};case H_:return{name:H_,properties:[{name:"elementType"}]};case Y_:return{name:Y_,properties:[{name:"true",defaultValue:!1}]};case K_:return{name:K_,properties:[{name:"left"},{name:"right"}]};case Q_:return{name:Q_,properties:[{name:"left"},{name:"right"}]};case eA:return{name:eA,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case rA:return{name:rA,properties:[{name:"path"}]};case iA:return{name:iA,properties:[{name:"name"}]};case oA:return{name:oA,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case lA:return{name:lA,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case cA:return{name:cA,properties:[{name:"value"}]};case dA:return{name:dA,properties:[{name:"value"}]};case pA:return{name:pA,properties:[{name:"name"}]};case mA:return{name:mA,properties:[{name:"parameter"}]};case vA:return{name:vA,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case bA:return{name:bA,properties:[{name:"referenceType"}]};case CA:return{name:CA,properties:[{name:"name"}]};case kA:return{name:kA,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case _A:return{name:_A,properties:[{name:"value"}]};case SA:return{name:SA,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case NA:return{name:NA,properties:[{name:"name"},{name:"type"}]};case IA:return{name:IA,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case OA:return{name:OA,properties:[{name:"types",defaultValue:[]}]};case DA:return{name:DA,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case FA:return{name:FA,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case zA:return{name:zA,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case GA:return{name:GA,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case VA:return{name:VA,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case HA:return{name:HA,properties:[{name:"cardinality"},{name:"lookahead"}]};case YA:return{name:YA,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case KA:return{name:KA,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case QA:return{name:QA,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case eS:return{name:eS,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case rS:return{name:rS,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case iS:return{name:iS,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case oS:return{name:oS,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case lS:return{name:lS,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case cS:return{name:cS,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case dS:return{name:dS,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case pS:return{name:pS,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}},yS=new mS,vS={};function xS(e){for(let[t,r]of Object.entries(e))t.startsWith("$")||(Array.isArray(r)?r.forEach(((r,n)=>{UE(r)&&(r.$container=e,r.$containerProperty=t,r.$containerIndex=n)})):UE(r)&&(r.$container=e,r.$containerProperty=t))}function bS(e,t){let r=e;for(;r;){if(t(r))return r;r=r.$container}}function TS(e,t){let r=e;for(;r;){if(t(r))return!0;r=r.$container}return!1}function CS(e){let t=wS(e).$document;if(!t)throw new Error("AST node has no document.");return t}function wS(e){for(;e.$container;)e=e.$container;return e}function kS(e,t){if(!e)throw new Error("Node must be an AstNode.");let r=t?.range;return new XE((()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0})),(t=>{for(;t.keyIndex<t.keys.length;){let n=t.keys[t.keyIndex];if(!n.startsWith("$")){let i=e[n];if(UE(i)){if(t.keyIndex++,AS(i,r))return{done:!1,value:i}}else if(Array.isArray(i)){for(;t.arrayIndex<i.length;){let e=i[t.arrayIndex++];if(UE(e)&&AS(e,r))return{done:!1,value:e}}t.arrayIndex=0}}t.keyIndex++}return JE}))}function ES(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new i_(e,(e=>kS(e,t)))}function _S(e,t){if(!e)throw new Error("Root node must be an AstNode.");return t?.range&&!AS(e,t.range)?new i_(e,(()=>[])):new i_(e,(e=>kS(e,t)),{includeRoot:!0})}function AS(e,t){var r;if(!t)return!0;let n=null===(r=e.$cstNode)||void 0===r?void 0:r.range;return!!n&&h_(n,t)}function SS(e){return new XE((()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0})),(t=>{for(;t.keyIndex<t.keys.length;){let r=t.keys[t.keyIndex];if(!r.startsWith("$")){let n=e[r];if(GE(n))return t.keyIndex++,{done:!1,value:{reference:n,container:e,property:r}};if(Array.isArray(n)){for(;t.arrayIndex<n.length;){let i=t.arrayIndex++,a=n[i];if(GE(a))return{done:!1,value:{reference:a,container:e,property:r,index:i}}}t.arrayIndex=0}}t.keyIndex++}return JE}))}function RS(e,t=CS(e).parseResult.value){let r=[];return _S(t).forEach((t=>{SS(t).forEach((t=>{t.reference.ref===e&&r.push(t.reference)}))})),e_(r)}function NS(e,t){let r=e.getTypeMetaData(t.$type),n=t;for(let e of r.properties)void 0!==e.defaultValue&&void 0===n[e.name]&&(n[e.name]=LS(e.defaultValue))}function LS(e){return Array.isArray(e)?[...e.map(LS)]:e}function IS(e,t){let r={$type:e.$type};for(let[n,i]of Object.entries(e))if(!n.startsWith("$"))if(UE(i))r[n]=IS(i,t);else if(GE(i))r[n]=t(r,n,i.$refNode,i.$refText);else if(Array.isArray(i)){let e=[];for(let a of i)UE(a)?e.push(IS(a,t)):GE(a)?e.push(t(r,n,a.$refNode,a.$refText)):e.push(a);r[n]=e}else r[n]=i;return xS(r),r}u(vS,{assignMandatoryProperties:()=>NS,copyAstNode:()=>IS,findLocalReferences:()=>RS,findRootNode:()=>wS,getContainerOfType:()=>bS,getDocument:()=>CS,hasContainerOfType:()=>TS,linkContentToContainer:()=>xS,streamAllContents:()=>ES,streamAst:()=>_S,streamContents:()=>kS,streamReferences:()=>SS}),s(xS,"linkContentToContainer"),s(bS,"getContainerOfType"),s(TS,"hasContainerOfType"),s(CS,"getDocument"),s(wS,"findRootNode"),s(kS,"streamContents"),s(ES,"streamAllContents"),s(_S,"streamAst"),s(AS,"isAstNodeInRange"),s(SS,"streamReferences"),s(RS,"findLocalReferences"),s(NS,"assignMandatoryProperties"),s(LS,"copyDefaultValue"),s(IS,"copyAstNode");var MS={};function OS(e){return e.charCodeAt(0)}function PS(e,t){Array.isArray(e)?e.forEach((function(e){t.push(e)})):t.push(e)}function DS(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t],e[t]=!0}function BS(e){if(void 0===e)throw Error("Internal Error - Should never get here!");return!0}function FS(){throw Error("Internal Error - Should never get here!")}function $S(e){return"Character"===e.type}u(MS,{NEWLINE_REGEXP:()=>YS,escapeRegExp:()=>rR,getCaseInsensitivePattern:()=>nR,getTerminalParts:()=>QS,isMultilineComment:()=>JS,isWhitespace:()=>tR,partialMatches:()=>iR,partialRegExp:()=>aR,whitespaceCharacters:()=>eR}),s(OS,"cc"),s(PS,"insertToSet"),s(DS,"addFlag"),s(BS,"ASSERT_EXISTS"),s(FS,"ASSERT_NEVER_REACH_HERE"),s($S,"isCharacter");var zS=[];for(let e=OS("0");e<=OS("9");e++)zS.push(e);var US=[OS("_")].concat(zS);for(let e=OS("a");e<=OS("z");e++)US.push(e);for(let e=OS("A");e<=OS("Z");e++)US.push(e);var GS=[OS(" "),OS("\f"),OS("\n"),OS("\r"),OS("\t"),OS("\v"),OS("\t"),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS(" "),OS("\u2028"),OS("\u2029"),OS(" "),OS(" "),OS("　"),OS("\ufeff")],jS=/[0-9a-fA-F]/,VS=/[0-9]/,WS=/[1-9]/,HS=class{static{s(this,"RegExpParser")}constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let t=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":DS(r,"global");break;case"i":DS(r,"ignoreCase");break;case"m":DS(r,"multiLine");break;case"u":DS(r,"unicode");break;case"y":DS(r,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){let e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){let e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":let t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}BS(t);let r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}return FS()}quantifier(e=!1){let t,r=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":let r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":let e;this.isDigit()?(e=this.integerIncludingZero(),t={atLeast:r,atMost:e}):t={atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;BS(t)}if((!0!==e||void 0!==t)&&BS(t))return"?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(r),t}atom(){let e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),BS(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):FS()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[OS("\n"),OS("\r"),OS("\u2028"),OS("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=zS;break;case"D":e=zS,t=!0;break;case"s":e=GS;break;case"S":e=GS,t=!0;break;case"w":e=US;break;case"W":e=US,t=!0}return BS(e)?{type:"Set",value:e,complement:t}:FS()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=OS("\f");break;case"n":e=OS("\n");break;case"r":e=OS("\r");break;case"t":e=OS("\t");break;case"v":e=OS("\v")}return BS(e)?{type:"Character",value:e}:FS()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:OS("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:OS(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:OS(this.popChar())}}}characterClass(){let e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){let t=this.classAtom();if(t.type,$S(t)&&this.isRangeDash()){this.consumeChar("-");let r=this.classAtom();if(r.type,$S(r)){if(r.value<t.value)throw Error("Range out of order in character class");e.push({from:t.value,to:r.value})}else PS(t.value,e),e.push(OS("-")),PS(r.value,e)}else PS(t.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:OS("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;if("?"===(this.consumeChar("("),this.peekChar(0)))this.consumeChar("?"),this.consumeChar(":"),e=!1;else this.groupIdx++;let t=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(!1===WS.test(e))throw Error("Expecting a positive integer");for(;VS.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(!1===VS.test(e))throw Error("Expecting an integer");for(;VS.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:OS(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return VS.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){let e=this.saveState();try{return void 0!==this.quantifier(!0)}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let e=this.popChar();if(!1===jS.test(e))throw Error("Expecting a HexDecimal digits");t+=e}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}},qS=class{static{s(this,"BaseRegExpVisitor")}visitChildren(e){for(let t in e){let r=e[t];e.hasOwnProperty(t)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach((e=>{this.visit(e)}),this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}},YS=/\r?\n/gm,XS=new HS,KS=class extends qS{static{s(this,"TerminalRegExpVisitor")}constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){let t=String.fromCharCode(e.value);if(!this.multiline&&"\n"===t&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let e=rR(t);this.endRegexpStack.push(e),this.isStarting&&(this.startRegexp+=e)}}visitSet(e){if(!this.multiline){let t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=!!"\n".match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){"Group"===e.type&&e.quantifier||super.visitChildren(e)}},ZS=new KS;function QS(e){try{"string"!=typeof e&&(e=e.source),e=`/${e}/`;let t=XS.pattern(e),r=[];for(let n of t.value.value)ZS.reset(e),ZS.visit(n),r.push({start:ZS.startRegexp,end:ZS.endRegex});return r}catch{return[]}}function JS(e){try{return"string"==typeof e&&(e=new RegExp(e)),e=e.toString(),ZS.reset(e),ZS.visit(XS.pattern(e)),ZS.multiline}catch{return!1}}s(QS,"getTerminalParts"),s(JS,"isMultilineComment");var eR="\f\n\r\t\v              \u2028\u2029  　\ufeff".split("");function tR(e){let t="string"==typeof e?new RegExp(e):e;return eR.some((e=>t.test(e)))}function rR(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nR(e){return Array.prototype.map.call(e,(e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:rR(e))).join("")}function iR(e,t){let r=aR(e),n=t.match(r);return!!n&&n[0].length>0}function aR(e){"string"==typeof e&&(e=new RegExp(e));let t=e,r=e.source,n=0;function i(){let e,a="";function o(e){a+=r.substr(n,e),n+=e}function l(e){a+="(?:"+r.substr(n,e)+"|$)",n+=e}for(s(o,"appendRaw"),s(l,"appendOptional");n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":l(3);break;case"x":l(4);break;case"u":t.unicode?"{"===r[n+2]?l(r.indexOf("}",n)-n+1):l(6):l(2);break;case"p":case"P":t.unicode?l(r.indexOf("}",n)-n+1):l(2);break;case"k":l(r.indexOf(">",n)-n+1);break;default:l(2)}break;case"[":e=/\[(?:\\.|.)*?\]/g,e.lastIndex=n,e=e.exec(r)||[],l(e[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":e=/\{\d+,?\d*\}/g,e.lastIndex=n,e=e.exec(r),e?o(e[0].length):l(1);break;case"(":if("?"===r[n+1])switch(r[n+2]){case":":a+="(?:",n+=3,a+=i()+"|$)";break;case"=":a+="(?=",n+=3,a+=i()+")";break;case"!":e=n,n+=3,i(),a+=r.substr(e,n-e);break;case"<":switch(r[n+3]){case"=":case"!":e=n,n+=4,i(),a+=r.substr(e,n-e);break;default:o(r.indexOf(">",n)-n+1),a+=i()+"|$)"}}else o(1),a+=i()+"|$)";break;case")":return++n,a;default:l(1)}return a}return s(i,"process"),new RegExp(i(),e.flags)}function oR(e){return e.rules.find((e=>xA(e)&&e.entry))}function sR(e){return e.rules.filter((e=>RA(e)&&e.hidden))}function lR(e,t){let r=new Set,n=oR(e);if(!n)return new Set(e.rules);let i=[n].concat(sR(e));for(let e of i)uR(e,r,t);let a=new Set;for(let t of e.rules)(r.has(t.name)||RA(t)&&t.hidden)&&a.add(t);return a}function uR(e,t,r){t.add(e.name),ES(e).forEach((e=>{if(nS(e)||r&&uS(e)){let n=e.rule.ref;n&&!t.has(n.name)&&uR(n,t,r)}}))}function cR(e){if(e.terminal)return e.terminal;if(e.type.ref){let t=xR(e.type.ref);return t?.terminal}}function hR(e){return e.hidden&&!tR(OR(e))}function dR(e,t){return e&&t?pR(e,t,e.astNode,!0):[]}function fR(e,t,r){if(!e||!t)return;let n=pR(e,t,e.astNode,!0);return 0!==n.length?n[r=void 0!==r?Math.max(0,Math.min(r,n.length-1)):0]:void 0}function pR(e,t,r,n){if(!n){let r=bS(e.grammarSource,UA);if(r&&r.feature===t)return[e]}return HE(e)&&e.astNode===r?e.content.flatMap((e=>pR(e,t,r,!1))):[]}function gR(e,t){return e?yR(e,t,e?.astNode):[]}function mR(e,t,r){if(!e)return;let n=yR(e,t,e?.astNode);return 0!==n.length?n[r=void 0!==r?Math.max(0,Math.min(r,n.length-1)):0]:void 0}function yR(e,t,r){if(e.astNode!==r)return[];if(ZA(e.grammarSource)&&e.grammarSource.value===t)return[e];let n,i=a_(e).iterator(),a=[];do{if(n=i.next(),!n.done){let e=n.value;e.astNode===r?ZA(e.grammarSource)&&e.grammarSource.value===t&&a.push(e):i.prune()}}while(!n.done);return a}function vR(e){var t;let r=e.astNode;for(;r===(null===(t=e.container)||void 0===t?void 0:t.astNode);){let t=bS(e.grammarSource,UA);if(t)return t;e=e.container}}function xR(e){let t=e;return aA(t)&&(BA(t.$container)?t=t.$container.$container:xA(t.$container)?t=t.$container:A_(t.$container)),bR(e,t,new Map)}function bR(e,t,r){var n;function i(t,n){let i;return bS(t,UA)||(i=bR(n,n,r)),r.set(e,i),i}if(s(i,"go"),r.has(e))return r.get(e);r.set(e,void 0);for(let a of ES(t)){if(UA(a)&&"name"===a.feature.toLowerCase())return r.set(e,a),a;if(nS(a)&&xA(a.rule.ref))return i(a,a.rule.ref);if(EA(a)&&null!==(n=a.typeRef)&&void 0!==n&&n.ref)return i(a,a.typeRef.ref)}}function TR(e){let t=e.$container;if(XA(t)){let r=t.elements;for(let t=r.indexOf(e)-1;t>=0;t--){let e=r[t];if(BA(e))return e;{let e=ES(r[t]).find(BA);if(e)return e}}}if(j_(t))return TR(t)}function CR(e,t){return"?"===e||"*"===e||XA(t)&&!!t.guardCondition}function wR(e){return"*"===e||"+"===e}function kR(e){return"+="===e}function ER(e){return _R(e,new Set)}function _R(e,t){if(t.has(e))return!0;t.add(e);for(let r of ES(e))if(nS(r)){if(!r.rule.ref||xA(r.rule.ref)&&!_R(r.rule.ref,t))return!1}else{if(UA(r))return!1;if(BA(r))return!1}return!!e.definition}function AR(e){return SR(e.type,new Set)}function SR(e,t){if(t.has(e))return!0;if(t.add(e),q_(e))return!1;if(TA(e))return!1;if(PA(e))return e.types.every((e=>SR(e,t)));if(EA(e)){if(void 0!==e.primitiveType)return!0;if(void 0!==e.stringType)return!0;if(void 0!==e.typeRef){let r=e.typeRef.ref;return!!LA(r)&&SR(r.type,t)}return!1}return!1}function RR(e){if(e.inferredType)return e.inferredType.name;if(e.dataType)return e.dataType;if(e.returnType){let t=e.returnType.ref;if(t){if(xA(t))return t.name;if(sA(t)||LA(t))return t.name}}}function NR(e){var t;if(xA(e))return ER(e)?e.name:null!==(t=RR(e))&&void 0!==t?t:e.name;if(sA(e)||LA(e)||wA(e))return e.name;if(BA(e)){let t=LR(e);if(t)return t}else if(aA(e))return e.name;throw new Error("Cannot get name of Unknown Type")}function LR(e){var t;return e.inferredType?e.inferredType.name:null!==(t=e.type)&&void 0!==t&&t.ref?NR(e.type.ref):void 0}function IR(e){var t,r,n;return RA(e)?null!==(r=null===(t=e.type)||void 0===t?void 0:t.name)&&void 0!==r?r:"string":ER(e)?e.name:null!==(n=RR(e))&&void 0!==n?n:e.name}function MR(e){var t,r,n;return RA(e)?null!==(r=null===(t=e.type)||void 0===t?void 0:t.name)&&void 0!==r?r:"string":null!==(n=RR(e))&&void 0!==n?n:e.name}function OR(e){let t={s:!1,i:!1,u:!1},r=DR(e.definition,t),n=Object.entries(t).filter((([,e])=>e)).map((([e])=>e)).join("");return new RegExp(r,n)}s(tR,"isWhitespace"),s(rR,"escapeRegExp"),s(nR,"getCaseInsensitivePattern"),s(iR,"partialMatches"),s(aR,"partialRegExp"),s(oR,"getEntryRule"),s(sR,"getHiddenRules"),s(lR,"getAllReachableRules"),s(uR,"ruleDfs"),s(cR,"getCrossReferenceTerminal"),s(hR,"isCommentTerminal"),s(dR,"findNodesForProperty"),s(fR,"findNodeForProperty"),s(pR,"findNodesForPropertyInternal"),s(gR,"findNodesForKeyword"),s(mR,"findNodeForKeyword"),s(yR,"findNodesForKeywordInternal"),s(vR,"findAssignment"),s(xR,"findNameAssignment"),s(bR,"findNameAssignmentInternal"),s(TR,"getActionAtElement"),s(CR,"isOptionalCardinality"),s(wR,"isArrayCardinality"),s(kR,"isArrayOperator"),s(ER,"isDataTypeRule"),s(_R,"isDataTypeRuleInternal"),s(AR,"isDataType"),s(SR,"isDataTypeInternal"),s(RR,"getExplicitRuleType"),s(NR,"getTypeName"),s(LR,"getActionType"),s(IR,"getRuleTypeName"),s(MR,"getRuleType"),s(OR,"terminalRegex");var PR=/[\s\S]/.source;function DR(e,t){if(aS(e))return BR(e);if(sS(e))return FR(e);if(jA(e))return UR(e);if(uS(e)){let t=e.rule.ref;if(!t)throw new Error("Missing rule reference.");return jR(DR(t.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}if(JA(e))return zR(e);if(fS(e))return $R(e);if(tS(e)){let r=e.regex.lastIndexOf("/"),n=e.regex.substring(1,r),i=e.regex.substring(r+1);return t&&(t.i=i.includes("i"),t.s=i.includes("s"),t.u=i.includes("u")),jR(n,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}if(gS(e))return jR(PR,{cardinality:e.cardinality,lookahead:e.lookahead});throw new Error(`Invalid terminal element: ${e?.$type}`)}function BR(e){return jR(e.elements.map((e=>DR(e))).join("|"),{cardinality:e.cardinality,lookahead:e.lookahead})}function FR(e){return jR(e.elements.map((e=>DR(e))).join(""),{cardinality:e.cardinality,lookahead:e.lookahead})}function $R(e){return jR(`${PR}*?${DR(e.terminal)}`,{cardinality:e.cardinality,lookahead:e.lookahead})}function zR(e){return jR(`(?!${DR(e.terminal)})${PR}*?`,{cardinality:e.cardinality,lookahead:e.lookahead})}function UR(e){return e.right?jR(`[${GR(e.left)}-${GR(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1}):jR(GR(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}function GR(e){return rR(e.value)}function jR(e,t){var r;return(!1!==t.wrap||t.lookahead)&&(e=`(${null!==(r=t.lookahead)&&void 0!==r?r:""}${e})`),t.cardinality?`${e}${t.cardinality}`:e}function VR(e){let t=[],r=e.Grammar;for(let e of r.rules)RA(e)&&hR(e)&&JS(OR(e))&&t.push(e.name);return{multilineCommentRules:t,nameRegexp:d_}}function WR(e){console&&console.error&&console.error(`Error: ${e}`)}function HR(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function qR(e){let t=(new Date).getTime(),r=e();return{time:(new Date).getTime()-t,value:r}}function YR(e){function t(){}s(t,"FakeConstructor"),t.prototype=e;let r=new t;function n(){return typeof r.bar}return s(n,"fakeAccess"),n(),n(),e}function XR(e){return KR(e)?e.LABEL:e.name}function KR(e){return Sk(e.LABEL)&&""!==e.LABEL}s(DR,"abstractElementToRegex"),s(BR,"terminalAlternativesToRegex"),s(FR,"terminalGroupToRegex"),s($R,"untilTokenToRegex"),s(zR,"negateTokenToRegex"),s(UR,"characterRangeToRegex"),s(GR,"keywordToRegex"),s(jR,"withCardinality"),s(VR,"createGrammarConfig"),s(WR,"PRINT_ERROR"),s(HR,"PRINT_WARNING"),s(qR,"timer"),s(YR,"toFastProperties"),s(XR,"tokenLabel"),s(KR,"hasTokenLabel");var ZR=class{static{s(this,"AbstractProduction")}get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),Fb(this.definition,(t=>{t.accept(e)}))}},QR=class extends ZR{static{s(this,"NonTerminal")}constructor(e){super([]),this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}set definition(e){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(e){e.visit(this)}},JR=class extends ZR{static{s(this,"Rule")}constructor(e){super(e.definition),this.orgText="",Dw(this,Hk(e,(e=>void 0!==e)))}},eN=class extends ZR{static{s(this,"Alternative")}constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Dw(this,Hk(e,(e=>void 0!==e)))}},tN=class extends ZR{static{s(this,"Option")}constructor(e){super(e.definition),this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}},rN=class extends ZR{static{s(this,"RepetitionMandatory")}constructor(e){super(e.definition),this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}},nN=class extends ZR{static{s(this,"RepetitionMandatoryWithSeparator")}constructor(e){super(e.definition),this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}},iN=class extends ZR{static{s(this,"Repetition")}constructor(e){super(e.definition),this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}},aN=class extends ZR{static{s(this,"RepetitionWithSeparator")}constructor(e){super(e.definition),this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}},oN=class extends ZR{static{s(this,"Alternation")}get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Dw(this,Hk(e,(e=>void 0!==e)))}},sN=class{static{s(this,"Terminal")}constructor(e){this.idx=1,Dw(this,Hk(e,(e=>void 0!==e)))}accept(e){e.visit(this)}};function lN(e){return CC(e,uN)}function uN(e){function t(e){return CC(e,uN)}if(s(t,"convertDefinition"),e instanceof QR){let t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return Sk(e.label)&&(t.label=e.label),t}if(e instanceof eN)return{type:"Alternative",definition:t(e.definition)};if(e instanceof tN)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof rN)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof nN)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:uN(new sN({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof aN)return{type:"RepetitionWithSeparator",idx:e.idx,separator:uN(new sN({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof iN)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof oN)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof sN){let t={type:"Terminal",name:e.terminalType.name,label:XR(e.terminalType),idx:e.idx};Sk(e.label)&&(t.terminalLabel=e.label);let r=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(t.pattern=Fk(r)?r.source:r),t}if(e instanceof JR)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}s(lN,"serializeGrammar"),s(uN,"serializeProduction");var cN=class{static{s(this,"GAstVisitor")}visit(e){let t=e;switch(t.constructor){case QR:return this.visitNonTerminal(t);case eN:return this.visitAlternative(t);case tN:return this.visitOption(t);case rN:return this.visitRepetitionMandatory(t);case nN:return this.visitRepetitionMandatoryWithSeparator(t);case aN:return this.visitRepetitionWithSeparator(t);case iN:return this.visitRepetition(t);case oN:return this.visitAlternation(t);case sN:return this.visitTerminal(t);case JR:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function hN(e){return e instanceof eN||e instanceof tN||e instanceof iN||e instanceof rN||e instanceof nN||e instanceof aN||e instanceof sN||e instanceof JR}function dN(e,t=[]){return e instanceof tN||e instanceof iN||e instanceof aN||(e instanceof oN?AE(e.definition,(e=>dN(e,t))):!(e instanceof QR&&Lk(t,e))&&(e instanceof ZR&&(e instanceof QR&&t.push(e),uk(e.definition,(e=>dN(e,t))))))}function fN(e){return e instanceof oN}function pN(e){if(e instanceof QR)return"SUBRULE";if(e instanceof tN)return"OPTION";if(e instanceof oN)return"OR";if(e instanceof rN)return"AT_LEAST_ONE";if(e instanceof nN)return"AT_LEAST_ONE_SEP";if(e instanceof aN)return"MANY_SEP";if(e instanceof iN)return"MANY";if(e instanceof sN)return"CONSUME";throw Error("non exhaustive match")}s(hN,"isSequenceProd"),s(dN,"isOptionalProd"),s(fN,"isBranchingProd"),s(pN,"getProductionDslName");var gN=class{static{s(this,"RestWalker")}walk(e,t=[]){Fb(e.definition,((r,n)=>{let i=tk(e.definition,n+1);if(r instanceof QR)this.walkProdRef(r,i,t);else if(r instanceof sN)this.walkTerminal(r,i,t);else if(r instanceof eN)this.walkFlat(r,i,t);else if(r instanceof tN)this.walkOption(r,i,t);else if(r instanceof rN)this.walkAtLeastOne(r,i,t);else if(r instanceof nN)this.walkAtLeastOneSep(r,i,t);else if(r instanceof aN)this.walkManySep(r,i,t);else if(r instanceof iN)this.walkMany(r,i,t);else{if(!(r instanceof oN))throw Error("non exhaustive match");this.walkOr(r,i,t)}}))}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){let n=t.concat(r);this.walk(e,n)}walkOption(e,t,r){let n=t.concat(r);this.walk(e,n)}walkAtLeastOne(e,t,r){let n=[new tN({definition:e.definition})].concat(t,r);this.walk(e,n)}walkAtLeastOneSep(e,t,r){let n=mN(e,t,r);this.walk(e,n)}walkMany(e,t,r){let n=[new tN({definition:e.definition})].concat(t,r);this.walk(e,n)}walkManySep(e,t,r){let n=mN(e,t,r);this.walk(e,n)}walkOr(e,t,r){let n=t.concat(r);Fb(e.definition,(e=>{let t=new eN({definition:[e]});this.walk(t,n)}))}};function mN(e,t,r){return[new tN({definition:[new sN({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function yN(e){if(e instanceof QR)return yN(e.referencedRule);if(e instanceof sN)return bN(e);if(hN(e))return vN(e);if(fN(e))return xN(e);throw Error("non exhaustive match")}function vN(e){let t,r=[],n=e.definition,i=0,a=n.length>i,o=!0;for(;a&&o;)t=n[i],o=dN(t),r=r.concat(yN(t)),i+=1,a=n.length>i;return RE(r)}function xN(e){let t=CC(e.definition,(e=>yN(e)));return RE(WC(t))}function bN(e){return[e.terminalType]}s(mN,"restForRepetitionWithSeparator"),s(yN,"first"),s(vN,"firstForSequence"),s(xN,"firstForBranching"),s(bN,"firstForTerminal");var TN="_~IN~_",CN=class extends gN{static{s(this,"ResyncFollowsWalker")}constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){let n=kN(e.referencedRule,e.idx)+this.topProd.name,i=t.concat(r),a=yN(new eN({definition:i}));this.follows[n]=a}};function wN(e){let t={};return Fb(e,(e=>{let r=new CN(e).startWalking();Dw(t,r)})),t}function kN(e,t){return e.name+t+TN}s(wN,"computeAllProdsFollows"),s(kN,"buildBetweenProdsFollowPrefix");var EN={},_N=new HS;function AN(e){let t=e.toString();if(EN.hasOwnProperty(t))return EN[t];{let e=_N.pattern(t);return EN[t]=e,e}}function SN(){EN={}}s(AN,"getRegExpAst"),s(SN,"clearRegExpParserCache");var RN="Complement Sets are not supported for first char optimization",NN='Unable to use "first char" lexer optimizations:\n';function LN(e,t=!1){try{let t=AN(e);return IN(t.value,{},t.flags.ignoreCase)}catch(r){if(r.message===RN)t&&HR(`${NN}\tUnable to optimize: < ${e.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";t&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),WR(`${NN}\n\tFailed parsing: < ${e.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function IN(e,t,r){switch(e.type){case"Disjunction":for(let n=0;n<e.value.length;n++)IN(e.value[n],t,r);break;case"Alternative":let n=e.value;for(let e=0;e<n.length;e++){let i=n[e];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=i;switch(a.type){case"Character":MN(a.value,t,r);break;case"Set":if(!0===a.complement)throw Error(RN);Fb(a.value,(e=>{if("number"==typeof e)MN(e,t,r);else{let n=e;if(!0===r)for(let e=n.from;e<=n.to;e++)MN(e,t,r);else{for(let e=n.from;e<=n.to&&e<vL;e++)MN(e,t,r);if(n.to>=vL){let e=n.from>=vL?n.from:vL,r=n.to,i=bL(e),a=bL(r);for(let e=i;e<=a;e++)t[e]=e}}}}));break;case"Group":IN(a.value,t,r);break;default:throw Error("Non Exhaustive Match")}let o=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===DN(a)||"Group"!==a.type&&!1===o)break}break;default:throw Error("non exhaustive match!")}return _C(t)}function MN(e,t,r){let n=bL(e);t[n]=n,!0===r&&ON(e,t)}function ON(e,t){let r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){let e=bL(n.charCodeAt(0));t[e]=e}else{let e=r.toLowerCase();if(e!==r){let r=bL(e.charCodeAt(0));t[r]=r}}}function PN(e,t){return pk(e.value,(e=>{if("number"==typeof e)return Lk(t,e);{let r=e;return void 0!==pk(t,(e=>r.from<=e&&e<=r.to))}}))}function DN(e){let t=e.quantifier;return!(!t||0!==t.atLeast)||!!e.value&&(Ey(e.value)?uk(e.value,DN):DN(e.value))}s(LN,"getOptimizedStartCodesIndices"),s(IN,"firstCharOptimizedIndices"),s(MN,"addOptimizedIdxToResult"),s(ON,"handleIgnoreCase"),s(PN,"findCode"),s(DN,"isWholeOptional");var BN=class extends qS{static{s(this,"CharCodeFinder")}constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}super.visitChildren(e)}}visitCharacter(e){Lk(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?void 0===PN(e,this.targetCharCodes)&&(this.found=!0):void 0!==PN(e,this.targetCharCodes)&&(this.found=!0)}};function FN(e,t){if(t instanceof RegExp){let r=AN(t),n=new BN(e);return n.visit(r),n.found}return void 0!==pk(t,(t=>Lk(e,t.charCodeAt(0))))}s(FN,"canMatchCharCode");var $N="PATTERN",zN="defaultMode",UN="modes",GN="boolean"==typeof new RegExp("(?:)").sticky;function jN(e,t){t=Sb(t,{useSticky:GN,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:s(((e,t)=>t()),"tracer")});let r,n=t.tracer;n("initCharCodeToOptimizedIndexMap",(()=>{TL()})),n("Reject Lexer.NA",(()=>{r=wE(e,(e=>e[$N]===zL.NA))}));let i,a,o,l,u,c,h,d,f,p,g,m=!1;n("Transform Patterns",(()=>{m=!1,i=CC(r,(e=>{let r=e[$N];if(Fk(r)){let e=r.source;return 1!==e.length||"^"===e||"$"===e||"."===e||r.ignoreCase?2!==e.length||"\\"!==e[0]||Lk(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],e[1])?t.useSticky?sL(r):oL(r):e[1]:e}if(sg(r))return m=!0,{exec:r};if("object"==typeof r)return m=!0,r;if("string"==typeof r){if(1===r.length)return r;{let e=r.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=new RegExp(e);return t.useSticky?sL(n):oL(n)}}throw Error("non exhaustive match")}))})),n("misc mapping",(()=>{a=CC(r,(e=>e.tokenTypeIdx)),o=CC(r,(e=>{let t=e.GROUP;if(t!==zL.SKIPPED){if(Sk(t))return t;if(SC(t))return!1;throw Error("non exhaustive match")}})),l=CC(r,(e=>{let t=e.LONGER_ALT;if(t)return Ey(t)?CC(t,(e=>Ok(r,e))):[Ok(r,t)]})),u=CC(r,(e=>e.PUSH_MODE)),c=CC(r,(e=>_k(e,"POP_MODE")))})),n("Line Terminator Handling",(()=>{let e=mL(t.lineTerminatorCharacters);h=CC(r,(e=>!1)),"onlyOffset"!==t.positionTracking&&(h=CC(r,(t=>_k(t,"LINE_BREAKS")?!!t.LINE_BREAKS:!1===pL(t,e)&&FN(e,t.PATTERN))))})),n("Misc Mapping #2",(()=>{d=CC(r,hL),f=CC(i,dL),p=QC(r,((e,t)=>{let r=t.GROUP;return Sk(r)&&r!==zL.SKIPPED&&(e[r]=[]),e}),{}),g=CC(i,((e,t)=>({pattern:i[t],longerAlt:l[t],canLineTerminator:h[t],isCustom:d[t],short:f[t],group:o[t],push:u[t],pop:c[t],tokenTypeIdx:a[t],tokenType:r[t]})))}));let y=!0,v=[];return t.safeMode||n("First Char Optimization",(()=>{v=QC(r,((e,r,n)=>{if("string"==typeof r.PATTERN){let t=bL(r.PATTERN.charCodeAt(0));yL(e,t,g[n])}else if(Ey(r.START_CHARS_HINT)){let t;Fb(r.START_CHARS_HINT,(r=>{let i=bL("string"==typeof r?r.charCodeAt(0):r);t!==i&&(t=i,yL(e,i,g[n]))}))}else if(Fk(r.PATTERN))if(r.PATTERN.unicode)y=!1,t.ensureOptimizations&&WR(`${NN}\tUnable to analyze < ${r.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let i=LN(r.PATTERN,t.ensureOptimizations);vx(i)&&(y=!1),Fb(i,(t=>{yL(e,t,g[n])}))}else t.ensureOptimizations&&WR(`${NN}\tTokenType: <${r.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),y=!1;return e}),[])})),{emptyGroups:p,patternIdxToConfig:g,charCodeToPatternIdxToConfig:v,hasCustom:m,canBeOptimized:y}}function VN(e,t){let r=[],n=HN(e);r=r.concat(n.errors);let i=qN(n.valid),a=i.valid;return r=r.concat(i.errors),r=r.concat(WN(a)),r=r.concat(tL(a)),r=r.concat(rL(a,t)),r=r.concat(nL(a)),r}function WN(e){let t=[],r=vC(e,(e=>Fk(e[$N])));return t=t.concat(XN(r)),t=t.concat(QN(r)),t=t.concat(JN(r)),t=t.concat(eL(r)),t=t.concat(KN(r)),t}function HN(e){let t=vC(e,(e=>!_k(e,$N))),r=CC(t,(e=>({message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:BL.MISSING_PATTERN,tokenTypes:[e]})));return{errors:r,valid:Jw(e,t)}}function qN(e){let t=vC(e,(e=>{let t=e[$N];return!(Fk(t)||sg(t)||_k(t,"exec")||Sk(t))})),r=CC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:BL.INVALID_PATTERN,tokenTypes:[e]})));return{errors:r,valid:Jw(e,t)}}s(jN,"analyzeTokenTypes"),s(VN,"validatePatterns"),s(WN,"validateRegExpPattern"),s(HN,"findMissingPatterns"),s(qN,"findInvalidPatterns");var YN=/[^\\][$]/;function XN(e){class t extends qS{static{s(this,"EndAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitEndAnchor(e){this.found=!0}}let r=vC(e,(e=>{let r=e.PATTERN;try{let e=AN(r),n=new t;return n.visit(e),n.found}catch{return YN.test(r.source)}}));return CC(r,(e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:BL.EOI_ANCHOR_FOUND,tokenTypes:[e]})))}function KN(e){let t=vC(e,(e=>e.PATTERN.test("")));return CC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:BL.EMPTY_MATCH_PATTERN,tokenTypes:[e]})))}s(XN,"findEndOfInputAnchor"),s(KN,"findEmptyMatchRegExps");var ZN=/[^\\[][\^]|^\^/;function QN(e){class t extends qS{static{s(this,"StartAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitStartAnchor(e){this.found=!0}}let r=vC(e,(e=>{let r=e.PATTERN;try{let e=AN(r),n=new t;return n.visit(e),n.found}catch{return ZN.test(r.source)}}));return CC(r,(e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:BL.SOI_ANCHOR_FOUND,tokenTypes:[e]})))}function JN(e){let t=vC(e,(e=>{let t=e[$N];return t instanceof RegExp&&(t.multiline||t.global)}));return CC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:BL.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]})))}function eL(e){let t=[],r=CC(e,(r=>QC(e,((e,n)=>(r.PATTERN.source===n.PATTERN.source&&!Lk(t,n)&&n.PATTERN!==zL.NA&&(t.push(n),e.push(n)),e)),[])));r=jw(r);let n=vC(r,(e=>e.length>1));return CC(n,(e=>{let t=CC(e,(e=>e.name));return{message:`The same RegExp pattern ->${mk(e).PATTERN}<-has been used in all of the following Token Types: ${t.join(", ")} <-`,type:BL.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}}))}function tL(e){let t=vC(e,(e=>{if(!_k(e,"GROUP"))return!1;let t=e.GROUP;return t!==zL.SKIPPED&&t!==zL.NA&&!Sk(t)}));return CC(t,(e=>({message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:BL.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]})))}function rL(e,t){let r=vC(e,(e=>void 0!==e.PUSH_MODE&&!Lk(t,e.PUSH_MODE)));return CC(r,(e=>({message:`Token Type: ->${e.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${e.PUSH_MODE}<-which does not exist`,type:BL.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]})))}function nL(e){let t=[],r=QC(e,((e,t,r)=>{let n=t.PATTERN;return n===zL.NA||(Sk(n)?e.push({str:n,idx:r,tokenType:t}):Fk(n)&&aL(n)&&e.push({str:n.source,idx:r,tokenType:t})),e}),[]);return Fb(e,((e,n)=>{Fb(r,(({str:r,idx:i,tokenType:a})=>{if(n<i&&iL(r,e.PATTERN)){let r=`Token: ->${a.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${e.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:r,type:BL.UNREACHABLE_PATTERN,tokenTypes:[e,a]})}}))})),t}function iL(e,t){if(Fk(t)){let r=t.exec(e);return null!==r&&0===r.index}if(sg(t))return t(e,0,[],{});if(_k(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}function aL(e){return void 0===pk([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(t=>-1!==e.source.indexOf(t)))}function oL(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function sL(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function lL(e,t,r){let n=[];return _k(e,zN)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+zN+"> property in its definition\n",type:BL.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),_k(e,UN)||n.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:BL.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),_k(e,UN)&&_k(e,zN)&&!_k(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${zN}: <${e.defaultMode}>which does not exist\n`,type:BL.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),_k(e,UN)&&Fb(e.modes,((e,t)=>{Fb(e,((r,i)=>{if(SC(r))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${t}> at index: <${i}>\n`,type:BL.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(_k(r,"LONGER_ALT")){let i=Ey(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT];Fb(i,(i=>{!SC(i)&&!Lk(e,i)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${i.name}> on token <${r.name}> outside of mode <${t}>\n`,type:BL.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}}))})),n}function uL(e,t,r){let n=[],i=!1,a=jw(WC(_C(e.modes))),o=wE(a,(e=>e[$N]===zL.NA)),s=mL(r);return t&&Fb(o,(e=>{let t=pL(e,s);if(!1!==t){let r={message:gL(e,t),type:t.issue,tokenType:e};n.push(r)}else _k(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):FN(s,e.PATTERN)&&(i=!0)})),t&&!i&&n.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:BL.NO_LINE_BREAKS_FLAGS}),n}function cL(e){let t={},r=bx(e);return Fb(r,(r=>{let n=e[r];if(!Ey(n))throw Error("non exhaustive match");t[r]=[]})),t}function hL(e){let t=e.PATTERN;if(Fk(t))return!1;if(sg(t))return!0;if(_k(t,"exec"))return!0;if(Sk(t))return!1;throw Error("non exhaustive match")}function dL(e){return!(!Sk(e)||1!==e.length)&&e.charCodeAt(0)}s(QN,"findStartOfInputAnchor"),s(JN,"findUnsupportedFlags"),s(eL,"findDuplicatePatterns"),s(tL,"findInvalidGroupType"),s(rL,"findModesThatDoNotExist"),s(nL,"findUnreachablePatterns"),s(iL,"testTokenType"),s(aL,"noMetaChar"),s(oL,"addStartOfInput"),s(sL,"addStickyFlag"),s(lL,"performRuntimeChecks"),s(uL,"performWarningRuntimeChecks"),s(cL,"cloneEmptyGroups"),s(hL,"isCustomPattern"),s(dL,"isShortPattern");var fL={test:s((function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let t=e.charCodeAt(r);if(10===t)return this.lastIndex=r+1,!0;if(13===t)return 10===e.charCodeAt(r+1)?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1}),"test"),lastIndex:0};function pL(e,t){if(_k(e,"LINE_BREAKS"))return!1;if(Fk(e.PATTERN)){try{FN(t,e.PATTERN)}catch(e){return{issue:BL.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}if(Sk(e.PATTERN))return!1;if(hL(e))return{issue:BL.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function gL(e,t){if(t.issue===BL.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${e.name}> Token Type\n\t Root cause: ${t.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===BL.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${e.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function mL(e){return CC(e,(e=>Sk(e)?e.charCodeAt(0):e))}function yL(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}s(pL,"checkLineBreaksIssues"),s(gL,"buildLineBreakIssueMessage"),s(mL,"getCharCodes"),s(yL,"addToMapOfArrays");var vL=256,xL=[];function bL(e){return e<vL?e:xL[e]}function TL(){if(vx(xL)){xL=new Array(65536);for(let e=0;e<65536;e++)xL[e]=e>255?255+~~(e/255):e}}function CL(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[r]}function wL(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}s(bL,"charCodeToOptimizedIndex"),s(TL,"initCharCodeToOptimizedIndexMap"),s(CL,"tokenStructuredMatcher"),s(wL,"tokenStructuredMatcherNoCategories");var kL=1,EL={};function _L(e){let t=AL(e);SL(t),NL(t),RL(t),Fb(t,(e=>{e.isParent=e.categoryMatches.length>0}))}function AL(e){let t=kb(e),r=e,n=!0;for(;n;){r=jw(WC(CC(r,(e=>e.CATEGORIES))));let e=Jw(r,t);t=t.concat(e),vx(e)?n=!1:r=e}return t}function SL(e){Fb(e,(e=>{IL(e)||(EL[kL]=e,e.tokenTypeIdx=kL++),ML(e)&&!Ey(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),ML(e)||(e.CATEGORIES=[]),OL(e)||(e.categoryMatches=[]),PL(e)||(e.categoryMatchesMap={})}))}function RL(e){Fb(e,(e=>{e.categoryMatches=[],Fb(e.categoryMatchesMap,((t,r)=>{e.categoryMatches.push(EL[r].tokenTypeIdx)}))}))}function NL(e){Fb(e,(e=>{LL([],e)}))}function LL(e,t){Fb(e,(e=>{t.categoryMatchesMap[e.tokenTypeIdx]=!0})),Fb(t.CATEGORIES,(r=>{let n=e.concat(t);Lk(n,r)||LL(n,r)}))}function IL(e){return _k(e,"tokenTypeIdx")}function ML(e){return _k(e,"CATEGORIES")}function OL(e){return _k(e,"categoryMatches")}function PL(e){return _k(e,"categoryMatchesMap")}function DL(e){return _k(e,"tokenTypeIdx")}s(_L,"augmentTokenTypes"),s(AL,"expandCategories"),s(SL,"assignTokenDefaultProps"),s(RL,"assignCategoriesTokensProp"),s(NL,"assignCategoriesMapProp"),s(LL,"singleAssignCategoriesToksMap"),s(IL,"hasShortKeyProperty"),s(ML,"hasCategoriesProperty"),s(OL,"hasExtendingTokensTypesProperty"),s(PL,"hasExtendingTokensTypesMapProperty"),s(DL,"isTokenType");var BL,FL={buildUnableToPopLexerModeMessage:e=>`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(e,t,r,n,i)=>`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`};!function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"}(BL||(BL={}));var $L={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:FL,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze($L);var zL=class{static{s(this,"Lexer")}constructor(e,t=$L){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(e,t)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:i}=qR(t),a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${n}ms`),this.traceInitIndent--,i}return t()},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=Dw({},$L,t);let r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(()=>{let r,n=!0;this.TRACE_INIT("Lexer Config handling",(()=>{if(this.config.lineTerminatorsPattern===$L.lineTerminatorsPattern)this.config.lineTerminatorsPattern=fL;else if(this.config.lineTerminatorCharacters===$L.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Ey(e)?r={modes:{defaultMode:kb(e)},defaultMode:zN}:(n=!1,r=kb(e))})),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(lL(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),this.TRACE_INIT("performWarningRuntimeChecks",(()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(uL(r,this.trackStartLines,this.config.lineTerminatorCharacters))}))),r.modes=r.modes?r.modes:{},Fb(r.modes,((e,t)=>{r.modes[t]=wE(e,(e=>SC(e)))}));let i=bx(r.modes);if(Fb(r.modes,((e,r)=>{this.TRACE_INIT(`Mode: <${r}> processing`,(()=>{if(this.modes.push(r),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(VN(e,i))})),vx(this.lexerDefinitionErrors)){let n;_L(e),this.TRACE_INIT("analyzeTokenTypes",(()=>{n=jN(e,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})})),this.patternIdxToConfig[r]=n.patternIdxToConfig,this.charCodeToPatternIdxToConfig[r]=n.charCodeToPatternIdxToConfig,this.emptyGroups=Dw({},this.emptyGroups,n.emptyGroups),this.hasCustom=n.hasCustom||this.hasCustom,this.canModeBeOptimized[r]=n.canBeOptimized}}))})),this.defaultMode=r.defaultMode,!vx(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let e=CC(this.lexerDefinitionErrors,(e=>e.message)).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+e)}Fb(this.lexerDefinitionWarning,(e=>{HR(e.message)})),this.TRACE_INIT("Choosing sub-methods implementations",(()=>{if(GN?(this.chopInput=Lv,this.match=this.matchWithTest):(this.updateLastIndex=dw,this.match=this.matchWithExec),n&&(this.handleModes=dw),!1===this.trackStartLines&&(this.computeNewColumn=Lv),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=dw),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)})),this.TRACE_INIT("Failed Optimization Warnings",(()=>{let e=QC(this.canModeBeOptimized,((e,t,r)=>(!1===t&&e.push(r),e)),[]);if(t.ensureOptimizations&&!vx(e))throw Error(`Lexer Modes: < ${e.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)})),this.TRACE_INIT("clearRegExpParserCache",(()=>{SN()})),this.TRACE_INIT("toFastProperties",(()=>{YR(this)}))}))}tokenize(e,t=this.defaultMode){if(!vx(this.lexerDefinitionErrors)){let e=CC(this.lexerDefinitionErrors,(e=>e.message)).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+e)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let r,n,i,a,o,l,u,c,h,d,f,p,g,m,y,v,x=e,b=x.length,T=0,C=0,w=this.hasCustom?0:Math.floor(e.length/10),k=new Array(w),E=[],_=this.trackStartLines?1:void 0,A=this.trackStartLines?1:void 0,S=cL(this.emptyGroups),R=this.trackStartLines,N=this.config.lineTerminatorsPattern,L=0,I=[],M=[],O=[],P=[];function D(){return I}function B(e){let t=bL(e),r=M[t];return void 0===r?P:r}Object.freeze(P),s(D,"getPossiblePatternsSlow"),s(B,"getPossiblePatternsOptimized");let F=s((e=>{if(1===O.length&&void 0===e.tokenType.PUSH_MODE){let t=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);E.push({offset:e.startOffset,line:e.startLine,column:e.startColumn,length:e.image.length,message:t})}else{O.pop();let e=Nb(O);I=this.patternIdxToConfig[e],M=this.charCodeToPatternIdxToConfig[e],L=I.length;let t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;v=M&&t?B:D}}),"pop_mode");function $(e){O.push(e),M=this.charCodeToPatternIdxToConfig[e],I=this.patternIdxToConfig[e],L=I.length,L=I.length;let t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;v=M&&t?B:D}s($,"push_mode"),$.call(this,t);let z,U=this.config.recoveryEnabled;for(;T<b;){l=null;let t=x.charCodeAt(T),s=v(t),w=s.length;for(r=0;r<w;r++){z=s[r];let n=z.pattern;u=null;let h=z.short;if(!1!==h?t===h&&(l=n):!0===z.isCustom?(y=n.exec(x,T,k,S),null!==y?(l=y[0],void 0!==y.payload&&(u=y.payload)):l=null):(this.updateLastIndex(n,T),l=this.match(n,e,T)),null!==l){if(o=z.longerAlt,void 0!==o){let t=o.length;for(i=0;i<t;i++){let t=I[o[i]],r=t.pattern;if(c=null,!0===t.isCustom?(y=r.exec(x,T,k,S),null!==y?(a=y[0],void 0!==y.payload&&(c=y.payload)):a=null):(this.updateLastIndex(r,T),a=this.match(r,e,T)),a&&a.length>l.length){l=a,u=c,z=t;break}}}break}}if(null!==l){if(h=l.length,d=z.group,void 0!==d&&(f=z.tokenTypeIdx,p=this.createTokenInstance(l,T,f,z.tokenType,_,A,h),this.handlePayload(p,u),!1===d?C=this.addToken(k,C,p):S[d].push(p)),e=this.chopInput(e,h),T+=h,A=this.computeNewColumn(A,h),!0===R&&!0===z.canLineTerminator){let e,t,r=0;N.lastIndex=0;do{e=N.test(l),!0===e&&(t=N.lastIndex-1,r++)}while(!0===e);0!==r&&(_+=r,A=h-t,this.updateTokenEndLineColumnLocation(p,d,t,r,_,A,h))}this.handleModes(z,F,$,p)}else{let t=T,r=_,i=A,a=!1===U;for(;!1===a&&T<b;)for(e=this.chopInput(e,1),T++,n=0;n<L;n++){let t=I[n],r=t.pattern,i=t.short;if(!1!==i?x.charCodeAt(T)===i&&(a=!0):!0===t.isCustom?a=null!==r.exec(x,T,k,S):(this.updateLastIndex(r,T),a=null!==r.exec(e)),!0===a)break}if(g=T-t,A=this.computeNewColumn(A,g),m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(x,t,g,r,i),E.push({offset:t,line:r,column:i,length:g,message:m}),!1===U)break}}return this.hasCustom||(k.length=C),{tokens:k,groups:S,errors:E}}handleModes(e,t,r,n){if(!0===e.pop){let i=e.push;t(n),void 0!==i&&r.call(this,i)}else void 0!==e.push&&r.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,r,n,i,a,o){let s,l;void 0!==t&&(s=r===o-1,l=s?-1:0,1===n&&!0===s||(e.endLine=i+l,e.endColumn=a-1-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,n){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:n}}createStartOnlyToken(e,t,r,n,i,a){return{image:e,startOffset:t,startLine:i,startColumn:a,tokenTypeIdx:r,tokenType:n}}createFullToken(e,t,r,n,i,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:i,endLine:i,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:n}}addTokenUsingPush(e,t,r){return e.push(r),t}addTokenUsingMemberAccess(e,t,r){return e[t]=r,++t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){null!==t&&(e.payload=t)}matchWithTest(e,t,r){return!0===e.test(t)?t.substring(r,e.lastIndex):null}matchWithExec(e,t){let r=e.exec(t);return null!==r?r[0]:null}};function UL(e){return GL(e)?e.LABEL:e.name}function GL(e){return Sk(e.LABEL)&&""!==e.LABEL}zL.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",zL.NA=/NOT_APPLICABLE/,s(UL,"tokenLabel"),s(GL,"hasTokenLabel");var jL="categories",VL="label",WL="group",HL="push_mode",qL="pop_mode",YL="longer_alt",XL="line_breaks",KL="start_chars_hint";function ZL(e){return QL(e)}function QL(e){let t=e.pattern,r={};if(r.name=e.name,SC(t)||(r.PATTERN=t),_k(e,"parent"))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return _k(e,jL)&&(r.CATEGORIES=e[jL]),_L([r]),_k(e,VL)&&(r.LABEL=e[VL]),_k(e,WL)&&(r.GROUP=e[WL]),_k(e,qL)&&(r.POP_MODE=e[qL]),_k(e,HL)&&(r.PUSH_MODE=e[HL]),_k(e,YL)&&(r.LONGER_ALT=e[YL]),_k(e,XL)&&(r.LINE_BREAKS=e[XL]),_k(e,KL)&&(r.START_CHARS_HINT=e[KL]),r}s(ZL,"createToken"),s(QL,"createTokenInternal");var JL=ZL({name:"EOF",pattern:zL.NA});function eI(e,t,r,n,i,a,o,s){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:a,startColumn:o,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function tI(e,t){return CL(e,t)}_L([JL]),s(eI,"createTokenInstance"),s(tI,"tokenMatcher");var rI={buildMismatchTokenMessage:({expected:e,actual:t,previous:r,ruleName:n})=>`Expecting ${GL(e)?`--\x3e ${UL(e)} <--`:`token of type --\x3e ${e.name} <--`} but found --\x3e '${t.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:e,ruleName:t})=>"Redundant input, expecting EOF but found: "+e.image,buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:i}){let a="Expecting: ",o="\nbut found: '"+mk(t).image+"'";if(n)return a+n+o;{let t=QC(e,((e,t)=>e.concat(t)),[]),r=CC(t,(e=>`[${CC(e,(e=>UL(e))).join(", ")}]`)),n=`one of these possible Token sequences:\n${CC(r,((e,t)=>`  ${t+1}. ${e}`)).join("\n")}`;return a+n+o}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){let i="Expecting: ",a="\nbut found: '"+mk(t).image+"'";if(r)return i+r+a;{let t=`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${CC(e,(e=>`[${CC(e,(e=>UL(e))).join(",")}]`)).join(" ,")}>`;return i+t+a}}};Object.freeze(rI);var nI={buildRuleNotFoundError:(e,t)=>"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"},iI={buildDuplicateFoundError(e,t){function r(e){return e instanceof sN?e.terminalType.name:e instanceof QR?e.nonTerminalName:""}s(r,"getExtraProductionArgument");let n=e.name,i=mk(t),a=i.idx,o=pN(i),l=r(i),u=`->${o}${a>0?a:""}<- ${l?`with argument: ->${l}<-`:""}\n                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,"\n"),u},buildNamespaceConflictError:e=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(e){let t=CC(e.prefixPath,(e=>UL(e))).join(", "),r=0===e.alternation.idx?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(e){let t=CC(e.prefixPath,(e=>UL(e))).join(", "),r=0===e.alternation.idx?"":e.alternation.idx,n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return n+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",n},buildEmptyRepetitionError(e){let t=pN(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:e=>"deprecated",buildEmptyAlternationError:e=>`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:e=>`An Alternation cannot have more than 256 alternatives:\n<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n has ${e.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(e){let t=e.topLevelRule.name,r=CC(e.leftRecursionPath,(e=>e.name));return`Left Recursion found in grammar.\nrule: <${t}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${`${t} --\x3e ${r.concat([t]).join(" --\x3e ")}`}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:e=>"deprecated",buildDuplicateRuleNameError(e){let t;return t=e.topLevelRule instanceof JR?e.topLevelRule.name:e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function aI(e,t){let r=new sI(e,t);return r.resolveRefs(),r.errors}s(aI,"resolveGrammar");var oI,sI=class extends cN{static{s(this,"GastRefResolverVisitor")}constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){Fb(_C(this.nameToTopRule),(e=>{this.currTopLevel=e,e.accept(this)}))}visitNonTerminal(e){let t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{let t=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:t,type:tO.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}},lI=class extends gN{static{s(this,"AbstractNextPossibleTokensWalker")}constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=kb(this.path.ruleStack).reverse(),this.occurrenceStack=kb(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let n=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,n)}}updateExpectedNext(){vx(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},uI=class extends lI{static{s(this,"NextAfterTokenWalker")}constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let e=t.concat(r),n=new eN({definition:e});this.possibleTokTypes=yN(n),this.found=!0}}},cI=class extends gN{static{s(this,"AbstractNextTerminalAfterProductionWalker")}constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},hI=class extends cI{static{s(this,"NextTerminalAfterManyWalker")}walkMany(e,t,r){if(e.idx===this.occurrence){let e=mk(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof sN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkMany(e,t,r)}},dI=class extends cI{static{s(this,"NextTerminalAfterManySepWalker")}walkManySep(e,t,r){if(e.idx===this.occurrence){let e=mk(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof sN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkManySep(e,t,r)}},fI=class extends cI{static{s(this,"NextTerminalAfterAtLeastOneWalker")}walkAtLeastOne(e,t,r){if(e.idx===this.occurrence){let e=mk(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof sN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOne(e,t,r)}},pI=class extends cI{static{s(this,"NextTerminalAfterAtLeastOneSepWalker")}walkAtLeastOneSep(e,t,r){if(e.idx===this.occurrence){let e=mk(t.concat(r));this.result.isEndOfRule=void 0===e,e instanceof sN&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOneSep(e,t,r)}};function gI(e,t,r=[]){r=kb(r);let n=[],i=0;function a(t){return t.concat(tk(e,i+1))}function o(e){let i=gI(a(e),t,r);return n.concat(i)}for(s(a,"remainingPathWith"),s(o,"getAlternativesForProd");r.length<t&&i<e.length;){let t=e[i];if(t instanceof eN)return o(t.definition);if(t instanceof QR)return o(t.definition);if(t instanceof tN)n=o(t.definition);else{if(t instanceof rN){return o(t.definition.concat([new iN({definition:t.definition})]))}if(t instanceof nN){return o([new eN({definition:t.definition}),new iN({definition:[new sN({terminalType:t.separator})].concat(t.definition)})])}if(t instanceof aN){let e=t.definition.concat([new iN({definition:[new sN({terminalType:t.separator})].concat(t.definition)})]);n=o(e)}else if(t instanceof iN){let e=t.definition.concat([new iN({definition:t.definition})]);n=o(e)}else{if(t instanceof oN)return Fb(t.definition,(e=>{!1===vx(e.definition)&&(n=o(e.definition))})),n;if(!(t instanceof sN))throw Error("non exhaustive match");r.push(t.terminalType)}}i++}return n.push({partialPath:r,suffixDef:tk(e,i)}),n}function mI(e,t,r,n){let i="EXIT_NONE_TERMINAL",a=[i],o="EXIT_ALTERNATIVE",s=!1,l=t.length,u=l-n-1,c=[],h=[];for(h.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!vx(h);){let e=h.pop();if(e===o){s&&Nb(h).idx<=u&&h.pop();continue}let n=e.def,d=e.idx,f=e.ruleStack,p=e.occurrenceStack;if(vx(n))continue;let g=n[0];if(g===i){let e={idx:d,def:tk(n),ruleStack:nk(f),occurrenceStack:nk(p)};h.push(e)}else if(g instanceof sN)if(d<l-1){let e=d+1;if(r(t[e],g.terminalType)){let t={idx:e,def:tk(n),ruleStack:f,occurrenceStack:p};h.push(t)}}else{if(d!==l-1)throw Error("non exhaustive match");c.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:f,occurrenceStack:p}),s=!0}else if(g instanceof QR){let e=kb(f);e.push(g.nonTerminalName);let t=kb(p);t.push(g.idx);let r={idx:d,def:g.definition.concat(a,tk(n)),ruleStack:e,occurrenceStack:t};h.push(r)}else if(g instanceof tN){let e={idx:d,def:tk(n),ruleStack:f,occurrenceStack:p};h.push(e),h.push(o);let t={idx:d,def:g.definition.concat(tk(n)),ruleStack:f,occurrenceStack:p};h.push(t)}else if(g instanceof rN){let e=new iN({definition:g.definition,idx:g.idx}),t={idx:d,def:g.definition.concat([e],tk(n)),ruleStack:f,occurrenceStack:p};h.push(t)}else if(g instanceof nN){let e=new sN({terminalType:g.separator}),t=new iN({definition:[e].concat(g.definition),idx:g.idx}),r={idx:d,def:g.definition.concat([t],tk(n)),ruleStack:f,occurrenceStack:p};h.push(r)}else if(g instanceof aN){let e={idx:d,def:tk(n),ruleStack:f,occurrenceStack:p};h.push(e),h.push(o);let t=new sN({terminalType:g.separator}),r=new iN({definition:[t].concat(g.definition),idx:g.idx}),i={idx:d,def:g.definition.concat([r],tk(n)),ruleStack:f,occurrenceStack:p};h.push(i)}else if(g instanceof iN){let e={idx:d,def:tk(n),ruleStack:f,occurrenceStack:p};h.push(e),h.push(o);let t=new iN({definition:g.definition,idx:g.idx}),r={idx:d,def:g.definition.concat([t],tk(n)),ruleStack:f,occurrenceStack:p};h.push(r)}else if(g instanceof oN)for(let e=g.definition.length-1;e>=0;e--){let t={idx:d,def:g.definition[e].definition.concat(tk(n)),ruleStack:f,occurrenceStack:p};h.push(t),h.push(o)}else if(g instanceof eN)h.push({idx:d,def:g.definition.concat(tk(n)),ruleStack:f,occurrenceStack:p});else{if(!(g instanceof JR))throw Error("non exhaustive match");h.push(yI(g,d,f,p))}}return c}function yI(e,t,r,n){let i=kb(r);i.push(e.name);let a=kb(n);return a.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:a}}function vI(e){if(e instanceof tN||"Option"===e)return oI.OPTION;if(e instanceof iN||"Repetition"===e)return oI.REPETITION;if(e instanceof rN||"RepetitionMandatory"===e)return oI.REPETITION_MANDATORY;if(e instanceof nN||"RepetitionMandatoryWithSeparator"===e)return oI.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof aN||"RepetitionWithSeparator"===e)return oI.REPETITION_WITH_SEPARATOR;if(e instanceof oN||"Alternation"===e)return oI.ALTERNATION;throw Error("non exhaustive match")}function xI(e){let{occurrence:t,rule:r,prodType:n,maxLookahead:i}=e,a=vI(n);return a===oI.ALTERNATION?NI(t,r,i):LI(t,r,a,i)}function bI(e,t,r,n,i,a){let o=NI(e,t,r);return a(o,n,OI(o)?wL:CL,i)}function TI(e,t,r,n,i,a){let o=LI(e,t,i,r),s=OI(o)?wL:CL;return a(o[0],s,n)}function CI(e,t,r,n){let i=e.length,a=uk(e,(e=>uk(e,(e=>1===e.length))));if(t)return function(t){let n=CC(t,(e=>e.GATE));for(let t=0;t<i;t++){let i=e[t],a=i.length,o=n[t];if(void 0===o||!1!==o.call(this))e:for(let e=0;e<a;e++){let n=i[e],a=n.length;for(let e=0;e<a;e++){let t=this.LA(e+1);if(!1===r(t,n[e]))continue e}return t}}};if(a&&!n){let t=CC(e,(e=>WC(e))),r=QC(t,((e,t,r)=>(Fb(t,(t=>{_k(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r),Fb(t.categoryMatches,(t=>{_k(e,t)||(e[t]=r)}))})),e)),{});return function(){let e=this.LA(1);return r[e.tokenTypeIdx]}}return function(){for(let t=0;t<i;t++){let n=e[t],i=n.length;e:for(let e=0;e<i;e++){let i=n[e],a=i.length;for(let e=0;e<a;e++){let t=this.LA(e+1);if(!1===r(t,i[e]))continue e}return t}}}}function wI(e,t,r){let n=uk(e,(e=>1===e.length)),i=e.length;if(n&&!r){let t=WC(e);if(1===t.length&&vx(t[0].categoryMatches)){let e=t[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===e}}{let e=QC(t,((e,t,r)=>(e[t.tokenTypeIdx]=!0,Fb(t.categoryMatches,(t=>{e[t]=!0})),e)),[]);return function(){let t=this.LA(1);return!0===e[t.tokenTypeIdx]}}}return function(){e:for(let r=0;r<i;r++){let n=e[r],i=n.length;for(let e=0;e<i;e++){let r=this.LA(e+1);if(!1===t(r,n[e]))continue e}return!0}return!1}}s(gI,"possiblePathsFrom"),s(mI,"nextPossibleTokensAfter"),s(yI,"expandTopLevelRule"),function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"}(oI||(oI={})),s(vI,"getProdType"),s(xI,"getLookaheadPaths"),s(bI,"buildLookaheadFuncForOr"),s(TI,"buildLookaheadFuncForOptionalProd"),s(CI,"buildAlternativesLookAheadFunc"),s(wI,"buildSingleAlternativeLookaheadFunction");var kI=class extends gN{static{s(this,"RestDefinitionFinderWalker")}constructor(e,t,r){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,r,n){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=r.concat(n),!0)}walkOption(e,t,r){this.checkIsTarget(e,oI.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,oI.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,oI.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,oI.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,oI.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}},EI=class extends cN{static{s(this,"InsideDefinitionFinderVisitor")}constructor(e,t,r){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=r,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(void 0===this.targetRef||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,oI.OPTION)}visitRepetition(e){this.checkIsTarget(e,oI.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,oI.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,oI.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,oI.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,oI.ALTERNATION)}};function _I(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function AI(e){let t=[""];for(let r=0;r<e.length;r++){let n=e[r],i=[];for(let e=0;e<t.length;e++){let r=t[e];i.push(r+"_"+n.tokenTypeIdx);for(let e=0;e<n.categoryMatches.length;e++){let t="_"+n.categoryMatches[e];i.push(r+t)}}t=i}return t}function SI(e,t,r){for(let n=0;n<e.length;n++){if(n===r)continue;let i=e[n];for(let e=0;e<t.length;e++){if(!0===i[t[e]])return!1}}return!0}function RI(e,t){let r=CC(e,(e=>gI([e],1))),n=_I(r.length),i=CC(r,(e=>{let t={};return Fb(e,(e=>{let r=AI(e.partialPath);Fb(r,(e=>{t[e]=!0}))})),t})),a=r;for(let e=1;e<=t;e++){let r=a;a=_I(r.length);for(let o=0;o<r.length;o++){let s=r[o];for(let r=0;r<s.length;r++){let l=s[r].partialPath,u=s[r].suffixDef,c=AI(l);if(SI(i,c,o)||vx(u)||l.length===t){let e=n[o];if(!1===II(e,l)){e.push(l);for(let e=0;e<c.length;e++){let t=c[e];i[o][t]=!0}}}else{let t=gI(u,e+1,l);a[o]=a[o].concat(t),Fb(t,(e=>{let t=AI(e.partialPath);Fb(t,(e=>{i[o][e]=!0}))}))}}}}return n}function NI(e,t,r,n){let i=new EI(e,oI.ALTERNATION,n);return t.accept(i),RI(i.result,r)}function LI(e,t,r,n){let i=new EI(e,r);t.accept(i);let a=i.result,o=new kI(t,e,r).startWalking();return RI([new eN({definition:a}),new eN({definition:o})],n)}function II(e,t){e:for(let r=0;r<e.length;r++){let n=e[r];if(n.length===t.length){for(let e=0;e<n.length;e++){let r=t[e],i=n[e];if(!1==(r===i||void 0!==i.categoryMatchesMap[r.tokenTypeIdx]))continue e}return!0}}return!1}function MI(e,t){return e.length<t.length&&uk(e,((e,r)=>{let n=t[r];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]}))}function OI(e){return uk(e,(e=>uk(e,(e=>uk(e,(e=>vx(e.categoryMatches)))))))}function PI(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return CC(t,(e=>Object.assign({type:tO.CUSTOM_LOOKAHEAD_VALIDATION},e)))}function DI(e,t,r,n){let i=vk(e,(e=>BI(e,r))),a=JI(e,t,r),o=vk(e,(e=>XI(e,r))),s=vk(e,(t=>UI(t,e,n,r)));return i.concat(a,o,s)}function BI(e,t){let r=new zI;e.accept(r);let n=r.allProductions,i=Tk(n,FI),a=Hk(i,(e=>e.length>1));return CC(_C(a),(r=>{let n=mk(r),i=t.buildDuplicateFoundError(e,r),a=pN(n),o={message:i,type:tO.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:n.idx},s=$I(n);return s&&(o.parameter=s),o}))}function FI(e){return`${pN(e)}_#_${e.idx}_#_${$I(e)}`}function $I(e){return e instanceof sN?e.terminalType.name:e instanceof QR?e.nonTerminalName:""}s(_I,"initializeArrayOfArrays"),s(AI,"pathToHashKeys"),s(SI,"isUniquePrefixHash"),s(RI,"lookAheadSequenceFromAlternatives"),s(NI,"getLookaheadPathsForOr"),s(LI,"getLookaheadPathsForOptionalProd"),s(II,"containsPath"),s(MI,"isStrictPrefixOfPath"),s(OI,"areTokenCategoriesNotUsed"),s(PI,"validateLookahead"),s(DI,"validateGrammar"),s(BI,"validateDuplicateProductions"),s(FI,"identifyProductionForDuplicates"),s($I,"getExtraProductionArgument");var zI=class extends cN{static{s(this,"OccurrenceValidationCollector")}constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function UI(e,t,r,n){let i=[];if(QC(t,((t,r)=>r.name===e.name?t+1:t),0)>1){let t=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:t,type:tO.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function GI(e,t,r){let n,i=[];return Lk(t,e)||(n=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,i.push({message:n,type:tO.INVALID_RULE_OVERRIDE,ruleName:e})),i}function jI(e,t,r,n=[]){let i=[],a=VI(t.definition);if(vx(a))return[];{let t=e.name;Lk(a,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:tO.LEFT_RECURSION,ruleName:t});let o=Jw(a,n.concat([e])),s=vk(o,(t=>{let i=kb(n);return i.push(t),jI(e,t,r,i)}));return i.concat(s)}}function VI(e){let t=[];if(vx(e))return t;let r=mk(e);if(r instanceof QR)t.push(r.referencedRule);else if(r instanceof eN||r instanceof tN||r instanceof rN||r instanceof nN||r instanceof aN||r instanceof iN)t=t.concat(VI(r.definition));else if(r instanceof oN)t=WC(CC(r.definition,(e=>VI(e.definition))));else if(!(r instanceof sN))throw Error("non exhaustive match");let n=dN(r),i=e.length>1;if(n&&i){let r=tk(e);return t.concat(VI(r))}return t}s(UI,"validateRuleDoesNotAlreadyExist"),s(GI,"validateRuleIsOverridden"),s(jI,"validateNoLeftRecursion"),s(VI,"getFirstNoneTerminal");var WI=class extends cN{static{s(this,"OrCollector")}constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function HI(e,t){let r=new WI;e.accept(r);let n=r.alternations;return vk(n,(r=>{let n=nk(r.definition);return vk(n,((n,i)=>{let a=mI([n],[],CL,1);return vx(a)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:i}),type:tO.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:r.idx,alternative:i+1}]:[]}))}))}function qI(e,t,r){let n=new WI;e.accept(n);let i=n.alternations;return i=wE(i,(e=>!0===e.ignoreAmbiguities)),vk(i,(n=>{let i=n.idx,a=n.maxLookahead||t,o=NI(i,e,a,n),s=ZI(o,n,e,r),l=QI(o,n,e,r);return s.concat(l)}))}s(HI,"validateEmptyOrAlternative"),s(qI,"validateAmbiguousAlternationAlternatives");var YI=class extends cN{static{s(this,"RepetitionCollector")}constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function XI(e,t){let r=new WI;e.accept(r);let n=r.alternations;return vk(n,(r=>r.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:tO.TOO_MANY_ALTS,ruleName:e.name,occurrence:r.idx}]:[]))}function KI(e,t,r){let n=[];return Fb(e,(e=>{let i=new YI;e.accept(i);let a=i.allProductions;Fb(a,(i=>{let a=vI(i),o=i.maxLookahead||t,s=LI(i.idx,e,a,o)[0];if(vx(WC(s))){let t=r.buildEmptyRepetitionError({topLevelRule:e,repetition:i});n.push({message:t,type:tO.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}}))})),n}function ZI(e,t,r,n){let i=[],a=QC(e,((r,n,a)=>(!0===t.definition[a].ignoreAmbiguities||Fb(n,(n=>{let o=[a];Fb(e,((e,r)=>{a!==r&&II(e,n)&&!0!==t.definition[r].ignoreAmbiguities&&o.push(r)})),o.length>1&&!II(i,n)&&(i.push(n),r.push({alts:o,path:n}))})),r)),[]);return CC(a,(e=>{let i=CC(e.alts,(e=>e+1));return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:tO.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:e.alts}}))}function QI(e,t,r,n){let i=QC(e,((e,t,r)=>{let n=CC(t,(e=>({idx:r,path:e})));return e.concat(n)}),[]);return jw(vk(i,(e=>{if(!0===t.definition[e.idx].ignoreAmbiguities)return[];let a=e.idx,o=e.path,s=vC(i,(e=>!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<a&&MI(e.path,o)));return CC(s,(e=>{let i=[e.idx+1,a+1],o=0===t.idx?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:tO.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:o,alternatives:i}}))})))}function JI(e,t,r){let n=[],i=CC(t,(e=>e.name));return Fb(e,(e=>{let t=e.name;if(Lk(i,t)){let i=r.buildNamespaceConflictError(e);n.push({message:i,type:tO.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}})),n}function eM(e){let t=Sb(e,{errMsgProvider:nI}),r={};return Fb(e.rules,(e=>{r[e.name]=e})),aI(r,t.errMsgProvider)}function tM(e){return DI((e=Sb(e,{errMsgProvider:iI})).rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}s(XI,"validateTooManyAlts"),s(KI,"validateSomeNonEmptyLookaheadPath"),s(ZI,"checkAlternativesAmbiguities"),s(QI,"checkPrefixAlternativesAmbiguities"),s(JI,"checkTerminalAndNoneTerminalsNameSpace"),s(eM,"resolveGrammar"),s(tM,"validateGrammar");var rM="MismatchedTokenException",nM="NoViableAltException",iM="EarlyExitException",aM="NotAllInputParsedException",oM=[rM,nM,iM,aM];function sM(e){return Lk(oM,e.name)}Object.freeze(oM),s(sM,"isRecognitionException");var lM=class extends Error{static{s(this,"RecognitionException")}constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},uM=class extends lM{static{s(this,"MismatchedTokenException")}constructor(e,t,r){super(e,t),this.previousToken=r,this.name=rM}},cM=class extends lM{static{s(this,"NoViableAltException")}constructor(e,t,r){super(e,t),this.previousToken=r,this.name=nM}},hM=class extends lM{static{s(this,"NotAllInputParsedException")}constructor(e,t){super(e,t),this.name=aM}},dM=class extends lM{static{s(this,"EarlyExitException")}constructor(e,t,r){super(e,t),this.previousToken=r,this.name=iM}},fM={},pM="InRuleRecoveryException",gM=class extends Error{static{s(this,"InRuleRecoveryException")}constructor(e){super(e),this.name=pM}},mM=class{static{s(this,"Recoverable")}initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=_k(e,"recoveryEnabled")?e.recoveryEnabled:rO.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=yM)}getTokenToInsert(e){let t=eI(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,n){let i=this.findReSyncTokenType(),a=this.exportLexerState(),o=[],l=!1,u=this.LA(1),c=this.LA(1),h=s((()=>{let e=this.LA(0),t=this.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:u,previous:e,ruleName:this.getCurrRuleFullName()}),r=new uM(t,u,this.LA(0));r.resyncedTokens=nk(o),this.SAVE_ERROR(r)}),"generateErrorMessage");for(;!l;){if(this.tokenMatcher(c,n))return void h();if(r.call(this))return h(),void e.apply(this,t);this.tokenMatcher(c,i)?l=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,o))}this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){return!(!1===r||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){let r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let e=this.SKIP_TOKEN();return this.consumeToken(),e}throw new gM("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||vx(t))return!1;let r=this.LA(1);return void 0!==pk(t,(e=>this.tokenMatcher(r,e)))}canRecoverWithSingleTokenDeletion(e){return!!this.canTokenTypeBeDeletedInRecovery(e)&&this.tokenMatcher(this.LA(2),e)}isInCurrentRuleReSyncSet(e){let t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return Lk(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),t=this.LA(1),r=2;for(;;){let n=pk(e,(e=>tI(t,e)));if(void 0!==n)return n;t=this.LA(r),r++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return fM;let e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return CC(e,((r,n)=>0===n?fM:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[n],inRule:this.shortRuleNameToFullName(e[n-1])}))}flattenFollowSet(){let e=CC(this.buildFullFollowKeyStack(),(e=>this.getFollowSetFromFollowKey(e)));return WC(e)}getFollowSetFromFollowKey(e){if(e===fM)return[JL];let t=e.ruleName+e.idxInCallingRule+TN+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,JL)||t.push(e),t}reSyncTo(e){let t=[],r=this.LA(1);for(;!1===this.tokenMatcher(r,e);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return nk(t)}attemptInRepetitionRecovery(e,t,r,n,i,a,o){}getCurrentGrammarPath(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:kb(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return CC(this.RULE_STACK,(e=>this.shortRuleNameToFullName(e)))}};function yM(e,t,r,n,i,a,o){let s=this.getKeyForAutomaticLookahead(n,i),l=this.firstAfterRepMap[s];if(void 0===l){let e=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[e],i).startWalking(),this.firstAfterRepMap[s]=l}let u=l.token,c=l.occurrence,h=l.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===u&&(u=JL,c=1),void 0!==u&&void 0!==c&&this.shouldInRepetitionRecoveryBeTried(u,c,o)&&this.tryInRepetitionRecovery(e,t,r,u)}function vM(e,t,r){return r|t|e}s(yM,"attemptInRepetitionRecovery"),s(vM,"getKeyForAutomaticLookahead");var xM=class{static{s(this,"LLkLookaheadStrategy")}constructor(e){var t;this.maxLookahead=null!==(t=e?.maxLookahead)&&void 0!==t?t:rO.maxLookahead}validate(e){let t=this.validateNoLeftRecursion(e.rules);if(vx(t)){let r=this.validateEmptyOrAlternatives(e.rules),n=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...r,...n,...i]}return t}validateNoLeftRecursion(e){return vk(e,(e=>jI(e,e,iI)))}validateEmptyOrAlternatives(e){return vk(e,(e=>HI(e,iI)))}validateAmbiguousAlternationAlternatives(e,t){return vk(e,(e=>qI(e,t,iI)))}validateSomeNonEmptyLookaheadPath(e,t){return KI(e,t,iI)}buildLookaheadForAlternation(e){return bI(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,CI)}buildLookaheadForOptional(e){return TI(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,vI(e.prodType),wI)}},bM=class{static{s(this,"LooksAhead")}initLooksAhead(e){this.dynamicTokensEnabled=_k(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:rO.dynamicTokensEnabled,this.maxLookahead=_k(e,"maxLookahead")?e.maxLookahead:rO.maxLookahead,this.lookaheadStrategy=_k(e,"lookaheadStrategy")?e.lookaheadStrategy:new xM({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){Fb(e,(e=>{this.TRACE_INIT(`${e.name} Rule Lookahead`,(()=>{let{alternation:t,repetition:r,option:n,repetitionMandatory:i,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:o}=wM(e);Fb(t,(t=>{let r=0===t.idx?"":t.idx;this.TRACE_INIT(`${pN(t)}${r}`,(()=>{let r=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:t.idx,rule:e,maxLookahead:t.maxLookahead||this.maxLookahead,hasPredicates:t.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),n=vM(this.fullRuleNameToShort[e.name],256,t.idx);this.setLaFuncCache(n,r)}))})),Fb(r,(t=>{this.computeLookaheadFunc(e,t.idx,768,"Repetition",t.maxLookahead,pN(t))})),Fb(n,(t=>{this.computeLookaheadFunc(e,t.idx,512,"Option",t.maxLookahead,pN(t))})),Fb(i,(t=>{this.computeLookaheadFunc(e,t.idx,1024,"RepetitionMandatory",t.maxLookahead,pN(t))})),Fb(a,(t=>{this.computeLookaheadFunc(e,t.idx,1536,"RepetitionMandatoryWithSeparator",t.maxLookahead,pN(t))})),Fb(o,(t=>{this.computeLookaheadFunc(e,t.idx,1280,"RepetitionWithSeparator",t.maxLookahead,pN(t))}))}))}))}computeLookaheadFunc(e,t,r,n,i,a){this.TRACE_INIT(`${a}${0===t?"":t}`,(()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:n}),o=vM(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(o,a)}))}getKeyForAutomaticLookahead(e,t){return vM(this.getLastExplicitRuleShortName(),e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}},TM=class extends cN{static{s(this,"DslMethodsCollectorVisitor")}constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},CM=new TM;function wM(e){CM.reset(),e.accept(CM);let t=CM.dslMethods;return CM.reset(),t}function kM(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function EM(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function _M(e,t,r){void 0===e.children[r]?e.children[r]=[t]:e.children[r].push(t)}function AM(e,t,r){void 0===e.children[t]?e.children[t]=[r]:e.children[t].push(r)}s(wM,"collectMethods"),s(kM,"setNodeLocationOnlyOffset"),s(EM,"setNodeLocationFull"),s(_M,"addTerminalToCst"),s(AM,"addNoneTerminalToCst");var SM;function RM(e,t){Object.defineProperty(e,"name",{enumerable:!1,configurable:!0,writable:!1,value:t})}function NM(e,t){let r=bx(e),n=r.length;for(let i=0;i<n;i++){let n=e[r[i]],a=n.length;for(let e=0;e<a;e++){let r=n[e];void 0===r.tokenTypeIdx&&this[r.name](r.children,t)}}}function LM(e,t){let r=s((function(){}),"derivedConstructor");RM(r,e+"BaseSemantics");let n={visit:s((function(e,t){if(Ey(e)&&(e=e[0]),!SC(e))return this[e.name](e.children,t)}),"visit"),validateVisitor:s((function(){let e=MM(this,t);if(!vx(e)){let t=CC(e,(e=>e.msg));throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${t.join("\n\n").replace(/\n/g,"\n\t")}`)}}),"validateVisitor")};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=t,r}function IM(e,t,r){let n=s((function(){}),"derivedConstructor");RM(n,e+"BaseSemanticsWithDefaults");let i=Object.create(r.prototype);return Fb(t,(e=>{i[e]=NM})),n.prototype=i,n.prototype.constructor=n,n}function MM(e,t){return OM(e,t)}function OM(e,t){let r=vC(t,(t=>!1===sg(e[t]))),n=CC(r,(t=>({msg:`Missing visitor method: <${t}> on ${e.constructor.name} CST Visitor.`,type:SM.MISSING_METHOD,methodName:t})));return jw(n)}s(RM,"defineNameProp"),s(NM,"defaultVisit"),s(LM,"createBaseSemanticVisitorConstructor"),s(IM,"createBaseVisitorConstructorWithDefaults"),function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"}(SM||(SM={})),s(MM,"validateVisitor"),s(OM,"validateMissingCstMethods");var PM=class{static{s(this,"TreeBuilder")}initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=_k(e,"nodeLocationTracking")?e.nodeLocationTracking:rO.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=EM,this.setNodeLocationFromNode=EM,this.cstPostRule=dw,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=dw,this.setNodeLocationFromNode=dw,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=kM,this.setNodeLocationFromNode=kM,this.cstPostRule=dw,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=dw,this.setNodeLocationFromNode=dw,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`);this.setNodeLocationFromToken=dw,this.setNodeLocationFromNode=dw,this.cstPostRule=dw,this.setInitialNodeLocation=dw}else this.cstInvocationStateUpdate=dw,this.cstFinallyStateUpdate=dw,this.cstPostTerminal=dw,this.cstPostNonTerminal=dw,this.cstPostRule=dw}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?r.endOffset=t.endOffset:r.startOffset=NaN}cstPostTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];_M(r,t,e),this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];AM(r,t,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(SC(this.baseCstVisitorConstructor)){let e=LM(this.className,bx(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(SC(this.baseCstVisitorWithDefaultsConstructor)){let e=IM(this.className,bx(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}},DM=class{static{s(this,"LexerAdapter")}initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):eO}LA(e){let t=this.currIdx+e;return t<0||this.tokVectorLength<=t?eO:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},BM=class{static{s(this,"RecognizerApi")}ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=nO){if(Lk(this.definedRulesNames,e)){let t={message:iI.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:tO.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(t)}this.definedRulesNames.push(e);let n=this.defineRule(e,t,r);return this[e]=n,n}OVERRIDE_RULE(e,t,r=nO){let n=GI(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(n);let i=this.defineRule(e,t,r);return this[e]=i,i}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,t),!0}catch(e){if(sM(e))return!1;throw e}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return lN(_C(this.gastProductionsCache))}},FM=class{static{s(this,"RecognizerEngine")}initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=wL,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},_k(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(Ey(e)){if(vx(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(Ey(e))this.tokensMap=QC(e,((e,t)=>(e[t.name]=t,e)),{});else if(_k(e,"modes")&&uk(WC(_C(e.modes)),DL)){let t=WC(_C(e.modes)),r=RE(t);this.tokensMap=QC(r,((e,t)=>(e[t.name]=t,e)),{})}else{if(!ag(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=kb(e)}this.tokensMap.EOF=JL;let r=_k(e,"modes")?WC(_C(e.modes)):_C(e),n=uk(r,(e=>vx(e.categoryMatches)));this.tokenMatcher=n?wL:CL,_L(_C(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let n,i=_k(r,"resyncEnabled")?r.resyncEnabled:nO.resyncEnabled,a=_k(r,"recoveryValueFunc")?r.recoveryValueFunc:nO.recoveryValueFunc,o=this.ruleShortNameIdx<<12;return this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o,n=!0===this.outputCst?s((function(...r){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,r);let n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}catch(e){return this.invokeRuleCatch(e,i,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTry"):s((function(...r){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,r)}catch(e){return this.invokeRuleCatch(e,i,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTryCst"),Object.assign(n,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,r){let n=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if(sM(e)){let t=e;if(i){let n=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(n)){if(t.resyncedTokens=this.reSyncTo(n),this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];return e.recoveredNode=!0,e}return r(e)}if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0,t.partialCstResult=e}throw t}if(n)return this.moveToTerminatedState(),r(e);throw t}throw e}optionInternal(e,t){let r=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(e,t,r){let n,i=this.getLaFuncFromCache(r);if("function"!=typeof e){n=e.DEF;let t=e.GATE;if(void 0!==t){let e=i;i=s((()=>t.call(this)&&e.call(this)),"lookAheadFunc")}}else n=e;if(!0===i.call(this))return n.call(this)}atLeastOneInternal(e,t){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(e,t,r){let n,i=this.getLaFuncFromCache(r);if("function"!=typeof t){n=t.DEF;let e=t.GATE;if(void 0!==e){let t=i;i=s((()=>e.call(this)&&t.call(this)),"lookAheadFunc")}}else n=t;if(!0!==i.call(this))throw this.raiseEarlyExitException(e,oI.REPETITION_MANDATORY,t.ERR_MSG);{let e=this.doSingleRepetition(n);for(;!0===i.call(this)&&!0===e;)e=this.doSingleRepetition(n)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,1024,e,fI)}atLeastOneSepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){let n=t.DEF,i=t.SEP;if(!0!==this.getLaFuncFromCache(r).call(this))throw this.raiseEarlyExitException(e,oI.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);{n.call(this);let t=s((()=>this.tokenMatcher(this.LA(1),i)),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,t,n,pI],t,1536,e,pI)}}manyInternal(e,t){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(e,t,r){let n,i=this.getLaFuncFromCache(r);if("function"!=typeof t){n=t.DEF;let e=t.GATE;if(void 0!==e){let t=i;i=s((()=>e.call(this)&&t.call(this)),"lookaheadFunction")}}else n=t;let a=!0;for(;!0===i.call(this)&&!0===a;)a=this.doSingleRepetition(n);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,768,e,hI,a)}manySepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){let n=t.DEF,i=t.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){n.call(this);let t=s((()=>this.tokenMatcher(this.LA(1),i)),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,t,n,dI],t,1280,e,dI)}}repetitionSepSecondInternal(e,t,r,n,i){for(;r();)this.CONSUME(t),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,n,i],r,1536,e,i)}doSingleRepetition(e){let t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){let r=this.getKeyForAutomaticLookahead(256,t),n=Ey(e)?e:e.DEF,i=this.getLaFuncFromCache(r).call(this,n);if(void 0!==i)return n[i].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new hM(t,e))}}subruleInternal(e,t,r){let n;try{let i=void 0!==r?r.ARGS:void 0;return this.subruleIdx=t,n=e.apply(this,i),this.cstPostNonTerminal(n,void 0!==r&&void 0!==r.LABEL?r.LABEL:e.ruleName),n}catch(t){throw this.subruleInternalError(t,r,e.ruleName)}}subruleInternalError(e,t,r){throw sM(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,t,r){let n;try{let t=this.LA(1);!0===this.tokenMatcher(t,e)?(this.consumeToken(),n=t):this.consumeInternalError(e,t,r)}catch(r){n=this.consumeInternalRecovery(e,t,r)}return this.cstPostTerminal(void 0!==r&&void 0!==r.LABEL?r.LABEL:e.name,n),n}consumeInternalError(e,t,r){let n,i=this.LA(0);throw n=void 0!==r&&r.ERR_MSG?r.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new uM(n,t,i))}consumeInternalRecovery(e,t,r){if(!this.recoveryEnabled||"MismatchedTokenException"!==r.name||this.isBackTracking())throw r;{let n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(e){throw e.name===pM?r:e}}}saveRecogState(){let e=this.errors,t=kb(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),JL)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},$M=class{static{s(this,"ErrorHandler")}initErrorHandler(e){this._errors=[],this.errorMessageProvider=_k(e,"errorMessageProvider")?e.errorMessageProvider:rO.errorMessageProvider}SAVE_ERROR(e){if(sM(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:kb(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return kb(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){let n=this.getCurrRuleFullName(),i=LI(e,this.getGAstProductions()[n],t,this.maxLookahead)[0],a=[];for(let e=1;e<=this.maxLookahead;e++)a.push(this.LA(e));let o=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:n});throw this.SAVE_ERROR(new dM(o,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){let r=this.getCurrRuleFullName(),n=NI(e,this.getGAstProductions()[r],this.maxLookahead),i=[];for(let e=1;e<=this.maxLookahead;e++)i.push(this.LA(e));let a=this.LA(0),o=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:n,actual:i,previous:a,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new cM(o,this.LA(1),a))}},zM=class{static{s(this,"ContentAssist")}initContentAssist(){}computeContentAssist(e,t){let r=this.gastProductionsCache[e];if(SC(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return mI([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let t=mk(e.ruleStack),r=this.getGAstProductions()[t];return new uI(r,e).startWalking()}},UM={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(UM);var GM=!0,jM=Math.pow(2,8)-1,VM=ZL({name:"RECORDING_PHASE_TOKEN",pattern:zL.NA});_L([VM]);var WM=eI(VM,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(WM);var HM={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},qM=class{static{s(this,"GastRecorder")}initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(t,r){return this.consumeInternalRecord(t,e,r)},this[`SUBRULE${t}`]=function(t,r){return this.subruleInternalRecord(t,e,r)},this[`OPTION${t}`]=function(t){return this.optionInternalRecord(t,e)},this[`OR${t}`]=function(t){return this.orInternalRecord(t,e)},this[`MANY${t}`]=function(t){this.manyInternalRecord(e,t)},this[`MANY_SEP${t}`]=function(t){this.manySepFirstInternalRecord(e,t)},this[`AT_LEAST_ONE${t}`]=function(t){this.atLeastOneInternalRecord(e,t)},this[`AT_LEAST_ONE_SEP${t}`]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}}this.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},this.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD}))}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(()=>{let e=this;for(let t=0;t<10;t++){let r=t>0?t:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA}))}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return eO}topLevelRuleRecord(e,t){try{let r=new JR({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(e){if(!0!==e.KNOWN_RECORDER_ERROR)try{e.message=e.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch{throw e}throw e}}optionInternalRecord(e,t){return YM.call(this,tN,e,t)}atLeastOneInternalRecord(e,t){YM.call(this,rN,t,e)}atLeastOneSepFirstInternalRecord(e,t){YM.call(this,nN,t,e,GM)}manyInternalRecord(e,t){YM.call(this,iN,t,e)}manySepFirstInternalRecord(e,t){YM.call(this,aN,t,e,GM)}orInternalRecord(e,t){return XM.call(this,e,t)}subruleInternalRecord(e,t,r){if(ZM(t),!e||!1===_k(e,"ruleName")){let r=new Error(`<SUBRULE${KM(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let n=Nb(this.recordingProdStack),i=e.ruleName,a=new QR({idx:t,nonTerminalName:i,label:r?.LABEL,referencedRule:void 0});return n.definition.push(a),this.outputCst?HM:UM}consumeInternalRecord(e,t,r){if(ZM(t),!IL(e)){let r=new Error(`<CONSUME${KM(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let n=Nb(this.recordingProdStack),i=new sN({idx:t,terminalType:e,label:r?.LABEL});return n.definition.push(i),WM}};function YM(e,t,r,n=!1){ZM(r);let i=Nb(this.recordingProdStack),a=sg(t)?t:t.DEF,o=new e({definition:[],idx:r});return n&&(o.separator=t.SEP),_k(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(o),a.call(this),i.definition.push(o),this.recordingProdStack.pop(),UM}function XM(e,t){ZM(t);let r=Nb(this.recordingProdStack),n=!1===Ey(e),i=!1===n?e:e.DEF,a=new oN({definition:[],idx:t,ignoreAmbiguities:n&&!0===e.IGNORE_AMBIGUITIES});_k(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD);let o=AE(i,(e=>sg(e.GATE)));return a.hasPredicates=o,r.definition.push(a),Fb(i,(e=>{let t=new eN({definition:[]});a.definition.push(t),_k(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:_k(e,"GATE")&&(t.ignoreAmbiguities=!0),this.recordingProdStack.push(t),e.ALT.call(this),this.recordingProdStack.pop()})),UM}function KM(e){return 0===e?"":`${e}`}function ZM(e){if(e<0||e>jM){let t=new Error(`Invalid DSL Method idx value: <${e}>\n\tIdx value must be a none negative value smaller than ${jM+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}s(YM,"recordProd"),s(XM,"recordOrProd"),s(KM,"getIdxSuffix"),s(ZM,"assertMethodIdxIsValid");var QM=class{static{s(this,"PerformanceTracer")}initPerformanceTracer(e){if(_k(e,"traceInitPerf")){let t=e.traceInitPerf,r="number"==typeof t;this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=rO.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:i}=qR(t),a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${n}ms`),this.traceInitIndent--,i}return t()}};function JM(e,t){t.forEach((t=>{let r=t.prototype;Object.getOwnPropertyNames(r).forEach((n=>{if("constructor"===n)return;let i=Object.getOwnPropertyDescriptor(r,n);i&&(i.get||i.set)?Object.defineProperty(e.prototype,n,i):e.prototype[n]=t.prototype[n]}))}))}s(JM,"applyMixins");var eO=eI(JL,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(eO);var tO,rO=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:rI,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),nO=Object.freeze({recoveryValueFunc:s((()=>{}),"recoveryValueFunc"),resyncEnabled:!0});function iO(e=void 0){return function(){return e}}!function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"}(tO||(tO={})),s(iO,"EMPTY_ALT");var aO=class e{static{s(this,"Parser")}static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",(()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",(()=>{YR(this)})),this.TRACE_INIT("Grammar Recording",(()=>{try{this.enableRecording(),Fb(this.definedRulesNames,(e=>{let t,r=this[e].originalGrammarAction;this.TRACE_INIT(`${e} Rule`,(()=>{t=this.topLevelRuleRecord(e,r)})),this.gastProductionsCache[e]=t}))}finally{this.disableRecording()}}));let n=[];if(this.TRACE_INIT("Grammar Resolving",(()=>{n=eM({rules:_C(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)})),this.TRACE_INIT("Grammar Validations",(()=>{if(vx(n)&&!1===this.skipValidations){let e=tM({rules:_C(this.gastProductionsCache),tokenTypes:_C(this.tokensMap),errMsgProvider:iI,grammarName:r}),t=PI({lookaheadStrategy:this.lookaheadStrategy,rules:_C(this.gastProductionsCache),tokenTypes:_C(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(e,t)}})),vx(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",(()=>{let e=wN(_C(this.gastProductionsCache));this.resyncFollows=e})),this.TRACE_INIT("ComputeLookaheadFunctions",(()=>{var e,t;null===(t=(e=this.lookaheadStrategy).initialize)||void 0===t||t.call(e,{rules:_C(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(_C(this.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!vx(this.definitionErrors))throw t=CC(this.definitionErrors,(e=>e.message)),new Error(`Parser Definition Errors detected:\n ${t.join("\n-------------------------------\n")}`)}))}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(t),r.initLexerAdapter(),r.initLooksAhead(t),r.initRecognizerEngine(e,t),r.initRecoverable(t),r.initTreeBuilder(t),r.initContentAssist(),r.initGastRecorder(t),r.initPerformanceTracer(t),_k(t,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=_k(t,"skipValidations")?t.skipValidations:rO.skipValidations}};aO.DEFER_DEFINITION_ERRORS_HANDLING=!1,JM(aO,[mM,bM,PM,DM,FM,BM,$M,zM,qM,QM]);var oO=class extends aO{static{s(this,"EmbeddedActionsParser")}constructor(e,t=rO){let r=kb(t);r.outputCst=!1,super(e,r)}};function sO(e,t,r){return`${e.name}_${t}_${r}`}s(sO,"buildATNKey");var lO=class{static{s(this,"AbstractTransition")}constructor(e){this.target=e}isEpsilon(){return!1}},uO=class extends lO{static{s(this,"AtomTransition")}constructor(e,t){super(e),this.tokenType=t}},cO=class extends lO{static{s(this,"EpsilonTransition")}constructor(e){super(e)}isEpsilon(){return!0}},hO=class extends lO{static{s(this,"RuleTransition")}constructor(e,t,r){super(e),this.rule=t,this.followState=r}isEpsilon(){return!0}};function dO(e){let t={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};fO(t,e);let r=e.length;for(let n=0;n<r;n++){let r=e[n],i=TO(t,r,r);void 0!==i&&LO(t,r,i)}return t}function fO(e,t){let r=t.length;for(let n=0;n<r;n++){let r=t[n],i=MO(e,r,void 0,{type:2}),a=MO(e,r,void 0,{type:7});i.stop=a,e.ruleToStartState.set(r,i),e.ruleToStopState.set(r,a)}}function pO(e,t,r){return r instanceof sN?RO(e,t,r.terminalType,r):r instanceof QR?NO(e,t,r):r instanceof oN?xO(e,t,r):r instanceof tN?bO(e,t,r):r instanceof iN?gO(e,t,r):r instanceof aN?mO(e,t,r):r instanceof rN?yO(e,t,r):r instanceof nN?vO(e,t,r):TO(e,t,r)}function gO(e,t,r){let n=MO(e,t,r,{type:5});return EO(e,n),wO(e,t,r,_O(e,t,n,r,TO(e,t,r)))}function mO(e,t,r){let n=MO(e,t,r,{type:5});return EO(e,n),wO(e,t,r,_O(e,t,n,r,TO(e,t,r)),RO(e,t,r.separator,r))}function yO(e,t,r){let n=MO(e,t,r,{type:4});return EO(e,n),CO(e,t,r,_O(e,t,n,r,TO(e,t,r)))}function vO(e,t,r){let n=MO(e,t,r,{type:4});return EO(e,n),CO(e,t,r,_O(e,t,n,r,TO(e,t,r)),RO(e,t,r.separator,r))}function xO(e,t,r){let n=MO(e,t,r,{type:1});EO(e,n);let i=CC(r.definition,(r=>pO(e,t,r)));return _O(e,t,n,r,...i)}function bO(e,t,r){let n=MO(e,t,r,{type:1});return EO(e,n),kO(e,t,r,_O(e,t,n,r,TO(e,t,r)))}function TO(e,t,r){let n=vC(CC(r.definition,(r=>pO(e,t,r))),(e=>void 0!==e));return 1===n.length?n[0]:0===n.length?void 0:SO(e,n)}function CO(e,t,r,n,i){let a=n.left,o=n.right,s=MO(e,t,r,{type:11});EO(e,s);let l=MO(e,t,r,{type:12});return a.loopback=s,l.loopback=s,e.decisionMap[sO(t,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=s,IO(o,s),void 0===i?(IO(s,a),IO(s,l)):(IO(s,l),IO(s,i.left),IO(i.right,a)),{left:a,right:l}}function wO(e,t,r,n,i){let a=n.left,o=n.right,s=MO(e,t,r,{type:10});EO(e,s);let l=MO(e,t,r,{type:12}),u=MO(e,t,r,{type:9});return s.loopback=u,l.loopback=u,IO(s,a),IO(s,l),IO(o,u),void 0!==i?(IO(u,l),IO(u,i.left),IO(i.right,a)):IO(u,s),e.decisionMap[sO(t,i?"RepetitionWithSeparator":"Repetition",r.idx)]=s,{left:s,right:l}}function kO(e,t,r,n){let i=n.left;return IO(i,n.right),e.decisionMap[sO(t,"Option",r.idx)]=i,n}function EO(e,t){return e.decisionStates.push(t),t.decision=e.decisionStates.length-1,t.decision}function _O(e,t,r,n,...i){let a=MO(e,t,n,{type:8,start:r});r.end=a;for(let e of i)void 0!==e?(IO(r,e.left),IO(e.right,a)):IO(r,a);let o={left:r,right:a};return e.decisionMap[sO(t,AO(n),n.idx)]=r,o}function AO(e){if(e instanceof oN)return"Alternation";if(e instanceof tN)return"Option";if(e instanceof iN)return"Repetition";if(e instanceof aN)return"RepetitionWithSeparator";if(e instanceof rN)return"RepetitionMandatory";if(e instanceof nN)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function SO(e,t){let r=t.length;for(let n=0;n<r-1;n++){let r,i=t[n];1===i.left.transitions.length&&(r=i.left.transitions[0]);let a=r instanceof hO,o=r,s=t[n+1].left;1===i.left.type&&1===i.right.type&&void 0!==r&&(a&&o.followState===i.right||r.target===i.right)?(a?o.followState=s:r.target=s,PO(e,i.right)):IO(i.right,s)}let n=t[0],i=t[r-1];return{left:n.left,right:i.right}}function RO(e,t,r,n){let i=MO(e,t,n,{type:1}),a=MO(e,t,n,{type:1});return OO(i,new uO(a,r)),{left:i,right:a}}function NO(e,t,r){let n=r.referencedRule,i=e.ruleToStartState.get(n),a=MO(e,t,r,{type:1}),o=MO(e,t,r,{type:1});return OO(a,new hO(i,n,o)),{left:a,right:o}}function LO(e,t,r){let n=e.ruleToStartState.get(t);IO(n,r.left);let i=e.ruleToStopState.get(t);return IO(r.right,i),{left:n,right:i}}function IO(e,t){OO(e,new cO(t))}function MO(e,t,r,n){let i=Object.assign({atn:e,production:r,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},n);return e.states.push(i),i}function OO(e,t){0===e.transitions.length&&(e.epsilonOnlyTransitions=t.isEpsilon()),e.transitions.push(t)}function PO(e,t){e.states.splice(e.states.indexOf(t),1)}s(dO,"createATN"),s(fO,"createRuleStartAndStopATNStates"),s(pO,"atom"),s(gO,"repetition"),s(mO,"repetitionSep"),s(yO,"repetitionMandatory"),s(vO,"repetitionMandatorySep"),s(xO,"alternation"),s(bO,"option"),s(TO,"block"),s(CO,"plus"),s(wO,"star"),s(kO,"optional"),s(EO,"defineDecisionState"),s(_O,"makeAlts"),s(AO,"getProdType"),s(SO,"makeBlock"),s(RO,"tokenRef"),s(NO,"ruleRef"),s(LO,"buildRuleHandle"),s(IO,"epsilon"),s(MO,"newState"),s(OO,"addTransition"),s(PO,"removeState");var DO={},BO=class{static{s(this,"ATNConfigSet")}constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){let t=FO(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return CC(this.configs,(e=>e.alt))}get key(){let e="";for(let t in this.map)e+=t+":";return e}};function FO(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map((e=>e.stateNumber.toString())).join("_")}`}function $O(e,t){let r={};return n=>{let i=n.toString(),a=r[i];return void 0!==a||(a={atnStartState:e,decision:t,states:{}},r[i]=a),a}}s(FO,"getATNConfigKey"),s($O,"createDFACache");var zO,UO,GO,jO,VO,WO,HO,qO,YO,XO,KO,ZO,QO,JO,eP,tP,rP,nP,iP,aP,oP,sP,lP,uP,cP,hP,dP,fP,pP,gP,mP,yP,vP,xP,bP,TP,CP,wP,kP,EP,_P,AP,SP,RP,NP,LP,IP,MP,OP,PP,DP,BP,FP,$P,zP,UP,GP,jP,VP,WP,HP,qP,YP,XP,KP,ZP,QP,JP,eD,tD,rD,nD,iD,aD,oD,sD,lD,uD,cD,hD=class{static{s(this,"PredicateSet")}constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="",t=this.predicates.length;for(let r=0;r<t;r++)e+=!0===this.predicates[r]?"1":"0";return e}},dD=new hD,fD=class extends xM{static{s(this,"LLStarLookaheadStrategy")}constructor(e){var t;super(),this.logging=null!==(t=e?.logging)&&void 0!==t?t:e=>console.log(e)}initialize(e){this.atn=dO(e.rules),this.dfas=gD(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){let{prodOccurrence:t,rule:r,hasPredicates:n,dynamicTokensEnabled:i}=e,a=this.dfas,o=this.logging,s=sO(r,"Alternation",t),l=this.atn.decisionMap[s].decision,u=CC(xI({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:r}),(e=>CC(e,(e=>e[0]))));if(pD(u,!1)&&!i){let e=QC(u,((e,t,r)=>(Fb(t,(t=>{t&&(e[t.tokenTypeIdx]=r,Fb(t.categoryMatches,(t=>{e[t]=r})))})),e)),{});return n?function(t){var r;let n=this.LA(1),i=e[n.tokenTypeIdx];if(void 0!==t&&void 0!==i){let e=null===(r=t[i])||void 0===r?void 0:r.GATE;if(void 0!==e&&!1===e.call(this))return}return i}:function(){let t=this.LA(1);return e[t.tokenTypeIdx]}}return n?function(e){let t=new hD,r=void 0===e?0:e.length;for(let n=0;n<r;n++){let r=e?.[n].GATE;t.set(n,void 0===r||r.call(this))}let n=mD.call(this,a,l,t,o);return"number"==typeof n?n:void 0}:function(){let e=mD.call(this,a,l,dD,o);return"number"==typeof e?e:void 0}}buildLookaheadForOptional(e){let{prodOccurrence:t,rule:r,prodType:n,dynamicTokensEnabled:i}=e,a=this.dfas,o=this.logging,s=sO(r,n,t),l=this.atn.decisionMap[s].decision,u=CC(xI({maxLookahead:1,occurrence:t,prodType:n,rule:r}),(e=>CC(e,(e=>e[0]))));if(pD(u)&&u[0][0]&&!i){let e=u[0],t=WC(e);if(1===t.length&&vx(t[0].categoryMatches)){let e=t[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===e}}{let e=QC(t,((e,t)=>(void 0!==t&&(e[t.tokenTypeIdx]=!0,Fb(t.categoryMatches,(t=>{e[t]=!0}))),e)),{});return function(){let t=this.LA(1);return!0===e[t.tokenTypeIdx]}}}return function(){let e=mD.call(this,a,l,dD,o);return"object"!=typeof e&&0===e}}};function pD(e,t=!0){let r=new Set;for(let n of e){let e=new Set;for(let i of n){if(void 0===i){if(t)break;return!1}let n=[i.tokenTypeIdx].concat(i.categoryMatches);for(let t of n)if(r.has(t)){if(!e.has(t))return!1}else r.add(t),e.add(t)}}return!0}function gD(e){let t=e.decisionStates.length,r=Array(t);for(let n=0;n<t;n++)r[n]=$O(e.decisionStates[n],n);return r}function mD(e,t,r,n){let i=e[t](r),a=i.start;if(void 0===a){a=RD(i,AD(ND(i.atnStartState))),i.start=a}return yD.apply(this,[i,a,r,n])}function yD(e,t,r,n){let i=t,a=1,o=[],s=this.LA(a++);for(;;){let t=wD(i,s);if(void 0===t&&(t=vD.apply(this,[e,i,s,a,r,n])),t===DO)return CD(o,i,s);if(!0===t.isAcceptState)return t.prediction;i=t,o.push(s),s=this.LA(a++)}}function vD(e,t,r,n,i,a){let o=kD(t.configs,r,i);if(0===o.size)return SD(e,t,r,DO),DO;let s=AD(o),l=_D(o,i);if(void 0!==l)s.isAcceptState=!0,s.prediction=l,s.configs.uniqueAlt=l;else if(PD(o)){let t=Gk(o.alts);s.isAcceptState=!0,s.prediction=t,s.configs.uniqueAlt=t,xD.apply(this,[e,n,o.alts,a])}return s=SD(e,t,r,s),s}function xD(e,t,r,n){let i=[];for(let e=1;e<=t;e++)i.push(this.LA(e).tokenType);let a=e.atnStartState;n(bD({topLevelRule:a.rule,ambiguityIndices:r,production:a.production,prefixPath:i}))}function bD(e){let t=CC(e.prefixPath,(e=>UL(e))).join(", "),r=0===e.production.idx?"":e.production.idx,n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${TD(e.production)}${r}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return n+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",n}function TD(e){if(e instanceof QR)return"SUBRULE";if(e instanceof tN)return"OPTION";if(e instanceof oN)return"OR";if(e instanceof rN)return"AT_LEAST_ONE";if(e instanceof nN)return"AT_LEAST_ONE_SEP";if(e instanceof aN)return"MANY_SEP";if(e instanceof iN)return"MANY";if(e instanceof sN)return"CONSUME";throw Error("non exhaustive match")}function CD(e,t,r){let n=vk(t.configs.elements,(e=>e.state.transitions)),i=LE(n.filter((e=>e instanceof uO)).map((e=>e.tokenType)),(e=>e.tokenTypeIdx));return{actualToken:r,possibleTokenTypes:i,tokenPath:e}}function wD(e,t){return e.edges[t.tokenTypeIdx]}function kD(e,t,r){let n,i=new BO,a=[];for(let n of e.elements){if(!1===r.is(n.alt))continue;if(7===n.state.type){a.push(n);continue}let e=n.state.transitions.length;for(let r=0;r<e;r++){let e=ED(n.state.transitions[r],t);void 0!==e&&i.add({state:e,alt:n.alt,stack:n.stack})}}if(0===a.length&&1===i.size&&(n=i),void 0===n){n=new BO;for(let e of i.elements)LD(e,n)}if(a.length>0&&!MD(n))for(let e of a)n.add(e);return n}function ED(e,t){if(e instanceof uO&&tI(t,e.tokenType))return e.target}function _D(e,t){let r;for(let n of e.elements)if(!0===t.is(n.alt))if(void 0===r)r=n.alt;else if(r!==n.alt)return;return r}function AD(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function SD(e,t,r,n){return n=RD(e,n),t.edges[r.tokenTypeIdx]=n,n}function RD(e,t){if(t===DO)return t;let r=t.configs.key,n=e.states[r];return void 0!==n?n:(t.configs.finalize(),e.states[r]=t,t)}function ND(e){let t=new BO,r=e.transitions.length;for(let n=0;n<r;n++){LD({state:e.transitions[n].target,alt:n,stack:[]},t)}return t}function LD(e,t){let r=e.state;if(7===r.type){if(e.stack.length>0){let r=[...e.stack];LD({state:r.pop(),alt:e.alt,stack:r},t)}else t.add(e);return}r.epsilonOnlyTransitions||t.add(e);let n=r.transitions.length;for(let i=0;i<n;i++){let n=ID(e,r.transitions[i]);void 0!==n&&LD(n,t)}}function ID(e,t){if(t instanceof cO)return{state:t.target,alt:e.alt,stack:e.stack};if(t instanceof hO){let r=[...e.stack,t.followState];return{state:t.target,alt:e.alt,stack:r}}}function MD(e){for(let t of e.elements)if(7===t.state.type)return!0;return!1}function OD(e){for(let t of e.elements)if(7!==t.state.type)return!1;return!0}function PD(e){if(OD(e))return!0;let t=DD(e.elements);return BD(t)&&!FD(t)}function DD(e){let t=new Map;for(let r of e){let e=FO(r,!1),n=t.get(e);void 0===n&&(n={},t.set(e,n)),n[r.alt]=!0}return t}function BD(e){for(let t of Array.from(e.values()))if(Object.keys(t).length>1)return!0;return!1}function FD(e){for(let t of Array.from(e.values()))if(1===Object.keys(t).length)return!0;return!1}s(pD,"isLL1Sequence"),s(gD,"initATNSimulator"),s(mD,"adaptivePredict"),s(yD,"performLookahead"),s(vD,"computeLookaheadTarget"),s(xD,"reportLookaheadAmbiguity"),s(bD,"buildAmbiguityError"),s(TD,"getProductionDslName"),s(CD,"buildAdaptivePredictError"),s(wD,"getExistingTargetState"),s(kD,"computeReachSet"),s(ED,"getReachableTarget"),s(_D,"getUniqueAlt"),s(AD,"newDFAState"),s(SD,"addDFAEdge"),s(RD,"addDFAState"),s(ND,"computeStartState"),s(LD,"closure"),s(ID,"getEpsilonTarget"),s(MD,"hasConfigInRuleStopState"),s(OD,"allConfigsInRuleStopStates"),s(PD,"hasConflictTerminatingPrediction"),s(DD,"getConflictingAltSets"),s(BD,"hasConflictingAltSet"),s(FD,"hasStateAssociatedWithOneAlt"),function(e){function t(e){return"string"==typeof e}s(t,"is"),e.is=t}(zO||(zO={})),function(e){function t(e){return"string"==typeof e}s(t,"is"),e.is=t}(UO||(UO={})),function(e){function t(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,s(t,"is"),e.is=t}(GO||(GO={})),function(e){function t(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.MIN_VALUE=0,e.MAX_VALUE=2147483647,s(t,"is"),e.is=t}(jO||(jO={})),function(e){function t(e,t){return e===Number.MAX_VALUE&&(e=jO.MAX_VALUE),t===Number.MAX_VALUE&&(t=jO.MAX_VALUE),{line:e,character:t}}function r(e){let t=e;return $D.objectLiteral(t)&&$D.uinteger(t.line)&&$D.uinteger(t.character)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(VO||(VO={})),function(e){function t(e,t,r,n){if($D.uinteger(e)&&$D.uinteger(t)&&$D.uinteger(r)&&$D.uinteger(n))return{start:VO.create(e,t),end:VO.create(r,n)};if(VO.is(e)&&VO.is(t))return{start:e,end:t};throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${r}, ${n}]`)}function r(e){let t=e;return $D.objectLiteral(t)&&VO.is(t.start)&&VO.is(t.end)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(WO||(WO={})),function(e){function t(e,t){return{uri:e,range:t}}function r(e){let t=e;return $D.objectLiteral(t)&&WO.is(t.range)&&($D.string(t.uri)||$D.undefined(t.uri))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(HO||(HO={})),function(e){function t(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}}function r(e){let t=e;return $D.objectLiteral(t)&&WO.is(t.targetRange)&&$D.string(t.targetUri)&&WO.is(t.targetSelectionRange)&&(WO.is(t.originSelectionRange)||$D.undefined(t.originSelectionRange))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(qO||(qO={})),function(e){function t(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}}function r(e){let t=e;return $D.objectLiteral(t)&&$D.numberRange(t.red,0,1)&&$D.numberRange(t.green,0,1)&&$D.numberRange(t.blue,0,1)&&$D.numberRange(t.alpha,0,1)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(YO||(YO={})),function(e){function t(e,t){return{range:e,color:t}}function r(e){let t=e;return $D.objectLiteral(t)&&WO.is(t.range)&&YO.is(t.color)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(XO||(XO={})),function(e){function t(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}}function r(e){let t=e;return $D.objectLiteral(t)&&$D.string(t.label)&&($D.undefined(t.textEdit)||aP.is(t))&&($D.undefined(t.additionalTextEdits)||$D.typedArray(t.additionalTextEdits,aP.is))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(KO||(KO={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(ZO||(ZO={})),function(e){function t(e,t,r,n,i,a){let o={startLine:e,endLine:t};return $D.defined(r)&&(o.startCharacter=r),$D.defined(n)&&(o.endCharacter=n),$D.defined(i)&&(o.kind=i),$D.defined(a)&&(o.collapsedText=a),o}function r(e){let t=e;return $D.objectLiteral(t)&&$D.uinteger(t.startLine)&&$D.uinteger(t.startLine)&&($D.undefined(t.startCharacter)||$D.uinteger(t.startCharacter))&&($D.undefined(t.endCharacter)||$D.uinteger(t.endCharacter))&&($D.undefined(t.kind)||$D.string(t.kind))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(QO||(QO={})),function(e){function t(e,t){return{location:e,message:t}}function r(e){let t=e;return $D.defined(t)&&HO.is(t.location)&&$D.string(t.message)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(JO||(JO={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(eP||(eP={})),function(e){e.Unnecessary=1,e.Deprecated=2}(tP||(tP={})),function(e){function t(e){let t=e;return $D.objectLiteral(t)&&$D.string(t.href)}s(t,"is"),e.is=t}(rP||(rP={})),function(e){function t(e,t,r,n,i,a){let o={range:e,message:t};return $D.defined(r)&&(o.severity=r),$D.defined(n)&&(o.code=n),$D.defined(i)&&(o.source=i),$D.defined(a)&&(o.relatedInformation=a),o}function r(e){var t;let r=e;return $D.defined(r)&&WO.is(r.range)&&$D.string(r.message)&&($D.number(r.severity)||$D.undefined(r.severity))&&($D.integer(r.code)||$D.string(r.code)||$D.undefined(r.code))&&($D.undefined(r.codeDescription)||$D.string(null===(t=r.codeDescription)||void 0===t?void 0:t.href))&&($D.string(r.source)||$D.undefined(r.source))&&($D.undefined(r.relatedInformation)||$D.typedArray(r.relatedInformation,JO.is))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(nP||(nP={})),function(e){function t(e,t,...r){let n={title:e,command:t};return $D.defined(r)&&r.length>0&&(n.arguments=r),n}function r(e){let t=e;return $D.defined(t)&&$D.string(t.title)&&$D.string(t.command)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(iP||(iP={})),function(e){function t(e,t){return{range:e,newText:t}}function r(e,t){return{range:{start:e,end:e},newText:t}}function n(e){return{range:e,newText:""}}function i(e){let t=e;return $D.objectLiteral(t)&&$D.string(t.newText)&&WO.is(t.range)}s(t,"replace"),e.replace=t,s(r,"insert"),e.insert=r,s(n,"del"),e.del=n,s(i,"is"),e.is=i}(aP||(aP={})),function(e){function t(e,t,r){let n={label:e};return void 0!==t&&(n.needsConfirmation=t),void 0!==r&&(n.description=r),n}function r(e){let t=e;return $D.objectLiteral(t)&&$D.string(t.label)&&($D.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&($D.string(t.description)||void 0===t.description)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(oP||(oP={})),function(e){function t(e){let t=e;return $D.string(t)}s(t,"is"),e.is=t}(sP||(sP={})),function(e){function t(e,t,r){return{range:e,newText:t,annotationId:r}}function r(e,t,r){return{range:{start:e,end:e},newText:t,annotationId:r}}function n(e,t){return{range:e,newText:"",annotationId:t}}function i(e){let t=e;return aP.is(t)&&(oP.is(t.annotationId)||sP.is(t.annotationId))}s(t,"replace"),e.replace=t,s(r,"insert"),e.insert=r,s(n,"del"),e.del=n,s(i,"is"),e.is=i}(lP||(lP={})),function(e){function t(e,t){return{textDocument:e,edits:t}}function r(e){let t=e;return $D.defined(t)&&mP.is(t.textDocument)&&Array.isArray(t.edits)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(uP||(uP={})),function(e){function t(e,t,r){let n={kind:"create",uri:e};return void 0!==t&&(void 0!==t.overwrite||void 0!==t.ignoreIfExists)&&(n.options=t),void 0!==r&&(n.annotationId=r),n}function r(e){let t=e;return t&&"create"===t.kind&&$D.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||$D.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||$D.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||sP.is(t.annotationId))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(cP||(cP={})),function(e){function t(e,t,r,n){let i={kind:"rename",oldUri:e,newUri:t};return void 0!==r&&(void 0!==r.overwrite||void 0!==r.ignoreIfExists)&&(i.options=r),void 0!==n&&(i.annotationId=n),i}function r(e){let t=e;return t&&"rename"===t.kind&&$D.string(t.oldUri)&&$D.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||$D.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||$D.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||sP.is(t.annotationId))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(hP||(hP={})),function(e){function t(e,t,r){let n={kind:"delete",uri:e};return void 0!==t&&(void 0!==t.recursive||void 0!==t.ignoreIfNotExists)&&(n.options=t),void 0!==r&&(n.annotationId=r),n}function r(e){let t=e;return t&&"delete"===t.kind&&$D.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||$D.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||$D.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||sP.is(t.annotationId))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(dP||(dP={})),function(e){function t(e){let t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((e=>$D.string(e.kind)?cP.is(e)||hP.is(e)||dP.is(e):uP.is(e))))}s(t,"is"),e.is=t}(fP||(fP={})),function(e){function t(e){return{uri:e}}function r(e){let t=e;return $D.defined(t)&&$D.string(t.uri)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(pP||(pP={})),function(e){function t(e,t){return{uri:e,version:t}}function r(e){let t=e;return $D.defined(t)&&$D.string(t.uri)&&$D.integer(t.version)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(gP||(gP={})),function(e){function t(e,t){return{uri:e,version:t}}function r(e){let t=e;return $D.defined(t)&&$D.string(t.uri)&&(null===t.version||$D.integer(t.version))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(mP||(mP={})),function(e){function t(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}}function r(e){let t=e;return $D.defined(t)&&$D.string(t.uri)&&$D.string(t.languageId)&&$D.integer(t.version)&&$D.string(t.text)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(yP||(yP={})),function(e){function t(t){let r=t;return r===e.PlainText||r===e.Markdown}e.PlainText="plaintext",e.Markdown="markdown",s(t,"is"),e.is=t}(vP||(vP={})),function(e){function t(e){let t=e;return $D.objectLiteral(e)&&vP.is(t.kind)&&$D.string(t.value)}s(t,"is"),e.is=t}(xP||(xP={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(bP||(bP={})),function(e){e.PlainText=1,e.Snippet=2}(TP||(TP={})),(CP||(CP={})).Deprecated=1,function(e){function t(e,t,r){return{newText:e,insert:t,replace:r}}function r(e){let t=e;return t&&$D.string(t.newText)&&WO.is(t.insert)&&WO.is(t.replace)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(wP||(wP={})),function(e){e.asIs=1,e.adjustIndentation=2}(kP||(kP={})),function(e){function t(e){let t=e;return t&&($D.string(t.detail)||void 0===t.detail)&&($D.string(t.description)||void 0===t.description)}s(t,"is"),e.is=t}(EP||(EP={})),function(e){function t(e){return{label:e}}s(t,"create"),e.create=t}(_P||(_P={})),function(e){function t(e,t){return{items:e||[],isIncomplete:!!t}}s(t,"create"),e.create=t}(AP||(AP={})),function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function r(e){let t=e;return $D.string(t)||$D.objectLiteral(t)&&$D.string(t.language)&&$D.string(t.value)}s(t,"fromPlainText"),e.fromPlainText=t,s(r,"is"),e.is=r}(SP||(SP={})),function(e){function t(e){let t=e;return!!t&&$D.objectLiteral(t)&&(xP.is(t.contents)||SP.is(t.contents)||$D.typedArray(t.contents,SP.is))&&(void 0===e.range||WO.is(e.range))}s(t,"is"),e.is=t}(RP||(RP={})),function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}s(t,"create"),e.create=t}(NP||(NP={})),function(e){function t(e,t,...r){let n={label:e};return $D.defined(t)&&(n.documentation=t),$D.defined(r)?n.parameters=r:n.parameters=[],n}s(t,"create"),e.create=t}(LP||(LP={})),function(e){e.Text=1,e.Read=2,e.Write=3}(IP||(IP={})),function(e){function t(e,t){let r={range:e};return $D.number(t)&&(r.kind=t),r}s(t,"create"),e.create=t}(MP||(MP={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(OP||(OP={})),(PP||(PP={})).Deprecated=1,function(e){function t(e,t,r,n,i){let a={name:e,kind:t,location:{uri:n,range:r}};return i&&(a.containerName=i),a}s(t,"create"),e.create=t}(DP||(DP={})),function(e){function t(e,t,r,n){return void 0!==n?{name:e,kind:t,location:{uri:r,range:n}}:{name:e,kind:t,location:{uri:r}}}s(t,"create"),e.create=t}(BP||(BP={})),function(e){function t(e,t,r,n,i,a){let o={name:e,detail:t,kind:r,range:n,selectionRange:i};return void 0!==a&&(o.children=a),o}function r(e){let t=e;return t&&$D.string(t.name)&&$D.number(t.kind)&&WO.is(t.range)&&WO.is(t.selectionRange)&&(void 0===t.detail||$D.string(t.detail))&&(void 0===t.deprecated||$D.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(FP||(FP={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}($P||($P={})),function(e){e.Invoked=1,e.Automatic=2}(zP||(zP={})),function(e){function t(e,t,r){let n={diagnostics:e};return null!=t&&(n.only=t),null!=r&&(n.triggerKind=r),n}function r(e){let t=e;return $D.defined(t)&&$D.typedArray(t.diagnostics,nP.is)&&(void 0===t.only||$D.typedArray(t.only,$D.string))&&(void 0===t.triggerKind||t.triggerKind===zP.Invoked||t.triggerKind===zP.Automatic)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(UP||(UP={})),function(e){function t(e,t,r){let n={title:e},i=!0;return"string"==typeof t?(i=!1,n.kind=t):iP.is(t)?n.command=t:n.edit=t,i&&void 0!==r&&(n.kind=r),n}function r(e){let t=e;return t&&$D.string(t.title)&&(void 0===t.diagnostics||$D.typedArray(t.diagnostics,nP.is))&&(void 0===t.kind||$D.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||iP.is(t.command))&&(void 0===t.isPreferred||$D.boolean(t.isPreferred))&&(void 0===t.edit||fP.is(t.edit))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(GP||(GP={})),function(e){function t(e,t){let r={range:e};return $D.defined(t)&&(r.data=t),r}function r(e){let t=e;return $D.defined(t)&&WO.is(t.range)&&($D.undefined(t.command)||iP.is(t.command))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(jP||(jP={})),function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}function r(e){let t=e;return $D.defined(t)&&$D.uinteger(t.tabSize)&&$D.boolean(t.insertSpaces)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(VP||(VP={})),function(e){function t(e,t,r){return{range:e,target:t,data:r}}function r(e){let t=e;return $D.defined(t)&&WO.is(t.range)&&($D.undefined(t.target)||$D.string(t.target))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(WP||(WP={})),function(e){function t(e,t){return{range:e,parent:t}}function r(t){let r=t;return $D.objectLiteral(r)&&WO.is(r.range)&&(void 0===r.parent||e.is(r.parent))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(HP||(HP={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(qP||(qP={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(YP||(YP={})),function(e){function t(e){let t=e;return $D.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}s(t,"is"),e.is=t}(XP||(XP={})),function(e){function t(e,t){return{range:e,text:t}}function r(e){let t=e;return null!=t&&WO.is(t.range)&&$D.string(t.text)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(KP||(KP={})),function(e){function t(e,t,r){return{range:e,variableName:t,caseSensitiveLookup:r}}function r(e){let t=e;return null!=t&&WO.is(t.range)&&$D.boolean(t.caseSensitiveLookup)&&($D.string(t.variableName)||void 0===t.variableName)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(ZP||(ZP={})),function(e){function t(e,t){return{range:e,expression:t}}function r(e){let t=e;return null!=t&&WO.is(t.range)&&($D.string(t.expression)||void 0===t.expression)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(QP||(QP={})),function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}function r(e){let t=e;return $D.defined(t)&&WO.is(e.stoppedLocation)}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(JP||(JP={})),function(e){function t(e){return 1===e||2===e}e.Type=1,e.Parameter=2,s(t,"is"),e.is=t}(eD||(eD={})),function(e){function t(e){return{value:e}}function r(e){let t=e;return $D.objectLiteral(t)&&(void 0===t.tooltip||$D.string(t.tooltip)||xP.is(t.tooltip))&&(void 0===t.location||HO.is(t.location))&&(void 0===t.command||iP.is(t.command))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(tD||(tD={})),function(e){function t(e,t,r){let n={position:e,label:t};return void 0!==r&&(n.kind=r),n}function r(e){let t=e;return $D.objectLiteral(t)&&VO.is(t.position)&&($D.string(t.label)||$D.typedArray(t.label,tD.is))&&(void 0===t.kind||eD.is(t.kind))&&void 0===t.textEdits||$D.typedArray(t.textEdits,aP.is)&&(void 0===t.tooltip||$D.string(t.tooltip)||xP.is(t.tooltip))&&(void 0===t.paddingLeft||$D.boolean(t.paddingLeft))&&(void 0===t.paddingRight||$D.boolean(t.paddingRight))}s(t,"create"),e.create=t,s(r,"is"),e.is=r}(rD||(rD={})),function(e){function t(e){return{kind:"snippet",value:e}}s(t,"createSnippet"),e.createSnippet=t}(nD||(nD={})),function(e){function t(e,t,r,n){return{insertText:e,filterText:t,range:r,command:n}}s(t,"create"),e.create=t}(iD||(iD={})),function(e){function t(e){return{items:e}}s(t,"create"),e.create=t}(aD||(aD={})),function(e){e.Invoked=0,e.Automatic=1}(oD||(oD={})),function(e){function t(e,t){return{range:e,text:t}}s(t,"create"),e.create=t}(sD||(sD={})),function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}s(t,"create"),e.create=t}(lD||(lD={})),function(e){function t(e){let t=e;return $D.objectLiteral(t)&&UO.is(t.uri)&&$D.string(t.name)}s(t,"is"),e.is=t}(uD||(uD={})),function(e){function t(e,t,r,n){return new zD(e,t,r,n)}function r(e){let t=e;return!!($D.defined(t)&&$D.string(t.uri)&&($D.undefined(t.languageId)||$D.string(t.languageId))&&$D.uinteger(t.lineCount)&&$D.func(t.getText)&&$D.func(t.positionAt)&&$D.func(t.offsetAt))}function n(e,t){let r=e.getText(),n=i(t,((e,t)=>{let r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),a=r.length;for(let t=n.length-1;t>=0;t--){let i=n[t],o=e.offsetAt(i.range.start),s=e.offsetAt(i.range.end);if(!(s<=a))throw new Error("Overlapping edit");r=r.substring(0,o)+i.newText+r.substring(s,r.length),a=o}return r}function i(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),a=e.slice(r);i(n,t),i(a,t);let o=0,s=0,l=0;for(;o<n.length&&s<a.length;)t(n[o],a[s])<=0?e[l++]=n[o++]:e[l++]=a[s++];for(;o<n.length;)e[l++]=n[o++];for(;s<a.length;)e[l++]=a[s++];return e}s(t,"create"),e.create=t,s(r,"is"),e.is=r,s(n,"applyEdits"),e.applyEdits=n,s(i,"mergeSort")}(cD||(cD={}));var $D,zD=class{static{s(this,"FullTextDocument")}constructor(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,r=!0;for(let n=0;n<t.length;n++){r&&(e.push(n),r=!1);let i=t.charAt(n);r="\r"===i||"\n"===i,"\r"===i&&n+1<t.length&&"\n"===t.charAt(n+1)&&n++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return VO.create(0,e);for(;r<n;){let i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}let i=r-1;return VO.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line],n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)}get lineCount(){return this.getLineOffsets().length}};!function(e){let t=Object.prototype.toString;function r(e){return typeof e<"u"}function n(e){return typeof e>"u"}function i(e){return!0===e||!1===e}function a(e){return"[object String]"===t.call(e)}function o(e){return"[object Number]"===t.call(e)}function l(e,r,n){return"[object Number]"===t.call(e)&&r<=e&&e<=n}function u(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647}function c(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647}function h(e){return"[object Function]"===t.call(e)}function d(e){return null!==e&&"object"==typeof e}function f(e,t){return Array.isArray(e)&&e.every(t)}s(r,"defined"),e.defined=r,s(n,"undefined"),e.undefined=n,s(i,"boolean"),e.boolean=i,s(a,"string"),e.string=a,s(o,"number"),e.number=o,s(l,"numberRange"),e.numberRange=l,s(u,"integer"),e.integer=u,s(c,"uinteger"),e.uinteger=c,s(h,"func"),e.func=h,s(d,"objectLiteral"),e.objectLiteral=d,s(f,"typedArray"),e.typedArray=f}($D||($D={}));var UD=class{static{s(this,"CstNodeBuilder")}constructor(){this.nodeStack=[]}get current(){var e;return null!==(e=this.nodeStack[this.nodeStack.length-1])&&void 0!==e?e:this.rootNode}buildRootNode(e){return this.rootNode=new HD(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){let t=new VD;return t.grammarSource=e,t.root=this.rootNode,this.current.content.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){let r=new jD(e.startOffset,e.image.length,l_(e),e.tokenType,!t);return r.grammarSource=t,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){let t=e.container;if(t){let r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}addHiddenNodes(e){let t=[];for(let r of e){let e=new jD(r.startOffset,r.image.length,l_(r),r.tokenType,!0);e.root=this.rootNode,t.push(e)}let r=this.current,n=!1;if(r.content.length>0)r.content.push(...t);else{for(;r.container;){let e=r.container.content.indexOf(r);if(e>0){r.container.content.splice(e,0,...t),n=!0;break}r=r.container}n||this.rootNode.content.unshift(...t)}}construct(e){let t=this.current;"string"==typeof e.$type&&(this.current.astNode=e),e.$cstNode=t;let r=this.nodeStack.pop();0===r?.content.length&&this.removeNode(r)}},GD=class{static{s(this,"AbstractCstNode")}get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;let r="string"==typeof(null===(e=this._astNode)||void 0===e?void 0:e.$type)?this._astNode:null===(t=this.container)||void 0===t?void 0:t.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},jD=class extends GD{static{s(this,"LeafCstNodeImpl")}get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,n,i=!1){super(),this._hidden=i,this._offset=e,this._tokenType=n,this._length=t,this._range=r}},VD=class extends GD{static{s(this,"CompositeCstNodeImpl")}constructor(){super(...arguments),this.content=new WD(this)}get children(){return this.content}get offset(){var e,t;return null!==(t=null===(e=this.firstNonHiddenNode)||void 0===e?void 0:e.offset)&&void 0!==t?t:0}get length(){return this.end-this.offset}get end(){var e,t;return null!==(t=null===(e=this.lastNonHiddenNode)||void 0===e?void 0:e.end)&&void 0!==t?t:0}get range(){let e=this.firstNonHiddenNode,t=this.lastNonHiddenNode;if(e&&t){if(void 0===this._rangeCache){let{range:r}=e,{range:n}=t;this._rangeCache={start:r.start,end:n.end.line<r.start.line?r.start:n.end}}return this._rangeCache}return{start:VO.create(0,0),end:VO.create(0,0)}}get firstNonHiddenNode(){for(let e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){let t=this.content[e];if(!t.hidden)return t}return this.content[this.content.length-1]}},WD=class e extends Array{static{s(this,"CstNodeContainer")}constructor(t){super(),this.parent=t,Object.setPrototypeOf(this,e.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,t,...r){return this.addParents(r),super.splice(e,t,...r)}addParents(e){for(let t of e)t.container=this.parent}},HD=class extends VD{static{s(this,"RootCstNodeImpl")}get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}},qD=Symbol("Datatype");function YD(e){return e.$type===qD}s(YD,"isDataTypeNode");var XD=s((e=>e.endsWith("​")?e:e+"​"),"withRuleSuffix"),KD=class{static{s(this,"AbstractLangiumParser")}constructor(e){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;let t=this.lexer.definition,r="production"===e.LanguageMetaData.mode;this.wrapper=new rB(t,Object.assign(Object.assign({},e.parser.ParserConfig),{skipValidations:r,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},ZD=class extends KD{static{s(this,"LangiumParser")}get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new UD,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,t){let r=this.computeRuleType(e),n=this.wrapper.DEFINE_RULE(XD(e.name),this.startImplementation(r,t).bind(this));return this.allRules.set(e.name,n),e.entry&&(this.mainRule=n),n}computeRuleType(e){if(!e.fragment){if(ER(e))return qD;return RR(e)??e.name}}parse(e,t={}){this.nodeBuilder.buildRootNode(e);let r=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=r.tokens;let n=t.rule?this.allRules.get(t.rule):this.mainRule;if(!n)throw new Error(t.rule?`No rule found with name '${t.rule}'`:"No main rule available.");let i=n.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(r.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:i,lexerErrors:r.errors,lexerReport:r.report,parserErrors:this.wrapper.errors}}startImplementation(e,t){return r=>{let n,i=!this.isRecording()&&void 0!==e;if(i){let t={$type:e};this.stack.push(t),e===qD&&(t.value="")}try{n=t(r)}catch{n=void 0}return void 0===n&&i&&(n=this.construct()),n}}extractHiddenTokens(e){let t=this.lexerResult.hidden;if(!t.length)return[];let r=e.startOffset;for(let e=0;e<t.length;e++)if(t[e].startOffset>r)return t.splice(0,e);return t.splice(0,t.length)}consume(e,t,r){let n=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(n)){let e=this.extractHiddenTokens(n);this.nodeBuilder.addHiddenNodes(e);let t=this.nodeBuilder.buildLeafNode(n,r),{assignment:i,isCrossRef:a}=this.getAssignment(r),o=this.current;if(i){let e=ZA(r)?n.image:this.converter.convert(n.image,t);this.assign(i.operator,i.feature,e,t,a)}else if(YD(o)){let e=n.image;ZA(r)||(e=this.converter.convert(e,t).toString()),o.value+=e}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&"number"==typeof e.endOffset&&!isNaN(e.endOffset)}subrule(e,t,r,n,i){let a;!this.isRecording()&&!r&&(a=this.nodeBuilder.buildCompositeNode(n));let o=this.wrapper.wrapSubrule(e,t,i);!this.isRecording()&&a&&a.length>0&&this.performSubruleAssignment(o,n,a)}performSubruleAssignment(e,t,r){let{assignment:n,isCrossRef:i}=this.getAssignment(t);if(n)this.assign(n.operator,n.feature,e,r,i);else if(!n){let t=this.current;if(YD(t))t.value+=e.toString();else if("object"==typeof e&&e){let r=this.assignWithoutOverride(e,t);this.stack.pop(),this.stack.push(r)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(t.feature&&t.operator){r=this.construct(),this.nodeBuilder.removeNode(r.$cstNode),this.nodeBuilder.buildCompositeNode(t).content.push(r.$cstNode);let n={$type:e};this.stack.push(n),this.assign(t.operator,t.feature,r,r.$cstNode,!1)}else r.$type=e}}construct(){if(this.isRecording())return;let e=this.current;return xS(e),this.nodeBuilder.construct(e),this.stack.pop(),YD(e)?this.converter.convert(e.value,e.$cstNode):(NS(this.astReflection,e),e)}getAssignment(e){if(!this.assignmentMap.has(e)){let t=bS(e,UA);this.assignmentMap.set(e,{assignment:t,isCrossRef:!!t&&WA(t.terminal)})}return this.assignmentMap.get(e)}assign(e,t,r,n,i){let a,o=this.current;switch(a=i&&"string"==typeof r?this.linker.buildReference(o,t,n,r):r,e){case"=":o[t]=a;break;case"?=":o[t]=!0;break;case"+=":Array.isArray(o[t])||(o[t]=[]),o[t].push(a)}}assignWithoutOverride(e,t){for(let[r,n]of Object.entries(t)){let t=e[r];void 0===t?e[r]=n:Array.isArray(t)&&Array.isArray(n)&&(n.push(...t),e[r]=n)}let r=e.$cstNode;return r&&(r.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}},QD=class{static{s(this,"AbstractParserErrorMessageProvider")}buildMismatchTokenMessage(e){return rI.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return rI.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return rI.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return rI.buildEarlyExitMessage(e)}},JD=class extends QD{static{s(this,"LangiumParserErrorMessageProvider")}buildMismatchTokenMessage({expected:e,actual:t}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}},eB=class extends KD{static{s(this,"LangiumCompletionParser")}constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();let t=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=t.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){let r=this.wrapper.DEFINE_RULE(XD(e.name),this.startImplementation(t).bind(this));return this.allRules.set(e.name,r),e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return t=>{let r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){let e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,t,r,n,i){this.before(n),this.wrapper.wrapSubrule(e,t,i),this.after(n)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){let t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}},tB={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new JD},rB=class extends oO{static{s(this,"ChevrotainWrapper")}constructor(e,t){let r=t&&"maxLookahead"in t;super(e,Object.assign(Object.assign(Object.assign({},tB),{lookaheadStrategy:r?new xM({maxLookahead:t.maxLookahead}):new fD({logging:t.skipValidations?()=>{}:void 0})}),t))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}};function nB(e,t,r){return iB({parser:t,tokens:r,ruleNames:new Map},e),t}function iB(e,t){let r=lR(t,!1),n=e_(t.rules).filter(xA).filter((e=>r.has(e)));for(let t of n){let r=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});e.parser.rule(t,aB(r,t.definition))}}function aB(e,t,r=!1){let n;if(ZA(t))n=gB(e,t);else if(BA(t))n=oB(e,t);else if(UA(t))n=aB(e,t.terminal);else if(WA(t))n=pB(e,t);else if(nS(t))n=sB(e,t);else if($A(t))n=cB(e,t);else if(hS(t))n=hB(e,t);else if(XA(t))n=dB(e,t);else{if(!qA(t))throw new __(t.$cstNode,`Unexpected element type: ${t.$type}`);{let r=e.consume++;n=s((()=>e.parser.consume(r,JL,t)),"method")}}return mB(e,r?void 0:fB(t),n,t.cardinality)}function oB(e,t){let r=NR(t);return()=>e.parser.action(r,t)}function sB(e,t){let r=t.rule.ref;if(xA(r)){let n=e.subrule++,i=r.fragment,a=t.arguments.length>0?lB(r,t.arguments):()=>({});return o=>e.parser.subrule(n,yB(e,r),i,t,a(o))}if(RA(r)){let n=e.consume++,i=xB(e,r.name);return()=>e.parser.consume(n,i,t)}if(!r)throw new __(t.$cstNode,`Undefined rule: ${t.rule.$refText}`);A_()}function lB(e,t){let r=t.map((e=>uB(e.value)));return t=>{let n={};for(let i=0;i<r.length;i++){let a=e.parameters[i],o=r[i];n[a.name]=o(t)}return n}}function uB(e){if(J_(e)){let t=uB(e.left),r=uB(e.right);return e=>t(e)||r(e)}if(Z_(e)){let t=uB(e.left),r=uB(e.right);return e=>t(e)&&r(e)}if(hA(e)){let t=uB(e.value);return e=>!t(e)}if(yA(e)){let t=e.parameter.ref.name;return e=>void 0!==e&&!0===e[t]}if(X_(e)){let t=!!e.true;return()=>t}A_()}function cB(e,t){if(1===t.elements.length)return aB(e,t.elements[0]);{let r=[];for(let n of t.elements){let t={ALT:aB(e,n,!0)},i=fB(n);i&&(t.GATE=uB(i)),r.push(t)}let n=e.or++;return t=>e.parser.alternatives(n,r.map((e=>{let r={ALT:s((()=>e.ALT(t)),"ALT")},n=e.GATE;return n&&(r.GATE=()=>n(t)),r})))}}function hB(e,t){if(1===t.elements.length)return aB(e,t.elements[0]);let r=[];for(let n of t.elements){let t={ALT:aB(e,n,!0)},i=fB(n);i&&(t.GATE=uB(i)),r.push(t)}let n=e.or++,i=s(((e,t)=>`uGroup_${e}_${t.getRuleStack().join("-")}`),"idFunc"),a=s((t=>e.parser.alternatives(n,r.map(((r,a)=>{let o={ALT:s((()=>!0),"ALT")},l=e.parser;o.ALT=()=>{if(r.ALT(t),!l.isRecording()){let e=i(n,l);l.unorderedGroups.get(e)||l.unorderedGroups.set(e,[]);let t=l.unorderedGroups.get(e);typeof t?.[a]>"u"&&(t[a]=!0)}};let u=r.GATE;return o.GATE=u?()=>u(t):()=>{let e=l.unorderedGroups.get(i(n,l));return!e?.[a]},o})))),"alternatives"),o=mB(e,fB(t),a,"*");return t=>{o(t),e.parser.isRecording()||e.parser.unorderedGroups.delete(i(n,e.parser))}}function dB(e,t){let r=t.elements.map((t=>aB(e,t)));return e=>r.forEach((t=>t(e)))}function fB(e){if(XA(e))return e.guardCondition}function pB(e,t,r=t.terminal){if(r){if(nS(r)&&xA(r.rule.ref)){let n=r.rule.ref,i=e.subrule++;return r=>e.parser.subrule(i,yB(e,n),!1,t,r)}if(nS(r)&&RA(r.rule.ref)){let n=e.consume++,i=xB(e,r.rule.ref.name);return()=>e.parser.consume(n,i,t)}if(ZA(r)){let n=e.consume++,i=xB(e,r.value);return()=>e.parser.consume(n,i,t)}throw new Error("Could not build cross reference parser")}{if(!t.type.ref)throw new Error("Could not resolve reference to type: "+t.type.$refText);let r=xR(t.type.ref),n=r?.terminal;if(!n)throw new Error("Could not find name assignment for type: "+NR(t.type.ref));return pB(e,t,n)}}function gB(e,t){let r=e.consume++,n=e.tokens[t.value];if(!n)throw new Error("Could not find token for keyword: "+t.value);return()=>e.parser.consume(r,n,t)}function mB(e,t,r,n){let i=t&&uB(t);if(!n){if(i){let t=e.or++;return n=>e.parser.alternatives(t,[{ALT:s((()=>r(n)),"ALT"),GATE:s((()=>i(n)),"GATE")},{ALT:iO(),GATE:s((()=>!i(n)),"GATE")}])}return r}if("*"===n){let t=e.many++;return n=>e.parser.many(t,{DEF:s((()=>r(n)),"DEF"),GATE:i?()=>i(n):void 0})}if("+"===n){let t=e.many++;if(i){let n=e.or++;return a=>e.parser.alternatives(n,[{ALT:s((()=>e.parser.atLeastOne(t,{DEF:s((()=>r(a)),"DEF")})),"ALT"),GATE:s((()=>i(a)),"GATE")},{ALT:iO(),GATE:s((()=>!i(a)),"GATE")}])}return n=>e.parser.atLeastOne(t,{DEF:s((()=>r(n)),"DEF")})}if("?"===n){let t=e.optional++;return n=>e.parser.optional(t,{DEF:s((()=>r(n)),"DEF"),GATE:i?()=>i(n):void 0})}A_()}function yB(e,t){let r=vB(e,t),n=e.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function vB(e,t){if(xA(t))return t.name;if(e.ruleNames.has(t))return e.ruleNames.get(t);{let r=t,n=r.$container,i=t.$type;for(;!xA(n);)(XA(n)||$A(n)||hS(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,e.ruleNames.set(t,i),i}}function xB(e,t){let r=e.tokens[t];if(!r)throw new Error(`Token "${t}" not found."`);return r}function bB(e){let t=e.Grammar,r=e.parser.Lexer,n=new eB(e);return nB(t,n,r.definition),n.finalize(),n}function TB(e){let t=CB(e);return t.finalize(),t}function CB(e){let t=e.Grammar,r=e.parser.Lexer;return nB(t,new ZD(e),r.definition)}s(nB,"createParser"),s(iB,"buildRules"),s(aB,"buildElement"),s(oB,"buildAction"),s(sB,"buildRuleCall"),s(lB,"buildRuleCallPredicate"),s(uB,"buildPredicate"),s(cB,"buildAlternatives"),s(hB,"buildUnorderedGroup"),s(dB,"buildGroup"),s(fB,"getGuardCondition"),s(pB,"buildCrossReference"),s(gB,"buildKeyword"),s(mB,"wrap"),s(yB,"getRule"),s(vB,"getRuleName"),s(xB,"getToken"),s(bB,"createCompletionParser"),s(TB,"createLangiumParser"),s(CB,"prepareLangiumParser");var wB,kB=class{static{s(this,"DefaultTokenBuilder")}constructor(){this.diagnostics=[]}buildTokens(e,t){let r=e_(lR(e,!1)),n=this.buildTerminalTokens(r),i=this.buildKeywordTokens(r,n,t);return n.forEach((e=>{let t=e.PATTERN;"object"==typeof t&&t&&"test"in t&&tR(t)?i.unshift(e):i.push(e)})),i}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){let e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter(RA).filter((e=>!e.fragment)).map((e=>this.buildTerminalToken(e))).toArray()}buildTerminalToken(e){let t=OR(e),r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t,n={name:e.name,PATTERN:r};return"function"==typeof r&&(n.LINE_BREAKS=!0),e.hidden&&(n.GROUP=tR(t)?zL.SKIPPED:"hidden"),n}requiresCustomPattern(e){return!(!e.flags.includes("u")&&!e.flags.includes("s"))||!(!e.source.includes("?<=")&&!e.source.includes("?<!"))}regexPatternFunction(e){let t=new RegExp(e,e.flags+"y");return(e,r)=>(t.lastIndex=r,t.exec(e))}buildKeywordTokens(e,t,r){return e.filter(xA).flatMap((e=>ES(e).filter(ZA))).distinct((e=>e.value)).toArray().sort(((e,t)=>t.value.length-e.value.length)).map((e=>this.buildKeywordToken(e,t,!!r?.caseInsensitive)))}buildKeywordToken(e,t,r){let n=this.buildKeywordPattern(e,r),i={name:e.value,PATTERN:n,LONGER_ALT:this.findLongerAlt(e,t)};return"function"==typeof n&&(i.LINE_BREAKS=!0),i}buildKeywordPattern(e,t){return t?new RegExp(nR(e.value)):e.value}findLongerAlt(e,t){return t.reduce(((t,r)=>{let n=r?.PATTERN;return n?.source&&iR("^"+n.source+"$",e.value)&&t.push(r),t}),[])}},EB=class{static{s(this,"DefaultValueConverter")}convert(e,t){let r=t.grammarSource;if(WA(r)&&(r=cR(r)),nS(r)){let n=r.rule.ref;if(!n)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(n,e,t)}return e}runConverter(e,t,r){var n;switch(e.name.toUpperCase()){case"INT":return wB.convertInt(t);case"STRING":return wB.convertString(t);case"ID":return wB.convertID(t)}switch(null===(n=MR(e))||void 0===n?void 0:n.toLowerCase()){case"number":return wB.convertNumber(t);case"boolean":return wB.convertBoolean(t);case"bigint":return wB.convertBigint(t);case"date":return wB.convertDate(t);default:return t}}};!function(e){function t(e){let t="";for(let n=1;n<e.length-1;n++){let i=e.charAt(n);if("\\"===i){t+=r(e.charAt(++n))}else t+=i}return t}function r(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return e}}function n(e){return"^"===e.charAt(0)?e.substring(1):e}function i(e){return parseInt(e)}function a(e){return BigInt(e)}function o(e){return new Date(e)}function l(e){return Number(e)}function u(e){return"true"===e.toLowerCase()}s(t,"convertString"),e.convertString=t,s(r,"convertEscapeCharacter"),s(n,"convertID"),e.convertID=n,s(i,"convertInt"),e.convertInt=i,s(a,"convertBigint"),e.convertBigint=a,s(o,"convertDate"),e.convertDate=o,s(l,"convertNumber"),e.convertNumber=l,s(u,"convertBoolean"),e.convertBoolean=u}(wB||(wB={}));var _B={};function AB(){return new Promise((e=>{typeof setImmediate>"u"?setTimeout(e,0):setImmediate(e)}))}h(_B,d(FE(),1)),s(AB,"delayNextTick");var SB=0,RB=10;function NB(){return SB=performance.now(),new _B.CancellationTokenSource}function LB(e){RB=e}s(NB,"startCancelableOperation"),s(LB,"setInterruptionPeriod");var IB=Symbol("OperationCancelled");function MB(e){return e===IB}async function OB(e){if(e===_B.CancellationToken.None)return;let t=performance.now();if(t-SB>=RB&&(SB=t,await AB(),SB=performance.now()),e.isCancellationRequested)throw IB}s(MB,"isOperationCancelled"),s(OB,"interruptAndCheck");var PB,DB,BB=class{static{s(this,"Deferred")}constructor(){this.promise=new Promise(((e,t)=>{this.resolve=t=>(e(t),this),this.reject=e=>(t(e),this)}))}},FB=class e{static{s(this,"FullTextDocument")}constructor(e,t,r,n){this._uri=e,this._languageId=t,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(t,r){for(let r of t)if(e.isIncremental(r)){let e=GB(r.range),t=this.offsetAt(e.start),n=this.offsetAt(e.end);this._content=this._content.substring(0,t)+r.text+this._content.substring(n,this._content.length);let i=Math.max(e.start.line,0),a=Math.max(e.end.line,0),o=this._lineOffsets,s=zB(r.text,!1,t);if(a-i===s.length)for(let e=0,t=s.length;e<t;e++)o[e+i+1]=s[e];else s.length<1e4?o.splice(i+1,a-i,...s):this._lineOffsets=o=o.slice(0,i+1).concat(s,o.slice(a+1));let l=r.text.length-(n-t);if(0!==l)for(let e=i+1+s.length,t=o.length;e<t;e++)o[e]=o[e]+l}else{if(!e.isFull(r))throw new Error("Unknown change event received");this._content=r.text,this._lineOffsets=void 0}this._version=r}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=zB(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,n=t.length;if(0===n)return{line:0,character:e};for(;r<n;){let i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}let i=r-1;return{line:i,character:(e=this.ensureBeforeEOL(e,t[i]))-t[i]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line];if(e.character<=0)return r;let n=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(r+e.character,n);return this.ensureBeforeEOL(i,r)}ensureBeforeEOL(e,t){for(;e>t&&UB(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)}static isFull(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength}};function $B(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),i=e.slice(r);$B(n,t),$B(i,t);let a=0,o=0,s=0;for(;a<n.length&&o<i.length;)t(n[a],i[o])<=0?e[s++]=n[a++]:e[s++]=i[o++];for(;a<n.length;)e[s++]=n[a++];for(;o<i.length;)e[s++]=i[o++];return e}function zB(e,t,r=0){let n=t?[r]:[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);UB(i)&&(13===i&&t+1<e.length&&10===e.charCodeAt(t+1)&&t++,n.push(r+t+1))}return n}function UB(e){return 13===e||10===e}function GB(e){let t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function jB(e){let t=GB(e.range);return t!==e.range?{newText:e.newText,range:t}:e}!function(e){function t(e,t,r,n){return new FB(e,t,r,n)}function r(e,t,r){if(e instanceof FB)return e.update(t,r),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")}function n(e,t){let r=e.getText(),n=$B(t.map(jB),((e,t)=>{let r=e.range.start.line-t.range.start.line;return 0===r?e.range.start.character-t.range.start.character:r})),i=0,a=[];for(let t of n){let n=e.offsetAt(t.range.start);if(n<i)throw new Error("Overlapping edit");n>i&&a.push(r.substring(i,n)),t.newText.length&&a.push(t.newText),i=e.offsetAt(t.range.end)}return a.push(r.substr(i)),a.join("")}s(t,"create"),e.create=t,s(r,"update"),e.update=r,s(n,"applyEdits"),e.applyEdits=n}(PB||(PB={})),s($B,"mergeSort"),s(zB,"computeLineOffsets"),s(UB,"isEOL"),s(GB,"getWellformedRange"),s(jB,"getWellformedEdit"),(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,a=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(a!==s-1&&1!==o)if(a!==s-1&&2===o){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=s,o=0;continue}}else if(2===n.length||1===n.length){n="",i=0,a=s,o=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),i=s-a-1;a=s,o=0}else 46===r&&-1!==o?++o:o=-1}return n}s(t,"e"),s(r,"r");var n={resolve:s((function(){for(var e,n="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o;a>=0?o=arguments[a]:(void 0===e&&(e=Up.cwd()),o=e),t(o),0!==o.length&&(n=o+"/"+n,i=47===o.charCodeAt(0))}return n=r(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."}),"resolve"),normalize:s((function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e}),"normalize"),isAbsolute:s((function(e){return t(e),e.length>0&&47===e.charCodeAt(0)}),"isAbsolute"),join:s((function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)}),"join"),relative:s((function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length,o=a-i,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,u=o<l?o:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(47===r.charCodeAt(s+h))return r.slice(s+h+1);if(0===h)return r.slice(s+h)}else o>u&&(47===e.charCodeAt(i+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(i+h);if(d!==r.charCodeAt(s+h))break;47===d&&(c=h)}var f="";for(h=i+c+1;h<=a;++h)h!==a&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(s+c):(s+=c,47===r.charCodeAt(s)&&++s,r.slice(s))}),"relative"),_makeLong:s((function(e){return e}),"_makeLong"),dirname:s((function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(r=e.charCodeAt(o))){if(!a){i=o;break}}else a=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)}),"dirname"),basename:s((function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,i=0,a=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!o){i=n+1;break}}else-1===l&&(o=!1,l=n+1),s>=0&&(u===r.charCodeAt(s)?-1==--s&&(a=n):(s=-1,a=l))}return i===a?a=l:-1===a&&(a=e.length),e.slice(i,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){i=n+1;break}}else-1===a&&(o=!1,a=n+1);return-1===a?"":e.slice(i,a)}),"basename"),extname:s((function(e){t(e);for(var r=-1,n=0,i=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===i&&(a=!1,i=s+1),46===l?-1===r?r=s:1!==o&&(o=1):-1!==r&&(o=-1);else if(!a){n=s+1;break}}return-1===r||-1===i||0===o||1===o&&r===i-1&&r===n+1?"":e.slice(r,i)}),"extname"),format:s((function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)}),"format"),parse:s((function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,i=e.charCodeAt(0),a=47===i;a?(r.root="/",n=1):n=0;for(var o=-1,s=0,l=-1,u=!0,c=e.length-1,h=0;c>=n;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===o?o=c:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){s=c+1;break}return-1===o||-1===l||0===h||1===h&&o===l-1&&o===s+1?-1!==l&&(r.base=r.name=0===s&&a?e.slice(1,l):e.slice(s,l)):(0===s&&a?(r.name=e.slice(1,o),r.base=e.slice(1,l)):(r.name=e.slice(s,o),r.base=e.slice(s,l)),r.ext=e.slice(o,l)),s>0?r.dir=e.slice(0,s-1):a&&(r.dir="/"),r}),"parse"),sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}s(r,"r"),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{let e;r.r(n),r.d(n,{URI:s((()=>h),"URI"),Utils:s((()=>E),"Utils")}),"object"==typeof Up?e="win32"===Up.platform:"object"==typeof navigator&&(e=navigator.userAgent.indexOf("Windows")>=0);let t=/^\w[\w\d+.-]*$/,i=/^\//,a=/^\/\//;function o(e,r){if(!e.scheme&&r)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!t.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!i.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}s(o,"s");let l="",u="/",c=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static{s(this,"f")}static isUri(e){return e instanceof h||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}scheme;authority;path;query;fragment;constructor(e,t,r,n,i,a=!1){"object"==typeof e?(this.scheme=e.scheme||l,this.authority=e.authority||l,this.path=e.path||l,this.query=e.query||l,this.fragment=e.fragment||l):(this.scheme=function(e,t){return e||t?e:"file"}(e,a),this.authority=t||l,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==u&&(t=u+t):t=u}return t}(this.scheme,r||l),this.query=n||l,this.fragment=i||l,o(this,a))}get fsPath(){return y(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:n,query:i,fragment:a}=e;return void 0===t?t=this.scheme:null===t&&(t=l),void 0===r?r=this.authority:null===r&&(r=l),void 0===n?n=this.path:null===n&&(n=l),void 0===i?i=this.query:null===i&&(i=l),void 0===a?a=this.fragment:null===a&&(a=l),t===this.scheme&&r===this.authority&&n===this.path&&i===this.query&&a===this.fragment?this:new f(t,r,n,i,a)}static parse(e,t=!1){let r=c.exec(e);return r?new f(r[2]||l,T(r[4]||l),T(r[5]||l),T(r[7]||l),T(r[9]||l),t):new f(l,l,l,l,l)}static file(t){let r=l;if(e&&(t=t.replace(/\\/g,u)),t[0]===u&&t[1]===u){let e=t.indexOf(u,2);-1===e?(r=t.substring(2),t=u):(r=t.substring(2,e),t=t.substring(e)||u)}return new f("file",r,t,l,l)}static from(e){let t=new f(e.scheme,e.authority,e.path,e.query,e.fragment);return o(t,!0),t}toString(e=!1){return v(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof h)return e;{let t=new f(e);return t._formatted=e.external,t._fsPath=e._sep===d?e.fsPath:null,t}}return e}}let d=e?1:void 0;class f extends h{static{s(this,"l")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=y(this,!1)),this._fsPath}toString(e=!1){return e?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=d),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}let p={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(e,t,r){let n,i=-1;for(let a=0;a<e.length;a++){let o=e.charCodeAt(a);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o||r&&91===o||r&&93===o||r&&58===o)-1!==i&&(n+=encodeURIComponent(e.substring(i,a)),i=-1),void 0!==n&&(n+=e.charAt(a));else{void 0===n&&(n=e.substr(0,a));let t=p[o];void 0!==t?(-1!==i&&(n+=encodeURIComponent(e.substring(i,a)),i=-1),n+=t):-1===i&&(i=a)}}return-1!==i&&(n+=encodeURIComponent(e.substring(i))),void 0!==n?n:e}function m(e){let t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);35===n||63===n?(void 0===t&&(t=e.substr(0,r)),t+=p[n]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function y(t,r){let n;return n=t.authority&&t.path.length>1&&"file"===t.scheme?`//${t.authority}${t.path}`:47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?r?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,e&&(n=n.replace(/\//g,"\\")),n}function v(e,t){let r=t?m:g,n="",{scheme:i,authority:a,path:o,query:s,fragment:l}=e;if(i&&(n+=i,n+=":"),(a||"file"===i)&&(n+=u,n+=u),a){let e=a.indexOf("@");if(-1!==e){let t=a.substr(0,e);a=a.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=r(t,!1,!1):(n+=r(t.substr(0,e),!1,!1),n+=":",n+=r(t.substr(e+1),!1,!0)),n+="@"}a=a.toLowerCase(),e=a.lastIndexOf(":"),-1===e?n+=r(a,!1,!0):(n+=r(a.substr(0,e),!1,!0),n+=a.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){let e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&58===o.charCodeAt(1)){let e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}n+=r(o,!0,!1)}return s&&(n+="?",n+=r(s,!1,!1)),l&&(n+="#",n+=t?l:g(l,!1,!1)),n}function x(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}s(g,"d"),s(m,"p"),s(y,"m"),s(v,"y"),s(x,"v");let b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T(e){return e.match(b)?e.replace(b,(e=>x(e))):e}s(T,"C");var C=r(470);let w=C.posix||C,k="/";var E;!function(e){e.joinPath=function(e,...t){return e.with({path:w.join(e.path,...t)})},e.resolvePath=function(e,...t){let r=e.path,n=!1;r[0]!==k&&(r=k+r,n=!0);let i=w.resolve(r,...t);return n&&i[0]===k&&!e.authority&&(i=i.substring(1)),e.with({path:i})},e.dirname=function(e){if(0===e.path.length||e.path===k)return e;let t=w.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)&&(t=""),e.with({path:t})},e.basename=function(e){return w.basename(e.path)},e.extname=function(e){return w.extname(e.path)}}(E||(E={}))})(),DB=n})();var VB,WB,{URI:HB,Utils:qB}=DB;!function(e){function t(e,t){return e?.toString()===t?.toString()}function r(e,t){let r="string"==typeof e?e:e.path,n="string"==typeof t?t:t.path,i=r.split("/").filter((e=>e.length>0)),a=n.split("/").filter((e=>e.length>0)),o=0;for(;o<i.length&&i[o]===a[o];o++);return"../".repeat(i.length-o)+a.slice(o).join("/")}function n(e){return HB.parse(e.toString()).toString()}e.basename=qB.basename,e.dirname=qB.dirname,e.extname=qB.extname,e.joinPath=qB.joinPath,e.resolvePath=qB.resolvePath,s(t,"equals"),e.equals=t,s(r,"relative"),e.relative=r,s(n,"normalize"),e.normalize=n}(VB||(VB={})),function(e){e[e.Changed=0]="Changed",e[e.Parsed=1]="Parsed",e[e.IndexedContent=2]="IndexedContent",e[e.ComputedScopes=3]="ComputedScopes",e[e.Linked=4]="Linked",e[e.IndexedReferences=5]="IndexedReferences",e[e.Validated=6]="Validated"}(WB||(WB={}));var YB=class{static{s(this,"DefaultLangiumDocumentFactory")}constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,t=_B.CancellationToken.None){let r=await this.fileSystemProvider.readFile(e);return this.createAsync(e,r,t)}fromTextDocument(e,t,r){return t=t??HB.parse(e.uri),_B.CancellationToken.is(r)?this.createAsync(t,e,r):this.create(t,e,r)}fromString(e,t,r){return _B.CancellationToken.is(r)?this.createAsync(t,e,r):this.create(t,e,r)}fromModel(e,t){return this.create(t,{$model:e})}create(e,t,r){if("string"==typeof t){let n=this.parse(e,t,r);return this.createLangiumDocument(n,e,void 0,t)}if("$model"in t){let r={value:t.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,e)}{let n=this.parse(e,t.getText(),r);return this.createLangiumDocument(n,e,t)}}async createAsync(e,t,r){if("string"==typeof t){let n=await this.parseAsync(e,t,r);return this.createLangiumDocument(n,e,void 0,t)}{let n=await this.parseAsync(e,t.getText(),r);return this.createLangiumDocument(n,e,t)}}createLangiumDocument(e,t,r,n){let i;if(r)i={parseResult:e,uri:t,state:WB.Parsed,references:[],textDocument:r};else{let r=this.createTextDocumentGetter(t,n);i={parseResult:e,uri:t,state:WB.Parsed,references:[],get textDocument(){return r()}}}return e.value.$document=i,i}async update(e,t){var r,n;let i=null===(r=e.parseResult.value.$cstNode)||void 0===r?void 0:r.root.fullText,a=null===(n=this.textDocuments)||void 0===n?void 0:n.get(e.uri.toString()),o=a?a.getText():await this.fileSystemProvider.readFile(e.uri);if(a)Object.defineProperty(e,"textDocument",{value:a});else{let t=this.createTextDocumentGetter(e.uri,o);Object.defineProperty(e,"textDocument",{get:t})}return i!==o&&(e.parseResult=await this.parseAsync(e.uri,o,t),e.parseResult.value.$document=e),e.state=WB.Parsed,e}parse(e,t,r){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(t,r)}parseAsync(e,t,r){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(t,r)}createTextDocumentGetter(e,t){let r,n=this.serviceRegistry;return()=>r??(r=PB.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,t??""))}},XB=class{static{s(this,"DefaultLangiumDocuments")}constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.serviceRegistry=e.ServiceRegistry}get all(){return e_(this.documentMap.values())}addDocument(e){let t=e.uri.toString();if(this.documentMap.has(t))throw new Error(`A document with the URI '${t}' is already present.`);this.documentMap.set(t,e)}getDocument(e){let t=e.toString();return this.documentMap.get(t)}async getOrCreateDocument(e,t){let r=this.getDocument(e);return r||(r=await this.langiumDocumentFactory.fromUri(e,t),this.addDocument(r),r)}createDocument(e,t,r){if(r)return this.langiumDocumentFactory.fromString(t,e,r).then((e=>(this.addDocument(e),e)));{let r=this.langiumDocumentFactory.fromString(t,e);return this.addDocument(r),r}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){let t=e.toString(),r=this.documentMap.get(t);return r&&(this.serviceRegistry.getServices(e).references.Linker.unlink(r),r.state=WB.Changed,r.precomputedScopes=void 0,r.diagnostics=void 0),r}deleteDocument(e){let t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=WB.Changed,this.documentMap.delete(t)),r}},KB=Symbol("ref_resolving"),ZB=class{static{s(this,"DefaultLinker")}constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,t=_B.CancellationToken.None){for(let r of _S(e.parseResult.value))await OB(t),SS(r).forEach((t=>this.doLink(t,e)))}doLink(e,t){var r;let n=e.reference;if(void 0===n._ref){n._ref=KB;try{let t=this.getCandidate(e);if(VE(t))n._ref=t;else if(n._nodeDescription=t,this.langiumDocuments().hasDocument(t.documentUri)){let r=this.loadAstNode(t);n._ref=r??this.createLinkingError(e,t)}else n._ref=void 0}catch(t){console.error(`An error occurred while resolving reference to '${n.$refText}':`,t);let i=null!==(r=t.message)&&void 0!==r?r:String(t);n._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${n.$refText}': ${i}`})}t.references.push(n)}}unlink(e){for(let t of e.references)delete t._ref,delete t._nodeDescription;e.references=[]}getCandidate(e){return this.scopeProvider.getScope(e).getElement(e.reference.$refText)??this.createLinkingError(e)}buildReference(e,t,r,n){let i=this,a={$refNode:r,$refText:n,get ref(){var r;if(UE(this._ref))return this._ref;if(jE(this._nodeDescription)){let r=i.loadAstNode(this._nodeDescription);this._ref=r??i.createLinkingError({reference:a,container:e,property:t},this._nodeDescription)}else if(void 0===this._ref){this._ref=KB;let n=wS(e).$document,o=i.getLinkedNode({reference:a,container:e,property:t});if(o.error&&n&&n.state<WB.ComputedScopes)return this._ref=void 0;this._ref=null!==(r=o.node)&&void 0!==r?r:o.error,this._nodeDescription=o.descr,n?.references.push(this)}else if(this._ref===KB)throw new Error(`Cyclic reference resolution detected: ${i.astNodeLocator.getAstNodePath(e)}/${t} (symbol '${n}')`);return UE(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return VE(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){var t;try{let t=this.getCandidate(e);if(VE(t))return{error:t};let r=this.loadAstNode(t);return r?{node:r,descr:t}:{descr:t,error:this.createLinkingError(e,t)}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);let n=null!==(t=r.message)&&void 0!==t?t:String(r);return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`})}}}loadAstNode(e){if(e.node)return e.node;let t=this.langiumDocuments().getDocument(e.documentUri);return t?this.astNodeLocator.getAstNode(t.parseResult.value,e.path):void 0}createLinkingError(e,t){let r=wS(e.container).$document;r&&r.state<WB.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);let n=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${n} named '${e.reference.$refText}'.`,targetDescription:t})}};function QB(e){return"string"==typeof e.name}s(QB,"isNamed");var JB=class{static{s(this,"DefaultNameProvider")}getName(e){if(QB(e))return e.name}getNameNode(e){return fR(e.$cstNode,"name")}},eF=class{static{s(this,"DefaultReferences")}constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){let t=vR(e),r=e.astNode;if(t&&r){let n=r[t.feature];if(GE(n))return n.ref;if(Array.isArray(n))for(let t of n)if(GE(t)&&t.$refNode&&t.$refNode.offset<=e.offset&&t.$refNode.end>=e.end)return t.ref}if(r){let t=this.nameProvider.getNameNode(r);if(t&&(t===e||s_(e,t)))return r}}}findDeclarationNode(e){let t=this.findDeclaration(e);if(t?.$cstNode){return this.nameProvider.getNameNode(t)??t.$cstNode}}findReferences(e,t){let r=[];if(t.includeDeclaration){let t=this.getReferenceToSelf(e);t&&r.push(t)}let n=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return t.documentUri&&(n=n.filter((e=>VB.equals(e.sourceUri,t.documentUri)))),r.push(...n),e_(r)}getReferenceToSelf(e){let t=this.nameProvider.getNameNode(e);if(t){let r=CS(e),n=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:n,targetUri:r.uri,targetPath:n,segment:u_(t),local:!0}}}},tF=class{static{s(this,"MultiMap")}constructor(e){if(this.map=new Map,e)for(let[t,r]of e)this.add(t,r)}get size(){return t_.sum(e_(this.map.values()).map((e=>e.length)))}clear(){this.map.clear()}delete(e,t){if(void 0===t)return this.map.delete(e);{let r=this.map.get(e);if(r){let n=r.indexOf(t);if(n>=0)return 1===r.length?this.map.delete(e):r.splice(n,1),!0}return!1}}get(e){var t;return null!==(t=this.map.get(e))&&void 0!==t?t:[]}has(e,t){if(void 0===t)return this.map.has(e);{let r=this.map.get(e);return!!r&&r.indexOf(t)>=0}}add(e,t){return this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t]),this}addAll(e,t){return this.map.has(e)?this.map.get(e).push(...t):this.map.set(e,Array.from(t)),this}forEach(e){this.map.forEach(((t,r)=>t.forEach((t=>e(t,r,this)))))}[Symbol.iterator](){return this.entries().iterator()}entries(){return e_(this.map.entries()).flatMap((([e,t])=>t.map((t=>[e,t]))))}keys(){return e_(this.map.keys())}values(){return e_(this.map.values()).flat()}entriesGroupedByKey(){return e_(this.map.entries())}},rF=class{static{s(this,"BiMap")}get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(let[t,r]of e)this.set(t,r)}clear(){this.map.clear(),this.inverse.clear()}set(e,t){return this.map.set(e,t),this.inverse.set(t,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){let t=this.map.get(e);return void 0!==t&&(this.map.delete(e),this.inverse.delete(t),!0)}},nF=class{static{s(this,"DefaultScopeComputation")}constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,t=_B.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,t)}async computeExportsForNode(e,t,r=kS,n=_B.CancellationToken.None){let i=[];this.exportNode(e,i,t);for(let a of r(e))await OB(n),this.exportNode(a,i,t);return i}exportNode(e,t,r){let n=this.nameProvider.getName(e);n&&t.push(this.descriptions.createDescription(e,n,r))}async computeLocalScopes(e,t=_B.CancellationToken.None){let r=e.parseResult.value,n=new tF;for(let i of ES(r))await OB(t),this.processNode(i,e,n);return n}processNode(e,t,r){let n=e.$container;if(n){let i=this.nameProvider.getName(e);i&&r.add(n,this.descriptions.createDescription(e,i,t))}}},iF=class{static{s(this,"StreamScope")}constructor(e,t,r){var n;this.elements=e,this.outerScope=t,this.caseInsensitive=null!==(n=r?.caseInsensitive)&&void 0!==n&&n}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){let t=this.caseInsensitive?this.elements.find((t=>t.name.toLowerCase()===e.toLowerCase())):this.elements.find((t=>t.name===e));return t||(this.outerScope?this.outerScope.getElement(e):void 0)}},aF=class{static{s(this,"MapScope")}constructor(e,t,r){var n;this.elements=new Map,this.caseInsensitive=null!==(n=r?.caseInsensitive)&&void 0!==n&&n;for(let t of e){let e=this.caseInsensitive?t.name.toLowerCase():t.name;this.elements.set(e,t)}this.outerScope=t}getElement(e){let t=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(t);return r||(this.outerScope?this.outerScope.getElement(e):void 0)}getAllElements(){let e=e_(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},oF={getElement(){},getAllElements:()=>QE},sF=class{static{s(this,"DisposableCache")}constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach((e=>e.dispose()))}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},lF=class extends sF{static{s(this,"SimpleCache")}constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,t){this.throwIfDisposed(),this.cache.set(e,t)}get(e,t){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(t){let r=t();return this.cache.set(e,r),r}}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}},uF=class extends sF{static{s(this,"ContextCache")}constructor(e){super(),this.cache=new Map,this.converter=e??(e=>e)}has(e,t){return this.throwIfDisposed(),this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed(),this.cacheForContext(e).set(t,r)}get(e,t,r){this.throwIfDisposed();let n=this.cacheForContext(e);if(n.has(t))return n.get(t);if(r){let e=r();return n.set(t,e),e}}delete(e,t){return this.throwIfDisposed(),this.cacheForContext(e).delete(t)}clear(e){if(this.throwIfDisposed(),e){let t=this.converter(e);this.cache.delete(t)}else this.cache.clear()}cacheForContext(e){let t=this.converter(e),r=this.cache.get(t);return r||(r=new Map,this.cache.set(t,r)),r}},cF=class extends uF{static{s(this,"DocumentCache")}constructor(e,t){super((e=>e.toString())),t?(this.toDispose.push(e.workspace.DocumentBuilder.onDocumentPhase(t,(e=>{this.clear(e.uri.toString())}))),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(((e,t)=>{for(let e of t)this.clear(e)})))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(((e,t)=>{let r=e.concat(t);for(let e of r)this.clear(e)})))}},hF=class extends lF{static{s(this,"WorkspaceCache")}constructor(e,t){super(),t?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(t,(()=>{this.clear()}))),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(((e,t)=>{t.length>0&&this.clear()})))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((()=>{this.clear()})))}},dF=class{static{s(this,"DefaultScopeProvider")}constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new hF(e.shared)}getScope(e){let t=[],r=this.reflection.getReferenceType(e),n=CS(e.container).precomputedScopes;if(n){let i=e.container;do{let e=n.get(i);e.length>0&&t.push(e_(e).filter((e=>this.reflection.isSubtype(e.type,r)))),i=i.$container}while(i)}let i=this.getGlobalScope(r,e);for(let e=t.length-1;e>=0;e--)i=this.createScope(t[e],i);return i}createScope(e,t,r){return new iF(e_(e),t,r)}createScopeForNodes(e,t,r){let n=e_(e).map((e=>{let t=this.nameProvider.getName(e);if(t)return this.descriptions.createDescription(e,t)})).nonNullable();return new iF(n,t,r)}getGlobalScope(e,t){return this.globalScopeCache.get(e,(()=>new aF(this.indexManager.allElements(e))))}};function fF(e){return"string"==typeof e.$comment}function pF(e){return"object"==typeof e&&!!e&&("$ref"in e||"$error"in e)}s(fF,"isAstNodeWithComment"),s(pF,"isIntermediateReference");var gF,mF=class{static{s(this,"DefaultJsonSerializer")}constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,t){let r=t??{},n=t?.replacer,i=s(((e,t)=>this.replacer(e,t,r)),"defaultReplacer"),a=n?(e,t)=>n(e,t,i):i;try{return this.currentDocument=CS(e),JSON.stringify(e,a,t?.space)}finally{this.currentDocument=void 0}}deserialize(e,t){let r=t??{},n=JSON.parse(e);return this.linkNode(n,n,r),n}replacer(e,t,{refText:r,sourceText:n,textRegions:i,comments:a,uriConverter:o}){var s,l,u,c;if(!this.ignoreProperties.has(e)){if(GE(t)){let e=t.ref,n=r?t.$refText:void 0;if(e){let r=CS(e),i="";return this.currentDocument&&this.currentDocument!==r&&(i=o?o(r.uri,t):r.uri.toString()),{$ref:`${i}#${this.astNodeLocator.getAstNodePath(e)}`,$refText:n}}return{$error:null!==(l=null===(s=t.error)||void 0===s?void 0:s.message)&&void 0!==l?l:"Could not resolve reference",$refText:n}}if(UE(t)){let r;if(i&&(r=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},t)),(!e||t.$document)&&r?.$textRegion&&(r.$textRegion.documentURI=null===(u=this.currentDocument)||void 0===u?void 0:u.uri.toString())),n&&!e&&(r??(r=Object.assign({},t)),r.$sourceText=null===(c=t.$cstNode)||void 0===c?void 0:c.text),a){r??(r=Object.assign({},t));let e=this.commentProvider.getComment(t);e&&(r.$comment=e.replace(/\r/g,""))}return r??t}return t}}addAstNodeRegionWithAssignmentsTo(e){let t=s((e=>({offset:e.offset,end:e.end,length:e.length,range:e.range})),"createDocumentSegment");if(e.$cstNode){let r=(e.$textRegion=t(e.$cstNode)).assignments={};return Object.keys(e).filter((e=>!e.startsWith("$"))).forEach((n=>{let i=dR(e.$cstNode,n).map(t);0!==i.length&&(r[n]=i)})),e}}linkNode(e,t,r,n,i,a){for(let[n,i]of Object.entries(e))if(Array.isArray(i))for(let a=0;a<i.length;a++){let o=i[a];pF(o)?i[a]=this.reviveReference(e,n,t,o,r):UE(o)&&this.linkNode(o,t,r,e,n,a)}else pF(i)?e[n]=this.reviveReference(e,n,t,i,r):UE(i)&&this.linkNode(i,t,r,e,n);let o=e;o.$container=n,o.$containerProperty=i,o.$containerIndex=a}reviveReference(e,t,r,n,i){let a=n.$refText,o=n.$error;if(n.$ref){let e=this.getRefNode(r,n.$ref,i.uriConverter);if(UE(e))return a||(a=this.nameProvider.getName(e)),{$refText:a??"",ref:e};o=e}if(o){let r={$refText:a??""};return r.error={container:e,property:t,message:o,reference:r},r}}getRefNode(e,t,r){try{let n=t.indexOf("#");if(0===n){return this.astNodeLocator.getAstNode(e,t.substring(1))||"Could not resolve path: "+t}if(n<0){let e=r?r(t):HB.parse(t),n=this.langiumDocuments.getDocument(e);return n?n.parseResult.value:"Could not find document for URI: "+t}let i=r?r(t.substring(0,n)):HB.parse(t.substring(0,n)),a=this.langiumDocuments.getDocument(i);return a?n===t.length-1?a.parseResult.value:this.astNodeLocator.getAstNode(a.parseResult.value,t.substring(n+1))||"Could not resolve URI: "+t:"Could not find document for URI: "+t}catch(e){return String(e)}}},yF=class{static{s(this,"DefaultServiceRegistry")}get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=e?.workspace.TextDocuments}register(e){let t=e.LanguageMetaData;for(let r of t.fileExtensions)this.fileExtensionMap.has(r)&&console.warn(`The file extension ${r} is used by multiple languages. It is now assigned to '${t.languageId}'.`),this.fileExtensionMap.set(r,e);this.languageIdMap.set(t.languageId,e),1===this.languageIdMap.size?this.singleton=e:this.singleton=void 0}getServices(e){var t,r;if(void 0!==this.singleton)return this.singleton;if(0===this.languageIdMap.size)throw new Error("The service registry is empty. Use `register` to register the services of a language.");let n=null===(r=null===(t=this.textDocuments)||void 0===t?void 0:t.get(e))||void 0===r?void 0:r.languageId;if(void 0!==n){let e=this.languageIdMap.get(n);if(e)return e}let i=VB.extname(e),a=this.fileExtensionMap.get(i);if(!a)throw n?new Error(`The service registry contains no services for the extension '${i}' for language '${n}'.`):new Error(`The service registry contains no services for the extension '${i}'.`);return a}hasServices(e){try{return this.getServices(e),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}};function vF(e){return{code:e}}s(vF,"diagnosticData"),(gF||(gF={})).all=["fast","slow","built-in"];var xF,bF=class{static{s(this,"ValidationRegistry")}constructor(e){this.entries=new tF,this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if("built-in"===r)throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(let[n,i]of Object.entries(e)){let e=i;if(Array.isArray(e))for(let i of e){let e={check:this.wrapValidationException(i,t),category:r};this.addEntry(n,e)}else if("function"==typeof e){let i={check:this.wrapValidationException(e,t),category:r};this.addEntry(n,i)}else A_()}}wrapValidationException(e,t){return async(r,n,i)=>{await this.handleException((()=>e.call(t,r,n,i)),"An error occurred during validation",n,r)}}async handleException(e,t,r,n){try{await e()}catch(e){if(MB(e))throw e;console.error(`${t}:`,e),e instanceof Error&&e.stack&&console.error(e.stack),r("error",`${t}: ${e instanceof Error?e.message:String(e)}`,{node:n})}}addEntry(e,t){if("AstNode"!==e)for(let r of this.reflection.getAllSubTypes(e))this.entries.add(r,t);else this.entries.add("AstNode",t)}getChecks(e,t){let r=e_(this.entries.get(e)).concat(this.entries.get("AstNode"));return t&&(r=r.filter((e=>t.includes(e.category)))),r.map((e=>e.check))}registerBeforeDocument(e,t=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",t))}registerAfterDocument(e,t=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",t))}wrapPreparationException(e,t,r){return async(n,i,a,o)=>{await this.handleException((()=>e.call(r,n,i,a,o)),t,i,n)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}},TF=class{static{s(this,"DefaultDocumentValidator")}constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,t={},r=_B.CancellationToken.None){let n=e.parseResult,i=[];if(await OB(r),(!t.categories||t.categories.includes("built-in"))&&(this.processLexingErrors(n,i,t),t.stopAfterLexingErrors&&i.some((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===xF.LexingError}))||(this.processParsingErrors(n,i,t),t.stopAfterParsingErrors&&i.some((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===xF.ParsingError})))||(this.processLinkingErrors(e,i,t),t.stopAfterLinkingErrors&&i.some((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===xF.LinkingError})))))return i;try{i.push(...await this.validateAst(n.value,t,r))}catch(e){if(MB(e))throw e;console.error("An error occurred during validation:",e)}return await OB(r),i}processLexingErrors(e,t,r){var n,i,a;let o=[...e.lexerErrors,...null!==(i=null===(n=e.lexerReport)||void 0===n?void 0:n.diagnostics)&&void 0!==i?i:[]];for(let e of o){let r=null!==(a=e.severity)&&void 0!==a?a:"error",n={severity:wF(r),range:{start:{line:e.line-1,character:e.column-1},end:{line:e.line-1,character:e.column+e.length-1}},message:e.message,data:kF(r),source:this.getSource()};t.push(n)}}processParsingErrors(e,t,r){for(let r of e.parserErrors){let e;if(isNaN(r.token.startOffset)){if("previousToken"in r){let t=r.previousToken;if(isNaN(t.startOffset)){let t={line:0,character:0};e={start:t,end:t}}else{let r={line:t.endLine-1,character:t.endColumn};e={start:r,end:r}}}}else e=l_(r.token);if(e){let n={severity:wF("error"),range:e,message:r.message,data:vF(xF.ParsingError),source:this.getSource()};t.push(n)}}}processLinkingErrors(e,t,r){for(let r of e.references){let e=r.error;if(e){let r={node:e.container,property:e.property,index:e.index,data:{code:xF.LinkingError,containerType:e.container.$type,property:e.property,refText:e.reference.$refText}};t.push(this.toDiagnostic("error",e.message,r))}}}async validateAst(e,t,r=_B.CancellationToken.None){let n=[],i=s(((e,t,r)=>{n.push(this.toDiagnostic(e,t,r))}),"acceptor");return await this.validateAstBefore(e,t,i,r),await this.validateAstNodes(e,t,i,r),await this.validateAstAfter(e,t,i,r),n}async validateAstBefore(e,t,r,n=_B.CancellationToken.None){var i;let a=this.validationRegistry.checksBefore;for(let o of a)await OB(n),await o(e,r,null!==(i=t.categories)&&void 0!==i?i:[],n)}async validateAstNodes(e,t,r,n=_B.CancellationToken.None){await Promise.all(_S(e).map((async e=>{await OB(n);let i=this.validationRegistry.getChecks(e.$type,t.categories);for(let t of i)await t(e,r,n)})))}async validateAstAfter(e,t,r,n=_B.CancellationToken.None){var i;let a=this.validationRegistry.checksAfter;for(let o of a)await OB(n),await o(e,r,null!==(i=t.categories)&&void 0!==i?i:[],n)}toDiagnostic(e,t,r){return{message:t,range:CF(r),severity:wF(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}};function CF(e){if(e.range)return e.range;let t;return"string"==typeof e.property?t=fR(e.node.$cstNode,e.property,e.index):"string"==typeof e.keyword&&(t=mR(e.node.$cstNode,e.keyword,e.index)),t??(t=e.node.$cstNode),t?t.range:{start:{line:0,character:0},end:{line:0,character:0}}}function wF(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}function kF(e){switch(e){case"error":return vF(xF.LexingError);case"warning":return vF(xF.LexingWarning);case"info":return vF(xF.LexingInfo);case"hint":return vF(xF.LexingHint);default:throw new Error("Invalid diagnostic severity: "+e)}}s(CF,"getDiagnosticRange"),s(wF,"toDiagnosticSeverity"),s(kF,"toDiagnosticData"),function(e){e.LexingError="lexing-error",e.LexingWarning="lexing-warning",e.LexingInfo="lexing-info",e.LexingHint="lexing-hint",e.ParsingError="parsing-error",e.LinkingError="linking-error"}(xF||(xF={}));var EF=class{static{s(this,"DefaultAstNodeDescriptionProvider")}constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,r){let n=r??CS(e);t??(t=this.nameProvider.getName(e));let i=this.astNodeLocator.getAstNodePath(e);if(!t)throw new Error(`Node at path ${i} has no name.`);let a,o=s((()=>{var t;return a??(a=u_(null!==(t=this.nameProvider.getNameNode(e))&&void 0!==t?t:e.$cstNode))}),"nameSegmentGetter");return{node:e,name:t,get nameSegment(){return o()},selectionSegment:u_(e.$cstNode),type:e.$type,documentUri:n.uri,path:i}}},_F=class{static{s(this,"DefaultReferenceDescriptionProvider")}constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,t=_B.CancellationToken.None){let r=[],n=e.parseResult.value;for(let e of _S(n))await OB(t),SS(e).filter((e=>!VE(e))).forEach((e=>{let t=this.createDescription(e);t&&r.push(t)}));return r}createDescription(e){let t=e.reference.$nodeDescription,r=e.reference.$refNode;if(!t||!r)return;let n=CS(e.container).uri;return{sourceUri:n,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:u_(r),local:VB.equals(t.documentUri,n)}}},AF=class{static{s(this,"DefaultAstNodeLocator")}constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){let t=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return t+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:t}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return void 0!==t?e+this.indexSeparator+t:e}getAstNode(e,t){return t.split(this.segmentSeparator).reduce(((e,t)=>{if(!e||0===t.length)return e;let r=t.indexOf(this.indexSeparator);if(r>0){let n=t.substring(0,r),i=parseInt(t.substring(r+1)),a=e[n];return a?.[i]}return e[t]}),e)}},SF={};h(SF,d(BE(),1));var RF,NF=class{static{s(this,"DefaultConfigurationProvider")}constructor(e){this._ready=new BB,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new SF.Emitter,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=null!==(r=null===(t=e.capabilities.workspace)||void 0===t?void 0:t.configuration)&&void 0!==r&&r}async initialized(e){if(this.workspaceConfig){if(e.register){let t=this.serviceRegistry.all;e.register({section:t.map((e=>this.toSectionName(e.LanguageMetaData.languageId)))})}if(e.fetchConfiguration){let t=this.serviceRegistry.all.map((e=>({section:this.toSectionName(e.LanguageMetaData.languageId)}))),r=await e.fetchConfiguration(t);t.forEach(((e,t)=>{this.updateSectionConfiguration(e.section,r[t])}))}}this._ready.resolve()}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach((t=>{let r=e.settings[t];this.updateSectionConfiguration(t,r),this.onConfigurationSectionUpdateEmitter.fire({section:t,configuration:r})}))}updateSectionConfiguration(e,t){this.settings[e]=t}async getConfiguration(e,t){await this.ready;let r=this.toSectionName(e);if(this.settings[r])return this.settings[r][t]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}};!function(e){function t(e){return{dispose:s((async()=>await e()),"dispose")}}s(t,"create"),e.create=t}(RF||(RF={}));var LF=class{static{s(this,"DefaultDocumentBuilder")}constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new tF,this.documentPhaseListeners=new tF,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=WB.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,t={},r=_B.CancellationToken.None){var n,i;for(let r of e){let e=r.uri.toString();if(r.state===WB.Validated){if("boolean"==typeof t.validation&&t.validation)r.state=WB.IndexedReferences,r.diagnostics=void 0,this.buildState.delete(e);else if("object"==typeof t.validation){let a=this.buildState.get(e),o=null===(n=a?.result)||void 0===n?void 0:n.validationChecks;if(o){let n=(null!==(i=t.validation.categories)&&void 0!==i?i:gF.all).filter((e=>!o.includes(e)));n.length>0&&(this.buildState.set(e,{completed:!1,options:{validation:Object.assign(Object.assign({},t.validation),{categories:n})},result:a.result}),r.state=WB.IndexedReferences)}}}else this.buildState.delete(e)}this.currentState=WB.Changed,await this.emitUpdate(e.map((e=>e.uri)),[]),await this.buildDocuments(e,t,r)}async update(e,t,r=_B.CancellationToken.None){this.currentState=WB.Changed;for(let e of t)this.langiumDocuments.deleteDocument(e),this.buildState.delete(e.toString()),this.indexManager.remove(e);for(let t of e){if(!this.langiumDocuments.invalidateDocument(t)){let e=this.langiumDocumentFactory.fromModel({$type:"INVALID"},t);e.state=WB.Changed,this.langiumDocuments.addDocument(e)}this.buildState.delete(t.toString())}let n=e_(e).concat(t).map((e=>e.toString())).toSet();this.langiumDocuments.all.filter((e=>!n.has(e.uri.toString())&&this.shouldRelink(e,n))).forEach((e=>{this.serviceRegistry.getServices(e.uri).references.Linker.unlink(e),e.state=Math.min(e.state,WB.ComputedScopes),e.diagnostics=void 0})),await this.emitUpdate(e,t),await OB(r);let i=this.sortDocuments(this.langiumDocuments.all.filter((e=>{var t;return e.state<WB.Linked||!(null!==(t=this.buildState.get(e.uri.toString()))&&void 0!==t&&t.completed)})).toArray());await this.buildDocuments(i,this.updateBuildOptions,r)}async emitUpdate(e,t){await Promise.all(this.updateListeners.map((r=>r(e,t))))}sortDocuments(e){let t=0,r=e.length-1;for(;t<r;){for(;t<e.length&&this.hasTextDocument(e[t]);)t++;for(;r>=0&&!this.hasTextDocument(e[r]);)r--;t<r&&([e[t],e[r]]=[e[r],e[t]])}return e}hasTextDocument(e){var t;return!(null===(t=this.textDocuments)||void 0===t||!t.get(e.uri))}shouldRelink(e,t){return!!e.references.some((e=>void 0!==e.error))||this.indexManager.isAffected(e,t)}onUpdate(e){return this.updateListeners.push(e),RF.create((()=>{let t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)}))}async buildDocuments(e,t,r){this.prepareBuild(e,t),await this.runCancelable(e,WB.Parsed,r,(e=>this.langiumDocumentFactory.update(e,r))),await this.runCancelable(e,WB.IndexedContent,r,(e=>this.indexManager.updateContent(e,r))),await this.runCancelable(e,WB.ComputedScopes,r,(async e=>{let t=this.serviceRegistry.getServices(e.uri).references.ScopeComputation;e.precomputedScopes=await t.computeLocalScopes(e,r)})),await this.runCancelable(e,WB.Linked,r,(e=>this.serviceRegistry.getServices(e.uri).references.Linker.link(e,r))),await this.runCancelable(e,WB.IndexedReferences,r,(e=>this.indexManager.updateReferences(e,r)));let n=e.filter((e=>this.shouldValidate(e)));await this.runCancelable(n,WB.Validated,r,(e=>this.validate(e,r)));for(let t of e){let e=this.buildState.get(t.uri.toString());e&&(e.completed=!0)}}prepareBuild(e,t){for(let r of e){let e=r.uri.toString(),n=this.buildState.get(e);(!n||n.completed)&&this.buildState.set(e,{completed:!1,options:t,result:n?.result})}}async runCancelable(e,t,r,n){let i=e.filter((e=>e.state<t));for(let e of i)await OB(r),await n(e),e.state=t,await this.notifyDocumentPhase(e,t,r);let a=e.filter((e=>e.state===t));await this.notifyBuildPhase(a,t,r),this.currentState=t}onBuildPhase(e,t){return this.buildPhaseListeners.add(e,t),RF.create((()=>{this.buildPhaseListeners.delete(e,t)}))}onDocumentPhase(e,t){return this.documentPhaseListeners.add(e,t),RF.create((()=>{this.documentPhaseListeners.delete(e,t)}))}waitUntil(e,t,r){let n;if(t&&"path"in t?n=t:r=t,r??(r=_B.CancellationToken.None),n){let t=this.langiumDocuments.getDocument(n);if(t&&t.state>e)return Promise.resolve(n)}return this.currentState>=e?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(IB):new Promise(((t,i)=>{let a=this.onBuildPhase(e,(()=>{if(a.dispose(),o.dispose(),n){let e=this.langiumDocuments.getDocument(n);t(e?.uri)}else t(void 0)})),o=r.onCancellationRequested((()=>{a.dispose(),o.dispose(),i(IB)}))}))}async notifyDocumentPhase(e,t,r){let n=this.documentPhaseListeners.get(t).slice();for(let t of n)try{await t(e,r)}catch(e){if(!MB(e))throw e}}async notifyBuildPhase(e,t,r){if(0===e.length)return;let n=this.buildPhaseListeners.get(t).slice();for(let t of n)await OB(r),await t(e,r)}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,t){var r,n;let i=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,o="object"==typeof a?a:void 0,s=await i.validateDocument(e,o,t);e.diagnostics?e.diagnostics.push(...s):e.diagnostics=s;let l=this.buildState.get(e.uri.toString());if(l){null!==(r=l.result)&&void 0!==r||(l.result={});let e=null!==(n=o?.categories)&&void 0!==n?n:gF.all;l.result.validationChecks?l.result.validationChecks.push(...e):l.result.validationChecks=[...e]}}getBuildOptions(e){var t,r;return null!==(r=null===(t=this.buildState.get(e.uri.toString()))||void 0===t?void 0:t.options)&&void 0!==r?r:{}}},IF=class{static{s(this,"DefaultIndexManager")}constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new uF,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,t){let r=CS(e).uri,n=[];return this.referenceIndex.forEach((e=>{e.forEach((e=>{VB.equals(e.targetUri,r)&&e.targetPath===t&&n.push(e)}))})),e_(n)}allElements(e,t){let r=e_(this.symbolIndex.keys());return t&&(r=r.filter((e=>!t||t.has(e)))),r.map((t=>this.getFileDescriptions(t,e))).flat()}getFileDescriptions(e,t){var r;return t?this.symbolByTypeIndex.get(e,t,(()=>{var r;return(null!==(r=this.symbolIndex.get(e))&&void 0!==r?r:[]).filter((e=>this.astReflection.isSubtype(e.type,t)))})):null!==(r=this.symbolIndex.get(e))&&void 0!==r?r:[]}remove(e){let t=e.toString();this.symbolIndex.delete(t),this.symbolByTypeIndex.clear(t),this.referenceIndex.delete(t)}async updateContent(e,t=_B.CancellationToken.None){let r=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,t),n=e.uri.toString();this.symbolIndex.set(n,r),this.symbolByTypeIndex.clear(n)}async updateReferences(e,t=_B.CancellationToken.None){let r=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),r)}isAffected(e,t){let r=this.referenceIndex.get(e.uri.toString());return!!r&&r.some((e=>!e.local&&t.has(e.targetUri.toString())))}},MF=class{static{s(this,"DefaultWorkspaceManager")}constructor(e){this.initialBuildOptions={},this._ready=new BB,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){var t;this.folders=null!==(t=e.workspaceFolders)&&void 0!==t?t:void 0}initialized(e){return this.mutex.write((e=>{var t;return this.initializeWorkspace(null!==(t=this.folders)&&void 0!==t?t:[],e)}))}async initializeWorkspace(e,t=_B.CancellationToken.None){let r=await this.performStartup(e);await OB(t),await this.documentBuilder.build(r,this.initialBuildOptions,t)}async performStartup(e){let t=this.serviceRegistry.all.flatMap((e=>e.LanguageMetaData.fileExtensions)),r=[],n=s((e=>{r.push(e),this.langiumDocuments.hasDocument(e.uri)||this.langiumDocuments.addDocument(e)}),"collector");return await this.loadAdditionalDocuments(e,n),await Promise.all(e.map((e=>[e,this.getRootFolder(e)])).map((async e=>this.traverseFolder(...e,t,n)))),this._ready.resolve(),r}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(e){return HB.parse(e.uri)}async traverseFolder(e,t,r,n){let i=await this.fileSystemProvider.readDirectory(t);await Promise.all(i.map((async t=>{if(this.includeEntry(e,t,r))if(t.isDirectory)await this.traverseFolder(e,t.uri,r,n);else if(t.isFile){let e=await this.langiumDocuments.getOrCreateDocument(t.uri);n(e)}})))}includeEntry(e,t,r){let n=VB.basename(t.uri);if(n.startsWith("."))return!1;if(t.isDirectory)return"node_modules"!==n&&"out"!==n;if(t.isFile){let e=VB.extname(t.uri);return r.includes(e)}return!1}},OF=class{static{s(this,"DefaultLexerErrorMessageProvider")}buildUnexpectedCharactersMessage(e,t,r,n,i){return FL.buildUnexpectedCharactersMessage(e,t,r,n,i)}buildUnableToPopLexerModeMessage(e){return FL.buildUnableToPopLexerModeMessage(e)}},PF={mode:"full"},DF=class{static{s(this,"DefaultLexer")}constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;let t=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);let r=$F(t)?Object.values(t):t,n="production"===e.LanguageMetaData.mode;this.chevrotainLexer=new zL(r,{positionTracking:"full",skipValidations:n,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,t=PF){var r,n,i;let a=this.chevrotainLexer.tokenize(e);return{tokens:a.tokens,errors:a.errors,hidden:null!==(r=a.groups.hidden)&&void 0!==r?r:[],report:null===(i=(n=this.tokenBuilder).flushLexingReport)||void 0===i?void 0:i.call(n,e)}}toTokenTypeDictionary(e){if($F(e))return e;let t=FF(e)?Object.values(e.modes).flat():e,r={};return t.forEach((e=>r[e.name]=e)),r}};function BF(e){return Array.isArray(e)&&(0===e.length||"name"in e[0])}function FF(e){return e&&"modes"in e&&"defaultMode"in e}function $F(e){return!BF(e)&&!FF(e)}function zF(e,t,r){let n,i;return"string"==typeof e?(i=t,n=r):(i=e.range.start,n=t),i||(i=VO.create(0,0)),ZF({index:0,tokens:WF({lines:GF(e),position:i,options:i$(n)}),position:i})}function UF(e,t){let r=i$(t),n=GF(e);if(0===n.length)return!1;let i=n[0],a=n[n.length-1],o=r.start,s=r.end;return!!o?.exec(i)&&!!s?.exec(a)}function GF(e){let t="";return t="string"==typeof e?e:e.text,t.split(YS)}s(BF,"isTokenTypeArray"),s(FF,"isIMultiModeLexerDefinition"),s($F,"isTokenTypeDictionary"),s(zF,"parseJSDoc"),s(UF,"isJSDoc"),s(GF,"getLines");var jF=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,VF=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function WF(e){var t,r,n;let i=[],a=e.position.line,o=e.position.character;for(let s=0;s<e.lines.length;s++){let l=0===s,u=s===e.lines.length-1,c=e.lines[s],h=0;if(l&&e.options.start){let r=null===(t=e.options.start)||void 0===t?void 0:t.exec(c);r&&(h=r.index+r[0].length)}else{let t=null===(r=e.options.line)||void 0===r?void 0:r.exec(c);t&&(h=t.index+t[0].length)}if(u){let t=null===(n=e.options.end)||void 0===n?void 0:n.exec(c);t&&(c=c.substring(0,t.index))}if(c=c.substring(0,KF(c)),XF(c,h)>=c.length){if(i.length>0){let e=VO.create(a,o);i.push({type:"break",content:"",range:WO.create(e,e)})}}else{jF.lastIndex=h;let e=jF.exec(c);if(e){let t=e[0],r=e[1],n=VO.create(a,o+h),s=VO.create(a,o+h+t.length);i.push({type:"tag",content:r,range:WO.create(n,s)}),h+=t.length,h=XF(c,h)}if(h<c.length){let e=c.substring(h),t=Array.from(e.matchAll(VF));i.push(...HF(t,e,a,o+h))}}a++,o=0}return i.length>0&&"break"===i[i.length-1].type?i.slice(0,-1):i}function HF(e,t,r,n){let i=[];if(0===e.length){let e=VO.create(r,n),a=VO.create(r,n+t.length);i.push({type:"text",content:t,range:WO.create(e,a)})}else{let a=0;for(let o of e){let e=o.index,s=t.substring(a,e);s.length>0&&i.push({type:"text",content:t.substring(a,e),range:WO.create(VO.create(r,a+n),VO.create(r,e+n))});let l=s.length+1,u=o[1];if(i.push({type:"inline-tag",content:u,range:WO.create(VO.create(r,a+l+n),VO.create(r,a+l+u.length+n))}),l+=u.length,4===o.length){l+=o[2].length;let e=o[3];i.push({type:"text",content:e,range:WO.create(VO.create(r,a+l+n),VO.create(r,a+l+e.length+n))})}else i.push({type:"text",content:"",range:WO.create(VO.create(r,a+l+n),VO.create(r,a+l+n))});a=e+o[0].length}let o=t.substring(a);o.length>0&&i.push({type:"text",content:o,range:WO.create(VO.create(r,a+n),VO.create(r,a+n+o.length))})}return i}s(WF,"tokenize"),s(HF,"buildInlineTokens");var qF=/\S/,YF=/\s*$/;function XF(e,t){let r=e.substring(t).match(qF);return r?t+r.index:e.length}function KF(e){let t=e.match(YF);if(t&&"number"==typeof t.index)return t.index}function ZF(e){var t,r,n,i;let a=VO.create(e.position.line,e.position.character);if(0===e.tokens.length)return new o$([],WO.create(a,a));let o=[];for(;e.index<e.tokens.length;){let t=QF(e,o[o.length-1]);t&&o.push(t)}let s=null!==(r=null===(t=o[0])||void 0===t?void 0:t.range.start)&&void 0!==r?r:a,l=null!==(i=null===(n=o[o.length-1])||void 0===n?void 0:n.range.end)&&void 0!==i?i:a;return new o$(o,WO.create(s,l))}function QF(e,t){let r=e.tokens[e.index];return"tag"===r.type?r$(e,!1):"text"===r.type||"inline-tag"===r.type?e$(e):(JF(r,t),void e.index++)}function JF(e,t){if(t){let r=new h$("",e.range);"inlines"in t?t.inlines.push(r):t.content.inlines.push(r)}}function e$(e){let t=e.tokens[e.index],r=t,n=t,i=[];for(;t&&"break"!==t.type&&"tag"!==t.type;)i.push(t$(e)),n=t,t=e.tokens[e.index];return new c$(i,WO.create(r.range.start,n.range.end))}function t$(e){return"inline-tag"===e.tokens[e.index].type?r$(e,!0):n$(e)}function r$(e,t){let r=e.tokens[e.index++],n=r.content.substring(1),i=e.tokens[e.index];if("text"===i?.type){if(t){let i=n$(e);return new s$(n,new c$([i],i.range),t,WO.create(r.range.start,i.range.end))}{let i=e$(e);return new s$(n,i,t,WO.create(r.range.start,i.range.end))}}{let e=r.range;return new s$(n,new c$([],e),t,e)}}function n$(e){let t=e.tokens[e.index++];return new h$(t.content,t.range)}function i$(e){if(!e)return i$({start:"/**",end:"*/",line:"*"});let{start:t,end:r,line:n}=e;return{start:a$(t,!0),end:a$(r,!1),line:a$(n,!0)}}function a$(e,t){if("string"==typeof e||"object"==typeof e){let r="string"==typeof e?rR(e):e.source;return t?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}return e}s(XF,"skipWhitespace"),s(KF,"lastCharacter"),s(ZF,"parseJSDocComment"),s(QF,"parseJSDocElement"),s(JF,"appendEmptyLine"),s(e$,"parseJSDocText"),s(t$,"parseJSDocInline"),s(r$,"parseJSDocTag"),s(n$,"parseJSDocLine"),s(i$,"normalizeOptions"),s(a$,"normalizeOption");var o$=class{static{s(this,"JSDocCommentImpl")}constructor(e,t){this.elements=e,this.range=t}getTag(e){return this.getAllTags().find((t=>t.name===e))}getTags(e){return this.getAllTags().filter((t=>t.name===e))}getAllTags(){return this.elements.filter((e=>"name"in e))}toString(){let e="";for(let t of this.elements)if(0===e.length)e=t.toString();else{let r=t.toString();e+=d$(e)+r}return e.trim()}toMarkdown(e){let t="";for(let r of this.elements)if(0===t.length)t=r.toMarkdown(e);else{let n=r.toMarkdown(e);t+=d$(t)+n}return t.trim()}},s$=class{static{s(this,"JSDocTagImpl")}constructor(e,t,r,n){this.name=e,this.content=t,this.inline=r,this.range=n}toString(){let e=`@${this.name}`,t=this.content.toString();return 1===this.content.inlines.length?e=`${e} ${t}`:this.content.inlines.length>1&&(e=`${e}\n${t}`),this.inline?`{${e}}`:e}toMarkdown(e){var t,r;return null!==(r=null===(t=e?.renderTag)||void 0===t?void 0:t.call(e,this))&&void 0!==r?r:this.toMarkdownDefault(e)}toMarkdownDefault(e){let t=this.content.toMarkdown(e);if(this.inline){let r=l$(this.name,t,e??{});if("string"==typeof r)return r}let r="";"italic"===e?.tag||void 0===e?.tag?r="*":"bold"===e?.tag?r="**":"bold-italic"===e?.tag&&(r="***");let n=`${r}@${this.name}${r}`;return 1===this.content.inlines.length?n=`${n} — ${t}`:this.content.inlines.length>1&&(n=`${n}\n${t}`),this.inline?`{${n}}`:n}};function l$(e,t,r){var n,i;if("linkplain"===e||"linkcode"===e||"link"===e){let a=t.indexOf(" "),o=t;if(a>0){let e=XF(t,a);o=t.substring(e),t=t.substring(0,a)}return("linkcode"===e||"link"===e&&"code"===r.link)&&(o=`\`${o}\``),null!==(i=null===(n=r.renderLink)||void 0===n?void 0:n.call(r,t,o))&&void 0!==i?i:u$(t,o)}}function u$(e,t){try{return HB.parse(e,!0),`[${t}](${e})`}catch{return e}}s(l$,"renderInlineTag"),s(u$,"renderLinkDefault");var c$=class{static{s(this,"JSDocTextImpl")}constructor(e,t){this.inlines=e,this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){let r=this.inlines[t],n=this.inlines[t+1];e+=r.toString(),n&&n.range.start.line>r.range.start.line&&(e+="\n")}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){let n=this.inlines[r],i=this.inlines[r+1];t+=n.toMarkdown(e),i&&i.range.start.line>n.range.start.line&&(t+="\n")}return t}},h$=class{static{s(this,"JSDocLineImpl")}constructor(e,t){this.text=e,this.range=t}toString(){return this.text}toMarkdown(){return this.text}};function d$(e){return e.endsWith("\n")?"\n":"\n\n"}s(d$,"fillNewlines");var f$,p$=class{static{s(this,"JSDocDocumentationProvider")}constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){let t=this.commentProvider.getComment(e);if(t&&UF(t))return zF(t).toMarkdown({renderLink:s(((t,r)=>this.documentationLinkRenderer(e,t,r)),"renderLink"),renderTag:s((t=>this.documentationTagRenderer(e,t)),"renderTag")})}documentationLinkRenderer(e,t,r){var n;let i=null!==(n=this.findNameInPrecomputedScopes(e,t))&&void 0!==n?n:this.findNameInGlobalScope(e,t);if(i&&i.nameSegment){let e=i.nameSegment.range.start.line+1,t=i.nameSegment.range.start.character+1;return`[${r}](${i.documentUri.with({fragment:`L${e},${t}`}).toString()})`}}documentationTagRenderer(e,t){}findNameInPrecomputedScopes(e,t){let r=CS(e).precomputedScopes;if(!r)return;let n=e;do{let e=r.get(n).find((e=>e.name===t));if(e)return e;n=n.$container}while(n)}findNameInGlobalScope(e,t){return this.indexManager.allElements().find((e=>e.name===t))}},g$=class{static{s(this,"DefaultCommentProvider")}constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var t;return fF(e)?e.$comment:null===(t=p_(e.$cstNode,this.grammarConfig().multilineCommentRules))||void 0===t?void 0:t.text}},m$=class{static{s(this,"DefaultAsyncParser")}constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,t){return Promise.resolve(this.syncParser.parse(e))}},y$=class{static{s(this,"AbstractThreadedAsyncParser")}constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){let e=this.createWorker();e.onReady((()=>{if(this.queue.length>0){let t=this.queue.shift();t&&(e.lock(),t.resolve(e))}})),this.workerPool.push(e)}}async parse(e,t){let r,n=await this.acquireParserWorker(t),i=new BB,a=t.onCancellationRequested((()=>{r=setTimeout((()=>{this.terminateWorker(n)}),this.terminationDelay)}));return n.parse(e).then((e=>{let t=this.hydrator.hydrate(e);i.resolve(t)})).catch((e=>{i.reject(e)})).finally((()=>{a.dispose(),clearTimeout(r)})),i.promise}terminateWorker(e){e.terminate();let t=this.workerPool.indexOf(e);t>=0&&this.workerPool.splice(t,1)}async acquireParserWorker(e){this.initializeWorkers();for(let e of this.workerPool)if(e.ready)return e.lock(),e;let t=new BB;return e.onCancellationRequested((()=>{let e=this.queue.indexOf(t);e>=0&&this.queue.splice(e,1),t.reject(IB)})),this.queue.push(t),t.promise}},v$=class{static{s(this,"ParserWorker")}get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,t,r,n){this.onReadyEmitter=new SF.Emitter,this.deferred=new BB,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=n,t((e=>{let t=e;this.deferred.resolve(t),this.unlock()})),r((e=>{this.deferred.reject(e),this.unlock()}))}terminate(){this.deferred.reject(IB),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new BB,this.sendMessage(e),this.deferred.promise}},x$=class{static{s(this,"DefaultWorkspaceLock")}constructor(){this.previousTokenSource=new _B.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();let t=NB();return this.previousTokenSource=t,this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r=_B.CancellationToken.None){let n=new BB,i={action:t,deferred:n,cancellationToken:r};return e.push(i),this.performNextOperation(),n.promise}async performNextOperation(){if(!this.done)return;let e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else{if(!(this.readQueue.length>0))return;e.push(...this.readQueue.splice(0,this.readQueue.length))}this.done=!1,await Promise.all(e.map((async({action:e,deferred:t,cancellationToken:r})=>{try{let n=await Promise.resolve().then((()=>e(r)));t.resolve(n)}catch(e){MB(e)?t.resolve(void 0):t.reject(e)}}))),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}},b$=class{static{s(this,"DefaultHydrator")}constructor(e){this.grammarElementIdMap=new rF,this.tokenTypeIdMap=new rF,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map((e=>Object.assign(Object.assign({},e),{message:e.message}))),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){let t=new Map,r=new Map;for(let r of _S(e))t.set(r,{});if(e.$cstNode)for(let t of a_(e.$cstNode))r.set(t,{});return{astNodes:t,cstNodes:r}}dehydrateAstNode(e,t){let r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,void 0!==e.$cstNode&&(r.$cstNode=this.dehydrateCstNode(e.$cstNode,t));for(let[n,i]of Object.entries(e))if(!n.startsWith("$"))if(Array.isArray(i)){let e=[];r[n]=e;for(let r of i)UE(r)?e.push(this.dehydrateAstNode(r,t)):GE(r)?e.push(this.dehydrateReference(r,t)):e.push(r)}else UE(i)?r[n]=this.dehydrateAstNode(i,t):GE(i)?r[n]=this.dehydrateReference(i,t):void 0!==i&&(r[n]=i);return r}dehydrateReference(e,t){let r={};return r.$refText=e.$refText,e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode)),r}dehydrateCstNode(e,t){let r=t.cstNodes.get(e);return YE(e)?r.fullText=e.fullText:r.grammarSource=this.getGrammarElementId(e.grammarSource),r.hidden=e.hidden,r.astNode=t.astNodes.get(e.astNode),HE(e)?r.content=e.content.map((e=>this.dehydrateCstNode(e,t))):qE(e)&&(r.tokenType=e.tokenType.name,r.offset=e.offset,r.length=e.length,r.startLine=e.range.start.line,r.startColumn=e.range.start.character,r.endLine=e.range.end.line,r.endColumn=e.range.end.character),r}hydrate(e){let t=e.value,r=this.createHydrationContext(t);return"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){let t,r=new Map,n=new Map;for(let t of _S(e))r.set(t,{});if(e.$cstNode)for(let r of a_(e.$cstNode)){let e;"fullText"in r?(e=new HD(r.fullText),t=e):"content"in r?e=new VD:"tokenType"in r&&(e=this.hydrateCstLeafNode(r)),e&&(n.set(r,e),e.root=t)}return{astNodes:r,cstNodes:n}}hydrateAstNode(e,t){let r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode&&(r.$cstNode=t.cstNodes.get(e.$cstNode));for(let[n,i]of Object.entries(e))if(!n.startsWith("$"))if(Array.isArray(i)){let e=[];r[n]=e;for(let a of i)UE(a)?e.push(this.setParent(this.hydrateAstNode(a,t),r)):GE(a)?e.push(this.hydrateReference(a,r,n,t)):e.push(a)}else UE(i)?r[n]=this.setParent(this.hydrateAstNode(i,t),r):GE(i)?r[n]=this.hydrateReference(i,r,n,t):void 0!==i&&(r[n]=i);return r}setParent(e,t){return e.$container=t,e}hydrateReference(e,t,r,n){return this.linker.buildReference(t,r,n.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){let n=t.cstNodes.get(e);if("number"==typeof e.grammarSource&&(n.grammarSource=this.getGrammarElement(e.grammarSource)),n.astNode=t.astNodes.get(e.astNode),HE(n))for(let i of e.content){let e=this.hydrateCstNode(i,t,r++);n.content.push(e)}return n}hydrateCstLeafNode(e){let t=this.getTokenType(e.tokenType),r=e.offset,n=e.length,i=e.startLine,a=e.startColumn,o=e.endLine,s=e.endColumn,l=e.hidden;return new jD(r,n,{start:{line:i,character:a},end:{line:o,character:s}},t,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(let t of _S(this.grammar))j_(t)&&this.grammarElementIdMap.set(t,e++)}};function T$(e){return{documentation:{CommentProvider:s((e=>new g$(e)),"CommentProvider"),DocumentationProvider:s((e=>new p$(e)),"DocumentationProvider")},parser:{AsyncParser:s((e=>new m$(e)),"AsyncParser"),GrammarConfig:s((e=>VR(e)),"GrammarConfig"),LangiumParser:s((e=>TB(e)),"LangiumParser"),CompletionParser:s((e=>bB(e)),"CompletionParser"),ValueConverter:s((()=>new EB),"ValueConverter"),TokenBuilder:s((()=>new kB),"TokenBuilder"),Lexer:s((e=>new DF(e)),"Lexer"),ParserErrorMessageProvider:s((()=>new JD),"ParserErrorMessageProvider"),LexerErrorMessageProvider:s((()=>new OF),"LexerErrorMessageProvider")},workspace:{AstNodeLocator:s((()=>new AF),"AstNodeLocator"),AstNodeDescriptionProvider:s((e=>new EF(e)),"AstNodeDescriptionProvider"),ReferenceDescriptionProvider:s((e=>new _F(e)),"ReferenceDescriptionProvider")},references:{Linker:s((e=>new ZB(e)),"Linker"),NameProvider:s((()=>new JB),"NameProvider"),ScopeProvider:s((e=>new dF(e)),"ScopeProvider"),ScopeComputation:s((e=>new nF(e)),"ScopeComputation"),References:s((e=>new eF(e)),"References")},serializer:{Hydrator:s((e=>new b$(e)),"Hydrator"),JsonSerializer:s((e=>new mF(e)),"JsonSerializer")},validation:{DocumentValidator:s((e=>new TF(e)),"DocumentValidator"),ValidationRegistry:s((e=>new bF(e)),"ValidationRegistry")},shared:s((()=>e.shared),"shared")}}function C$(e){return{ServiceRegistry:s((e=>new yF(e)),"ServiceRegistry"),workspace:{LangiumDocuments:s((e=>new XB(e)),"LangiumDocuments"),LangiumDocumentFactory:s((e=>new YB(e)),"LangiumDocumentFactory"),DocumentBuilder:s((e=>new LF(e)),"DocumentBuilder"),IndexManager:s((e=>new IF(e)),"IndexManager"),WorkspaceManager:s((e=>new MF(e)),"WorkspaceManager"),FileSystemProvider:s((t=>e.fileSystemProvider(t)),"FileSystemProvider"),WorkspaceLock:s((()=>new x$),"WorkspaceLock"),ConfigurationProvider:s((e=>new NF(e)),"ConfigurationProvider")}}}function w$(e,t,r,n,i,a,o,s,l){return _$([e,t,r,n,i,a,o,s,l].reduce(R$,{}))}s(T$,"createDefaultCoreModule"),s(C$,"createDefaultSharedCoreModule"),(f$||(f$={})).merge=(e,t)=>R$(R$({},e),t),s(w$,"inject");var k$=Symbol("isProxy");function E$(e){if(e&&e[k$])for(let t of Object.values(e))E$(t);return e}function _$(e,t){let r=new Proxy({},{deleteProperty:s((()=>!1),"deleteProperty"),set:s((()=>{throw new Error("Cannot set property on injected service container")}),"set"),get:s(((n,i)=>i===k$||S$(n,i,e,t||r)),"get"),getOwnPropertyDescriptor:s(((n,i)=>(S$(n,i,e,t||r),Object.getOwnPropertyDescriptor(n,i))),"getOwnPropertyDescriptor"),has:s(((t,r)=>r in e),"has"),ownKeys:s((()=>[...Object.getOwnPropertyNames(e)]),"ownKeys")});return r}s(E$,"eagerLoad"),s(_$,"_inject");var A$=Symbol();function S$(e,t,r,n){if(t in e){if(e[t]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:e[t]});if(e[t]===A$)throw new Error('Cycle detected. Please make "'+String(t)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return e[t]}if(t in r){let i=r[t];e[t]=A$;try{e[t]="function"==typeof i?i(n):_$(i,n)}catch(r){throw e[t]=r instanceof Error?r:void 0,r}return e[t]}}function R$(e,t){if(t)for(let[r,n]of Object.entries(t))if(void 0!==n){let t=e[r];e[r]=null!==t&&null!==n&&"object"==typeof t&&"object"==typeof n?R$(t,n):n}return e}s(S$,"_resolve"),s(R$,"_merge");var N$,L$={indentTokenName:"INDENT",dedentTokenName:"DEDENT",whitespaceTokenName:"WS",ignoreIndentationDelimiters:[]};!function(e){e.REGULAR="indentation-sensitive",e.IGNORE_INDENTATION="ignore-indentation"}(N$||(N$={}));var I$=class extends kB{static{s(this,"IndentationAwareTokenBuilder")}constructor(e=L$){super(),this.indentationStack=[0],this.whitespaceRegExp=/[ \t]+/y,this.options=Object.assign(Object.assign({},L$),e),this.indentTokenType=ZL({name:this.options.indentTokenName,pattern:this.indentMatcher.bind(this),line_breaks:!1}),this.dedentTokenType=ZL({name:this.options.dedentTokenName,pattern:this.dedentMatcher.bind(this),line_breaks:!1})}buildTokens(e,t){let r=super.buildTokens(e,t);if(!BF(r))throw new Error("Invalid tokens built by default builder");let n,i,a,{indentTokenName:o,dedentTokenName:s,whitespaceTokenName:l,ignoreIndentationDelimiters:u}=this.options,c=[];for(let e of r){for(let[t,r]of u)e.name===t?e.PUSH_MODE=N$.IGNORE_INDENTATION:e.name===r&&(e.POP_MODE=!0);e.name===s?n=e:e.name===o?i=e:e.name===l?a=e:c.push(e)}if(!n||!i||!a)throw new Error("Some indentation/whitespace tokens not found!");return u.length>0?{modes:{[N$.REGULAR]:[n,i,...c,a],[N$.IGNORE_INDENTATION]:[...c,a]},defaultMode:N$.REGULAR}:[n,i,a,...c]}flushLexingReport(e){let t=super.flushLexingReport(e);return Object.assign(Object.assign({},t),{remainingDedents:this.flushRemainingDedents(e)})}isStartOfLine(e,t){return 0===t||"\r\n".includes(e[t-1])}matchWhitespace(e,t,r,n){var i;this.whitespaceRegExp.lastIndex=t;let a=this.whitespaceRegExp.exec(e);return{currIndentLevel:null!==(i=a?.[0].length)&&void 0!==i?i:0,prevIndentLevel:this.indentationStack.at(-1),match:a}}createIndentationTokenInstance(e,t,r,n){let i=this.getLineNumber(t,n);return eI(e,r,n,n+r.length,i,i,1,r.length)}getLineNumber(e,t){return e.substring(0,t).split(/\r\n|\r|\n/).length}indentMatcher(e,t,r,n){if(!this.isStartOfLine(e,t))return null;let{currIndentLevel:i,prevIndentLevel:a,match:o}=this.matchWhitespace(e,t,r,n);return i<=a?null:(this.indentationStack.push(i),o)}dedentMatcher(e,t,r,n){var i,a,o,s;if(!this.isStartOfLine(e,t))return null;let{currIndentLevel:l,prevIndentLevel:u,match:c}=this.matchWhitespace(e,t,r,n);if(l>=u)return null;let h=this.indentationStack.lastIndexOf(l);if(-1===h)return this.diagnostics.push({severity:"error",message:`Invalid dedent level ${l} at offset: ${t}. Current indentation stack: ${this.indentationStack}`,offset:t,length:null!==(a=null===(i=c?.[0])||void 0===i?void 0:i.length)&&void 0!==a?a:0,line:this.getLineNumber(e,t),column:1}),null;let d=this.indentationStack.length-h-1,f=null!==(s=null===(o=e.substring(0,t).match(/[\r\n]+$/))||void 0===o?void 0:o[0].length)&&void 0!==s?s:1;for(let n=0;n<d;n++){let n=this.createIndentationTokenInstance(this.dedentTokenType,e,"",t-(f-1));r.push(n),this.indentationStack.pop()}return null}buildTerminalToken(e){let t=super.buildTerminalToken(e),{indentTokenName:r,dedentTokenName:n,whitespaceTokenName:i}=this.options;return t.name===r?this.indentTokenType:t.name===n?this.dedentTokenType:t.name===i?ZL({name:i,pattern:this.whitespaceRegExp,group:zL.SKIPPED}):t}flushRemainingDedents(e){let t=[];for(;this.indentationStack.length>1;)t.push(this.createIndentationTokenInstance(this.dedentTokenType,e,"",e.length)),this.indentationStack.pop();return this.indentationStack=[0],t}},M$=class extends DF{static{s(this,"IndentationAwareLexer")}constructor(e){if(super(e),!(e.parser.TokenBuilder instanceof I$))throw new Error("IndentationAwareLexer requires an accompanying IndentationAwareTokenBuilder");this.indentationTokenBuilder=e.parser.TokenBuilder}tokenize(e,t=PF){let r=super.tokenize(e),n=r.report;"full"===t?.mode&&r.tokens.push(...n.remainingDedents),n.remainingDedents=[];let{indentTokenType:i,dedentTokenType:a}=this.indentationTokenBuilder,o=i.tokenTypeIdx,s=a.tokenTypeIdx,l=[],u=r.tokens.length-1;for(let e=0;e<u;e++){let t=r.tokens[e],n=r.tokens[e+1];t.tokenTypeIdx!==o||n.tokenTypeIdx!==s?l.push(t):e++}return u>=0&&l.push(r.tokens[u]),r.tokens=l,r}},O$={};u(O$,{AstUtils:()=>vS,BiMap:()=>rF,Cancellation:()=>_B,ContextCache:()=>uF,CstUtils:()=>zE,DONE_RESULT:()=>JE,Deferred:()=>BB,Disposable:()=>RF,DisposableCache:()=>sF,DocumentCache:()=>cF,EMPTY_STREAM:()=>QE,ErrorWithLocation:()=>__,GrammarUtils:()=>E_,MultiMap:()=>tF,OperationCancelled:()=>IB,Reduction:()=>t_,RegExpUtils:()=>MS,SimpleCache:()=>lF,StreamImpl:()=>XE,TreeStreamImpl:()=>i_,URI:()=>HB,UriUtils:()=>VB,WorkspaceCache:()=>hF,assertUnreachable:()=>A_,delayNextTick:()=>AB,interruptAndCheck:()=>OB,isOperationCancelled:()=>MB,loadGrammarFromJson:()=>z$,setInterruptionPeriod:()=>LB,startCancelableOperation:()=>NB,stream:()=>e_}),h(O$,SF);var P$=class{static{s(this,"EmptyFileSystemProvider")}readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}},D$={fileSystemProvider:s((()=>new P$),"fileSystemProvider")},B$={Grammar:s((()=>{}),"Grammar"),LanguageMetaData:s((()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})),"LanguageMetaData")},F$={AstReflection:s((()=>new mS),"AstReflection")};function $$(){let e=w$(C$(D$),F$),t=w$(T$({shared:e}),B$);return e.ServiceRegistry.register(t),t}function z$(e){var t;let r=$$(),n=r.serializer.JsonSerializer.deserialize(e);return r.shared.workspace.LangiumDocumentFactory.fromModel(n,HB.parse(`memory://${null!==(t=n.name)&&void 0!==t?t:"grammar"}.langium`)),n}s($$,"createMinimalGrammarServices"),s(z$,"loadGrammarFromJson"),h($E,O$);var U$=Object.defineProperty,G$=s(((e,t)=>U$(e,"name",{value:t,configurable:!0})),"__name"),j$="Statement",V$="Architecture";function W$(e){return Lz.isInstance(e,V$)}s(W$,"isArchitecture"),G$(W$,"isArchitecture");var H$="Axis",q$="Branch";function Y$(e){return Lz.isInstance(e,q$)}s(Y$,"isBranch"),G$(Y$,"isBranch");var X$="Checkout",K$="CherryPicking",Z$="Commit";function Q$(e){return Lz.isInstance(e,Z$)}s(Q$,"isCommit"),G$(Q$,"isCommit");var J$="Common";function ez(e){return Lz.isInstance(e,J$)}s(ez,"isCommon"),G$(ez,"isCommon");var tz="Curve",rz="Edge",nz="Entry",iz="GitGraph";function az(e){return Lz.isInstance(e,iz)}s(az,"isGitGraph"),G$(az,"isGitGraph");var oz="Group",sz="Info";function lz(e){return Lz.isInstance(e,sz)}s(lz,"isInfo"),G$(lz,"isInfo");var uz="Junction",cz="Merge";function hz(e){return Lz.isInstance(e,cz)}s(hz,"isMerge"),G$(hz,"isMerge");var dz="Option",fz="Packet";function pz(e){return Lz.isInstance(e,fz)}s(pz,"isPacket"),G$(pz,"isPacket");var gz="PacketBlock";function mz(e){return Lz.isInstance(e,gz)}s(mz,"isPacketBlock"),G$(mz,"isPacketBlock");var yz="Pie";function vz(e){return Lz.isInstance(e,yz)}s(vz,"isPie"),G$(vz,"isPie");var xz="PieSection";function bz(e){return Lz.isInstance(e,xz)}s(bz,"isPieSection"),G$(bz,"isPieSection");var Tz,Cz,wz,kz,Ez,_z,Az="Radar",Sz="Service",Rz="Direction",Nz=class extends WE{static{s(this,"MermaidAstReflection")}static{G$(this,"MermaidAstReflection")}getAllTypes(){return[V$,H$,q$,X$,K$,Z$,J$,tz,Rz,rz,nz,iz,oz,sz,uz,cz,dz,fz,gz,yz,xz,Az,Sz,j$]}computeIsSubtype(e,t){switch(e){case q$:case X$:case K$:case Z$:case cz:return this.isSubtype(j$,t);case Rz:return this.isSubtype(iz,t);default:return!1}}getReferenceType(e){let t=`${e.container.$type}:${e.property}`;if("Entry:axis"===t)return H$;throw new Error(`${t} is not a valid reference id.`)}getTypeMetaData(e){switch(e){case V$:return{name:V$,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case H$:return{name:H$,properties:[{name:"label"},{name:"name"}]};case q$:return{name:q$,properties:[{name:"name"},{name:"order"}]};case X$:return{name:X$,properties:[{name:"branch"}]};case K$:return{name:K$,properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case Z$:return{name:Z$,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case J$:return{name:J$,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case tz:return{name:tz,properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]};case rz:return{name:rz,properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case nz:return{name:nz,properties:[{name:"axis"},{name:"value"}]};case iz:return{name:iz,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case oz:return{name:oz,properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case sz:return{name:sz,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case uz:return{name:uz,properties:[{name:"id"},{name:"in"}]};case cz:return{name:cz,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case dz:return{name:dz,properties:[{name:"name"},{name:"value",defaultValue:!1}]};case fz:return{name:fz,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case gz:return{name:gz,properties:[{name:"end"},{name:"label"},{name:"start"}]};case yz:return{name:yz,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case xz:return{name:xz,properties:[{name:"label"},{name:"value"}]};case Az:return{name:Az,properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]};case Sz:return{name:Sz,properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case Rz:return{name:Rz,properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:e,properties:[]}}}},Lz=new Nz,Iz=G$((()=>Tz??(Tz=z$('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"InfoGrammar"),Mz=G$((()=>Cz??(Cz=z$('{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"PacketGrammar"),Oz=G$((()=>wz??(wz=z$('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"PieGrammar"),Pz=G$((()=>kz??(kz=z$('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"ArchitectureGrammar"),Dz=G$((()=>Ez??(Ez=z$('{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}'))),"GitGraphGrammar"),Bz=G$((()=>_z??(_z=z$('{"$type":"Grammar","isDeclared":true,"name":"Radar","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@12"}}}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@12"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9\\\\-_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}'))),"RadarGrammar"),Fz={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},$z={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},zz={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Uz={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Gz={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},jz={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Vz={AstReflection:G$((()=>new Nz),"AstReflection")},Wz={Grammar:G$((()=>Iz()),"Grammar"),LanguageMetaData:G$((()=>Fz),"LanguageMetaData"),parser:{}},Hz={Grammar:G$((()=>Mz()),"Grammar"),LanguageMetaData:G$((()=>$z),"LanguageMetaData"),parser:{}},qz={Grammar:G$((()=>Oz()),"Grammar"),LanguageMetaData:G$((()=>zz),"LanguageMetaData"),parser:{}},Yz={Grammar:G$((()=>Pz()),"Grammar"),LanguageMetaData:G$((()=>Uz),"LanguageMetaData"),parser:{}},Xz={Grammar:G$((()=>Dz()),"Grammar"),LanguageMetaData:G$((()=>Gz),"LanguageMetaData"),parser:{}},Kz={Grammar:G$((()=>Bz()),"Grammar"),LanguageMetaData:G$((()=>jz),"LanguageMetaData"),parser:{}},Zz={ACC_DESCR:/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/accTitle[\t ]*:([^\n\r]*)/,TITLE:/title([\t ][^\n\r]*|)/},Qz=class extends EB{static{s(this,"AbstractMermaidValueConverter")}static{G$(this,"AbstractMermaidValueConverter")}runConverter(e,t,r){let n=this.runCommonConverter(e,t,r);return void 0===n&&(n=this.runCustomConverter(e,t,r)),void 0===n?super.runConverter(e,t,r):n}runCommonConverter(e,t,r){let n=Zz[e.name];if(void 0===n)return;let i=n.exec(t);if(null!==i){if(void 0!==i[1])return i[1].trim().replace(/[\t ]{2,}/gm," ");if(void 0!==i[2])return i[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,"\n")}}},Jz=class extends Qz{static{s(this,"CommonValueConverter")}static{G$(this,"CommonValueConverter")}runCustomConverter(e,t,r){}},eU=class extends kB{static{s(this,"AbstractMermaidTokenBuilder")}static{G$(this,"AbstractMermaidTokenBuilder")}constructor(e){super(),this.keywords=new Set(e)}buildKeywordTokens(e,t,r){let n=super.buildKeywordTokens(e,t,r);return n.forEach((e=>{this.keywords.has(e.name)&&void 0!==e.PATTERN&&(e.PATTERN=new RegExp(e.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))})),n}};(class extends eU{static{s(this,"CommonTokenBuilder")}static{G$(this,"CommonTokenBuilder")}});var tU={},rU={info:G$((async()=>{let{createInfoServices:e}=await import("./info-4N47QTOZ-2BEI6D6A.mjs.7c71b291.js"),t=e().Info.parser.LangiumParser;tU.info=t}),"info"),packet:G$((async()=>{let{createPacketServices:e}=await import("./packet-KVYON367-D24LN7JZ.mjs.f4ac409b.js"),t=e().Packet.parser.LangiumParser;tU.packet=t}),"packet"),pie:G$((async()=>{let{createPieServices:e}=await import("./pie-R6RNRRYF-FUPP6FTN.mjs.f47d80d8.js"),t=e().Pie.parser.LangiumParser;tU.pie=t}),"pie"),architecture:G$((async()=>{let{createArchitectureServices:e}=await import("./architecture-4AB2E3PP-7QDGZQEU.mjs.9f0c32d7.js"),t=e().Architecture.parser.LangiumParser;tU.architecture=t}),"architecture"),gitGraph:G$((async()=>{let{createGitGraphServices:e}=await import("./gitGraph-O2Q2CXLX-CIPL3GNK.mjs.6ce6748f.js"),t=e().GitGraph.parser.LangiumParser;tU.gitGraph=t}),"gitGraph"),radar:G$((async()=>{let{createRadarServices:e}=await import("./radar-MK3ICKWK-KPFLJ5ZN.mjs.a5aca713.js"),t=e().Radar.parser.LangiumParser;tU.radar=t}),"radar")};async function nU(e,t){let r=rU[e];if(!r)throw new Error(`Unknown diagram type: ${e}`);tU[e]||await r();let n=tU[e].parse(t);if(n.lexerErrors.length>0||n.parserErrors.length>0)throw new iU(n);return n.value}s(nU,"parse"),G$(nU,"parse");var iU=class extends Error{static{s(this,"MermaidParseError")}constructor(e){let t=e.lexerErrors.map((e=>e.message)).join("\n"),r=e.parserErrors.map((e=>e.message)).join("\n");super(`Parsing failed: ${t} ${r}`),this.result=e}static{G$(this,"MermaidParseError")}},aU=class extends eU{static{s(this,"PieTokenBuilder")}static{G$(this,"PieTokenBuilder")}constructor(){super(["pie","showData"])}},oU=class extends Qz{static{s(this,"PieValueConverter")}static{G$(this,"PieValueConverter")}runCustomConverter(e,t,r){if("PIE_SECTION_LABEL"===e.name)return t.replace(/"/g,"").trim()}},sU={parser:{TokenBuilder:G$((()=>new aU),"TokenBuilder"),ValueConverter:G$((()=>new oU),"ValueConverter")}};function lU(e=D$){let t=w$(C$(e),Vz),r=w$(T$({shared:t}),qz,sU);return t.ServiceRegistry.register(r),{shared:t,Pie:r}}s(lU,"createPieServices"),G$(lU,"createPieServices");var uU=class extends eU{static{s(this,"ArchitectureTokenBuilder")}static{G$(this,"ArchitectureTokenBuilder")}constructor(){super(["architecture"])}},cU=class extends Qz{static{s(this,"ArchitectureValueConverter")}static{G$(this,"ArchitectureValueConverter")}runCustomConverter(e,t,r){return"ARCH_ICON"===e.name?t.replace(/[()]/g,"").trim():"ARCH_TEXT_ICON"===e.name?t.replace(/["()]/g,""):"ARCH_TITLE"===e.name?t.replace(/[[\]]/g,"").trim():void 0}},hU={parser:{TokenBuilder:G$((()=>new uU),"TokenBuilder"),ValueConverter:G$((()=>new cU),"ValueConverter")}};function dU(e=D$){let t=w$(C$(e),Vz),r=w$(T$({shared:t}),Yz,hU);return t.ServiceRegistry.register(r),{shared:t,Architecture:r}}s(dU,"createArchitectureServices"),G$(dU,"createArchitectureServices");var fU=class extends eU{static{s(this,"GitGraphTokenBuilder")}static{G$(this,"GitGraphTokenBuilder")}constructor(){super(["gitGraph"])}},pU={parser:{TokenBuilder:G$((()=>new fU),"TokenBuilder"),ValueConverter:G$((()=>new Jz),"ValueConverter")}};function gU(e=D$){let t=w$(C$(e),Vz),r=w$(T$({shared:t}),Xz,pU);return t.ServiceRegistry.register(r),{shared:t,GitGraph:r}}s(gU,"createGitGraphServices"),G$(gU,"createGitGraphServices");var mU=class extends eU{static{s(this,"RadarTokenBuilder")}static{G$(this,"RadarTokenBuilder")}constructor(){super(["radar-beta"])}},yU={parser:{TokenBuilder:G$((()=>new mU),"TokenBuilder"),ValueConverter:G$((()=>new Jz),"ValueConverter")}};function vU(e=D$){let t=w$(C$(e),Vz),r=w$(T$({shared:t}),Kz,yU);return t.ServiceRegistry.register(r),{shared:t,Radar:r}}s(vU,"createRadarServices"),G$(vU,"createRadarServices");var xU=l(((e,t)=>{!function(r,n){"object"==typeof e&&typeof t<"u"?t.exports=n():"function"==typeof define&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()}(e,(function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",a="hour",o="day",l="week",u="month",c="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:s((function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}),"ordinal")},y=s((function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e}),"m"),v={s:y,z:s((function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")}),"z"),m:s((function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),a=r-i<0,o=t.clone().add(n+(a?-1:1),u);return+(-(n+(r-i)/(a?i-o:o-i))||0)}),"t"),a:s((function(e){return e<0?Math.ceil(e)||0:Math.floor(e)}),"a"),p:s((function(e){return{M:u,y:h,w:l,d:o,D:d,h:a,m:i,s:n,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")}),"p"),u:s((function(e){return void 0===e}),"u")},x="en",b={};b[x]=m;var T="$isDayjsObject",C=s((function(e){return e instanceof _||!(!e||!e[T])}),"S"),w=s((function e(t,r,n){var i;if(!t)return x;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),r&&(b[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;b[s]=t,i=s}return!n&&i&&(x=i),i||!n&&x}),"t"),k=s((function(e,t){if(C(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new _(r)}),"O"),E=v;E.l=w,E.i=C,E.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var _=function(){function m(e){this.$L=w(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[T]=!0}s(m,"M");var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return E},y.isValid=function(){return this.$d.toString()!==f},y.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return k(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<k(e)},y.$g=function(e,t,r){return E.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,c=!!E.u(t)||t,f=E.p(e),p=s((function(e,t){var n=E.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return c?n:n.endOf(o)}),"l"),g=s((function(e,t){return E.w(r.toDate()[e].apply(r.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),r)}),"$"),m=this.$W,y=this.$M,v=this.$D,x="set"+(this.$u?"UTC":"");switch(f){case h:return c?p(1,0):p(31,11);case u:return c?p(1,y):p(0,y+1);case l:var b=this.$locale().weekStart||0,T=(m<b?m+7:m)-b;return p(c?v-T:v+(6-T),y);case o:case d:return g(x+"Hours",0);case a:return g(x+"Minutes",1);case i:return g(x+"Seconds",2);case n:return g(x+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var s,l=E.p(e),c="set"+(this.$u?"UTC":""),f=(s={},s[o]=c+"Date",s[d]=c+"Date",s[u]=c+"Month",s[h]=c+"FullYear",s[a]=c+"Hours",s[i]=c+"Minutes",s[n]=c+"Seconds",s[r]=c+"Milliseconds",s)[l],p=l===o?this.$D+(t-this.$W):t;if(l===u||l===h){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[E.p(e)]()},y.add=function(r,c){var d,f=this;r=Number(r);var p=E.p(c),g=s((function(e){var t=k(f);return E.w(t.date(t.date()+Math.round(e*r)),f)}),"y");if(p===u)return this.set(u,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===o)return g(1);if(p===l)return g(7);var m=(d={},d[i]=e,d[a]=t,d[n]=1e3,d)[p]||1,y=this.$d.getTime()+r*m;return E.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),a=this.$H,o=this.$m,l=this.$M,u=r.weekdays,c=r.months,h=r.meridiem,d=s((function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)}),"h"),p=s((function(e){return E.s(a%12||12,e,"0")}),"d"),m=h||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return E.s(t.$y,4,"0");case"M":return l+1;case"MM":return E.s(l+1,2,"0");case"MMM":return d(r.monthsShort,l,c,3);case"MMMM":return d(c,l);case"D":return t.$D;case"DD":return E.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return E.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(a,o,!0);case"A":return m(a,o,!1);case"m":return String(o);case"mm":return E.s(o,2,"0");case"s":return String(t.$s);case"ss":return E.s(t.$s,2,"0");case"SSS":return E.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,f){var p,g=this,m=E.p(d),y=k(r),v=(y.utcOffset()-this.utcOffset())*e,x=this-y,b=s((function(){return E.m(g,y)}),"D");switch(m){case h:p=b()/12;break;case u:p=b();break;case c:p=b()/3;break;case l:p=(x-v)/6048e5;break;case o:p=(x-v)/864e5;break;case a:p=x/t;break;case i:p=x/e;break;case n:p=x/1e3;break;default:p=x}return f?p:E.a(p)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=w(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return E.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),A=_.prototype;return k.prototype=A,[["$ms",r],["$s",n],["$m",i],["$H",a],["$W",o],["$M",u],["$y",h],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,_,k),e.$i=!0),k},k.locale=w,k.isDayjs=C,k.unix=function(e){return k(1e3*e)},k.en=b[x],k.Ls=b,k.p={},k}))})),bU=d(xU(),1),TU={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},CU={trace:s(((...e)=>{}),"trace"),debug:s(((...e)=>{}),"debug"),info:s(((...e)=>{}),"info"),warn:s(((...e)=>{}),"warn"),error:s(((...e)=>{}),"error"),fatal:s(((...e)=>{}),"fatal")},wU=s((function(e="fatal"){let t=TU.fatal;"string"==typeof e?e.toLowerCase()in TU&&(t=TU[e]):"number"==typeof e&&(t=e),CU.trace=()=>{},CU.debug=()=>{},CU.info=()=>{},CU.warn=()=>{},CU.error=()=>{},CU.fatal=()=>{},t<=TU.fatal&&(CU.fatal=console.error?console.error.bind(console,kU("FATAL"),"color: orange"):console.log.bind(console,"[35m",kU("FATAL"))),t<=TU.error&&(CU.error=console.error?console.error.bind(console,kU("ERROR"),"color: orange"):console.log.bind(console,"[31m",kU("ERROR"))),t<=TU.warn&&(CU.warn=console.warn?console.warn.bind(console,kU("WARN"),"color: orange"):console.log.bind(console,"[33m",kU("WARN"))),t<=TU.info&&(CU.info=console.info?console.info.bind(console,kU("INFO"),"color: lightblue"):console.log.bind(console,"[34m",kU("INFO"))),t<=TU.debug&&(CU.debug=console.debug?console.debug.bind(console,kU("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",kU("DEBUG"))),t<=TU.trace&&(CU.trace=console.debug?console.debug.bind(console,kU("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",kU("TRACE")))}),"setLogLevel"),kU=s((e=>`%c${(0,bU.default)().format("ss.SSS")} : ${e} : `),"format"),EU=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,_U=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,AU=/\s*%%.*\n/gm,SU=class extends Error{static{s(this,"UnknownDiagramError")}constructor(e){super(e),this.name="UnknownDiagramError"}},RU={},NU=s((function(e,t){e=e.replace(EU,"").replace(_U,"").replace(AU,"\n");for(let[r,{detector:n}]of Object.entries(RU))if(n(e,t))return r;throw new SU(`No diagram type detected matching given configuration for text: ${e}`)}),"detectType");s(((...e)=>{for(let{id:t,detector:r,loader:n}of e)LU(t,r,n)}),"registerLazyLoadedDiagrams");var LU=s(((e,t,r)=>{RU[e]&&CU.warn(`Detector with key ${e} already exists. Overwriting.`),RU[e]={detector:t,loader:r},CU.debug(`Detector with key ${e} added${r?" with loader":""}`)}),"addDetector");s((e=>RU[e].loader),"getDiagramLoader");var IU=s(((e,t,{depth:r=2,clobber:n=!1}={})=>{let i={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach((t=>IU(e,t,i))),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach((t=>{e.includes(t)||e.push(t)})),e):void 0===e||r<=0?null!=e&&"object"==typeof e&&"object"==typeof t?Object.assign(e,t):t:(void 0!==t&&"object"==typeof e&&"object"==typeof t&&Object.keys(t).forEach((i=>{"object"!=typeof t[i]||void 0!==e[i]&&"object"!=typeof e[i]?(n||"object"!=typeof e[i]&&"object"!=typeof t[i])&&(e[i]=t[i]):(void 0===e[i]&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=IU(e[i],t[i],{depth:r-1,clobber:n}))})),e)}),"assignWithDepth"),MU=IU,OU={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:s((e=>e>=255?255:e<0?0:e),"r"),g:s((e=>e>=255?255:e<0?0:e),"g"),b:s((e=>e>=255?255:e<0?0:e),"b"),h:s((e=>e%360),"h"),s:s((e=>e>=100?100:e<0?0:e),"s"),l:s((e=>e>=100?100:e<0?0:e),"l"),a:s((e=>e>=1?1:e<0?0:e),"a")},toLinear:s((e=>{let t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92}),"toLinear"),hue2rgb:s(((e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+6*(t-e)*r:r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e)),"hue2rgb"),hsl2rgb:s((({h:e,s:t,l:r},n)=>{if(!t)return 2.55*r;e/=360,t/=100;let i=(r/=100)<.5?r*(1+t):r+t-r*t,a=2*r-i;switch(n){case"r":return 255*OU.hue2rgb(a,i,e+.3333333333333333);case"g":return 255*OU.hue2rgb(a,i,e);case"b":return 255*OU.hue2rgb(a,i,e-.3333333333333333)}}),"hsl2rgb"),rgb2hsl:s((({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;let i=Math.max(e,t,r),a=Math.min(e,t,r),o=(i+a)/2;if("l"===n)return 100*o;if(i===a)return 0;let s=i-a;if("s"===n)return 100*(o>.5?s/(2-i-a):s/(i+a));switch(i){case e:return 60*((t-r)/s+(t<r?6:0));case t:return 60*((r-e)/s+2);case r:return 60*((e-t)/s+4);default:return-1}}),"rgb2hsl")},PU=OU,DU={clamp:s(((e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e))),"clamp"),round:s((e=>Math.round(1e10*e)/1e10),"round")},BU=DU,FU={dec2hex:s((e=>{let t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}),"dec2hex")},$U={channel:PU,lang:BU,unit:FU},zU={};for(let e=0;e<=255;e++)zU[e]=$U.unit.dec2hex(e);var UU=0,GU=1,jU=2,VU=class{static{s(this,"Type")}constructor(){this.type=UU}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=UU}is(e){return this.type===e}},WU=VU,HU=class{static{s(this,"Channels")}constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new WU}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=UU,this}_ensureHSL(){let e=this.data,{h:t,s:r,l:n}=e;void 0===t&&(e.h=$U.channel.rgb2hsl(e,"h")),void 0===r&&(e.s=$U.channel.rgb2hsl(e,"s")),void 0===n&&(e.l=$U.channel.rgb2hsl(e,"l"))}_ensureRGB(){let e=this.data,{r:t,g:r,b:n}=e;void 0===t&&(e.r=$U.channel.hsl2rgb(e,"r")),void 0===r&&(e.g=$U.channel.hsl2rgb(e,"g")),void 0===n&&(e.b=$U.channel.hsl2rgb(e,"b"))}get r(){let e=this.data,t=e.r;return this.type.is(jU)||void 0===t?(this._ensureHSL(),$U.channel.hsl2rgb(e,"r")):t}get g(){let e=this.data,t=e.g;return this.type.is(jU)||void 0===t?(this._ensureHSL(),$U.channel.hsl2rgb(e,"g")):t}get b(){let e=this.data,t=e.b;return this.type.is(jU)||void 0===t?(this._ensureHSL(),$U.channel.hsl2rgb(e,"b")):t}get h(){let e=this.data,t=e.h;return this.type.is(GU)||void 0===t?(this._ensureRGB(),$U.channel.rgb2hsl(e,"h")):t}get s(){let e=this.data,t=e.s;return this.type.is(GU)||void 0===t?(this._ensureRGB(),$U.channel.rgb2hsl(e,"s")):t}get l(){let e=this.data,t=e.l;return this.type.is(GU)||void 0===t?(this._ensureRGB(),$U.channel.rgb2hsl(e,"l")):t}get a(){return this.data.a}set r(e){this.type.set(GU),this.changed=!0,this.data.r=e}set g(e){this.type.set(GU),this.changed=!0,this.data.g=e}set b(e){this.type.set(GU),this.changed=!0,this.data.b=e}set h(e){this.type.set(jU),this.changed=!0,this.data.h=e}set s(e){this.type.set(jU),this.changed=!0,this.data.s=e}set l(e){this.type.set(jU),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}},qU=new HU({r:0,g:0,b:0,a:0},"transparent"),YU={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:s((e=>{if(35!==e.charCodeAt(0))return;let t=e.match(YU.re);if(!t)return;let r=t[1],n=parseInt(r,16),i=r.length,a=i%4==0,o=i>4,s=o?1:17,l=o?8:4,u=a?0:-1,c=o?255:15;return qU.set({r:(n>>l*(u+3)&c)*s,g:(n>>l*(u+2)&c)*s,b:(n>>l*(u+1)&c)*s,a:a?(n&c)*s/255:1},e)}),"parse"),stringify:s((e=>{let{r:t,g:r,b:n,a:i}=e;return i<1?`#${zU[Math.round(t)]}${zU[Math.round(r)]}${zU[Math.round(n)]}${zU[Math.round(255*i)]}`:`#${zU[Math.round(t)]}${zU[Math.round(r)]}${zU[Math.round(n)]}`}),"stringify")},XU=YU,KU={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:s((e=>{let t=e.match(KU.hueRe);if(t){let[,e,r]=t;switch(r){case"grad":return $U.channel.clamp.h(.9*parseFloat(e));case"rad":return $U.channel.clamp.h(180*parseFloat(e)/Math.PI);case"turn":return $U.channel.clamp.h(360*parseFloat(e))}}return $U.channel.clamp.h(parseFloat(e))}),"_hue2deg"),parse:s((e=>{let t=e.charCodeAt(0);if(104!==t&&72!==t)return;let r=e.match(KU.re);if(!r)return;let[,n,i,a,o,s]=r;return qU.set({h:KU._hue2deg(n),s:$U.channel.clamp.s(parseFloat(i)),l:$U.channel.clamp.l(parseFloat(a)),a:o?$U.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},e)}),"parse"),stringify:s((e=>{let{h:t,s:r,l:n,a:i}=e;return i<1?`hsla(${$U.lang.round(t)}, ${$U.lang.round(r)}%, ${$U.lang.round(n)}%, ${i})`:`hsl(${$U.lang.round(t)}, ${$U.lang.round(r)}%, ${$U.lang.round(n)}%)`}),"stringify")},ZU=KU,QU={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:s((e=>{e=e.toLowerCase();let t=QU.colors[e];if(t)return XU.parse(t)}),"parse"),stringify:s((e=>{let t=XU.stringify(e);for(let e in QU.colors)if(QU.colors[e]===t)return e}),"stringify")},JU=QU,eG={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:s((e=>{let t=e.charCodeAt(0);if(114!==t&&82!==t)return;let r=e.match(eG.re);if(!r)return;let[,n,i,a,o,s,l,u,c]=r;return qU.set({r:$U.channel.clamp.r(i?2.55*parseFloat(n):parseFloat(n)),g:$U.channel.clamp.g(o?2.55*parseFloat(a):parseFloat(a)),b:$U.channel.clamp.b(l?2.55*parseFloat(s):parseFloat(s)),a:u?$U.channel.clamp.a(c?parseFloat(u)/100:parseFloat(u)):1},e)}),"parse"),stringify:s((e=>{let{r:t,g:r,b:n,a:i}=e;return i<1?`rgba(${$U.lang.round(t)}, ${$U.lang.round(r)}, ${$U.lang.round(n)}, ${$U.lang.round(i)})`:`rgb(${$U.lang.round(t)}, ${$U.lang.round(r)}, ${$U.lang.round(n)})`}),"stringify")},tG=eG,rG={format:{keyword:JU,hex:XU,rgb:tG,rgba:tG,hsl:ZU,hsla:ZU},parse:s((e=>{if("string"!=typeof e)return e;let t=XU.parse(e)||tG.parse(e)||ZU.parse(e)||JU.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)}),"parse"),stringify:s((e=>!e.changed&&e.color?e.color:e.type.is(jU)||void 0===e.data.r?ZU.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?tG.stringify(e):XU.stringify(e)),"stringify")},nG=rG,iG=s(((e,t)=>{let r=nG.parse(e);for(let e in t)r[e]=$U.channel.clamp[e](t[e]);return nG.stringify(r)}),"change"),aG=iG,oG=s(((e,t,r=0,n=1)=>{if("number"!=typeof e)return aG(e,{a:t});let i=qU.set({r:$U.channel.clamp.r(e),g:$U.channel.clamp.g(t),b:$U.channel.clamp.b(r),a:$U.channel.clamp.a(n)});return nG.stringify(i)}),"rgba"),sG=oG;s(((e,t)=>$U.lang.round(nG.parse(e)[t])),"channel");var lG,uG=s((e=>{let{r:t,g:r,b:n}=nG.parse(e),i=.2126*$U.channel.toLinear(t)+.7152*$U.channel.toLinear(r)+.0722*$U.channel.toLinear(n);return $U.lang.round(i)}),"luminance"),cG=uG,hG=s((e=>cG(e)>=.5),"isLight"),dG=hG,fG=s((e=>!dG(e)),"isDark"),pG=fG,gG=s(((e,t,r)=>{let n=nG.parse(e),i=n[t],a=$U.channel.clamp[t](i+r);return i!==a&&(n[t]=a),nG.stringify(n)}),"adjustChannel"),mG=gG,yG=s(((e,t)=>mG(e,"l",t)),"lighten"),vG=yG,xG=s(((e,t)=>mG(e,"l",-t)),"darken"),bG=xG,TG=s(((e,t)=>{let r=nG.parse(e),n={};for(let e in t)t[e]&&(n[e]=r[e]+t[e]);return aG(e,n)}),"adjust"),CG=TG,wG=s(((e,t,r=50)=>{let{r:n,g:i,b:a,a:o}=nG.parse(e),{r:s,g:l,b:u,a:c}=nG.parse(t),h=r/100,d=2*h-1,f=o-c,p=((d*f==-1?d:(d+f)/(1+d*f))+1)/2,g=1-p;return sG(n*p+s*g,i*p+l*g,a*p+u*g,o*h+c*(1-h))}),"mix"),kG=wG,EG=s(((e,t=100)=>{let r=nG.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,kG(r,e,t)}),"invert"),_G=EG,AG="#ffffff",SG="#f2f2f2",RG=s(((e,t)=>CG(e,t?{s:-40,l:10}:{s:-40,l:-10})),"mkBorder"),NG=class{static{s(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||CG(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||CG(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||RG(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||RG(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||RG(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||RG(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||_G(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||_G(this.tertiaryColor),this.lineColor=this.lineColor||_G(this.background),this.arrowheadColor=this.arrowheadColor||_G(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?bG(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||bG(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||_G(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||vG(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||bG(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||bG(this.mainBkg,10)):(this.rowOdd=this.rowOdd||vG(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||vG(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||CG(this.primaryColor,{h:30}),this.cScale4=this.cScale4||CG(this.primaryColor,{h:60}),this.cScale5=this.cScale5||CG(this.primaryColor,{h:90}),this.cScale6=this.cScale6||CG(this.primaryColor,{h:120}),this.cScale7=this.cScale7||CG(this.primaryColor,{h:150}),this.cScale8=this.cScale8||CG(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||CG(this.primaryColor,{h:270}),this.cScale10=this.cScale10||CG(this.primaryColor,{h:300}),this.cScale11=this.cScale11||CG(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=bG(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=bG(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||_G(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||vG(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||bG(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;let e=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||CG(this.mainBkg,{h:180,s:-15,l:e*(5+3*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||CG(this.mainBkg,{h:180,s:-15,l:e*(8+3*t)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||CG(this.primaryColor,{h:64}),this.fillType3=this.fillType3||CG(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||CG(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||CG(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||CG(this.primaryColor,{h:128}),this.fillType7=this.fillType7||CG(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||CG(this.primaryColor,{l:-10}),this.pie5=this.pie5||CG(this.secondaryColor,{l:-10}),this.pie6=this.pie6||CG(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||CG(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||CG(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||CG(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||CG(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||CG(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||CG(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||CG(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||CG(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||CG(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||CG(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||CG(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||CG(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pG(this.quadrant1Fill)?vG(this.quadrant1Fill):bG(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?bG(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||CG(this.primaryColor,{h:-30}),this.git4=this.git4||CG(this.primaryColor,{h:-60}),this.git5=this.git5||CG(this.primaryColor,{h:-90}),this.git6=this.git6||CG(this.primaryColor,{h:60}),this.git7=this.git7||CG(this.primaryColor,{h:120}),this.darkMode?(this.git0=vG(this.git0,25),this.git1=vG(this.git1,25),this.git2=vG(this.git2,25),this.git3=vG(this.git3,25),this.git4=vG(this.git4,25),this.git5=vG(this.git5,25),this.git6=vG(this.git6,25),this.git7=vG(this.git7,25)):(this.git0=bG(this.git0,25),this.git1=bG(this.git1,25),this.git2=bG(this.git2,25),this.git3=bG(this.git3,25),this.git4=bG(this.git4,25),this.git5=bG(this.git5,25),this.git6=bG(this.git6,25),this.git7=bG(this.git7,25)),this.gitInv0=this.gitInv0||_G(this.git0),this.gitInv1=this.gitInv1||_G(this.git1),this.gitInv2=this.gitInv2||_G(this.git2),this.gitInv3=this.gitInv3||_G(this.git3),this.gitInv4=this.gitInv4||_G(this.git4),this.gitInv5=this.gitInv5||_G(this.git5),this.gitInv6=this.gitInv6||_G(this.git6),this.gitInv7=this.gitInv7||_G(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||AG,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||SG}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},LG=s((e=>{let t=new NG;return t.calculate(e),t}),"getThemeVariables"),IG=class{static{s(this,"Theme")}constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=vG(this.primaryColor,16),this.tertiaryColor=CG(this.primaryColor,{h:-160}),this.primaryBorderColor=_G(this.background),this.secondaryBorderColor=RG(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=RG(this.tertiaryColor,this.darkMode),this.primaryTextColor=_G(this.primaryColor),this.secondaryTextColor=_G(this.secondaryColor),this.tertiaryTextColor=_G(this.tertiaryColor),this.lineColor=_G(this.background),this.textColor=_G(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=vG(_G("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=sG(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=bG("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=bG(this.sectionBkgColor,10),this.taskBorderColor=sG(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=sG(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||vG(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||bG(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=vG(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=vG(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=vG(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=CG(this.primaryColor,{h:64}),this.fillType3=CG(this.secondaryColor,{h:64}),this.fillType4=CG(this.primaryColor,{h:-64}),this.fillType5=CG(this.secondaryColor,{h:-64}),this.fillType6=CG(this.primaryColor,{h:128}),this.fillType7=CG(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||CG(this.primaryColor,{h:30}),this.cScale4=this.cScale4||CG(this.primaryColor,{h:60}),this.cScale5=this.cScale5||CG(this.primaryColor,{h:90}),this.cScale6=this.cScale6||CG(this.primaryColor,{h:120}),this.cScale7=this.cScale7||CG(this.primaryColor,{h:150}),this.cScale8=this.cScale8||CG(this.primaryColor,{h:210}),this.cScale9=this.cScale9||CG(this.primaryColor,{h:270}),this.cScale10=this.cScale10||CG(this.primaryColor,{h:300}),this.cScale11=this.cScale11||CG(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||_G(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||vG(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||CG(this.mainBkg,{h:30,s:-30,l:-(4*e-10)}),this["surfacePeer"+e]=this["surfacePeer"+e]||CG(this.mainBkg,{h:30,s:-30,l:-(4*e-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||CG(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||CG(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||CG(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||CG(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||CG(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||CG(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pG(this.quadrant1Fill)?vG(this.quadrant1Fill):bG(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?bG(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=vG(this.secondaryColor,20),this.git1=vG(this.pie2||this.secondaryColor,20),this.git2=vG(this.pie3||this.tertiaryColor,20),this.git3=vG(this.pie4||CG(this.primaryColor,{h:-30}),20),this.git4=vG(this.pie5||CG(this.primaryColor,{h:-60}),20),this.git5=vG(this.pie6||CG(this.primaryColor,{h:-90}),10),this.git6=vG(this.pie7||CG(this.primaryColor,{h:60}),10),this.git7=vG(this.pie8||CG(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||_G(this.git0),this.gitInv1=this.gitInv1||_G(this.git1),this.gitInv2=this.gitInv2||_G(this.git2),this.gitInv3=this.gitInv3||_G(this.git3),this.gitInv4=this.gitInv4||_G(this.git4),this.gitInv5=this.gitInv5||_G(this.git5),this.gitInv6=this.gitInv6||_G(this.git6),this.gitInv7=this.gitInv7||_G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||_G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||_G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||vG(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||vG(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},MG=s((e=>{let t=new IG;return t.calculate(e),t}),"getThemeVariables"),OG=class{static{s(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=CG(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=CG(this.primaryColor,{h:-160}),this.primaryBorderColor=RG(this.primaryColor,this.darkMode),this.secondaryBorderColor=RG(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=RG(this.tertiaryColor,this.darkMode),this.primaryTextColor=_G(this.primaryColor),this.secondaryTextColor=_G(this.secondaryColor),this.tertiaryTextColor=_G(this.tertiaryColor),this.lineColor=_G(this.background),this.textColor=_G(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=sG(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||CG(this.primaryColor,{h:30}),this.cScale4=this.cScale4||CG(this.primaryColor,{h:60}),this.cScale5=this.cScale5||CG(this.primaryColor,{h:90}),this.cScale6=this.cScale6||CG(this.primaryColor,{h:120}),this.cScale7=this.cScale7||CG(this.primaryColor,{h:150}),this.cScale8=this.cScale8||CG(this.primaryColor,{h:210}),this.cScale9=this.cScale9||CG(this.primaryColor,{h:270}),this.cScale10=this.cScale10||CG(this.primaryColor,{h:300}),this.cScale11=this.cScale11||CG(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||bG(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||bG(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=bG(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||bG(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||CG(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||CG(this.mainBkg,{h:30,l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||CG(this.mainBkg,{h:30,l:-(7+5*e)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||_G(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||_G(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=vG(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||vG(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||vG(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=CG(this.primaryColor,{h:64}),this.fillType3=CG(this.secondaryColor,{h:64}),this.fillType4=CG(this.primaryColor,{h:-64}),this.fillType5=CG(this.secondaryColor,{h:-64}),this.fillType6=CG(this.primaryColor,{h:128}),this.fillType7=CG(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||CG(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||CG(this.primaryColor,{l:-10}),this.pie5=this.pie5||CG(this.secondaryColor,{l:-30}),this.pie6=this.pie6||CG(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||CG(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||CG(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||CG(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||CG(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||CG(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||CG(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||CG(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||CG(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||CG(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||CG(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||CG(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||CG(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pG(this.quadrant1Fill)?vG(this.quadrant1Fill):bG(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||CG(this.primaryColor,{h:-30}),this.git4=this.git4||CG(this.primaryColor,{h:-60}),this.git5=this.git5||CG(this.primaryColor,{h:-90}),this.git6=this.git6||CG(this.primaryColor,{h:60}),this.git7=this.git7||CG(this.primaryColor,{h:120}),this.darkMode?(this.git0=vG(this.git0,25),this.git1=vG(this.git1,25),this.git2=vG(this.git2,25),this.git3=vG(this.git3,25),this.git4=vG(this.git4,25),this.git5=vG(this.git5,25),this.git6=vG(this.git6,25),this.git7=vG(this.git7,25)):(this.git0=bG(this.git0,25),this.git1=bG(this.git1,25),this.git2=bG(this.git2,25),this.git3=bG(this.git3,25),this.git4=bG(this.git4,25),this.git5=bG(this.git5,25),this.git6=bG(this.git6,25),this.git7=bG(this.git7,25)),this.gitInv0=this.gitInv0||bG(_G(this.git0),25),this.gitInv1=this.gitInv1||_G(this.git1),this.gitInv2=this.gitInv2||_G(this.git2),this.gitInv3=this.gitInv3||_G(this.git3),this.gitInv4=this.gitInv4||_G(this.git4),this.gitInv5=this.gitInv5||_G(this.git5),this.gitInv6=this.gitInv6||_G(this.git6),this.gitInv7=this.gitInv7||_G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||_G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||_G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||AG,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||SG}calculate(e){if(Object.keys(this).forEach((e=>{"calculated"===this[e]&&(this[e]=void 0)})),"object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},PG=s((e=>{let t=new OG;return t.calculate(e),t}),"getThemeVariables"),DG=class{static{s(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=vG("#cde498",10),this.primaryBorderColor=RG(this.primaryColor,this.darkMode),this.secondaryBorderColor=RG(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=RG(this.tertiaryColor,this.darkMode),this.primaryTextColor=_G(this.primaryColor),this.secondaryTextColor=_G(this.secondaryColor),this.tertiaryTextColor=_G(this.primaryColor),this.lineColor=_G(this.background),this.textColor=_G(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=bG(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||CG(this.primaryColor,{h:30}),this.cScale4=this.cScale4||CG(this.primaryColor,{h:60}),this.cScale5=this.cScale5||CG(this.primaryColor,{h:90}),this.cScale6=this.cScale6||CG(this.primaryColor,{h:120}),this.cScale7=this.cScale7||CG(this.primaryColor,{h:150}),this.cScale8=this.cScale8||CG(this.primaryColor,{h:210}),this.cScale9=this.cScale9||CG(this.primaryColor,{h:270}),this.cScale10=this.cScale10||CG(this.primaryColor,{h:300}),this.cScale11=this.cScale11||CG(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||bG(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||bG(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=bG(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||bG(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||CG(this["cScale"+e],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||CG(this.mainBkg,{h:30,s:-30,l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||CG(this.mainBkg,{h:30,s:-30,l:-(8+5*e)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||vG(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||vG(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=CG(this.primaryColor,{h:64}),this.fillType3=CG(this.secondaryColor,{h:64}),this.fillType4=CG(this.primaryColor,{h:-64}),this.fillType5=CG(this.secondaryColor,{h:-64}),this.fillType6=CG(this.primaryColor,{h:128}),this.fillType7=CG(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||CG(this.primaryColor,{l:-30}),this.pie5=this.pie5||CG(this.secondaryColor,{l:-30}),this.pie6=this.pie6||CG(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||CG(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||CG(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||CG(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||CG(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||CG(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||CG(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||CG(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||CG(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||CG(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||CG(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||CG(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||CG(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pG(this.quadrant1Fill)?vG(this.quadrant1Fill):bG(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||CG(this.primaryColor,{h:-30}),this.git4=this.git4||CG(this.primaryColor,{h:-60}),this.git5=this.git5||CG(this.primaryColor,{h:-90}),this.git6=this.git6||CG(this.primaryColor,{h:60}),this.git7=this.git7||CG(this.primaryColor,{h:120}),this.darkMode?(this.git0=vG(this.git0,25),this.git1=vG(this.git1,25),this.git2=vG(this.git2,25),this.git3=vG(this.git3,25),this.git4=vG(this.git4,25),this.git5=vG(this.git5,25),this.git6=vG(this.git6,25),this.git7=vG(this.git7,25)):(this.git0=bG(this.git0,25),this.git1=bG(this.git1,25),this.git2=bG(this.git2,25),this.git3=bG(this.git3,25),this.git4=bG(this.git4,25),this.git5=bG(this.git5,25),this.git6=bG(this.git6,25),this.git7=bG(this.git7,25)),this.gitInv0=this.gitInv0||_G(this.git0),this.gitInv1=this.gitInv1||_G(this.git1),this.gitInv2=this.gitInv2||_G(this.git2),this.gitInv3=this.gitInv3||_G(this.git3),this.gitInv4=this.gitInv4||_G(this.git4),this.gitInv5=this.gitInv5||_G(this.git5),this.gitInv6=this.gitInv6||_G(this.git6),this.gitInv7=this.gitInv7||_G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||_G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||_G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||AG,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||SG}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},BG=s((e=>{let t=new DG;return t.calculate(e),t}),"getThemeVariables"),FG=class{static{s(this,"Theme")}constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=vG(this.contrast,55),this.background="#ffffff",this.tertiaryColor=CG(this.primaryColor,{h:-160}),this.primaryBorderColor=RG(this.primaryColor,this.darkMode),this.secondaryBorderColor=RG(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=RG(this.tertiaryColor,this.darkMode),this.primaryTextColor=_G(this.primaryColor),this.secondaryTextColor=_G(this.secondaryColor),this.tertiaryTextColor=_G(this.tertiaryColor),this.lineColor=_G(this.background),this.textColor=_G(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||vG(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=vG(this.contrast,55),this.border2=this.contrast,this.actorBorder=vG(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||_G(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||vG(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||bG(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||CG(this.mainBkg,{l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||CG(this.mainBkg,{l:-(8+5*e)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=vG(this.contrast,30),this.sectionBkgColor2=vG(this.contrast,30),this.taskBorderColor=bG(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=vG(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=bG(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=CG(this.primaryColor,{h:64}),this.fillType3=CG(this.secondaryColor,{h:64}),this.fillType4=CG(this.primaryColor,{h:-64}),this.fillType5=CG(this.secondaryColor,{h:-64}),this.fillType6=CG(this.primaryColor,{h:128}),this.fillType7=CG(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||CG(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||CG(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||CG(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||CG(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||CG(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||CG(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pG(this.quadrant1Fill)?vG(this.quadrant1Fill):bG(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=bG(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||CG(this.primaryColor,{h:-30}),this.git4=this.pie5||CG(this.primaryColor,{h:-60}),this.git5=this.pie6||CG(this.primaryColor,{h:-90}),this.git6=this.pie7||CG(this.primaryColor,{h:60}),this.git7=this.pie8||CG(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||_G(this.git0),this.gitInv1=this.gitInv1||_G(this.git1),this.gitInv2=this.gitInv2||_G(this.git2),this.gitInv3=this.gitInv3||_G(this.git3),this.gitInv4=this.gitInv4||_G(this.git4),this.gitInv5=this.gitInv5||_G(this.git5),this.gitInv6=this.gitInv6||_G(this.git6),this.gitInv7=this.gitInv7||_G(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||AG,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||SG}calculate(e){if("object"!=typeof e)return void this.updateColors();let t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}},$G=s((e=>{let t=new FG;return t.calculate(e),t}),"getThemeVariables"),zG={base:{getThemeVariables:LG},dark:{getThemeVariables:MG},default:{getThemeVariables:PG},forest:{getThemeVariables:BG},neutral:{getThemeVariables:$G}},UG={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},GG={...UG,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:zG.default.getThemeVariables(),sequence:{...UG.sequence,messageFont:s((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont"),noteFont:s((function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}}),"noteFont"),actorFont:s((function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}),"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...UG.gantt,tickInterval:void 0,useWidth:void 0},c4:{...UG.c4,useWidth:void 0,personFont:s((function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}}),"personFont"),external_personFont:s((function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}}),"external_personFont"),systemFont:s((function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}}),"systemFont"),external_systemFont:s((function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}}),"external_systemFont"),system_dbFont:s((function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}}),"system_dbFont"),external_system_dbFont:s((function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}}),"external_system_dbFont"),system_queueFont:s((function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}}),"system_queueFont"),external_system_queueFont:s((function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}}),"external_system_queueFont"),containerFont:s((function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}}),"containerFont"),external_containerFont:s((function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}}),"external_containerFont"),container_dbFont:s((function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}}),"container_dbFont"),external_container_dbFont:s((function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}}),"external_container_dbFont"),container_queueFont:s((function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}}),"container_queueFont"),external_container_queueFont:s((function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}}),"external_container_queueFont"),componentFont:s((function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}}),"componentFont"),external_componentFont:s((function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}}),"external_componentFont"),component_dbFont:s((function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}}),"component_dbFont"),external_component_dbFont:s((function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}}),"external_component_dbFont"),component_queueFont:s((function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}}),"component_queueFont"),external_component_queueFont:s((function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}}),"external_component_queueFont"),boundaryFont:s((function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}}),"boundaryFont"),messageFont:s((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont")},pie:{...UG.pie,useWidth:984},xyChart:{...UG.xyChart,useWidth:void 0},requirement:{...UG.requirement,useWidth:void 0},packet:{...UG.packet},radar:{...UG.radar}},jG=s(((e,t="")=>Object.keys(e).reduce(((r,n)=>Array.isArray(e[n])?r:"object"==typeof e[n]&&null!==e[n]?[...r,t+n,...jG(e[n],"")]:[...r,t+n]),[])),"keyify"),VG=new Set(jG(GG,"")),WG=GG,HG=s((e=>{if(CU.debug("sanitizeDirective called with",e),"object"==typeof e&&null!=e){if(Array.isArray(e))return void e.forEach((e=>HG(e)));for(let t of Object.keys(e)){if(CU.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!VG.has(t)||null==e[t]){CU.debug("sanitize deleting key: ",t),delete e[t];continue}if("object"==typeof e[t]){CU.debug("sanitizing object",t),HG(e[t]);continue}let r=["themeCSS","fontFamily","altFontFamily"];for(let n of r)t.includes(n)&&(CU.debug("sanitizing css option",t),e[t]=qG(e[t]))}if(e.themeVariables)for(let t of Object.keys(e.themeVariables)){let r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}CU.debug("After sanitization",e)}}),"sanitizeDirective"),qG=s((e=>{let t=0,r=0;for(let n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";"{"===n?t++:"}"===n&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e}),"sanitizeCss"),YG=Object.freeze(WG),XG=MU({},YG),KG=[],ZG=MU({},YG),QG=s(((e,t)=>{let r=MU({},e),n={};for(let e of t)ej(e),n=MU(n,e);if(r=MU(r,n),n.theme&&n.theme in zG){let e=MU({},lG),t=MU(e.themeVariables||{},n.themeVariables);r.theme&&r.theme in zG&&(r.themeVariables=zG[r.theme].getThemeVariables(t))}return ij(ZG=r),ZG}),"updateCurrentConfig");s((e=>(XG=MU({},YG),XG=MU(XG,e),e.theme&&zG[e.theme]&&(XG.themeVariables=zG[e.theme].getThemeVariables(e.themeVariables)),QG(XG,KG),XG)),"setSiteConfig"),s((e=>{lG=MU({},e)}),"saveConfigFromInitialize"),s((e=>(XG=MU(XG,e),QG(XG,KG),XG)),"updateSiteConfig"),s((()=>MU({},XG)),"getSiteConfig"),s((e=>(ij(e),MU(ZG,e),JG())),"setConfig");var JG=s((()=>MU({},ZG)),"getConfig"),ej=s((e=>{e&&(["secure",...XG.secure??[]].forEach((t=>{Object.hasOwn(e,t)&&(CU.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])})),Object.keys(e).forEach((t=>{t.startsWith("__")&&delete e[t]})),Object.keys(e).forEach((t=>{"string"==typeof e[t]&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],"object"==typeof e[t]&&ej(e[t])})))}),"sanitize");s((e=>{HG(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),KG.push(e),QG(XG,KG)}),"addDirective"),s(((e=XG)=>{QG(e,KG=[])}),"reset");var tj={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},rj={},nj=s((e=>{rj[e]||(CU.warn(tj[e]),rj[e]=!0)}),"issueWarning"),ij=s((e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&nj("LAZY_LOAD_DEPRECATED")}),"checkConfig"),{entries:aj,setPrototypeOf:oj,isFrozen:sj,getPrototypeOf:lj,getOwnPropertyDescriptor:uj}=Object,{freeze:cj,seal:hj,create:dj}=Object,{apply:fj,construct:pj}=typeof Reflect<"u"&&Reflect;cj||(cj=s((function(e){return e}),"freeze")),hj||(hj=s((function(e){return e}),"seal")),fj||(fj=s((function(e,t,r){return e.apply(t,r)}),"apply")),pj||(pj=s((function(e,t){return new e(...t)}),"construct"));var gj=Rj(Array.prototype.forEach),mj=Rj(Array.prototype.lastIndexOf),yj=Rj(Array.prototype.pop),vj=Rj(Array.prototype.push),xj=Rj(Array.prototype.splice),bj=Rj(String.prototype.toLowerCase),Tj=Rj(String.prototype.toString),Cj=Rj(String.prototype.match),wj=Rj(String.prototype.replace),kj=Rj(String.prototype.indexOf),Ej=Rj(String.prototype.trim),_j=Rj(Object.prototype.hasOwnProperty),Aj=Rj(RegExp.prototype.test),Sj=Nj(TypeError);function Rj(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return fj(e,t,n)}}function Nj(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pj(e,r)}}function Lj(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bj;oj&&oj(e,null);let n=t.length;for(;n--;){let i=t[n];if("string"==typeof i){let e=r(i);e!==i&&(sj(t)||(t[n]=e),i=e)}e[i]=!0}return e}function Ij(e){for(let t=0;t<e.length;t++)_j(e,t)||(e[t]=null);return e}function Mj(e){let t=dj(null);for(let[r,n]of aj(e))_j(e,r)&&(Array.isArray(n)?t[r]=Ij(n):n&&"object"==typeof n&&n.constructor===Object?t[r]=Mj(n):t[r]=n);return t}function Oj(e,t){for(;null!==e;){let r=uj(e,t);if(r){if(r.get)return Rj(r.get);if("function"==typeof r.value)return Rj(r.value)}e=lj(e)}function r(){return null}return s(r,"fallbackValue"),r}s(Rj,"unapply"),s(Nj,"unconstruct"),s(Lj,"addToSet"),s(Ij,"cleanArray"),s(Mj,"clone"),s(Oj,"lookupGetter");var Pj=cj(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dj=cj(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Bj=cj(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fj=cj(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$j=cj(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),zj=cj(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Uj=cj(["#text"]),Gj=cj(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),jj=cj(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Vj=cj(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Wj=cj(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Hj=hj(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qj=hj(/<%[\w\W]*|[\w\W]*%>/gm),Yj=hj(/\$\{[\w\W]*/gm),Xj=hj(/^data-[\-\w.\u00B7-\uFFFF]+$/),Kj=hj(/^aria-[\-\w]+$/),Zj=hj(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qj=hj(/^(?:\w+script|data):/i),Jj=hj(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eV=hj(/^html$/i),tV=hj(/^[a-z][.\w]*(-[.\w]+)+$/i),rV=Object.freeze({__proto__:null,ARIA_ATTR:Kj,ATTR_WHITESPACE:Jj,CUSTOM_ELEMENT:tV,DATA_ATTR:Xj,DOCTYPE_NAME:eV,ERB_EXPR:qj,IS_ALLOWED_URI:Zj,IS_SCRIPT_OR_DATA:Qj,MUSTACHE_EXPR:Hj,TMPLIT_EXPR:Yj}),nV=1,iV=3,aV=7,oV=8,sV=9,lV=s((function(){return typeof window>"u"?null:window}),"getGlobal"),uV=s((function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null,n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(r=t.getAttribute(n));let i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}}),"_createTrustedTypesPolicy"),cV=s((function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}}),"_createHooksMap");function hV(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lV(),t=s((e=>hV(e)),"DOMPurify");if(t.version="3.2.4",t.removed=[],!e||!e.document||e.document.nodeType!==sV||!e.Element)return t.isSupported=!1,t;let{document:r}=e,n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=e,g=u.prototype,m=Oj(g,"cloneNode"),y=Oj(g,"remove"),v=Oj(g,"nextSibling"),x=Oj(g,"childNodes"),b=Oj(g,"parentNode");if("function"==typeof o){let e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let T,C="",{implementation:w,createNodeIterator:k,createDocumentFragment:E,getElementsByTagName:_}=r,{importNode:A}=n,S=cV();t.isSupported="function"==typeof aj&&"function"==typeof b&&w&&void 0!==w.createHTMLDocument;let{MUSTACHE_EXPR:R,ERB_EXPR:N,TMPLIT_EXPR:L,DATA_ATTR:I,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:D}=rV,{IS_ALLOWED_URI:B}=rV,F=null,$=Lj({},[...Pj,...Dj,...Bj,...$j,...Uj]),z=null,U=Lj({},[...Gj,...jj,...Vj,...Wj]),G=Object.seal(dj(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,V=null,W=!0,H=!0,q=!1,Y=!0,X=!1,K=!0,Z=!1,Q=!1,J=!1,ee=!1,te=!1,re=!1,ne=!0,ie=!1,ae=!0,oe=!1,se={},le=null,ue=Lj({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ce=null,he=Lj({},["audio","video","img","source","image","track"]),de=null,fe=Lj({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",ge="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml",ye=me,ve=!1,xe=null,be=Lj({},[pe,ge,me],Tj),Te=Lj({},["mi","mo","mn","ms","mtext"]),Ce=Lj({},["annotation-xml"]),we=Lj({},["title","style","font","a","script"]),ke=null,Ee=["application/xhtml+xml","text/html"],_e=null,Ae=null,Se=r.createElement("form"),Re=s((function(e){return e instanceof RegExp||e instanceof Function}),"isRegexOrFunction"),Ne=s((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ae||Ae!==e){if((!e||"object"!=typeof e)&&(e={}),e=Mj(e),ke=-1===Ee.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,_e="application/xhtml+xml"===ke?Tj:bj,F=_j(e,"ALLOWED_TAGS")?Lj({},e.ALLOWED_TAGS,_e):$,z=_j(e,"ALLOWED_ATTR")?Lj({},e.ALLOWED_ATTR,_e):U,xe=_j(e,"ALLOWED_NAMESPACES")?Lj({},e.ALLOWED_NAMESPACES,Tj):be,de=_j(e,"ADD_URI_SAFE_ATTR")?Lj(Mj(fe),e.ADD_URI_SAFE_ATTR,_e):fe,ce=_j(e,"ADD_DATA_URI_TAGS")?Lj(Mj(he),e.ADD_DATA_URI_TAGS,_e):he,le=_j(e,"FORBID_CONTENTS")?Lj({},e.FORBID_CONTENTS,_e):ue,j=_j(e,"FORBID_TAGS")?Lj({},e.FORBID_TAGS,_e):{},V=_j(e,"FORBID_ATTR")?Lj({},e.FORBID_ATTR,_e):{},se=!!_j(e,"USE_PROFILES")&&e.USE_PROFILES,W=!1!==e.ALLOW_ARIA_ATTR,H=!1!==e.ALLOW_DATA_ATTR,q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,X=e.SAFE_FOR_TEMPLATES||!1,K=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,re=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,oe=e.IN_PLACE||!1,B=e.ALLOWED_URI_REGEXP||Zj,ye=e.NAMESPACE||me,Te=e.MATHML_TEXT_INTEGRATION_POINTS||Te,Ce=e.HTML_INTEGRATION_POINTS||Ce,G=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Re(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(G.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Re(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(G.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(G.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(H=!1),te&&(ee=!0),se&&(F=Lj({},Uj),z=[],!0===se.html&&(Lj(F,Pj),Lj(z,Gj)),!0===se.svg&&(Lj(F,Dj),Lj(z,jj),Lj(z,Wj)),!0===se.svgFilters&&(Lj(F,Bj),Lj(z,jj),Lj(z,Wj)),!0===se.mathMl&&(Lj(F,$j),Lj(z,Vj),Lj(z,Wj))),e.ADD_TAGS&&(F===$&&(F=Mj(F)),Lj(F,e.ADD_TAGS,_e)),e.ADD_ATTR&&(z===U&&(z=Mj(z)),Lj(z,e.ADD_ATTR,_e)),e.ADD_URI_SAFE_ATTR&&Lj(de,e.ADD_URI_SAFE_ATTR,_e),e.FORBID_CONTENTS&&(le===ue&&(le=Mj(le)),Lj(le,e.FORBID_CONTENTS,_e)),ae&&(F["#text"]=!0),Z&&Lj(F,["html","head","body"]),F.table&&(Lj(F,["tbody"]),delete j.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Sj('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Sj('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=e.TRUSTED_TYPES_POLICY,C=T.createHTML("")}else void 0===T&&(T=uV(p,i)),null!==T&&"string"==typeof C&&(C=T.createHTML(""));cj&&cj(e),Ae=e}}),"_parseConfig"),Le=Lj({},[...Dj,...Bj,...Fj]),Ie=Lj({},[...$j,...zj]),Me=s((function(e){let t=b(e);(!t||!t.tagName)&&(t={namespaceURI:ye,tagName:"template"});let r=bj(e.tagName),n=bj(t.tagName);return!!xe[e.namespaceURI]&&(e.namespaceURI===ge?t.namespaceURI===me?"svg"===r:t.namespaceURI===pe?"svg"===r&&("annotation-xml"===n||Te[n]):!!Le[r]:e.namespaceURI===pe?t.namespaceURI===me?"math"===r:t.namespaceURI===ge?"math"===r&&Ce[n]:!!Ie[r]:e.namespaceURI===me?!(t.namespaceURI===ge&&!Ce[n]||t.namespaceURI===pe&&!Te[n])&&(!Ie[r]&&(we[r]||!Le[r])):!("application/xhtml+xml"!==ke||!xe[e.namespaceURI]))}),"_checkValidNamespace"),Oe=s((function(e){vj(t.removed,{element:e});try{b(e).removeChild(e)}catch{y(e)}}),"_forceRemove"),Pe=s((function(e,r){try{vj(t.removed,{attribute:r.getAttributeNode(e),from:r})}catch{vj(t.removed,{attribute:null,from:r})}if(r.removeAttribute(e),"is"===e)if(ee||te)try{Oe(r)}catch{}else try{r.setAttribute(e,"")}catch{}}),"_removeAttribute"),De=s((function(e){let t=null,n=null;if(J)e="<remove></remove>"+e;else{let t=Cj(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ke&&ye===me&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let i=T?T.createHTML(e):e;if(ye===me)try{t=(new f).parseFromString(i,ke)}catch{}if(!t||!t.documentElement){t=w.createDocument(ye,"template",null);try{t.documentElement.innerHTML=ve?C:i}catch{}}let a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),ye===me?_.call(t,Z?"html":"body")[0]:Z?t.documentElement:a}),"_initDocument"),Be=s((function(e){return k.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)}),"_createNodeIterator"),Fe=s((function(e){return e instanceof d&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof h)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)}),"_isClobbered"),$e=s((function(e){return"function"==typeof l&&e instanceof l}),"_isNode");function ze(e,r,n){gj(e,(e=>{e.call(t,r,n,Ae)}))}s(ze,"_executeHooks");let Ue=s((function(e){let r=null;if(ze(S.beforeSanitizeElements,e,null),Fe(e))return Oe(e),!0;let n=_e(e.nodeName);if(ze(S.uponSanitizeElement,e,{tagName:n,allowedTags:F}),e.hasChildNodes()&&!$e(e.firstElementChild)&&Aj(/<[/\w]/g,e.innerHTML)&&Aj(/<[/\w]/g,e.textContent)||e.nodeType===aV||K&&e.nodeType===oV&&Aj(/<[/\w]/g,e.data))return Oe(e),!0;if(!F[n]||j[n]){if(!j[n]&&je(n)&&(G.tagNameCheck instanceof RegExp&&Aj(G.tagNameCheck,n)||G.tagNameCheck instanceof Function&&G.tagNameCheck(n)))return!1;if(ae&&!le[n]){let t=b(e)||e.parentNode,r=x(e)||e.childNodes;if(r&&t){for(let n=r.length-1;n>=0;--n){let i=m(r[n],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,v(e))}}}return Oe(e),!0}return e instanceof u&&!Me(e)||("noscript"===n||"noembed"===n||"noframes"===n)&&Aj(/<\/no(script|embed|frames)/i,e.innerHTML)?(Oe(e),!0):(X&&e.nodeType===iV&&(r=e.textContent,gj([R,N,L],(e=>{r=wj(r,e," ")})),e.textContent!==r&&(vj(t.removed,{element:e.cloneNode()}),e.textContent=r)),ze(S.afterSanitizeElements,e,null),!1)}),"_sanitizeElements"),Ge=s((function(e,t,n){if(ne&&("id"===t||"name"===t)&&(n in r||n in Se))return!1;if((!H||V[t]||!Aj(I,t))&&(!W||!Aj(M,t)))if(!z[t]||V[t]){if(!(je(e)&&(G.tagNameCheck instanceof RegExp&&Aj(G.tagNameCheck,e)||G.tagNameCheck instanceof Function&&G.tagNameCheck(e))&&(G.attributeNameCheck instanceof RegExp&&Aj(G.attributeNameCheck,t)||G.attributeNameCheck instanceof Function&&G.attributeNameCheck(t))||"is"===t&&G.allowCustomizedBuiltInElements&&(G.tagNameCheck instanceof RegExp&&Aj(G.tagNameCheck,n)||G.tagNameCheck instanceof Function&&G.tagNameCheck(n))))return!1}else if(!de[t]&&!Aj(B,wj(n,P,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==kj(n,"data:")||!ce[e])&&(!q||Aj(O,wj(n,P,"")))&&n)return!1;return!0}),"_isValidAttribute"),je=s((function(e){return"annotation-xml"!==e&&Cj(e,D)}),"_isBasicCustomElement"),Ve=s((function(e){ze(S.beforeSanitizeAttributes,e,null);let{attributes:r}=e;if(!r||Fe(e))return;let n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0},i=r.length;for(;i--;){let a=r[i],{name:o,namespaceURI:s,value:l}=a,u=_e(o),c="value"===o?l:Ej(l);if(n.attrName=u,n.attrValue=c,n.keepAttr=!0,n.forceKeepAttr=void 0,ze(S.uponSanitizeAttribute,e,n),c=n.attrValue,ie&&("id"===u||"name"===u)&&(Pe(o,e),c="user-content-"+c),K&&Aj(/((--!?|])>)|<\/(style|title)/i,c)){Pe(o,e);continue}if(n.forceKeepAttr||(Pe(o,e),!n.keepAttr))continue;if(!Y&&Aj(/\/>/i,c)){Pe(o,e);continue}X&&gj([R,N,L],(e=>{c=wj(c,e," ")}));let h=_e(e.nodeName);if(Ge(h,u,c)){if(T&&"object"==typeof p&&"function"==typeof p.getAttributeType&&!s)switch(p.getAttributeType(h,u)){case"TrustedHTML":c=T.createHTML(c);break;case"TrustedScriptURL":c=T.createScriptURL(c)}try{s?e.setAttributeNS(s,o,c):e.setAttribute(o,c),Fe(e)?Oe(e):yj(t.removed)}catch{}}}ze(S.afterSanitizeAttributes,e,null)}),"_sanitizeAttributes"),We=s((function e(t){let r=null,n=Be(t);for(ze(S.beforeSanitizeShadowDOM,t,null);r=n.nextNode();)ze(S.uponSanitizeShadowNode,r,null),Ue(r),Ve(r),r.content instanceof a&&e(r.content);ze(S.afterSanitizeShadowDOM,t,null)}),"_sanitizeShadowDOM");return t.sanitize=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,s=null,u=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!$e(e)){if("function"!=typeof e.toString)throw Sj("toString is not a function");if("string"!=typeof(e=e.toString()))throw Sj("dirty is not a string, aborting")}if(!t.isSupported)return e;if(Q||Ne(r),t.removed=[],"string"==typeof e&&(oe=!1),oe){if(e.nodeName){let t=_e(e.nodeName);if(!F[t]||j[t])throw Sj("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)i=De("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),o.nodeType===nV&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!ee&&!X&&!Z&&-1===e.indexOf("<"))return T&&re?T.createHTML(e):e;if(i=De(e),!i)return ee?null:re?C:""}i&&J&&Oe(i.firstChild);let c=Be(oe?e:i);for(;s=c.nextNode();)Ue(s),Ve(s),s.content instanceof a&&We(s.content);if(oe)return e;if(ee){if(te)for(u=E.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return(z.shadowroot||z.shadowrootmode)&&(u=A.call(n,u,!0)),u}let h=Z?i.outerHTML:i.innerHTML;return Z&&F["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Aj(eV,i.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+h),X&&gj([R,N,L],(e=>{h=wj(h,e," ")})),T&&re?T.createHTML(h):h},t.setConfig=function(){Ne(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Q=!0},t.clearConfig=function(){Ae=null,Q=!1},t.isValidAttribute=function(e,t,r){Ae||Ne({});let n=_e(e),i=_e(t);return Ge(n,i,r)},t.addHook=function(e,t){"function"==typeof t&&vj(S[e],t)},t.removeHook=function(e,t){if(void 0!==t){let r=mj(S[e],t);return-1===r?void 0:xj(S[e],r,1)[0]}return yj(S[e])},t.removeHooks=function(e){S[e]=[]},t.removeAllHooks=function(){S=cV()},t}s(hV,"createDOMPurify");var dV=hV(),fV=/<br\s*\/?>/gi,pV=s((e=>e?kV(e).replace(/\\n/g,"#br#").split("#br#"):[""]),"getRows"),gV=(()=>{let e=!1;return()=>{e||(mV(),e=!0)}})();function mV(){let e="data-temp-href-target";dV.addHook("beforeSanitizeAttributes",(t=>{t instanceof Element&&"A"===t.tagName&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")})),dV.addHook("afterSanitizeAttributes",(t=>{t instanceof Element&&"A"===t.tagName&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener"))}))}s(mV,"setupDompurifyHooks");var yV=s((e=>(gV(),dV.sanitize(e))),"removeScript"),vV=s(((e,t)=>{if(!1!==t.flowchart?.htmlLabels){let r=t.securityLevel;"antiscript"===r||"strict"===r?e=yV(e):"loose"!==r&&(e=(e=(e=kV(e)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),e=wV(e))}return e}),"sanitizeMore"),xV=s(((e,t)=>e&&(e=t.dompurifyConfig?dV.sanitize(vV(e,t),t.dompurifyConfig).toString():dV.sanitize(vV(e,t),{FORBID_TAGS:["style"]}).toString())),"sanitizeText"),bV=s(((e,t)=>"string"==typeof e?xV(e,t):e.flat().map((e=>xV(e,t)))),"sanitizeTextOrArray"),TV=s((e=>fV.test(e)),"hasBreaks"),CV=s((e=>e.split(fV)),"splitBreaks"),wV=s((e=>e.replace(/#br#/g,"<br/>")),"placeholderToBreak"),kV=s((e=>e.replace(fV,"#br#")),"breakToPlaceholder"),EV=s((e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t}),"getUrl"),_V=s((e=>!(!1===e||["false","null","0"].includes(String(e).trim().toLowerCase()))),"evaluate"),AV=s((function(...e){let t=e.filter((e=>!isNaN(e)));return Math.max(...t)}),"getMax"),SV=s((function(...e){let t=e.filter((e=>!isNaN(e)));return Math.min(...t)}),"getMin");s((function(e){let t=e.split(/(,)/),r=[];for(let e=0;e<t.length;e++){let n=t[e];if(","===n&&e>0&&e+1<t.length){let i=t[e-1],a=t[e+1];NV(i,a)&&(n=i+","+a,e++,r.pop())}r.push(LV(n))}return r.join("")}),"parseGenericTypes");var RV=s(((e,t)=>Math.max(0,e.split(t).length-1)),"countOccurrence"),NV=s(((e,t)=>{let r=RV(e,"~"),n=RV(t,"~");return 1===r&&1===n}),"shouldCombineSets"),LV=s((e=>{let t=RV(e,"~"),r=!1;if(t<=1)return e;t%2!=0&&e.startsWith("~")&&(e=e.substring(1),r=!0);let n=[...e],i=n.indexOf("~"),a=n.lastIndexOf("~");for(;-1!==i&&-1!==a&&i!==a;)n[i]="<",n[a]=">",i=n.indexOf("~"),a=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")}),"processSet"),IV=s((()=>void 0!==window.MathMLElement),"isMathMLSupported"),MV=/\$\$(.*)\$\$/g,OV=s((e=>(e.match(MV)?.length??0)>0),"hasKatex");s((async(e,t)=>{e=await PV(e,t);let r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);let n={width:r.clientWidth,height:r.clientHeight};return r.remove(),n}),"calculateMathMLDimensions");var PV=s((async(e,t)=>{if(!OV(e))return e;if(!(IV()||t.legacyMathML||t.forceLegacyMathML))return e.replace(MV,"MathML is unsupported in this environment.");let{default:r}=await import("./katex-SWYD7GD6.mjs.f6ecca9c.js"),n=t.forceLegacyMathML||!IV()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(fV).map((e=>OV(e)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${e}</div>`:`<div>${e}</div>`)).join("").replace(MV,((e,t)=>r.renderToString(t,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,"")))}),"renderKatex"),DV={getRows:pV,sanitizeText:xV,sanitizeTextOrArray:bV,hasBreaks:TV,splitBreaks:CV,lineBreakRegex:fV,removeScript:yV,getUrl:EV,evaluate:_V,getMax:AV,getMin:SV},BV=s((function(e,t){for(let r of t)e.attr(r[0],r[1])}),"d3Attrs"),FV=s((function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n}),"calculateSvgSizeAttrs"),$V=s((function(e,t,r,n){let i=FV(t,r,n);BV(e,i)}),"configureSvgSize"),zV=s((function(e,t,r,n){let i=t.node().getBBox(),a=i.width,o=i.height;CU.info(`SVG bounds: ${a}x${o}`,i);let s=0,l=0;CU.info(`Graph bounds: ${s}x${l}`,e),s=a+2*r,l=o+2*r,CU.info(`Calculated bounds: ${s}x${l}`),$V(t,l,s,n);let u=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;t.attr("viewBox",u)}),"setupGraphViewbox"),UV={};s(((e,t,r)=>{let n="";return e in UV&&UV[e]?n=UV[e](r):CU.warn(`No theme found for ${e}`),` & {\n    font-family: ${r.fontFamily};\n    font-size: ${r.fontSize};\n    fill: ${r.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${r.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${r.errorTextColor};\n    stroke: ${r.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${r.lineColor};\n    stroke: ${r.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${r.lineColor};\n  }\n\n  & svg {\n    font-family: ${r.fontFamily};\n    font-size: ${r.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${n}\n\n  ${t}\n`}),"getStyles");var GV=s(((e,t)=>{void 0!==t&&(UV[e]=t)}),"addStylesForDiagram"),jV={};u(jV,{clear:()=>YV,getAccDescription:()=>QV,getAccTitle:()=>KV,getDiagramTitle:()=>eW,setAccDescription:()=>ZV,setAccTitle:()=>XV,setDiagramTitle:()=>JV});var VV="",WV="",HV="",qV=s((e=>xV(e,JG())),"sanitizeText"),YV=s((()=>{VV="",HV="",WV=""}),"clear"),XV=s((e=>{VV=qV(e).replace(/^\s+/g,"")}),"setAccTitle"),KV=s((()=>VV),"getAccTitle"),ZV=s((e=>{HV=qV(e).replace(/\n\s+/g,"\n")}),"setAccDescription"),QV=s((()=>HV),"getAccDescription"),JV=s((e=>{WV=qV(e)}),"setDiagramTitle"),eW=s((()=>WV),"getDiagramTitle"),tW=CU,rW=wU,nW=JG,iW=s((e=>xV(e,nW())),"sanitizeText"),aW=zV,oW=s((()=>jV),"getCommonDb"),sW={};s(((e,t,r)=>{sW[e]&&tW.warn(`Diagram with id ${e} already registered. Overwriting.`),sW[e]=t,r&&LU(e,r),GV(e,t.styles),t.injectUtils?.(tW,rW,nW,iW,aW,oW(),(()=>{}))}),"registerDiagram"),s((e=>{if(e in sW)return sW[e];throw new lW(e)}),"getDiagram");var lW=class extends Error{static{s(this,"DiagramNotFoundError")}constructor(e){super(`Diagram ${e} not found.`)}};function uW(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cW(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hW(e){let t,r,n;function i(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{let t=i+a>>>1;r(e[t],n)<0?i=t+1:a=t}while(i<a)}return i}function a(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{let t=i+a>>>1;r(e[t],n)<=0?i=t+1:a=t}while(i<a)}return i}function o(e,t,r=0,a=e.length){let o=i(e,t,r,a-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o}return 2!==e.length?(t=uW,r=s(((t,r)=>uW(e(t),r)),"compare2"),n=s(((t,r)=>e(t)-r),"delta")):(t=e===uW||e===cW?e:dW,r=e,n=e),s(i,"left"),s(a,"right"),s(o,"center"),{left:i,center:o,right:a}}function dW(){return 0}function fW(e){return null===e?NaN:+e}s((function(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}),"max"),s((function(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}),"min"),s(uW,"ascending"),s(cW,"descending"),s(hW,"bisector"),s(dW,"zero"),s(fW,"number");var pW=hW(uW),gW=pW.right;pW.left,hW(fW).center;var mW=gW,yW=class extends Map{static{s(this,"InternMap")}constructor(e,t=TW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,r]of e)this.set(t,r)}get(e){return super.get(vW(this,e))}has(e){return super.has(vW(this,e))}set(e,t){return super.set(xW(this,e),t)}delete(e){return super.delete(bW(this,e))}};function vW({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function xW({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function bW({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function TW(e){return null!==e&&"object"==typeof e?e.valueOf():e}s(vW,"intern_get"),s(xW,"intern_set"),s(bW,"intern_delete"),s(TW,"keyof");var CW=Math.sqrt(50),wW=Math.sqrt(10),kW=Math.sqrt(2);function EW(e,t,r){let n,i,a,o=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(o)),l=o/Math.pow(10,s),u=l>=CW?10:l>=wW?5:l>=kW?2:1;return s<0?(a=Math.pow(10,-s)/u,n=Math.round(e*a),i=Math.round(t*a),n/a<e&&++n,i/a>t&&--i,a=-a):(a=Math.pow(10,s)*u,n=Math.round(e/a),i=Math.round(t/a),n*a<e&&++n,i*a>t&&--i),i<n&&.5<=r&&r<2?EW(e,t,2*r):[n,i,a]}function _W(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];let n=t<e,[i,a,o]=n?EW(t,e,r):EW(e,t,r);if(!(a>=i))return[];let s=a-i+1,l=new Array(s);if(n)if(o<0)for(let e=0;e<s;++e)l[e]=(a-e)/-o;else for(let e=0;e<s;++e)l[e]=(a-e)*o;else if(o<0)for(let e=0;e<s;++e)l[e]=(i+e)/-o;else for(let e=0;e<s;++e)l[e]=(i+e)*o;return l}function AW(e,t,r){return EW(e=+e,t=+t,r=+r)[2]}function SW(e,t,r){r=+r;let n=(t=+t)<(e=+e),i=n?AW(t,e,r):AW(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function RW(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(i);++n<i;)a[n]=e+n*r;return a}function NW(e){return e}s(EW,"tickSpec"),s(_W,"ticks"),s(AW,"tickIncrement"),s(SW,"tickStep"),s(RW,"range"),s(NW,"default");var LW=1e-6;function IW(e){return"translate("+e+",0)"}function MW(e){return"translate(0,"+e+")"}function OW(e){return t=>+e(t)}function PW(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function DW(){return!this.__axis}function BW(e,t){var r=[],n=null,i=null,a=6,o=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,h=4===e||2===e?"x":"y",d=1===e||3===e?IW:MW;function f(s){var f=n??(t.ticks?t.ticks.apply(t,r):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,r):NW),g=Math.max(a,0)+l,m=t.range(),y=+m[0]+u,v=+m[m.length-1]+u,x=(t.bandwidth?PW:OW)(t.copy(),u),b=s.selection?s.selection():s,T=b.selectAll(".domain").data([null]),C=b.selectAll(".tick").data(f,t).order(),w=C.exit(),k=C.enter().append("g").attr("class","tick"),E=C.select("line"),_=C.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(k),E=E.merge(k.append("line").attr("stroke","currentColor").attr(h+"2",c*a)),_=_.merge(k.append("text").attr("fill","currentColor").attr(h,c*g).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),s!==b&&(T=T.transition(s),C=C.transition(s),E=E.transition(s),_=_.transition(s),w=w.transition(s).attr("opacity",LW).attr("transform",(function(e){return isFinite(e=x(e))?d(e+u):this.getAttribute("transform")})),k.attr("opacity",LW).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:x(e))+u)}))),w.remove(),T.attr("d",4===e||2===e?o?"M"+c*o+","+y+"H"+u+"V"+v+"H"+c*o:"M"+u+","+y+"V"+v:o?"M"+y+","+c*o+"V"+u+"H"+v+"V"+c*o:"M"+y+","+u+"H"+v),C.attr("opacity",1).attr("transform",(function(e){return d(x(e)+u)})),E.attr(h+"2",c*a),_.attr(h,c*g).text(p),b.filter(DW).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),b.each((function(){this.__axis=x}))}return s(f,"axis"),f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(e){return arguments.length?(r=null==e?[]:Array.from(e),f):r.slice()},f.tickValues=function(e){return arguments.length?(n=null==e?null:Array.from(e),f):n&&n.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(a=o=+e,f):a},f.tickSizeInner=function(e){return arguments.length?(a=+e,f):a},f.tickSizeOuter=function(e){return arguments.length?(o=+e,f):o},f.tickPadding=function(e){return arguments.length?(l=+e,f):l},f.offset=function(e){return arguments.length?(u=+e,f):u},f}function FW(){}function $W(e){return null==e?FW:function(){return this.querySelector(e)}}function zW(e){"function"!=typeof e&&(e=$W(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o,s=t[i],l=s.length,u=n[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new Oq(n,this._parents)}function UW(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function GW(){return[]}function jW(e){return null==e?GW:function(){return this.querySelectorAll(e)}}function VW(e){return function(){return UW(e.apply(this,arguments))}}function WW(e){e="function"==typeof e?VW(e):jW(e);for(var t=this._groups,r=t.length,n=[],i=[],a=0;a<r;++a)for(var o,s=t[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(n.push(e.call(o,o.__data__,u,s)),i.push(o));return new Oq(n,i)}function HW(e){return function(){return this.matches(e)}}function qW(e){return function(t){return t.matches(e)}}s(IW,"translateX"),s(MW,"translateY"),s(OW,"number"),s(PW,"center"),s(DW,"entering"),s(BW,"axis"),s((function(e){return BW(1,e)}),"axisTop"),s((function(e){return BW(3,e)}),"axisBottom"),s(FW,"none"),s($W,"default"),s(zW,"default"),s(UW,"array"),s(GW,"empty"),s(jW,"default"),s(VW,"arrayAll"),s(WW,"default"),s(HW,"default"),s(qW,"childMatcher");var YW=Array.prototype.find;function XW(e){return function(){return YW.call(this.children,e)}}function KW(){return this.firstElementChild}function ZW(e){return this.select(null==e?KW:XW("function"==typeof e?e:qW(e)))}s(XW,"childFind"),s(KW,"childFirst"),s(ZW,"default");var QW=Array.prototype.filter;function JW(){return Array.from(this.children)}function eH(e){return function(){return QW.call(this.children,e)}}function tH(e){return this.selectAll(null==e?JW:eH("function"==typeof e?e:qW(e)))}function rH(e){"function"!=typeof e&&(e=HW(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new Oq(n,this._parents)}function nH(e){return new Array(e.length)}function iH(){return new Oq(this._enter||this._groups.map(nH),this._parents)}function aH(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function oH(e){return function(){return e}}function sH(e,t,r,n,i,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],n[s]=o):r[s]=new aH(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function lH(e,t,r,n,i,a,o){var s,l,u,c=new Map,h=t.length,d=a.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=u=o.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<d;++s)u=o.call(e,a[s],s,a)+"",(l=c.get(u))?(n[s]=l,l.__data__=a[s],c.delete(u)):r[s]=new aH(e,a[s]);for(s=0;s<h;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function uH(e){return e.__data__}function cH(e,t){if(!arguments.length)return Array.from(this,uH);var r=t?lH:sH,n=this._parents,i=this._groups;"function"!=typeof e&&(e=oH(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=n[u],h=i[u],d=h.length,f=hH(e.call(c,c&&c.__data__,u,n)),p=f.length,g=s[u]=new Array(p),m=o[u]=new Array(p);r(c,h,g,m,l[u]=new Array(d),f,t);for(var y,v,x=0,b=0;x<p;++x)if(y=g[x]){for(x>=b&&(b=x+1);!(v=m[b])&&++b<p;);y._next=v||null}}return(o=new Oq(o,n))._enter=s,o._exit=l,o}function hH(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function dH(){return new Oq(this._exit||this._groups.map(nH),this._parents)}function fH(e,t,r){var n=this.enter(),i=this,a=this.exit();return"function"==typeof e?(n=e(n))&&(n=n.selection()):n=n.append(e+""),null!=t&&((i=t(i))&&(i=i.selection())),null==r?a.remove():r(a),n&&i?n.merge(i).order():i}function pH(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,a=n.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u,c=r[l],h=n[l],d=c.length,f=s[l]=new Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<i;++l)s[l]=r[l];return new Oq(s,this._parents)}function gH(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n,i=e[t],a=i.length-1,o=i[a];--a>=0;)(n=i[a])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this}function mH(e){function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=yH),s(t,"compareNode");for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o,l=r[a],u=l.length,c=i[a]=new Array(u),h=0;h<u;++h)(o=l[h])&&(c[h]=o);c.sort(t)}return new Oq(i,this._parents).order()}function yH(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vH(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function xH(){return Array.from(this)}function bH(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}function TH(){let e=0;for(let t of this)++e;return e}function CH(){return!this.node()}function wH(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i,a=t[r],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this}s(JW,"children"),s(eH,"childrenFilter"),s(tH,"default"),s(rH,"default"),s(nH,"default"),s(iH,"default"),s(aH,"EnterNode"),aH.prototype={constructor:aH,appendChild:s((function(e){return this._parent.insertBefore(e,this._next)}),"appendChild"),insertBefore:s((function(e,t){return this._parent.insertBefore(e,t)}),"insertBefore"),querySelector:s((function(e){return this._parent.querySelector(e)}),"querySelector"),querySelectorAll:s((function(e){return this._parent.querySelectorAll(e)}),"querySelectorAll")},s(oH,"default"),s(sH,"bindIndex"),s(lH,"bindKey"),s(uH,"datum"),s(cH,"default"),s(hH,"arraylike"),s(dH,"default"),s(fH,"default"),s(pH,"default"),s(gH,"default"),s(mH,"default"),s(yH,"ascending"),s(vH,"default"),s(xH,"default"),s(bH,"default"),s(TH,"default"),s(CH,"default"),s(wH,"default");var kH="http://www.w3.org/1999/xhtml",EH={svg:"http://www.w3.org/2000/svg",xhtml:kH,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _H(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),EH.hasOwnProperty(t)?{space:EH[t],local:e}:e}function AH(e){return function(){this.removeAttribute(e)}}function SH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function RH(e,t){return function(){this.setAttribute(e,t)}}function NH(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function LH(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function IH(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function MH(e,t){var r=_H(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((null==t?r.local?SH:AH:"function"==typeof t?r.local?IH:LH:r.local?NH:RH)(r,t))}function OH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function PH(e){return function(){this.style.removeProperty(e)}}function DH(e,t,r){return function(){this.style.setProperty(e,t,r)}}function BH(e,t,r){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function FH(e,t,r){return arguments.length>1?this.each((null==t?PH:"function"==typeof t?BH:DH)(e,t,r??"")):$H(this.node(),e)}function $H(e,t){return e.style.getPropertyValue(t)||OH(e).getComputedStyle(e,null).getPropertyValue(t)}function zH(e){return function(){delete this[e]}}function UH(e,t){return function(){this[e]=t}}function GH(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function jH(e,t){return arguments.length>1?this.each((null==t?zH:"function"==typeof t?GH:UH)(e,t)):this.node()[e]}function VH(e){return e.trim().split(/^|\s+/)}function WH(e){return e.classList||new HH(e)}function HH(e){this._node=e,this._names=VH(e.getAttribute("class")||"")}function qH(e,t){for(var r=WH(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function YH(e,t){for(var r=WH(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function XH(e){return function(){qH(this,e)}}function KH(e){return function(){YH(this,e)}}function ZH(e,t){return function(){(t.apply(this,arguments)?qH:YH)(this,e)}}function QH(e,t){var r=VH(e+"");if(arguments.length<2){for(var n=WH(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof t?ZH:t?XH:KH)(r,t))}function JH(){this.textContent=""}function eq(e){return function(){this.textContent=e}}function tq(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rq(e){return arguments.length?this.each(null==e?JH:("function"==typeof e?tq:eq)(e)):this.node().textContent}function nq(){this.innerHTML=""}function iq(e){return function(){this.innerHTML=e}}function aq(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function oq(e){return arguments.length?this.each(null==e?nq:("function"==typeof e?aq:iq)(e)):this.node().innerHTML}function sq(){this.nextSibling&&this.parentNode.appendChild(this)}function lq(){return this.each(sq)}function uq(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cq(){return this.each(uq)}function hq(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===kH&&t.documentElement.namespaceURI===kH?t.createElement(e):t.createElementNS(r,e)}}function dq(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fq(e){var t=_H(e);return(t.local?dq:hq)(t)}function pq(e){var t="function"==typeof e?e:fq(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function gq(){return null}function mq(e,t){var r="function"==typeof e?e:fq(e),n=null==t?gq:"function"==typeof t?t:$W(t);return this.select((function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)}))}function yq(){var e=this.parentNode;e&&e.removeChild(this)}function vq(){return this.each(yq)}function xq(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bq(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tq(e){return this.select(e?bq:xq)}function Cq(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wq(e){return function(t){e.call(this,t,this.__data__)}}function kq(e){return e.trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}}))}function Eq(e){return function(){var t=this.__on;if(t){for(var r,n=0,i=-1,a=t.length;n<a;++n)r=t[n],e.type&&r.type!==e.type||r.name!==e.name?t[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?t.length=i:delete this.__on}}}function _q(e,t,r){return function(){var n,i=this.__on,a=wq(t);if(i)for(var o=0,s=i.length;o<s;++o)if((n=i[o]).type===e.type&&n.name===e.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),void(n.value=t);this.addEventListener(e.type,a,r),n={type:e.type,name:e.name,value:t,listener:a,options:r},i?i.push(n):this.__on=[n]}}function Aq(e,t,r){var n,i,a=kq(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?_q:Eq,n=0;n<o;++n)this.each(s(a[n],t,r));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(n=0,l=s[u];n<o;++n)if((i=a[n]).type===l.type&&i.name===l.name)return l.value}function Sq(e,t,r){var n=OH(e),i=n.CustomEvent;"function"==typeof i?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Rq(e,t){return function(){return Sq(this,e,t)}}function Nq(e,t){return function(){return Sq(this,e,t.apply(this,arguments))}}function Lq(e,t){return this.each(("function"==typeof t?Nq:Rq)(e,t))}function*Iq(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n,i=e[t],a=0,o=i.length;a<o;++a)(n=i[a])&&(yield n)}s(_H,"default"),s(AH,"attrRemove"),s(SH,"attrRemoveNS"),s(RH,"attrConstant"),s(NH,"attrConstantNS"),s(LH,"attrFunction"),s(IH,"attrFunctionNS"),s(MH,"default"),s(OH,"default"),s(PH,"styleRemove"),s(DH,"styleConstant"),s(BH,"styleFunction"),s(FH,"default"),s($H,"styleValue"),s(zH,"propertyRemove"),s(UH,"propertyConstant"),s(GH,"propertyFunction"),s(jH,"default"),s(VH,"classArray"),s(WH,"classList"),s(HH,"ClassList"),HH.prototype={add:s((function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))}),"add"),remove:s((function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))}),"remove"),contains:s((function(e){return this._names.indexOf(e)>=0}),"contains")},s(qH,"classedAdd"),s(YH,"classedRemove"),s(XH,"classedTrue"),s(KH,"classedFalse"),s(ZH,"classedFunction"),s(QH,"default"),s(JH,"textRemove"),s(eq,"textConstant"),s(tq,"textFunction"),s(rq,"default"),s(nq,"htmlRemove"),s(iq,"htmlConstant"),s(aq,"htmlFunction"),s(oq,"default"),s(sq,"raise"),s(lq,"default"),s(uq,"lower"),s(cq,"default"),s(hq,"creatorInherit"),s(dq,"creatorFixed"),s(fq,"default"),s(pq,"default"),s(gq,"constantNull"),s(mq,"default"),s(yq,"remove"),s(vq,"default"),s(xq,"selection_cloneShallow"),s(bq,"selection_cloneDeep"),s(Tq,"default"),s(Cq,"default"),s(wq,"contextListener"),s(kq,"parseTypenames"),s(Eq,"onRemove"),s(_q,"onAdd"),s(Aq,"default"),s(Sq,"dispatchEvent"),s(Rq,"dispatchConstant"),s(Nq,"dispatchFunction"),s(Lq,"default"),s(Iq,"default");var Mq=[null];function Oq(e,t){this._groups=e,this._parents=t}function Pq(){return new Oq([[document.documentElement]],Mq)}function Dq(){return this}s(Oq,"Selection"),s(Pq,"selection"),s(Dq,"selection_selection"),Oq.prototype=Pq.prototype={constructor:Oq,select:zW,selectAll:WW,selectChild:ZW,selectChildren:tH,filter:rH,data:cH,enter:iH,exit:dH,join:fH,merge:pH,selection:Dq,order:gH,sort:mH,call:vH,nodes:xH,node:bH,size:TH,empty:CH,each:wH,attr:MH,style:FH,property:jH,classed:QH,text:rq,html:oq,raise:lq,lower:cq,append:pq,insert:mq,remove:vq,clone:Tq,datum:Cq,on:Aq,dispatch:Lq,[Symbol.iterator]:Iq};var Bq=Pq;function Fq(e){return"string"==typeof e?new Oq([[document.querySelector(e)]],[document.documentElement]):new Oq([[e]],Mq)}function $q(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function zq(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Uq(){}s(Fq,"default"),s($q,"default"),s(zq,"extend"),s(Uq,"Color");var Gq=.7,jq=1/Gq,Vq="\\s*([+-]?\\d+)\\s*",Wq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qq=/^#([0-9a-f]{3,8})$/,Yq=new RegExp(`^rgb\\(${Vq},${Vq},${Vq}\\)$`),Xq=new RegExp(`^rgb\\(${Hq},${Hq},${Hq}\\)$`),Kq=new RegExp(`^rgba\\(${Vq},${Vq},${Vq},${Wq}\\)$`),Zq=new RegExp(`^rgba\\(${Hq},${Hq},${Hq},${Wq}\\)$`),Qq=new RegExp(`^hsl\\(${Wq},${Hq},${Hq}\\)$`),Jq=new RegExp(`^hsla\\(${Wq},${Hq},${Hq},${Wq}\\)$`),eY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tY(){return this.rgb().formatHex()}function rY(){return this.rgb().formatHex8()}function nY(){return vY(this).formatHsl()}function iY(){return this.rgb().formatRgb()}function aY(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=qq.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?oY(t):3===r?new cY(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?sY(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?sY(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Yq.exec(e))?new cY(t[1],t[2],t[3],1):(t=Xq.exec(e))?new cY(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kq.exec(e))?sY(t[1],t[2],t[3],t[4]):(t=Zq.exec(e))?sY(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qq.exec(e))?yY(t[1],t[2]/100,t[3]/100,1):(t=Jq.exec(e))?yY(t[1],t[2]/100,t[3]/100,t[4]):eY.hasOwnProperty(e)?oY(eY[e]):"transparent"===e?new cY(NaN,NaN,NaN,0):null}function oY(e){return new cY(e>>16&255,e>>8&255,255&e,1)}function sY(e,t,r,n){return n<=0&&(e=t=r=NaN),new cY(e,t,r,n)}function lY(e){return e instanceof Uq||(e=aY(e)),e?new cY((e=e.rgb()).r,e.g,e.b,e.opacity):new cY}function uY(e,t,r,n){return 1===arguments.length?lY(e):new cY(e,t,r,n??1)}function cY(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function hY(){return`#${mY(this.r)}${mY(this.g)}${mY(this.b)}`}function dY(){return`#${mY(this.r)}${mY(this.g)}${mY(this.b)}${mY(255*(isNaN(this.opacity)?1:this.opacity))}`}function fY(){let e=pY(this.opacity);return`${1===e?"rgb(":"rgba("}${gY(this.r)}, ${gY(this.g)}, ${gY(this.b)}${1===e?")":`, ${e})`}`}function pY(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gY(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mY(e){return((e=gY(e))<16?"0":"")+e.toString(16)}function yY(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new bY(e,t,r,n)}function vY(e){if(e instanceof bY)return new bY(e.h,e.s,e.l,e.opacity);if(e instanceof Uq||(e=aY(e)),!e)return new bY;if(e instanceof bY)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new bY(o,s,l,e.opacity)}function xY(e,t,r,n){return 1===arguments.length?vY(e):new bY(e,t,r,n??1)}function bY(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function TY(e){return(e=(e||0)%360)<0?e+360:e}function CY(e){return Math.max(0,Math.min(1,e||0))}function wY(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}$q(Uq,aY,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tY,formatHex:tY,formatHex8:rY,formatHsl:nY,formatRgb:iY,toString:iY}),s(tY,"color_formatHex"),s(rY,"color_formatHex8"),s(nY,"color_formatHsl"),s(iY,"color_formatRgb"),s(aY,"color"),s(oY,"rgbn"),s(sY,"rgba"),s(lY,"rgbConvert"),s(uY,"rgb"),s(cY,"Rgb"),$q(cY,uY,zq(Uq,{brighter(e){return e=null==e?jq:Math.pow(jq,e),new cY(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Gq:Math.pow(Gq,e),new cY(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cY(gY(this.r),gY(this.g),gY(this.b),pY(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hY,formatHex:hY,formatHex8:dY,formatRgb:fY,toString:fY})),s(hY,"rgb_formatHex"),s(dY,"rgb_formatHex8"),s(fY,"rgb_formatRgb"),s(pY,"clampa"),s(gY,"clampi"),s(mY,"hex"),s(yY,"hsla"),s(vY,"hslConvert"),s(xY,"hsl"),s(bY,"Hsl"),$q(bY,xY,zq(Uq,{brighter(e){return e=null==e?jq:Math.pow(jq,e),new bY(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Gq:Math.pow(Gq,e),new bY(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new cY(wY(e>=240?e-240:e+120,i,n),wY(e,i,n),wY(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new bY(TY(this.h),CY(this.s),CY(this.l),pY(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=pY(this.opacity);return`${1===e?"hsl(":"hsla("}${TY(this.h)}, ${100*CY(this.s)}%, ${100*CY(this.l)}%${1===e?")":`, ${e})`}`}})),s(TY,"clamph"),s(CY,"clampt"),s(wY,"hsl2rgb");var kY=Math.PI/180,EY=180/Math.PI,_Y=.96422,AY=.82521,SY=4/29,RY=6/29,NY=3*RY*RY,LY=RY*RY*RY;function IY(e){if(e instanceof OY)return new OY(e.l,e.a,e.b,e.opacity);if(e instanceof UY)return GY(e);e instanceof cY||(e=lY(e));var t,r,n=FY(e.r),i=FY(e.g),a=FY(e.b),o=PY((.2225045*n+.7168786*i+.0606169*a)/1);return n===i&&i===a?t=r=o:(t=PY((.4360747*n+.3850649*i+.1430804*a)/_Y),r=PY((.0139322*n+.0971045*i+.7141733*a)/AY)),new OY(116*o-16,500*(t-o),200*(o-r),e.opacity)}function MY(e,t,r,n){return 1===arguments.length?IY(e):new OY(e,t,r,n??1)}function OY(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}function PY(e){return e>LY?Math.pow(e,1/3):e/NY+SY}function DY(e){return e>RY?e*e*e:NY*(e-SY)}function BY(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function FY(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $Y(e){if(e instanceof UY)return new UY(e.h,e.c,e.l,e.opacity);if(e instanceof OY||(e=IY(e)),0===e.a&&0===e.b)return new UY(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*EY;return new UY(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function zY(e,t,r,n){return 1===arguments.length?$Y(e):new UY(e,t,r,n??1)}function UY(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function GY(e){if(isNaN(e.h))return new OY(e.l,0,0,e.opacity);var t=e.h*kY;return new OY(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}s(IY,"labConvert"),s(MY,"lab"),s(OY,"Lab"),$q(OY,MY,zq(Uq,{brighter(e){return new OY(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new OY(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return new cY(BY(3.1338561*(t=_Y*DY(t))-1.6168667*(e=1*DY(e))-.4906146*(r=AY*DY(r))),BY(-.9787684*t+1.9161415*e+.033454*r),BY(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),s(PY,"xyz2lab"),s(DY,"lab2xyz"),s(BY,"lrgb2rgb"),s(FY,"rgb2lrgb"),s($Y,"hclConvert"),s(zY,"hcl"),s(UY,"Hcl"),s(GY,"hcl2lab"),$q(UY,zY,zq(Uq,{brighter(e){return new UY(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new UY(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return GY(this).rgb()}}));var jY=s((e=>()=>e),"default");function VY(e,t){return function(r){return e+r*t}}function WY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function HY(e){return 1==(e=+e)?qY:function(t,r){return r-t?WY(t,r,e):jY(isNaN(t)?r:t)}}function qY(e,t){var r=t-e;return r?VY(e,r):jY(isNaN(e)?t:e)}function YY(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}s(VY,"linear"),s(WY,"exponential"),s((function(e,t){var r=t-e;return r?VY(e,r>180||r<-180?r-360*Math.round(r/360):r):jY(isNaN(e)?t:e)}),"hue"),s(HY,"gamma"),s(qY,"nogamma"),s((function(e){return function(t,r){var n=e((t=zY(t)).h,(r=zY(r)).h),i=qY(t.c,r.c),a=qY(t.l,r.l),o=qY(t.opacity,r.opacity);return function(e){return t.h=n(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}),"hcl"),s(YY,"basis"),s((function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],o=n>0?e[n-1]:2*i-a,s=n<t-1?e[n+2]:2*a-i;return YY((r-n/t)*t,o,i,a,s)}}),"default"),s((function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],a=e[n%t],o=e[(n+1)%t],s=e[(n+2)%t];return YY((r-n/t)*t,i,a,o,s)}}),"default");var XY=s((function e(t){var r=HY(t);function n(e,t){var n=r((e=uY(e)).r,(t=uY(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=qY(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return s(n,"rgb"),n.gamma=e,n}),"rgbGamma")(1);function KY(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function ZY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QY(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),o=new Array(n);for(r=0;r<i;++r)a[r]=sX(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<i;++r)o[r]=a[r](e);return o}}function JY(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function eX(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function tX(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=sX(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}s((function(e){return function(t){var r,n,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(r=0;r<i;++r)n=uY(t[r]),a[r]=n.r||0,o[r]=n.g||0,s[r]=n.b||0;return a=e(a),o=e(o),s=e(s),n.opacity=1,function(e){return n.r=a(e),n.g=o(e),n.b=s(e),n+""}}}),"rgbSpline"),s(KY,"default"),s(ZY,"isNumberArray"),s(QY,"genericArray"),s(JY,"default"),s(eX,"default"),s(tX,"default");var rX=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nX=new RegExp(rX.source,"g");function iX(e){return function(){return e}}function aX(e){return function(t){return e(t)+""}}function oX(e,t){var r,n,i,a=rX.lastIndex=nX.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(r=rX.exec(e))&&(n=nX.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:eX(r,n)})),a=nX.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?aX(l[0].x):iX(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)s[(r=l[n]).i]=r.x(e);return s.join("")})}function sX(e,t){var r,n=typeof t;return null==t||"boolean"===n?jY(t):("number"===n?eX:"string"===n?(r=aY(t))?(t=r,XY):oX:t instanceof aY?XY:t instanceof Date?JY:ZY(t)?KY:Array.isArray(t)?QY:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?tX:eX)(e,t)}function lX(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}s(iX,"zero"),s(aX,"one"),s(oX,"default"),s(sX,"default"),s(lX,"default");var uX,cX=180/Math.PI,hX={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dX(e,t,r,n,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*cX,skewX:Math.atan(l)*cX,scaleX:o,scaleY:s}}function fX(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hX:dX(t.a,t.b,t.c,t.d,t.e,t.f)}function pX(e){return null==e?hX:(uX||(uX=document.createElementNS("http://www.w3.org/2000/svg","g")),uX.setAttribute("transform",e),(e=uX.transform.baseVal.consolidate())?dX((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):hX)}function gX(e,t,r,n){function i(e){return e.length?e.pop()+" ":""}function a(e,n,i,a,o,s){if(e!==i||n!==a){var l=o.push("translate(",null,t,null,r);s.push({i:l-4,x:eX(e,i)},{i:l-2,x:eX(n,a)})}else(i||a)&&o.push("translate("+i+t+a+r)}function o(e,t,r,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:r.push(i(r)+"rotate(",null,n)-2,x:eX(e,t)})):t&&r.push(i(r)+"rotate("+t+n)}function l(e,t,r,a){e!==t?a.push({i:r.push(i(r)+"skewX(",null,n)-2,x:eX(e,t)}):t&&r.push(i(r)+"skewX("+t+n)}function u(e,t,r,n,a,o){if(e!==r||t!==n){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:eX(e,r)},{i:s-2,x:eX(t,n)})}else(1!==r||1!==n)&&a.push(i(a)+"scale("+r+","+n+")")}return s(i,"pop"),s(a,"translate"),s(o,"rotate"),s(l,"skewX"),s(u,"scale"),function(t,r){var n=[],i=[];return t=e(t),r=e(r),a(t.translateX,t.translateY,r.translateX,r.translateY,n,i),o(t.rotate,r.rotate,n,i),l(t.skewX,r.skewX,n,i),u(t.scaleX,t.scaleY,r.scaleX,r.scaleY,n,i),t=r=null,function(e){for(var t,r=-1,a=i.length;++r<a;)n[(t=i[r]).i]=t.x(e);return n.join("")}}}s(dX,"default"),s(fX,"parseCss"),s(pX,"parseSvg"),s(gX,"interpolateTransform");var mX=gX(fX,"px, ","px)","deg)"),yX=gX(pX,", ",")",")");function vX(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}s(vX,"initRange");var xX=Symbol("implicit");function bX(){var e=new yW,t=[],r=[],n=xX;function i(i){let a=e.get(i);if(void 0===a){if(n!==xX)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return s(i,"scale"),i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new yW;for(let n of r)e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return bX(t,r).unknown(n)},vX.apply(i,arguments),i}function TX(e){return function(){return e}}function CX(e){return+e}s(bX,"ordinal"),s(TX,"constants"),s(CX,"number");var wX=[0,1];function kX(e){return e}function EX(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:TX(isNaN(t)?NaN:.5)}function _X(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function AX(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=EX(i,n),a=r(o,a)):(n=EX(n,i),a=r(a,o)),function(e){return a(n(e))}}function SX(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=EX(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var r=mW(e,t,1,n)-1;return a[r](i[r](t))}}function RX(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function NX(){var e,t,r,n,i,a,o=wX,l=wX,u=sX,c=kX;function h(){var e=Math.min(o.length,l.length);return c!==kX&&(c=_X(o[0],o[e-1])),n=e>2?SX:AX,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(o.map(e),l,u)))(e(c(t)))}return s(h,"rescale"),s(d,"scale"),d.invert=function(r){return c(t((a||(a=n(l,o.map(e),eX)))(r)))},d.domain=function(e){return arguments.length?(o=Array.from(e,CX),h()):o.slice()},d.range=function(e){return arguments.length?(l=Array.from(e),h()):l.slice()},d.rangeRound=function(e){return l=Array.from(e),u=lX,h()},d.clamp=function(e){return arguments.length?(c=!!e||kX,h()):c!==kX},d.interpolate=function(e){return arguments.length?(u=e,h()):u},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,h()}}function LX(){return NX()(kX,kX)}function IX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function MX(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function OX(e){return(e=MX(Math.abs(e)))?e[1]:NaN}function PX(e,t){return function(r,n){for(var i=r.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function DX(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}s(kX,"identity"),s(EX,"normalize"),s(_X,"clamper"),s(AX,"bimap"),s(SX,"polymap"),s(RX,"copy"),s(NX,"transformer"),s(LX,"continuous"),s(IX,"default"),s(MX,"formatDecimalParts"),s(OX,"default"),s(PX,"default"),s(DX,"default");var BX,FX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $X(e){if(!(t=FX.exec(e)))throw new Error("invalid format: "+e);var t;return new zX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function zX(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function UX(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function GX(e,t){var r=MX(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(BX=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+MX(e,Math.max(0,t+a-1))[0]}function jX(e,t){var r=MX(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}s($X,"formatSpecifier"),$X.prototype=zX.prototype,s(zX,"FormatSpecifier"),zX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type},s(UX,"default"),s(GX,"default"),s(jX,"default");var VX={"%":s(((e,t)=>(100*e).toFixed(t)),"%"),b:s((e=>Math.round(e).toString(2)),"b"),c:s((e=>e+""),"c"),d:IX,e:s(((e,t)=>e.toExponential(t)),"e"),f:s(((e,t)=>e.toFixed(t)),"f"),g:s(((e,t)=>e.toPrecision(t)),"g"),o:s((e=>Math.round(e).toString(8)),"o"),p:s(((e,t)=>jX(100*e,t)),"p"),r:jX,s:GX,X:s((e=>Math.round(e).toString(16).toUpperCase()),"X"),x:s((e=>Math.round(e).toString(16)),"x")};function WX(e){return e}s(WX,"default");var HX,qX,YX,XX=Array.prototype.map,KX=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ZX(e){var t=void 0===e.grouping||void 0===e.thousands?WX:PX(XX.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?WX:DX(XX.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=$X(e)).fill,h=e.align,d=e.sign,f=e.symbol,p=e.zero,g=e.width,m=e.comma,y=e.precision,v=e.trim,x=e.type;"n"===x?(m=!0,x="g"):VX[x]||(void 0===y&&(y=12),v=!0,x="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");var b="$"===f?r:"#"===f&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",T="$"===f?n:/[%p]/.test(x)?o:"",C=VX[x],w=/[defgprs%]/.test(x);function k(e){var r,n,o,s=b,f=T;if("c"===x)f=C(e)+f,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:C(Math.abs(e),y),v&&(e=UX(e)),k&&0==+e&&"+"!==d&&(k=!1),s=(k?"("===d?d:l:"-"===d||"("===d?"":d)+s,f=("s"===x?KX[8+BX/3]:"")+f+(k&&"("===d?")":""),w)for(r=-1,n=e.length;++r<n;)if(48>(o=e.charCodeAt(r))||o>57){f=(46===o?i+e.slice(r+1):e.slice(r))+f,e=e.slice(0,r);break}}m&&!p&&(e=t(e,1/0));var E=s.length+e.length+f.length,_=E<g?new Array(g-E+1).join(c):"";switch(m&&p&&(e=t(_+e,_.length?g-f.length:1/0),_=""),h){case"<":e=s+e+f+_;break;case"=":e=s+_+e+f;break;case"^":e=_.slice(0,E=_.length>>1)+s+e+f+_.slice(E);break;default:e=_+s+e+f}return a(e)}return y=void 0===y?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),s(k,"format"),k.toString=function(){return e+""},k}function h(e,t){var r=c(((e=$X(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(OX(t)/3))),i=Math.pow(10,-n),a=KX[8+n/3];return function(e){return r(i*e)+a}}return s(c,"newFormat"),s(h,"formatPrefix"),{format:c,formatPrefix:h}}function QX(e){return HX=ZX(e),qX=HX.format,YX=HX.formatPrefix,HX}function JX(e){return Math.max(0,-OX(Math.abs(e)))}function eK(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(OX(t)/3)))-OX(Math.abs(e)))}function tK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,OX(t)-OX(e))+1}function rK(e,t,r,n){var i,a=SW(e,t,r);switch((n=$X(n??",f")).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null==n.precision&&!isNaN(i=eK(a,o))&&(n.precision=i),YX(n,o);case"":case"e":case"g":case"p":case"r":null==n.precision&&!isNaN(i=tK(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-("e"===n.type));break;case"f":case"%":null==n.precision&&!isNaN(i=JX(a))&&(n.precision=i-2*("%"===n.type))}return qX(n)}function nK(e){var t=e.domain;return e.ticks=function(e){var r=t();return _W(r[0],r[r.length-1],e??10)},e.tickFormat=function(e,r){var n=t();return rK(n[0],n[n.length-1],e??10,r)},e.nice=function(r){null==r&&(r=10);var n,i,a=t(),o=0,s=a.length-1,l=a[o],u=a[s],c=10;for(u<l&&(i=l,l=u,u=i,i=o,o=s,s=i);c-- >0;){if((i=AW(l,u,r))===n)return a[o]=l,a[s]=u,t(a);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}n=i}return e},e}s(ZX,"default"),QX({thousands:",",grouping:[3],currency:["$",""]}),s(QX,"defaultLocale"),s(JX,"default"),s(eK,"default"),s(tK,"default"),s(rK,"tickFormat"),s(nK,"linearish"),s((function e(){var t=LX();return t.copy=function(){return RX(t,e())},vX.apply(t,arguments),nK(t)}),"linear");var iK=new Date,aK=new Date;function oK(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s(i,"interval"),i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{let t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,a)=>{let o,s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return s;do{s.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return s},i.filter=r=>oK((t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),((e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););})),r&&(i.count=(t,n)=>(iK.setTime(+t),aK.setTime(+n),e(iK),e(aK),Math.floor(r(iK,aK))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?t=>n(t)%e==0:t=>i.count(0,t)%e==0):i:null)),i}s(oK,"timeInterval");var sK=oK((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));sK.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?oK((t=>{t.setTime(Math.floor(t/e)*e)}),((t,r)=>{t.setTime(+t+r*e)}),((t,r)=>(r-t)/e)):sK:null),sK.range;var lK=oK((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+1e3*t)}),((e,t)=>(t-e)/1e3),(e=>e.getUTCSeconds()));lK.range;var uK=oK((e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),((e,t)=>{e.setTime(+e+6e4*t)}),((e,t)=>(t-e)/6e4),(e=>e.getMinutes()));uK.range;var cK=oK((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+6e4*t)}),((e,t)=>(t-e)/6e4),(e=>e.getUTCMinutes()));cK.range;var hK=oK((e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),((e,t)=>{e.setTime(+e+36e5*t)}),((e,t)=>(t-e)/36e5),(e=>e.getHours()));hK.range;var dK=oK((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+36e5*t)}),((e,t)=>(t-e)/36e5),(e=>e.getUTCHours()));dK.range;var fK=oK((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5),(e=>e.getDate()-1));fK.range;var pK=oK((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/864e5),(e=>e.getUTCDate()-1));pK.range;var gK=oK((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/864e5),(e=>Math.floor(e/864e5)));function mK(e){return oK((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5))}gK.range,s(mK,"timeWeekday");var yK=mK(0),vK=mK(1),xK=mK(2),bK=mK(3),TK=mK(4),CK=mK(5),wK=mK(6);function kK(e){return oK((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/6048e5))}yK.range,vK.range,xK.range,bK.range,TK.range,CK.range,wK.range,s(kK,"utcWeekday");var EK=kK(0),_K=kK(1),AK=kK(2),SK=kK(3),RK=kK(4),NK=kK(5),LK=kK(6);EK.range,_K.range,AK.range,SK.range,RK.range,NK.range,LK.range;var IK=oK((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));IK.range;var MK=oK((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));MK.range;var OK=oK((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));OK.every=e=>isFinite(e=Math.floor(e))&&e>0?oK((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,r)=>{t.setFullYear(t.getFullYear()+r*e)})):null,OK.range;var PK=oK((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function DK(e,t,r,n,i,a){let o=[[lK,1,1e3],[lK,5,5e3],[lK,15,15e3],[lK,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,864e5],[n,2,1728e5],[r,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function l(e,t,r){let n=t<e;n&&([e,t]=[t,e]);let i=r&&"function"==typeof r.range?r:u(e,t,r),a=i?i.range(e,+t+1):[];return n?a.reverse():a}function u(t,r,n){let i=Math.abs(r-t)/n,a=hW((([,,e])=>e)).right(o,i);if(a===o.length)return e.every(SW(t/31536e6,r/31536e6,n));if(0===a)return sK.every(Math.max(SW(t,r,n),1));let[s,l]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(l)}return s(l,"ticks"),s(u,"tickInterval"),[l,u]}PK.every=e=>isFinite(e=Math.floor(e))&&e>0?oK((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null,PK.range,s(DK,"ticker"),DK(PK,MK,EK,gK,dK,cK);var[BK,FK]=DK(OK,IK,yK,fK,hK,uK);function $K(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zK(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function UK(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function GK(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,c=ZK(i),h=QK(i),d=ZK(a),f=QK(a),p=ZK(o),g=QK(o),m=ZK(l),y=QK(l),v=ZK(u),x=QK(u),b={a:O,A:P,b:D,B:B,c:null,d:xZ,e:xZ,f:kZ,g:PZ,G:BZ,H:bZ,I:TZ,j:CZ,L:wZ,m:EZ,M:_Z,p:F,q:$,Q:oQ,s:sQ,S:AZ,u:SZ,U:RZ,V:LZ,w:IZ,W:MZ,x:null,X:null,y:OZ,Y:DZ,Z:FZ,"%":aQ},T={a:z,A:U,b:G,B:j,c:null,d:$Z,e:$Z,f:VZ,g:tQ,G:nQ,H:zZ,I:UZ,j:GZ,L:jZ,m:WZ,M:HZ,p:V,q:W,Q:oQ,s:sQ,S:qZ,u:YZ,U:XZ,V:ZZ,w:QZ,W:JZ,x:null,X:null,y:eQ,Y:rQ,Z:iQ,"%":aQ},C={a:A,A:S,b:R,B:N,c:L,d:uZ,e:uZ,f:gZ,g:aZ,G:iZ,H:hZ,I:hZ,j:cZ,L:pZ,m:lZ,M:dZ,p:_,q:sZ,Q:yZ,s:vZ,S:fZ,u:eZ,U:tZ,V:rZ,w:JK,W:nZ,x:I,X:M,y:aZ,Y:iZ,Z:oZ,"%":mZ};function w(e,t){return function(r){var n,i,a,o=[],s=-1,l=0,u=e.length;for(r instanceof Date||(r=new Date(+r));++s<u;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=WK[n=e.charAt(++s)])?n=e.charAt(++s):i="e"===n?" ":"0",(a=t[n])&&(n=a(r,i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function k(e,t){return function(r){var n,i,a=UK(1900,void 0,1);if(E(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(n=zK(UK(a.y,0,1))).getUTCDay(),n=i>4||0===i?_K.ceil(n):_K(n),n=pK.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(i=(n=$K(UK(a.y,0,1))).getDay(),n=i>4||0===i?vK.ceil(n):vK(n),n=fK.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?zK(UK(a.y,0,1)).getUTCDay():$K(UK(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,zK(a)):$K(a)}}function E(e,t,r,n){for(var i,a,o=0,s=t.length,l=r.length;o<s;){if(n>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=C[i in WK?t.charAt(o++):i])||(n=a(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}function _(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=h.get(n[0].toLowerCase()),r+n[0].length):-1}function A(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=g.get(n[0].toLowerCase()),r+n[0].length):-1}function S(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1}function R(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1}function N(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1}function L(e,r,n){return E(e,t,r,n)}function I(e,t,n){return E(e,r,t,n)}function M(e,t,r){return E(e,n,t,r)}function O(e){return o[e.getDay()]}function P(e){return a[e.getDay()]}function D(e){return u[e.getMonth()]}function B(e){return l[e.getMonth()]}function F(e){return i[+(e.getHours()>=12)]}function $(e){return 1+~~(e.getMonth()/3)}function z(e){return o[e.getUTCDay()]}function U(e){return a[e.getUTCDay()]}function G(e){return u[e.getUTCMonth()]}function j(e){return l[e.getUTCMonth()]}function V(e){return i[+(e.getUTCHours()>=12)]}function W(e){return 1+~~(e.getUTCMonth()/3)}return b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),T.x=w(r,T),T.X=w(n,T),T.c=w(t,T),s(w,"newFormat"),s(k,"newParse"),s(E,"parseSpecifier"),s(_,"parsePeriod"),s(A,"parseShortWeekday"),s(S,"parseWeekday"),s(R,"parseShortMonth"),s(N,"parseMonth"),s(L,"parseLocaleDateTime"),s(I,"parseLocaleDate"),s(M,"parseLocaleTime"),s(O,"formatShortWeekday"),s(P,"formatWeekday"),s(D,"formatShortMonth"),s(B,"formatMonth"),s(F,"formatPeriod"),s($,"formatQuarter"),s(z,"formatUTCShortWeekday"),s(U,"formatUTCWeekday"),s(G,"formatUTCShortMonth"),s(j,"formatUTCMonth"),s(V,"formatUTCPeriod"),s(W,"formatUTCQuarter"),{format:s((function(e){var t=w(e+="",b);return t.toString=function(){return e},t}),"format"),parse:s((function(e){var t=k(e+="",!1);return t.toString=function(){return e},t}),"parse"),utcFormat:s((function(e){var t=w(e+="",T);return t.toString=function(){return e},t}),"utcFormat"),utcParse:s((function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}),"utcParse")}}s($K,"localDate"),s(zK,"utcDate"),s(UK,"newDate"),s(GK,"formatLocale");var jK,VK,WK={"-":"",_:" ",0:"0"},HK=/^\s*\d+/,qK=/^%/,YK=/[\\^$*+?|[\]().{}]/g;function XK(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function KK(e){return e.replace(YK,"\\$&")}function ZK(e){return new RegExp("^(?:"+e.map(KK).join("|")+")","i")}function QK(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function JK(e,t,r){var n=HK.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function eZ(e,t,r){var n=HK.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function tZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function rZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function nZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function iZ(e,t,r){var n=HK.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function aZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oZ(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function sZ(e,t,r){var n=HK.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function lZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function uZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function cZ(e,t,r){var n=HK.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function hZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function dZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function fZ(e,t,r){var n=HK.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function pZ(e,t,r){var n=HK.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gZ(e,t,r){var n=HK.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mZ(e,t,r){var n=qK.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function yZ(e,t,r){var n=HK.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function vZ(e,t,r){var n=HK.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function xZ(e,t){return XK(e.getDate(),t,2)}function bZ(e,t){return XK(e.getHours(),t,2)}function TZ(e,t){return XK(e.getHours()%12||12,t,2)}function CZ(e,t){return XK(1+fK.count(OK(e),e),t,3)}function wZ(e,t){return XK(e.getMilliseconds(),t,3)}function kZ(e,t){return wZ(e,t)+"000"}function EZ(e,t){return XK(e.getMonth()+1,t,2)}function _Z(e,t){return XK(e.getMinutes(),t,2)}function AZ(e,t){return XK(e.getSeconds(),t,2)}function SZ(e){var t=e.getDay();return 0===t?7:t}function RZ(e,t){return XK(yK.count(OK(e)-1,e),t,2)}function NZ(e){var t=e.getDay();return t>=4||0===t?TK(e):TK.ceil(e)}function LZ(e,t){return e=NZ(e),XK(TK.count(OK(e),e)+(4===OK(e).getDay()),t,2)}function IZ(e){return e.getDay()}function MZ(e,t){return XK(vK.count(OK(e)-1,e),t,2)}function OZ(e,t){return XK(e.getFullYear()%100,t,2)}function PZ(e,t){return XK((e=NZ(e)).getFullYear()%100,t,2)}function DZ(e,t){return XK(e.getFullYear()%1e4,t,4)}function BZ(e,t){var r=e.getDay();return XK((e=r>=4||0===r?TK(e):TK.ceil(e)).getFullYear()%1e4,t,4)}function FZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+XK(t/60|0,"0",2)+XK(t%60,"0",2)}function $Z(e,t){return XK(e.getUTCDate(),t,2)}function zZ(e,t){return XK(e.getUTCHours(),t,2)}function UZ(e,t){return XK(e.getUTCHours()%12||12,t,2)}function GZ(e,t){return XK(1+pK.count(PK(e),e),t,3)}function jZ(e,t){return XK(e.getUTCMilliseconds(),t,3)}function VZ(e,t){return jZ(e,t)+"000"}function WZ(e,t){return XK(e.getUTCMonth()+1,t,2)}function HZ(e,t){return XK(e.getUTCMinutes(),t,2)}function qZ(e,t){return XK(e.getUTCSeconds(),t,2)}function YZ(e){var t=e.getUTCDay();return 0===t?7:t}function XZ(e,t){return XK(EK.count(PK(e)-1,e),t,2)}function KZ(e){var t=e.getUTCDay();return t>=4||0===t?RK(e):RK.ceil(e)}function ZZ(e,t){return e=KZ(e),XK(RK.count(PK(e),e)+(4===PK(e).getUTCDay()),t,2)}function QZ(e){return e.getUTCDay()}function JZ(e,t){return XK(_K.count(PK(e)-1,e),t,2)}function eQ(e,t){return XK(e.getUTCFullYear()%100,t,2)}function tQ(e,t){return XK((e=KZ(e)).getUTCFullYear()%100,t,2)}function rQ(e,t){return XK(e.getUTCFullYear()%1e4,t,4)}function nQ(e,t){var r=e.getUTCDay();return XK((e=r>=4||0===r?RK(e):RK.ceil(e)).getUTCFullYear()%1e4,t,4)}function iQ(){return"+0000"}function aQ(){return"%"}function oQ(e){return+e}function sQ(e){return Math.floor(+e/1e3)}function lQ(e){return jK=GK(e),VK=jK.format,jK.parse,jK.utcFormat,jK.utcParse,jK}function uQ(e,t){var r,n=0,i=(e=e.slice()).length-1,a=e[n],o=e[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),e[n]=t.floor(a),e[i]=t.ceil(o),e}function cQ(e){return new Date(e)}function hQ(e){return e instanceof Date?+e:+new Date(+e)}function dQ(e,t,r,n,i,a,o,l,u,c){var h=LX(),d=h.invert,f=h.domain,p=c(".%L"),g=c(":%S"),m=c("%I:%M"),y=c("%I %p"),v=c("%a %d"),x=c("%b %d"),b=c("%B"),T=c("%Y");function C(e){return(u(e)<e?p:l(e)<e?g:o(e)<e?m:a(e)<e?y:n(e)<e?i(e)<e?v:x:r(e)<e?b:T)(e)}return s(C,"tickFormat"),h.invert=function(e){return new Date(d(e))},h.domain=function(e){return arguments.length?f(Array.from(e,hQ)):f().map(cQ)},h.ticks=function(t){var r=f();return e(r[0],r[r.length-1],t??10)},h.tickFormat=function(e,t){return null==t?C:c(t)},h.nice=function(e){var r=f();return(!e||"function"!=typeof e.range)&&(e=t(r[0],r[r.length-1],e??10)),e?f(uQ(r,e)):h},h.copy=function(){return RX(h,dQ(e,t,r,n,i,a,o,l,u,c))},h}function fQ(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(6*n,6*++n);return r}function pQ(e){return s((function(){return e}),"constant")}s(XK,"pad"),s(KK,"requote"),s(ZK,"formatRe"),s(QK,"formatLookup"),s(JK,"parseWeekdayNumberSunday"),s(eZ,"parseWeekdayNumberMonday"),s(tZ,"parseWeekNumberSunday"),s(rZ,"parseWeekNumberISO"),s(nZ,"parseWeekNumberMonday"),s(iZ,"parseFullYear"),s(aZ,"parseYear"),s(oZ,"parseZone"),s(sZ,"parseQuarter"),s(lZ,"parseMonthNumber"),s(uZ,"parseDayOfMonth"),s(cZ,"parseDayOfYear"),s(hZ,"parseHour24"),s(dZ,"parseMinutes"),s(fZ,"parseSeconds"),s(pZ,"parseMilliseconds"),s(gZ,"parseMicroseconds"),s(mZ,"parseLiteralPercent"),s(yZ,"parseUnixTimestamp"),s(vZ,"parseUnixTimestampSeconds"),s(xZ,"formatDayOfMonth"),s(bZ,"formatHour24"),s(TZ,"formatHour12"),s(CZ,"formatDayOfYear"),s(wZ,"formatMilliseconds"),s(kZ,"formatMicroseconds"),s(EZ,"formatMonthNumber"),s(_Z,"formatMinutes"),s(AZ,"formatSeconds"),s(SZ,"formatWeekdayNumberMonday"),s(RZ,"formatWeekNumberSunday"),s(NZ,"dISO"),s(LZ,"formatWeekNumberISO"),s(IZ,"formatWeekdayNumberSunday"),s(MZ,"formatWeekNumberMonday"),s(OZ,"formatYear"),s(PZ,"formatYearISO"),s(DZ,"formatFullYear"),s(BZ,"formatFullYearISO"),s(FZ,"formatZone"),s($Z,"formatUTCDayOfMonth"),s(zZ,"formatUTCHour24"),s(UZ,"formatUTCHour12"),s(GZ,"formatUTCDayOfYear"),s(jZ,"formatUTCMilliseconds"),s(VZ,"formatUTCMicroseconds"),s(WZ,"formatUTCMonthNumber"),s(HZ,"formatUTCMinutes"),s(qZ,"formatUTCSeconds"),s(YZ,"formatUTCWeekdayNumberMonday"),s(XZ,"formatUTCWeekNumberSunday"),s(KZ,"UTCdISO"),s(ZZ,"formatUTCWeekNumberISO"),s(QZ,"formatUTCWeekdayNumberSunday"),s(JZ,"formatUTCWeekNumberMonday"),s(eQ,"formatUTCYear"),s(tQ,"formatUTCYearISO"),s(rQ,"formatUTCFullYear"),s(nQ,"formatUTCFullYearISO"),s(iQ,"formatUTCZone"),s(aQ,"formatLiteralPercent"),s(oQ,"formatUnixTimestamp"),s(sQ,"formatUnixTimestampSeconds"),lQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),s(lQ,"defaultLocale"),s(uQ,"nice"),s(cQ,"date"),s(hQ,"number"),s(dQ,"calendar"),s((function(){return vX.apply(dQ(BK,FK,OK,IK,yK,fK,hK,uK,lK,VK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),"time"),s((function e(){var t,r,n=bX().unknown(void 0),i=n.domain,a=n.range,o=0,l=1,u=!1,c=0,h=0,d=.5;function f(){var e=i().length,n=l<o,s=n?l:o,f=n?o:l;t=(f-s)/Math.max(1,e-c+2*h),u&&(t=Math.floor(t)),s+=(f-s-t*(e-c))*d,r=t*(1-c),u&&(s=Math.round(s),r=Math.round(r));var p=RW(e).map((function(e){return s+t*e}));return a(n?p.reverse():p)}return delete n.unknown,s(f,"rescale"),n.domain=function(e){return arguments.length?(i(e),f()):i()},n.range=function(e){return arguments.length?([o,l]=e,o=+o,l=+l,f()):[o,l]},n.rangeRound=function(e){return[o,l]=e,o=+o,l=+l,u=!0,f()},n.bandwidth=function(){return r},n.step=function(){return t},n.round=function(e){return arguments.length?(u=!!e,f()):u},n.padding=function(e){return arguments.length?(c=Math.min(1,h=+e),f()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),f()):c},n.paddingOuter=function(e){return arguments.length?(h=+e,f()):h},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),f()):d},n.copy=function(){return e(i(),[o,l]).round(u).paddingInner(c).paddingOuter(h).align(d)},vX.apply(f(),arguments)}),"band"),s(fQ,"default"),fQ("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),s(pQ,"default");var gQ=Math.abs,mQ=Math.atan2,yQ=Math.cos,vQ=Math.max,xQ=Math.min,bQ=Math.sin,TQ=Math.sqrt,CQ=1e-12,wQ=Math.PI,kQ=wQ/2,EQ=2*wQ;function _Q(e){return e>1?0:e<-1?wQ:Math.acos(e)}function AQ(e){return e>=1?kQ:e<=-1?-kQ:Math.asin(e)}s(_Q,"acos"),s(AQ,"asin");var SQ=Math.PI,RQ=2*SQ,NQ=1e-6,LQ=RQ-NQ;function IQ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function MQ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IQ;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}s(IQ,"append"),s(MQ,"appendRound");var OQ=class{static{s(this,"Path")}constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?IQ:MQ(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,r,n,i){if(e=+e,t=+t,r=+r,n=+n,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=r-e,l=n-t,u=a-e,c=o-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>NQ)if(Math.abs(c*s-l*u)>NQ&&i){let d=r-a,f=n-o,p=s*s+l*l,g=d*d+f*f,m=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((SQ-Math.acos((p+h-g)/(2*m*y)))/2),x=v/y,b=v/m;Math.abs(x-1)>NQ&&this._append`L${e+x*u},${t+x*c}`,this._append`A${i},${i},0,0,${+(c*d>u*f)},${this._x1=e+b*s},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,n,i,a){if(e=+e,t=+t,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(n),s=r*Math.sin(n),l=e+o,u=t+s,c=1^a,h=a?n-i:i-n;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>NQ||Math.abs(this._y1-u)>NQ)&&this._append`L${l},${u}`,r&&(h<0&&(h=h%RQ+RQ),h>LQ?this._append`A${r},${r},0,1,${c},${e-o},${t-s}A${r},${r},0,1,${c},${this._x1=l},${this._y1=u}`:h>NQ&&this._append`A${r},${r},0,${+(h>=SQ)},${c},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}};function PQ(){return new OQ}function DQ(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new OQ(t)}function BQ(e){return e.innerRadius}function FQ(e){return e.outerRadius}function $Q(e){return e.startAngle}function zQ(e){return e.endAngle}function UQ(e){return e&&e.padAngle}function GQ(e,t,r,n,i,a,o,s){var l=r-e,u=n-t,c=o-i,h=s-a,d=h*l-c*u;if(!(d*d<CQ))return[e+(d=(c*(t-a)-h*(e-i))/d)*l,t+d*u]}function jQ(e,t,r,n,i,a,o){var s=e-r,l=t-n,u=(o?a:-a)/TQ(s*s+l*l),c=u*l,h=-u*s,d=e+c,f=t+h,p=r+c,g=n+h,m=(d+p)/2,y=(f+g)/2,v=p-d,x=g-f,b=v*v+x*x,T=i-a,C=d*g-p*f,w=(x<0?-1:1)*TQ(vQ(0,T*T*b-C*C)),k=(C*x-v*w)/b,E=(-C*v-x*w)/b,_=(C*x+v*w)/b,A=(-C*v+x*w)/b,S=k-m,R=E-y,N=_-m,L=A-y;return S*S+R*R>N*N+L*L&&(k=_,E=A),{cx:k,cy:E,x01:-c,y01:-h,x11:k*(i/T-1),y11:E*(i/T-1)}}function VQ(e){this._context=e}function WQ(e){return new VQ(e)}function HQ(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function qQ(e){return e[0]}function YQ(e){return e[1]}function XQ(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function KQ(e){return e}s(PQ,"path"),PQ.prototype=OQ.prototype,s(DQ,"withPath"),s(BQ,"arcInnerRadius"),s(FQ,"arcOuterRadius"),s($Q,"arcStartAngle"),s(zQ,"arcEndAngle"),s(UQ,"arcPadAngle"),s(GQ,"intersect"),s(jQ,"cornerTangents"),s((function(){var e=BQ,t=FQ,r=pQ(0),n=null,i=$Q,a=zQ,o=UQ,l=null,u=DQ(c);function c(){var s,c,h=+e.apply(this,arguments),d=+t.apply(this,arguments),f=i.apply(this,arguments)-kQ,p=a.apply(this,arguments)-kQ,g=gQ(p-f),m=p>f;if(l||(l=s=u()),d<h&&(c=d,d=h,h=c),d>CQ)if(g>EQ-CQ)l.moveTo(d*yQ(f),d*bQ(f)),l.arc(0,0,d,f,p,!m),h>CQ&&(l.moveTo(h*yQ(p),h*bQ(p)),l.arc(0,0,h,p,f,m));else{var y,v,x=f,b=p,T=f,C=p,w=g,k=g,E=o.apply(this,arguments)/2,_=E>CQ&&(n?+n.apply(this,arguments):TQ(h*h+d*d)),A=xQ(gQ(d-h)/2,+r.apply(this,arguments)),S=A,R=A;if(_>CQ){var N=AQ(_/h*bQ(E)),L=AQ(_/d*bQ(E));(w-=2*N)>CQ?(T+=N*=m?1:-1,C-=N):(w=0,T=C=(f+p)/2),(k-=2*L)>CQ?(x+=L*=m?1:-1,b-=L):(k=0,x=b=(f+p)/2)}var I=d*yQ(x),M=d*bQ(x),O=h*yQ(C),P=h*bQ(C);if(A>CQ){var D,B=d*yQ(b),F=d*bQ(b),$=h*yQ(T),z=h*bQ(T);if(g<wQ)if(D=GQ(I,M,$,z,B,F,O,P)){var U=I-D[0],G=M-D[1],j=B-D[0],V=F-D[1],W=1/bQ(_Q((U*j+G*V)/(TQ(U*U+G*G)*TQ(j*j+V*V)))/2),H=TQ(D[0]*D[0]+D[1]*D[1]);S=xQ(A,(h-H)/(W-1)),R=xQ(A,(d-H)/(W+1))}else S=R=0}k>CQ?R>CQ?(y=jQ($,z,I,M,d,R,m),v=jQ(B,F,O,P,d,R,m),l.moveTo(y.cx+y.x01,y.cy+y.y01),R<A?l.arc(y.cx,y.cy,R,mQ(y.y01,y.x01),mQ(v.y01,v.x01),!m):(l.arc(y.cx,y.cy,R,mQ(y.y01,y.x01),mQ(y.y11,y.x11),!m),l.arc(0,0,d,mQ(y.cy+y.y11,y.cx+y.x11),mQ(v.cy+v.y11,v.cx+v.x11),!m),l.arc(v.cx,v.cy,R,mQ(v.y11,v.x11),mQ(v.y01,v.x01),!m))):(l.moveTo(I,M),l.arc(0,0,d,x,b,!m)):l.moveTo(I,M),h>CQ&&w>CQ?S>CQ?(y=jQ(O,P,B,F,h,-S,m),v=jQ(I,M,$,z,h,-S,m),l.lineTo(y.cx+y.x01,y.cy+y.y01),S<A?l.arc(y.cx,y.cy,S,mQ(y.y01,y.x01),mQ(v.y01,v.x01),!m):(l.arc(y.cx,y.cy,S,mQ(y.y01,y.x01),mQ(y.y11,y.x11),!m),l.arc(0,0,h,mQ(y.cy+y.y11,y.cx+y.x11),mQ(v.cy+v.y11,v.cx+v.x11),m),l.arc(v.cx,v.cy,S,mQ(v.y11,v.x11),mQ(v.y01,v.x01),!m))):l.arc(0,0,h,C,T,m):l.lineTo(O,P)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s(c,"arc"),c.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-wQ/2;return[yQ(n)*r,bQ(n)*r]},c.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:pQ(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:pQ(+e),c):t},c.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:pQ(+e),c):r},c.padRadius=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:pQ(+e),c):n},c.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:pQ(+e),c):i},c.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:pQ(+e),c):a},c.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:pQ(+e),c):o},c.context=function(e){return arguments.length?(l=e??null,c):l},c}),"default"),s(VQ,"Linear"),VQ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}),"point")},s(WQ,"default"),s(HQ,"default"),s(qQ,"x"),s(YQ,"y"),s((function(e,t){var r=pQ(!0),n=null,i=WQ,a=null,o=DQ(l);function l(s){var l,u,c,h=(s=HQ(s)).length,d=!1;for(null==n&&(a=i(c=o())),l=0;l<=h;++l)!(l<h&&r(u=s[l],l,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,l,s),+t(u,l,s));if(c)return a=null,c+""||null}return e="function"==typeof e?e:void 0===e?qQ:pQ(e),t="function"==typeof t?t:void 0===t?YQ:pQ(t),s(l,"line"),l.x=function(t){return arguments.length?(e="function"==typeof t?t:pQ(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:pQ(+e),l):t},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:pQ(!!e),l):r},l.curve=function(e){return arguments.length?(i=e,null!=n&&(a=i(n)),l):i},l.context=function(e){return arguments.length?(null==e?n=a=null:a=i(n=e),l):n},l}),"default"),s(XQ,"default"),s(KQ,"default"),s((function(){var e=KQ,t=XQ,r=null,n=pQ(0),i=pQ(EQ),a=pQ(0);function o(o){var s,l,u,c,h,d=(o=HQ(o)).length,f=0,p=new Array(d),g=new Array(d),m=+n.apply(this,arguments),y=Math.min(EQ,Math.max(-EQ,i.apply(this,arguments)-m)),v=Math.min(Math.abs(y)/d,a.apply(this,arguments)),x=v*(y<0?-1:1);for(s=0;s<d;++s)(h=g[p[s]=s]=+e(o[s],s,o))>0&&(f+=h);for(null!=t?p.sort((function(e,r){return t(g[e],g[r])})):null!=r&&p.sort((function(e,t){return r(o[e],o[t])})),s=0,u=f?(y-d*x)/f:0;s<d;++s,m=c)l=p[s],c=m+((h=g[l])>0?h*u:0)+x,g[l]={data:o[l],index:s,value:h,startAngle:m,endAngle:c,padAngle:v};return g}return s(o,"pie"),o.value=function(t){return arguments.length?(e="function"==typeof t?t:pQ(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,r=null,o):t},o.sort=function(e){return arguments.length?(r=e,t=null,o):r},o.startAngle=function(e){return arguments.length?(n="function"==typeof e?e:pQ(+e),o):n},o.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:pQ(+e),o):i},o.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:pQ(+e),o):a},o}),"default");var ZQ=class{static{s(this,"Bump")}constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}};function QQ(e){return new ZQ(e,!0)}function JQ(e){return new ZQ(e,!1)}function eJ(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function tJ(e){this._context=e}function rJ(e){return new tJ(e)}function nJ(){}function iJ(e){this._context=e}function aJ(e){return new iJ(e)}function oJ(e){this._context=e}function sJ(e){return new oJ(e)}function lJ(e,t){this._basis=new tJ(e),this._beta=t}s(QQ,"bumpX"),s(JQ,"bumpY"),s(eJ,"point"),s(tJ,"Basis"),tJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 3:eJ(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eJ(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}),"point")},s(rJ,"default"),s(nJ,"default"),s(iJ,"BasisClosed"),iJ.prototype={areaStart:nJ,areaEnd:nJ,lineStart:s((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:eJ(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}),"point")},s(aJ,"default"),s(oJ,"BasisOpen"),oJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:eJ(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}),"point")},s(sJ,"default"),s(lJ,"Bundle"),lJ.prototype={lineStart:s((function(){this._x=[],this._y=[],this._basis.lineStart()}),"lineStart"),lineEnd:s((function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n,i=e[0],a=t[0],o=e[r]-i,s=t[r]-a,l=-1;++l<=r;)n=l/r,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+n*o),this._beta*t[l]+(1-this._beta)*(a+n*s));this._x=this._y=null,this._basis.lineEnd()}),"lineEnd"),point:s((function(e,t){this._x.push(+e),this._y.push(+t)}),"point")};var uJ=s((function e(t){function r(e){return 1===t?new tJ(e):new lJ(e,t)}return s(r,"bundle"),r.beta=function(t){return e(+t)},r}),"custom")(.85);function cJ(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function hJ(e,t){this._context=e,this._k=(1-t)/6}s(cJ,"point"),s(hJ,"Cardinal"),hJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cJ(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:cJ(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var dJ=s((function e(t){function r(e){return new hJ(e,t)}return s(r,"cardinal"),r.tension=function(t){return e(+t)},r}),"custom")(0);function fJ(e,t){this._context=e,this._k=(1-t)/6}s(fJ,"CardinalClosed"),fJ.prototype={areaStart:nJ,areaEnd:nJ,lineStart:s((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cJ(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var pJ=s((function e(t){function r(e){return new fJ(e,t)}return s(r,"cardinal"),r.tension=function(t){return e(+t)},r}),"custom")(0);function gJ(e,t){this._context=e,this._k=(1-t)/6}s(gJ,"CardinalOpen"),gJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cJ(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var mJ=s((function e(t){function r(e){return new gJ(e,t)}return s(r,"cardinal"),r.tension=function(t){return e(+t)},r}),"custom")(0);function yJ(e,t,r){var n=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>CQ){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>CQ){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(n,i,a,o,e._x2,e._y2)}function vJ(e,t){this._context=e,this._alpha=t}s(yJ,"point"),s(vJ,"CatmullRom"),vJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:yJ(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var xJ=s((function e(t){function r(e){return t?new vJ(e,t):new hJ(e,0)}return s(r,"catmullRom"),r.alpha=function(t){return e(+t)},r}),"custom")(.5);function bJ(e,t){this._context=e,this._alpha=t}s(bJ,"CatmullRomClosed"),bJ.prototype={areaStart:nJ,areaEnd:nJ,lineStart:s((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:s((function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:yJ(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var TJ=s((function e(t){function r(e){return t?new bJ(e,t):new fJ(e,0)}return s(r,"catmullRom"),r.alpha=function(t){return e(+t)},r}),"custom")(.5);function CJ(e,t){this._context=e,this._alpha=t}s(CJ,"CatmullRomOpen"),CJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:s((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yJ(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}),"point")};var wJ=s((function e(t){function r(e){return t?new CJ(e,t):new gJ(e,0)}return s(r,"catmullRom"),r.alpha=function(t){return e(+t)},r}),"custom")(.5);function kJ(e){this._context=e}function EJ(e){return new kJ(e)}function _J(e){return e<0?-1:1}function AJ(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(_J(a)+_J(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function SJ(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function RJ(e,t,r){var n=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-n)/3;e._context.bezierCurveTo(n+s,i+s*t,a-s,o-s*r,a,o)}function NJ(e){this._context=e}function LJ(e){this._context=new IJ(e)}function IJ(e){this._context=e}function MJ(e){return new NJ(e)}function OJ(e){return new LJ(e)}function PJ(e){this._context=e}function DJ(e){var t,r,n=e.length-1,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function BJ(e){return new PJ(e)}function FJ(e,t){this._context=e,this._t=t}function $J(e){return new FJ(e,.5)}function zJ(e){return new FJ(e,0)}function UJ(e){return new FJ(e,1)}s(kJ,"LinearClosed"),kJ.prototype={areaStart:nJ,areaEnd:nJ,lineStart:s((function(){this._point=0}),"lineStart"),lineEnd:s((function(){this._point&&this._context.closePath()}),"lineEnd"),point:s((function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}),"point")},s(EJ,"default"),s(_J,"sign"),s(AJ,"slope3"),s(SJ,"slope2"),s(RJ,"point"),s(NJ,"MonotoneX"),NJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:RJ(this,this._t0,SJ(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:s((function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,RJ(this,SJ(this,r=AJ(this,e,t)),r);break;default:RJ(this,this._t0,r=AJ(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}),"point")},s(LJ,"MonotoneY"),(LJ.prototype=Object.create(NJ.prototype)).point=function(e,t){NJ.prototype.point.call(this,t,e)},s(IJ,"ReflectContext"),IJ.prototype={moveTo:s((function(e,t){this._context.moveTo(t,e)}),"moveTo"),closePath:s((function(){this._context.closePath()}),"closePath"),lineTo:s((function(e,t){this._context.lineTo(t,e)}),"lineTo"),bezierCurveTo:s((function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}),"bezierCurveTo")},s(MJ,"monotoneX"),s(OJ,"monotoneY"),s(PJ,"Natural"),PJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x=[],this._y=[]}),"lineStart"),lineEnd:s((function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=DJ(e),i=DJ(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null}),"lineEnd"),point:s((function(e,t){this._x.push(+e),this._y.push(+t)}),"point")},s(DJ,"controlPoints"),s(BJ,"default"),s(FJ,"Step"),FJ.prototype={areaStart:s((function(){this._line=0}),"areaStart"),areaEnd:s((function(){this._line=NaN}),"areaEnd"),lineStart:s((function(){this._x=this._y=NaN,this._point=0}),"lineStart"),lineEnd:s((function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}),"lineEnd"),point:s((function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}),"point")},s($J,"default"),s(zJ,"stepBefore"),s(UJ,"stepAfter");var GJ={value:s((()=>{}),"value")};function jJ(){for(var e,t=0,r=arguments.length,n={};t<r;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new VJ(n)}function VJ(e){this._=e}function WJ(e,t){return e.trim().split(/^|\s+/).map((function(e){var r="",n=e.indexOf(".");if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}}))}function HJ(e,t){for(var r,n=0,i=e.length;n<i;++n)if((r=e[n]).name===t)return r.value}function qJ(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=GJ,e=e.slice(0,n).concat(e.slice(n+1));break}return null!=r&&e.push({name:t,value:r}),e}s(jJ,"dispatch"),s(VJ,"Dispatch"),s(WJ,"parseTypenames"),VJ.prototype=jJ.prototype={constructor:VJ,on:s((function(e,t){var r,n=this._,i=WJ(e+"",n),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=qJ(n[r],e.name,t);else if(null==t)for(r in n)n[r]=qJ(n[r],e.name,null);return this}for(;++a<o;)if((r=(e=i[a]).type)&&(r=HJ(n[r],e.name)))return r}),"on"),copy:s((function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new VJ(e)}),"copy"),call:s((function(e,t){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,r=(n=this._[e]).length;a<r;++a)n[a].value.apply(t,i)}),"call"),apply:s((function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)}),"apply")},s(HJ,"get"),s(qJ,"set");var YJ,XJ,KJ=jJ,ZJ=0,QJ=0,JJ=0,e0=0,t0=0,r0=0,n0="object"==typeof performance&&performance.now?performance:Date,i0="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function a0(){return t0||(i0(o0),t0=n0.now()+r0)}function o0(){t0=0}function s0(){this._call=this._time=this._next=null}function l0(e,t,r){var n=new s0;return n.restart(e,t,r),n}function u0(){a0(),++ZJ;for(var e,t=YJ;t;)(e=t0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ZJ}function c0(){t0=(e0=n0.now())+r0,ZJ=QJ=0;try{u0()}finally{ZJ=0,d0(),t0=0}}function h0(){var e=n0.now(),t=e-e0;t>1e3&&(r0-=t,e0=e)}function d0(){for(var e,t,r=YJ,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:YJ=t);XJ=e,f0(n)}function f0(e){ZJ||(QJ&&(QJ=clearTimeout(QJ)),e-t0>24?(e<1/0&&(QJ=setTimeout(c0,e-n0.now()-r0)),JJ&&(JJ=clearInterval(JJ))):(JJ||(e0=n0.now(),JJ=setInterval(h0,1e3)),ZJ=1,i0(c0)))}function p0(e,t,r){var n=new s0;return t=null==t?0:+t,n.restart((r=>{n.stop(),e(r+t)}),t,r),n}s(a0,"now"),s(o0,"clearNow"),s(s0,"Timer"),s0.prototype=l0.prototype={constructor:s0,restart:s((function(e,t,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?a0():+r)+(null==t?0:+t),!this._next&&XJ!==this&&(XJ?XJ._next=this:YJ=this,XJ=this),this._call=e,this._time=r,f0()}),"restart"),stop:s((function(){this._call&&(this._call=null,this._time=1/0,f0())}),"stop")},s(l0,"timer"),s(u0,"timerFlush"),s(c0,"wake"),s(h0,"poke"),s(d0,"nap"),s(f0,"sleep"),s(p0,"default");var g0=KJ("start","end","cancel","interrupt"),m0=[];function y0(e,t,r,n,i,a){var o=e.__transition;if(o){if(r in o)return}else e.__transition={};T0(e,r,{name:t,index:n,group:i,on:g0,tween:m0,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function v0(e,t){var r=b0(e,t);if(r.state>0)throw new Error("too late; already scheduled");return r}function x0(e,t){var r=b0(e,t);if(r.state>3)throw new Error("too late; already running");return r}function b0(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function T0(e,t,r){var n,i=e.__transition;function a(e){r.state=1,r.timer.restart(o,r.delay,r.time),r.delay<=e&&o(e-r.delay)}function o(a){var s,c,h,d;if(1!==r.state)return u();for(s in i)if((d=i[s]).name===r.name){if(3===d.state)return p0(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[s]):+s<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[s])}if(p0((function(){3===r.state&&(r.state=4,r.timer.restart(l,r.delay,r.time),l(a))})),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(r.state=3,n=new Array(h=r.tween.length),s=0,c=-1;s<h;++s)(d=r.tween[s].value.call(e,e.__data__,r.index,r.group))&&(n[++c]=d);n.length=c+1}}function l(t){for(var i=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(u),r.state=5,1),a=-1,o=n.length;++a<o;)n[a].call(e,i);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){for(var n in r.state=6,r.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=r,r.timer=l0(a,0,r.time),s(a,"schedule"),s(o,"start"),s(l,"tick"),s(u,"stop")}function C0(e,t){var r,n,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(r=a[i]).name===t?(n=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(n?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[i]):o=!1;o&&delete e.__transition}}function w0(e){return this.each((function(){C0(this,e)}))}function k0(e,t){var r,n;return function(){var i=x0(this,e),a=i.tween;if(a!==r)for(var o=0,s=(n=r=a).length;o<s;++o)if(n[o].name===t){(n=n.slice()).splice(o,1);break}i.tween=n}}function E0(e,t,r){var n,i;if("function"!=typeof r)throw new Error;return function(){var a=x0(this,e),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:t,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function _0(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n,i=b0(this.node(),r).tween,a=0,o=i.length;a<o;++a)if((n=i[a]).name===e)return n.value;return null}return this.each((null==t?k0:E0)(r,e,t))}function A0(e,t,r){var n=e._id;return e.each((function(){var e=x0(this,n);(e.value||(e.value={}))[t]=r.apply(this,arguments)})),function(e){return b0(e,n).value[t]}}function S0(e,t){var r;return("number"==typeof t?eX:t instanceof aY?XY:(r=aY(t))?(t=r,XY):oX)(e,t)}function R0(e){return function(){this.removeAttribute(e)}}function N0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L0(e,t,r){var n,i,a=r+"";return function(){var o=this.getAttribute(e);return o===a?null:o===n?i:i=t(n=o,r)}}function I0(e,t,r){var n,i,a=r+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?i:i=t(n=o,r)}}function M0(e,t,r){var n,i,a;return function(){var o,s,l=r(this);return null==l?void this.removeAttribute(e):(o=this.getAttribute(e))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=t(n=o,l))}}function O0(e,t,r){var n,i,a;return function(){var o,s,l=r(this);return null==l?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===n&&s===i?a:(i=s,a=t(n=o,l))}}function P0(e,t){var r=_H(e),n="transform"===r?yX:S0;return this.attrTween(e,"function"==typeof t?(r.local?O0:M0)(r,n,A0(this,"attr."+e,t)):null==t?(r.local?N0:R0)(r):(r.local?I0:L0)(r,n,t))}function D0(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function B0(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function F0(e,t){var r,n;function i(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&B0(e,i)),r}return s(i,"tween"),i._value=t,i}function $0(e,t){var r,n;function i(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&D0(e,i)),r}return s(i,"tween"),i._value=t,i}function z0(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;var n=_H(e);return this.tween(r,(n.local?F0:$0)(n,t))}function U0(e,t){return function(){v0(this,e).delay=+t.apply(this,arguments)}}function G0(e,t){return t=+t,function(){v0(this,e).delay=t}}function j0(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?U0:G0)(t,e)):b0(this.node(),t).delay}function V0(e,t){return function(){x0(this,e).duration=+t.apply(this,arguments)}}function W0(e,t){return t=+t,function(){x0(this,e).duration=t}}function H0(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?V0:W0)(t,e)):b0(this.node(),t).duration}function q0(e,t){if("function"!=typeof t)throw new Error;return function(){x0(this,e).ease=t}}function Y0(e){var t=this._id;return arguments.length?this.each(q0(t,e)):b0(this.node(),t).ease}function X0(e,t){return function(){var r=t.apply(this,arguments);if("function"!=typeof r)throw new Error;x0(this,e).ease=r}}function K0(e){if("function"!=typeof e)throw new Error;return this.each(X0(this._id,e))}function Z0(e){"function"!=typeof e&&(e=HW(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var a,o=t[i],s=o.length,l=n[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new _1(n,this._parents,this._name,this._id)}function Q0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var l,u=t[s],c=r[s],h=u.length,d=o[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<n;++s)o[s]=t[s];return new _1(o,this._parents,this._name,this._id)}function J0(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function e1(e,t,r){var n,i,a=J0(t)?v0:x0;return function(){var o=a(this,e),s=o.on;s!==n&&(i=(n=s).copy()).on(t,r),o.on=i}}function t1(e,t){var r=this._id;return arguments.length<2?b0(this.node(),r).on.on(e):this.each(e1(r,e,t))}function r1(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function n1(){return this.on("end.remove",r1(this._id))}function i1(e){var t=this._name,r=this._id;"function"!=typeof e&&(e=$W(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s,l,u=n[o],c=u.length,h=a[o]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=e.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,y0(h[d],t,r,d,h,b0(s,r)));return new _1(a,this._parents,t,r)}function a1(e){var t=this._name,r=this._id;"function"!=typeof e&&(e=jW(e));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var l,u=n[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=e.call(l,l.__data__,h,u),p=b0(l,r),g=0,m=f.length;g<m;++g)(d=f[g])&&y0(d,t,r,g,f,p);a.push(f),o.push(l)}return new _1(a,o,t,r)}s(y0,"default"),s(v0,"init"),s(x0,"set"),s(b0,"get"),s(T0,"create"),s(C0,"default"),s(w0,"default"),s(k0,"tweenRemove"),s(E0,"tweenFunction"),s(_0,"default"),s(A0,"tweenValue"),s(S0,"default"),s(R0,"attrRemove"),s(N0,"attrRemoveNS"),s(L0,"attrConstant"),s(I0,"attrConstantNS"),s(M0,"attrFunction"),s(O0,"attrFunctionNS"),s(P0,"default"),s(D0,"attrInterpolate"),s(B0,"attrInterpolateNS"),s(F0,"attrTweenNS"),s($0,"attrTween"),s(z0,"default"),s(U0,"delayFunction"),s(G0,"delayConstant"),s(j0,"default"),s(V0,"durationFunction"),s(W0,"durationConstant"),s(H0,"default"),s(q0,"easeConstant"),s(Y0,"default"),s(X0,"easeVarying"),s(K0,"default"),s(Z0,"default"),s(Q0,"default"),s(J0,"start"),s(e1,"onFunction"),s(t1,"default"),s(r1,"removeFunction"),s(n1,"default"),s(i1,"default"),s(a1,"default");var o1=Bq.prototype.constructor;function s1(){return new o1(this._groups,this._parents)}function l1(e,t){var r,n,i;return function(){var a=$H(this,e),o=(this.style.removeProperty(e),$H(this,e));return a===o?null:a===r&&o===n?i:i=t(r=a,n=o)}}function u1(e){return function(){this.style.removeProperty(e)}}function c1(e,t,r){var n,i,a=r+"";return function(){var o=$H(this,e);return o===a?null:o===n?i:i=t(n=o,r)}}function h1(e,t,r){var n,i,a;return function(){var o=$H(this,e),s=r(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=$H(this,e)),o===l?null:o===n&&l===i?a:(i=l,a=t(n=o,s))}}function d1(e,t){var r,n,i,a,o="style."+t,s="end."+o;return function(){var l=x0(this,e),u=l.on,c=null==l.value[o]?a||(a=u1(t)):void 0;(u!==r||i!==c)&&(n=(r=u).copy()).on(s,i=c),l.on=n}}function f1(e,t,r){var n="transform"==(e+="")?mX:S0;return null==t?this.styleTween(e,l1(e,n)).on("end.style."+e,u1(e)):"function"==typeof t?this.styleTween(e,h1(e,n,A0(this,"style."+e,t))).each(d1(this._id,e)):this.styleTween(e,c1(e,n,t),r).on("end.style."+e,null)}function p1(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function g1(e,t,r){var n,i;function a(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&p1(e,a,r)),n}return s(a,"tween"),a._value=t,a}function m1(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,g1(e,t,r??""))}function y1(e){return function(){this.textContent=e}}function v1(e){return function(){var t=e(this);this.textContent=t??""}}function x1(e){return this.tween("text","function"==typeof e?v1(A0(this,"text",e)):y1(null==e?"":e+""))}function b1(e){return function(t){this.textContent=e.call(this,t)}}function T1(e){var t,r;function n(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&b1(n)),t}return s(n,"tween"),n._value=e,n}function C1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,T1(e))}function w1(){for(var e=this._name,t=this._id,r=S1(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=b0(o,t);y0(o,e,r,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _1(n,this._parents,e,r)}function k1(){var e,t,r=this,n=r._id,i=r.size();return new Promise((function(a,o){var l={value:o},u={value:s((function(){0==--i&&a()}),"value")};r.each((function(){var r=x0(this,n),i=r.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),r.on=t})),0===i&&a()}))}s(s1,"default"),s(l1,"styleNull"),s(u1,"styleRemove"),s(c1,"styleConstant"),s(h1,"styleFunction"),s(d1,"styleMaybeRemove"),s(f1,"default"),s(p1,"styleInterpolate"),s(g1,"styleTween"),s(m1,"default"),s(y1,"textConstant"),s(v1,"textFunction"),s(x1,"default"),s(b1,"textInterpolate"),s(T1,"textTween"),s(C1,"default"),s(w1,"default"),s(k1,"default");var E1=0;function _1(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function A1(e){return Bq().transition(e)}function S1(){return++E1}s(_1,"Transition"),s(A1,"transition"),s(S1,"newId");var R1=Bq.prototype;function N1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}_1.prototype=A1.prototype={constructor:_1,select:i1,selectAll:a1,selectChild:R1.selectChild,selectChildren:R1.selectChildren,filter:Z0,merge:Q0,selection:s1,transition:w1,call:R1.call,nodes:R1.nodes,node:R1.node,size:R1.size,empty:R1.empty,each:R1.each,on:t1,attr:P0,attrTween:z0,style:f1,styleTween:m1,text:x1,textTween:C1,remove:n1,tween:_0,delay:j0,duration:H0,ease:Y0,easeVarying:K0,end:k1,[Symbol.iterator]:R1[Symbol.iterator]},s(N1,"cubicInOut");var L1={time:null,delay:0,duration:250,ease:N1};function I1(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function M1(e){var t,r;e instanceof _1?(t=e._id,e=e._name):(t=S1(),(r=L1).time=a0(),e=null==e?null:e+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],l=s.length,u=0;u<l;++u)(o=s[u])&&y0(o,e,t,u,s,r||I1(o,t));return new _1(n,this._parents,e,t)}function O1(e){return[+e[0],+e[1]]}function P1(e){return[O1(e[0]),O1(e[1])]}function D1(e){return{type:e}}function B1(e,t,r){this.k=e,this.x=t,this.y=r}s(I1,"inherit"),s(M1,"default"),Bq.prototype.interrupt=w0,Bq.prototype.transition=M1,s(O1,"number1"),s(P1,"number2"),["w","e"].map(D1),s((function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]}),"input"),s((function(e){return e&&[e[0][0],e[1][0]]}),"output"),["n","s"].map(D1),s((function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]}),"input"),s((function(e){return e&&[e[0][1],e[1][1]]}),"output"),["n","w","e","s","nw","ne","sw","se"].map(D1),s((function(e){return null==e?null:P1(e)}),"input"),s((function(e){return e}),"output"),s(D1,"type"),s(B1,"Transform"),B1.prototype={constructor:B1,scale:s((function(e){return 1===e?this:new B1(this.k*e,this.x,this.y)}),"scale"),translate:s((function(e,t){return 0===e&0===t?this:new B1(this.k,this.x+this.k*e,this.y+this.k*t)}),"translate"),apply:s((function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]}),"apply"),applyX:s((function(e){return e*this.k+this.x}),"applyX"),applyY:s((function(e){return e*this.k+this.y}),"applyY"),invert:s((function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]}),"invert"),invertX:s((function(e){return(e-this.x)/this.k}),"invertX"),invertY:s((function(e){return(e-this.y)/this.k}),"invertY"),rescaleX:s((function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))}),"rescaleX"),rescaleY:s((function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))}),"rescaleY"),toString:s((function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}),"toString")};var F1=new B1(1,0,0);function $1(e){for(;!e.__zoom;)if(!(e=e.parentNode))return F1;return e.__zoom}$1.prototype=B1.prototype,s($1,"transform");
/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE *)
*/
var z1=s((e=>{let{securityLevel:t}=nW(),r=Fq("body");if("sandbox"===t){let t=Fq(`#i${e}`).node()?.contentDocument??document;r=Fq(t.body)}return r.select(`#${e}`)}),"selectSvgElement"),U1=l(((e,t)=>{var r=1e3,n=60*r,i=60*n,a=24*i,o=7*a;function l(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return s*o;case"days":case"day":case"d":return s*a;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function u(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}function c(e){var t=Math.abs(e);return t>=a?h(e,t,a,"day"):t>=i?h(e,t,i,"hour"):t>=n?h(e,t,n,"minute"):t>=r?h(e,t,r,"second"):e+" ms"}function h(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return l(e);if("number"===r&&isFinite(e))return t.long?c(e):u(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},s(l,"parse"),s(u,"fmtShort"),s(c,"fmtLong"),s(h,"plural")})),G1=l(((e,t)=>{function r(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let t,i,a,o=null;function l(...e){if(!l.enabled)return;let n=l,i=Number(new Date),a=i-(t||i);n.diff=a,n.prev=t,n.curr=i,t=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";o++;let a=r.formatters[i];if("function"==typeof a){let r=e[o];t=a.call(n,r),e.splice(o,1),o--}return t})),r.formatArgs.call(n,e),(n.log||r.log).apply(n,e)}return s(l,"debug"),l.namespace=e,l.useColors=r.useColors(),l.color=r.selectColor(e),l.extend=n,l.destroy=r.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:s((()=>null!==o?o:(i!==r.namespaces&&(i=r.namespaces,a=r.enabled(e)),a)),"get"),set:s((e=>{o=e}),"set")}),"function"==typeof r.init&&r.init(l),l}function n(e,t){let n=r(this.namespace+(typeof t>"u"?":":t)+e);return n.log=this.log,n}function i(e){r.save(e),r.namespaces=e,r.names=[],r.skips=[];let t=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(let e of t)"-"===e[0]?r.skips.push(e.slice(1)):r.names.push(e)}function a(e,t){let r=0,n=0,i=-1,a=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,a=r,n++):(r++,n++);else{if(-1===i)return!1;n=i+1,a++,r=a}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}function o(){let e=[...r.names,...r.skips.map((e=>"-"+e))].join(",");return r.enable(""),e}function l(e){for(let t of r.skips)if(a(e,t))return!1;for(let t of r.names)if(a(e,t))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=l,r.humanize=U1(),r.destroy=c,Object.keys(e).forEach((t=>{r[t]=e[t]})),r.names=[],r.skips=[],r.formatters={},s(t,"selectColor"),r.selectColor=t,s(r,"createDebug"),s(n,"extend"),s(i,"enable"),s(a,"matchesTemplate"),s(o,"disable"),s(l,"enabled"),s(u,"coerce"),s(c,"destroy"),r.enable(r.load()),r}s(r,"setup"),t.exports=r})),j1=l(((e,t)=>{function r(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)}function i(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch{}}function a(){let t;try{t=e.storage.getItem("debug")}catch{}return!t&&typeof Up<"u"&&"env"in Up&&(t=Up.env.DEBUG),t}function o(){try{return localStorage}catch{}}e.formatArgs=n,e.save=i,e.load=a,e.useColors=r,e.storage=o(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],s(r,"useColors"),s(n,"formatArgs"),e.log=console.debug||console.log||(()=>{}),s(i,"save"),s(a,"load"),s(o,"localstorage"),t.exports=G1()(e);var{formatters:l}=t.exports;l.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),V1=Object.freeze({left:0,top:0,width:16,height:16}),W1=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),H1=Object.freeze({...V1,...W1}),q1=Object.freeze({...H1,body:"",hidden:!1}),Y1=Object.freeze({width:null,height:null}),X1=Object.freeze({...Y1,...W1}),K1=s(((e,t,r,n="")=>{let i=e.split(":");if("@"===e.slice(0,1)){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){let e=i.pop(),r=i.pop(),a={provider:i.length>0?i[0]:n,prefix:r,name:e};return t&&!Z1(a)?null:a}let a=i[0],o=a.split("-");if(o.length>1){let e={provider:n,prefix:o.shift(),name:o.join("-")};return t&&!Z1(e)?null:e}if(r&&""===n){let e={provider:n,prefix:"",name:a};return t&&!Z1(e,r)?null:e}return null}),"stringToIcon"),Z1=s(((e,t)=>!!e&&!(!(t&&""===e.prefix||e.prefix)||!e.name)),"validateIconName");function Q1(e,t){let r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);let n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function J1(e,t){let r=Q1(e,t);for(let n in q1)n in W1?n in e&&!(n in r)&&(r[n]=W1[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function e2(e,t){let r=e.icons,n=e.aliases||Object.create(null),i=Object.create(null);function a(e){if(r[e])return i[e]=[];if(!(e in i)){i[e]=null;let t=n[e]&&n[e].parent,r=t&&a(t);r&&(i[e]=[t].concat(r))}return i[e]}return s(a,"resolve"),(t||Object.keys(r).concat(Object.keys(n))).forEach(a),i}function t2(e,t,r){let n=e.icons,i=e.aliases||Object.create(null),a={};function o(e){a=J1(n[e]||i[e],a)}return s(o,"parse"),o(t),r.forEach(o),J1(e,a)}function r2(e,t){if(e.icons[t])return t2(e,t,[]);let r=e2(e,[t])[t];return r?t2(e,t,r):null}s(Q1,"mergeIconTransformations"),s(J1,"mergeIconData"),s(e2,"getIconsTree"),s(t2,"internalGetIconData"),s(r2,"getIconData");var n2=/(-?[0-9.]*[0-9]+[0-9.]*)/g,i2=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function a2(e,t,r){if(1===t)return e;if(r=r||100,"number"==typeof e)return Math.ceil(e*t*r)/r;if("string"!=typeof e)return e;let n=e.split(n2);if(null===n||!n.length)return e;let i=[],a=n.shift(),o=i2.test(a);for(;;){if(o){let e=parseFloat(a);isNaN(e)?i.push(a):i.push(Math.ceil(e*t*r)/r)}else i.push(a);if(a=n.shift(),void 0===a)return i.join("");o=!o}}function o2(e,t="defs"){let r="",n=e.indexOf("<"+t);for(;n>=0;){let i=e.indexOf(">",n),a=e.indexOf("</"+t);if(-1===i||-1===a)break;let o=e.indexOf(">",a);if(-1===o)break;r+=e.slice(i+1,a).trim(),e=e.slice(0,n).trim()+e.slice(o+1)}return{defs:r,content:e}}function s2(e,t){return e?"<defs>"+e+"</defs>"+t:t}function l2(e,t,r){let n=o2(e);return s2(n.defs,t+n.content+r)}s(a2,"calculateSize"),s(o2,"splitSVGDefs"),s(s2,"mergeDefsAndContent"),s(l2,"wrapSVGContent");var u2=s((e=>"unset"===e||"undefined"===e||"none"===e),"isUnsetKeyword");function c2(e,t){let r={...H1,...e},n={...X1,...t},i={left:r.left,top:r.top,width:r.width,height:r.height},a=r.body;[r,n].forEach((e=>{let t,r=[],n=e.hFlip,o=e.vFlip,s=e.rotate;switch(n?o?s+=2:(r.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),r.push("scale(-1 1)"),i.top=i.left=0):o&&(r.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),r.push("scale(1 -1)"),i.top=i.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:t=i.height/2+i.top,r.unshift("rotate(90 "+t.toString()+" "+t.toString()+")");break;case 2:r.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:t=i.width/2+i.left,r.unshift("rotate(-90 "+t.toString()+" "+t.toString()+")")}s%2==1&&(i.left!==i.top&&(t=i.left,i.left=i.top,i.top=t),i.width!==i.height&&(t=i.width,i.width=i.height,i.height=t)),r.length&&(a=l2(a,'<g transform="'+r.join(" ")+'">',"</g>"))}));let o,l,u=n.width,c=n.height,h=i.width,d=i.height;null===u?(l=null===c?"1em":"auto"===c?d:c,o=a2(l,h/d)):(o="auto"===u?h:u,l=null===c?a2(o,d/h):"auto"===c?d:c);let f={},p=s(((e,t)=>{u2(t)||(f[e]=t.toString())}),"setAttr");p("width",o),p("height",l);let g=[i.left,i.top,h,d];return f.viewBox=g.join(" "),{attributes:f,viewBox:g,body:a}}s(c2,"iconToSVG");var h2=/\sid="(\S+)"/g,d2="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),f2=0;function p2(e,t=d2){let r,n=[];for(;r=h2.exec(e);)n.push(r[1]);if(!n.length)return e;let i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return n.forEach((r=>{let n="function"==typeof t?t(r):t+(f2++).toString(),a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+n+i+"$3")})),e=e.replace(new RegExp(i,"g"),"")}function g2(e,t){let r=-1===e.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(let e in t)r+=" "+e+'="'+t[e]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}s(p2,"replaceIDs"),s(g2,"iconToHTML"),d(j1(),1);var m2={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},y2=new Map,v2=new Map,x2=s((e=>{for(let t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(CU.debug("Registering icon pack:",t.name),"loader"in t)v2.set(t.name,t.loader);else{if(!("icons"in t))throw CU.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');y2.set(t.name,t.icons)}}}),"registerIconPacks"),b2=s((async(e,t)=>{let r=K1(e,!0,void 0!==t);if(!r)throw new Error(`Invalid icon name: ${e}`);let n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let i=y2.get(n);if(!i){let e=v2.get(n);if(!e)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await e(),prefix:n},y2.set(n,i)}catch(e){throw CU.error(e),new Error(`Failed to load icon set: ${r.prefix}`)}}let a=r2(i,r.name);if(!a)throw new Error(`Icon not found: ${e}`);return a}),"getRegisteredIconData"),T2=s((async(e,t)=>{let r;try{r=await b2(e,t?.fallbackPrefix)}catch(e){CU.error(e),r=m2}let n=c2(r,t);return g2(p2(n.body),n.attributes)}),"getIconSVG"),C2=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BLANK_URL=e.relativeFirstCharacters=e.whitespaceEscapeCharsRegex=e.urlSchemeRegex=e.ctrlCharactersRegex=e.htmlCtrlEntityRegex=e.htmlEntitiesRegex=e.invalidProtocolRegex=void 0,e.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,e.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,e.htmlCtrlEntityRegex=/&(newline|tab);/gi,e.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,e.urlSchemeRegex=/^.+(:|&colon;)/gim,e.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,e.relativeFirstCharacters=[".","/"],e.BLANK_URL="about:blank"})),w2=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=void 0;var t=C2();function r(e){return t.relativeFirstCharacters.indexOf(e[0])>-1}function n(e){return e.replace(t.ctrlCharactersRegex,"").replace(t.htmlEntitiesRegex,(function(e,t){return String.fromCharCode(t)}))}function i(e){return URL.canParse(e)}function a(e){try{return decodeURIComponent(e)}catch{return e}}function o(e){if(!e)return t.BLANK_URL;var o,s=a(e.trim());do{o=(s=a(s=n(s).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim())).match(t.ctrlCharactersRegex)||s.match(t.htmlEntitiesRegex)||s.match(t.htmlCtrlEntityRegex)||s.match(t.whitespaceEscapeCharsRegex)}while(o&&o.length>0);var l=s;if(!l)return t.BLANK_URL;if(r(l))return l;var u=l.trimStart(),c=u.match(t.urlSchemeRegex);if(!c)return l;var h=c[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(h))return t.BLANK_URL;var d=u.replace(/\\/g,"/");if("mailto:"===h||h.includes("://"))return d;if("http:"===h||"https:"===h){if(!i(d))return t.BLANK_URL;var f=new URL(d);return f.protocol=f.protocol.toLowerCase(),f.hostname=f.hostname.toLowerCase(),f.toString()}return d}s(r,"isRelativeUrlWithoutProtocol"),s(n,"decodeHtmlCharacters"),s(i,"isValidUrl"),s(a,"decodeURI"),s(o,"sanitizeUrl"),e.sanitizeUrl=o})),k2=d(w2(),1),E2={curveBasis:rJ,curveBasisClosed:aJ,curveBasisOpen:sJ,curveBumpX:QQ,curveBumpY:JQ,curveBundle:uJ,curveCardinalClosed:pJ,curveCardinalOpen:mJ,curveCardinal:dJ,curveCatmullRomClosed:TJ,curveCatmullRomOpen:wJ,curveCatmullRom:xJ,curveLinear:WQ,curveLinearClosed:EJ,curveMonotoneX:MJ,curveMonotoneY:OJ,curveNatural:BJ,curveStep:$J,curveStepAfter:UJ,curveStepBefore:zJ},_2=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi;s((function(e,t){let r=A2(e,/(?:init\b)|(?:initialize\b)/),n={};if(Array.isArray(r)){let e=r.map((e=>e.args));HG(e),n=MU(n,[...e])}else n=r.args;if(!n)return;let i=NU(e,t),a="config";return void 0!==n[a]&&("flowchart-v2"===i&&(i="flowchart"),n[i]=n[a],delete n[a]),n}),"detectInit");var A2=s((function(e,t=null){try{let r=new RegExp(`[%]{2}(?![{]${_2.source})(?=[}][%]{2}).*\n`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),CU.debug(`Detecting diagram directive${null!==t?" type:"+t:""} based on the text:${e}`);let n,i=[];for(;null!==(n=_U.exec(e));)if(n.index===_U.lastIndex&&_U.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){let e=n[1]?n[1]:n[2],t=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;i.push({type:e,args:t})}return 0===i.length?{type:e,args:null}:1===i.length?i[0]:i}catch(r){return CU.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}}),"detectDirective");function S2(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function R2(e){let t,r=0;return e.forEach((e=>{r+=S2(e,t),t=e})),L2(e,r/2)}s((function(e){return e.replace(_U,"")}),"removeDirectives"),s((function(e,t){for(let[r,n]of t.entries())if(n.match(e))return r;return-1}),"isSubstringInArray"),s((function(e,t){if(!e)return t;let r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return E2[r]??t}),"interpolateToCurve"),s((function(e,t){let r=e.trim();if(r)return"loose"!==t.securityLevel?(0,k2.sanitizeUrl)(r):r}),"formatUrl"),s(((e,...t)=>{let r=e.split("."),n=r.length-1,i=r[n],a=window;for(let t=0;t<n;t++)if(a=a[r[t]],!a)return void CU.error(`Function name: ${e} not found in window`);a[i](...t)}),"runFunc"),s(S2,"distance"),s(R2,"traverseEdge"),s((function(e){return 1===e.length?e[0]:R2(e)}),"calcLabelPosition");var N2=s(((e,t=2)=>{let r=Math.pow(10,t);return Math.round(e*r)/r}),"roundNumber"),L2=s(((e,t)=>{let r,n=t;for(let t of e){if(r){let e=S2(t,r);if(0===e)return r;if(e<n)n-=e;else{let i=n/e;if(i<=0)return r;if(i>=1)return{x:t.x,y:t.y};if(i>0&&i<1)return{x:N2((1-i)*r.x+i*t.x,5),y:N2((1-i)*r.y+i*t.y,5)}}}r=t}throw new Error("Could not find a suitable point for the given distance")}),"calculatePoint");s(((e,t,r)=>{CU.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());let n=L2(t,25),i=e?10:5,a=Math.atan2(t[0].y-n.y,t[0].x-n.x),o={x:0,y:0};return o.x=Math.sin(a)*i+(t[0].x+n.x)/2,o.y=-Math.cos(a)*i+(t[0].y+n.y)/2,o}),"calcCardinalityPosition"),s((function(e,t,r){let n=structuredClone(r);CU.info("our points",n),"start_left"!==t&&"start_right"!==t&&n.reverse();let i=L2(n,25+e),a=10+.5*e,o=Math.atan2(n[0].y-i.y,n[0].x-i.x),s={x:0,y:0};return"start_left"===t?(s.x=Math.sin(o+Math.PI)*a+(n[0].x+i.x)/2,s.y=-Math.cos(o+Math.PI)*a+(n[0].y+i.y)/2):"end_right"===t?(s.x=Math.sin(o-Math.PI)*a+(n[0].x+i.x)/2-5,s.y=-Math.cos(o-Math.PI)*a+(n[0].y+i.y)/2-5):"end_left"===t?(s.x=Math.sin(o)*a+(n[0].x+i.x)/2-5,s.y=-Math.cos(o)*a+(n[0].y+i.y)/2-5):(s.x=Math.sin(o)*a+(n[0].x+i.x)/2,s.y=-Math.cos(o)*a+(n[0].y+i.y)/2),s}),"calcTerminalLabelPosition"),s((function(e){let t="",r="";for(let n of e)void 0!==n&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}),"getStylesFromArray");var I2=0;function M2(e){let t="",r="0123456789abcdef";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(16*Math.random()));return t}s((()=>(I2++,"id-"+Math.random().toString(36).substr(2,12)+"-"+I2)),"generateId"),s(M2,"makeRandomHex"),s((e=>M2(e.length)),"random");var O2=s((function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}}),"getTextObj"),P2=s((function(e,t){let r=t.text.replace(DV.lineBreakRegex," "),[,n]=z2(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",n),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),void 0!==t.class&&i.attr("class",t.class);let a=i.append("tspan");return a.attr("x",t.x+2*t.textMargin),a.attr("fill",t.fill),a.text(r),i}),"drawSimpleText");wm(((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),DV.lineBreakRegex.test(e)))return e;let n=e.split(" ").filter(Boolean),i=[],a="";return n.forEach(((e,o)=>{let s=B2(`${e} `,r),l=B2(a,r);if(s>t){let{hyphenatedStrings:n,remainingWord:o}=D2(e,t,"-",r);i.push(a,...n),a=o}else l+s>=t?(i.push(a),a=e):a=[a,e].filter(Boolean).join(" ");o+1===n.length&&i.push(a)})),i.filter((e=>""!==e)).join(r.joinWith)}),((e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`));var D2=wm(((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);let i=[...e],a=[],o="";return i.forEach(((e,s)=>{let l=`${o}${e}`;if(B2(l,n)>=t){let e=s+1,t=i.length===e,n=`${l}${r}`;a.push(t?l:n),o=""}else o=l})),{hyphenatedStrings:a,remainingWord:o}}),((e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`));function B2(e,t){return $2(e,t).width}s((function(e,t){return $2(e,t).height}),"calculateTextHeight"),s(B2,"calculateTextWidth");var F2,$2=wm(((e,t)=>{let{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};let[,a]=z2(r),o=["sans-serif",n],s=e.split(DV.lineBreakRegex),l=[],u=Fq("body");if(!u.remove)return{width:0,height:0,lineHeight:0};let c=u.append("svg");for(let e of o){let t=0,r={width:0,height:0,lineHeight:0};for(let n of s){let o=O2();o.text=n||"​";let s=P2(c,o).style("font-size",a).style("font-weight",i).style("font-family",e),l=(s._groups||s)[0][0].getBBox();if(0===l.width&&0===l.height)throw new Error("svg element not in render tree");r.width=Math.round(Math.max(r.width,l.width)),t=Math.round(l.height),r.height+=t,r.lineHeight=Math.round(Math.max(r.lineHeight,t))}l.push(r)}return c.remove(),l[isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1]}),((e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`));(class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}static{s(this,"InitIDGenerator")}}),s((function(e){return F2=F2||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),F2.innerHTML=e,unescape(F2.textContent)}),"entityDecode"),s((function(e){return"str"in e}),"isDetailedError"),s(((e,t,r,n)=>{if(!n)return;let i=e.node()?.getBBox();i&&e.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",t)}),"insertTitle");var z2=s((e=>{if("number"==typeof e)return[e,e+"px"];let t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]}),"parseFontSize");s((function(e,t){return Xv({},e,t)}),"cleanAndMerge"),s((function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,(function(e){return e.substring(0,e.length-1)})),t=t.replace(/classDef.*:\S*#.*;/g,(function(e){return e.substring(0,e.length-1)})),t=t.replace(/#\w+;/g,(function(e){let t=e.substring(1,e.length-1);return/^\+?\d+$/.test(t)?"ﬂ°°"+t+"¶ß":"ﬂ°"+t+"¶ß"})),t}),"encodeEntities");var U2=s((function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")}),"decodeEntities");function G2(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from("string"==typeof e?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce((function(e,t){var r=t.match(/\n([\t ]+|(?!\s).)/g);return r?e.concat(r.map((function(e){var t,r;return null!==(r=null===(t=e.match(/[\t ]/g))||void 0===t?void 0:t.length)&&void 0!==r?r:0}))):e}),[]);if(i.length){var a=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");n=n.map((function(e){return e.replace(a,"\n")}))}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach((function(e,t){var r=o.match(/(?:^|\n)( *)$/),i=r?r[1]:"",a=e;"string"==typeof e&&e.includes("\n")&&(a=String(e).split("\n").map((function(e,t){return 0===t?e:""+i+e})).join("\n")),o+=a+n[t+1]})),o}function j2(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}s(((e,t,{counter:r=0,prefix:n,suffix:i},a)=>a||`${n?`${n}_`:""}${e}_${t}_${r}${i?`_${i}`:""}`),"getEdgeId"),s((function(e){return e??null}),"handleUndefinedAttr"),s(G2,"dedent"),s(j2,"_getDefaults");var V2={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function W2(e){V2=e}s(W2,"changeDefaults");var H2={exec:s((()=>null),"exec")};function q2(e,t=""){let r="string"==typeof e?e:e.source,n={replace:s(((e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(Y2.caret,"$1"),r=r.replace(e,i),n}),"replace"),getRegex:s((()=>new RegExp(r,t)),"getRegex")};return n}s(q2,"edit");var Y2={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s((e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`)),"listItemRegex"),nextBulletRegex:s((e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`)),"nextBulletRegex"),hrRegex:s((e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`)),"hrRegex"),fencesBeginRegex:s((e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`)),"fencesBeginRegex"),headingBeginRegex:s((e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`)),"headingBeginRegex"),htmlBeginRegex:s((e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")),"htmlBeginRegex")},X2=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,K2=/(?:[*+-]|\d{1,9}[.)])/,Z2=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Q2=q2(Z2).replace(/bull/g,K2).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),J2=q2(Z2).replace(/bull/g,K2).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),e5=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,t5=/(?!\s*\])(?:\\.|[^\[\]\\])+/,r5=q2(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",t5).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),n5=q2(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,K2).getRegex(),i5="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",a5=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,o5=q2("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",a5).replace("tag",i5).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),s5=q2(e5).replace("hr",X2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",i5).getRegex(),l5={blockquote:q2(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",s5).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:r5,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:X2,html:o5,lheading:Q2,list:n5,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:s5,table:H2,text:/^[^\n]+/},u5=q2("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",X2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",i5).getRegex(),c5={...l5,lheading:J2,table:u5,paragraph:q2(e5).replace("hr",X2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",u5).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",i5).getRegex()},h5={...l5,html:q2("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",a5).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:H2,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:q2(e5).replace("hr",X2).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Q2).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},d5=/^( {2,}|\\)\n(?!\s*$)/,f5=/[\p{P}\p{S}]/u,p5=/[\s\p{P}\p{S}]/u,g5=/[^\s\p{P}\p{S}]/u,m5=q2(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,p5).getRegex(),y5=/(?!~)[\p{P}\p{S}]/u,v5=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,x5=q2(v5,"u").replace(/punct/g,f5).getRegex(),b5=q2(v5,"u").replace(/punct/g,y5).getRegex(),T5="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",C5=q2(T5,"gu").replace(/notPunctSpace/g,g5).replace(/punctSpace/g,p5).replace(/punct/g,f5).getRegex(),w5=q2(T5,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,y5).getRegex(),k5=q2("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,g5).replace(/punctSpace/g,p5).replace(/punct/g,f5).getRegex(),E5=q2(/\\(punct)/,"gu").replace(/punct/g,f5).getRegex(),_5=q2(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),A5=q2(a5).replace("(?:--\x3e|$)","--\x3e").getRegex(),S5=q2("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",A5).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),R5=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,N5=q2(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",R5).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),L5=q2(/^!?\[(label)\]\[(ref)\]/).replace("label",R5).replace("ref",t5).getRegex(),I5=q2(/^!?\[(ref)\](?:\[\])?/).replace("ref",t5).getRegex(),M5={_backpedal:H2,anyPunctuation:E5,autolink:_5,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:d5,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:H2,emStrongLDelim:x5,emStrongRDelimAst:C5,emStrongRDelimUnd:k5,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:N5,nolink:I5,punctuation:m5,reflink:L5,reflinkSearch:q2("reflink|nolink(?!\\()","g").replace("reflink",L5).replace("nolink",I5).getRegex(),tag:S5,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:H2},O5={...M5,link:q2(/^!?\[(label)\]\((.*?)\)/).replace("label",R5).getRegex(),reflink:q2(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",R5).getRegex()},P5={...M5,emStrongRDelimAst:w5,emStrongLDelim:b5,url:q2(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},D5={...P5,br:q2(d5).replace("{2,}","*").getRegex(),text:q2(P5.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},B5={normal:l5,gfm:c5,pedantic:h5},F5={normal:M5,gfm:P5,breaks:D5,pedantic:O5},$5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z5=s((e=>$5[e]),"getEscapeReplacement");function U5(e,t){if(t){if(Y2.escapeTest.test(e))return e.replace(Y2.escapeReplace,z5)}else if(Y2.escapeTestNoEncode.test(e))return e.replace(Y2.escapeReplaceNoEncode,z5);return e}function G5(e){try{e=encodeURI(e).replace(Y2.percentDecode,"%")}catch{return null}return e}function j5(e,t){let r=e.replace(Y2.findPipe,((e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"})),n=r.split(Y2.splitPipe),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(Y2.slashPipe,"|");return n}function V5(e,t,r){let n=e.length;if(0===n)return"";let i=0;for(;i<n&&e.charAt(n-i-1)===t;)i++;return e.slice(0,n-i)}function W5(e,t){if(-1===e.indexOf(t[1]))return-1;let r=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return-1}function H5(e,t,r,n,i){let a=t.href,o=t.title||null,s=e[1].replace(i.other.outputLinkReplace,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;let e={type:"link",raw:r,href:a,title:o,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,e}return{type:"image",raw:r,href:a,title:o,text:s}}function q5(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(null===n)return t;let i=n[1];return t.split("\n").map((e=>{let t=e.match(r.other.beginningSpace);if(null===t)return e;let[n]=t;return n.length>=i.length?e.slice(i.length):e})).join("\n")}s(U5,"escape"),s(G5,"cleanUrl"),s(j5,"splitCells"),s(V5,"rtrim"),s(W5,"findClosingBracket"),s(H5,"outputLink"),s(q5,"indentCodeCompensation");var Y5=class{static{s(this,"_Tokenizer")}options;rules;lexer;constructor(e){this.options=e||V2}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:V5(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],r=q5(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=V5(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:V5(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=V5(t[0],"\n").split("\n"),r="",n="",i=[];for(;e.length>0;){let t,a=!1,o=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))o.push(e[t]),a=!0;else{if(a)break;o.push(e[t])}e=e.slice(t);let s=o.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}\n${s}`:s,n=n?`${n}\n${l}`:l;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=u,0===e.length)break;let c=i.at(-1);if("code"===c?.type)break;if("blockquote"===c?.type){let t=c,a=t.raw+"\n"+e.join("\n"),o=this.blockquote(a);i[i.length-1]=o,r=r.substring(0,r.length-t.raw.length)+o.raw,n=n.substring(0,n.length-t.text.length)+o.text;break}if("list"!==c?.type);else{let t=c,a=t.raw+"\n"+e.join("\n"),o=this.list(a);i[i.length-1]=o,r=r.substring(0,r.length-c.raw.length)+o.raw,n=n.substring(0,n.length-t.raw.length)+o.raw,e=a.substring(i.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let a=this.rules.other.listItemRegex(r),o=!1;for(;e;){let r=!1,n="",s="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),u=e.split("\n",1)[0],c=!l.trim(),h=0;if(this.options.pedantic?(h=2,s=l.trimStart()):c?h=t[1].length+1:(h=t[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,s=l.slice(h),h+=t[1].length),c&&this.rules.other.blankLine.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),r=!0),!r){let t=this.rules.other.nextBulletRegex(h),r=this.rules.other.hrRegex(h),i=this.rules.other.fencesBeginRegex(h),a=this.rules.other.headingBeginRegex(h),o=this.rules.other.htmlBeginRegex(h);for(;e;){let d,f=e.split("\n",1)[0];if(u=f,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),d=u):d=u.replace(this.rules.other.tabCharGlobal,"    "),i.test(u)||a.test(u)||o.test(u)||t.test(u)||r.test(u))break;if(d.search(this.rules.other.nonSpaceChar)>=h||!u.trim())s+="\n"+d.slice(h);else{if(c||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||i.test(l)||a.test(l)||r.test(l))break;s+="\n"+u}!c&&!u.trim()&&(c=!0),n+=f+"\n",e=e.substring(f.length+1),l=d.slice(h)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(n)&&(o=!0));let d,f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(s),f&&(d="[ ] "!==f[0],s=s.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:n,task:!!f,checked:d,loose:!1,text:s,tokens:[]}),i.raw+=n}let s=i.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter((e=>"space"===e.type)),r=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));i.loose=r}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=j5(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let e of n)this.rules.other.tableAlignRight.test(e)?a.align.push("right"):this.rules.other.tableAlignCenter.test(e)?a.align.push("center"):this.rules.other.tableAlignLeft.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<r.length;e++)a.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:a.align[e]});for(let e of i)a.rows.push(j5(e,a.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]}))));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=V5(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=W5(t[2],"()");if(e>-1){let r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r.slice(1):r.slice(1,-1)),H5(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=t[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return H5(r,e,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!n[1]&&!n[2]||!r||this.rules.inline.punctuation.exec(r))){let r,i,a=[...n[0]].length-1,o=a,s=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+a);null!=(n=l.exec(t));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(i=[...r].length,n[3]||n[4]){o+=i;continue}if((n[5]||n[6])&&a%3&&!((a+i)%3)){s+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+s);let t=[...n[0]][0].length,l=e.slice(0,a+n.index+t+i);if(Math.min(a,i)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let u=l.slice(2,-2);return{type:"strong",raw:l,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,r;return"@"===t[2]?(e=t[1],r="mailto:"+e):(e=t[1],r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])e=t[0],r="mailto:"+e;else{let n;do{n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(n!==t[0]);e=t[0],r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},X5=class e{static{s(this,"_Lexer")}tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||V2,this.options.tokenizer=this.options.tokenizer||new Y5,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Y2,block:B5.normal,inline:F5.normal};this.options.pedantic?(t.block=B5.pedantic,t.inline=F5.pedantic):this.options.gfm&&(t.block=B5.gfm,this.options.breaks?t.inline=F5.breaks:t.inline=F5.gfm),this.tokenizer.rules=t}static get rules(){return{block:B5,inline:F5}}static lex(t,r){return new e(r).lex(t)}static lexInline(t,r){return new e(r).inlineTokens(t)}lex(e){e=e.replace(Y2.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(Y2.tabCharGlobal,"    ").replace(Y2.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let r=t.at(-1);1===n.raw.length&&void 0!==r?r.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let r=t.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let r=t.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let i=e;if(this.options.extensions?.startBlock){let t,r=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach((e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(r=Math.min(r,t))})),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let a=t.at(-1);r&&"paragraph"===a?.type?(a.raw+="\n"+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(n),r=i.length!==e.length,e=e.substring(n.raw.length)}else if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let r=t.at(-1);"text"===r?.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(n)}else if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,n=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(r));)e.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(r));)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(r));)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i=!1,a="";for(;e;){let n;if(i||(a=""),i=!1,this.options.extensions?.inline?.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))continue;if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);let r=t.at(-1);"text"===n.type&&"text"===r?.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,r,a)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let o=e;if(this.options.extensions?.startInline){let t,r=1/0,n=e.slice(1);this.options.extensions.startInline.forEach((e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(r=Math.min(r,t))})),r<1/0&&r>=0&&(o=e.substring(0,r+1))}if(n=this.tokenizer.inlineText(o)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),i=!0;let r=t.at(-1);"text"===r?.type?(r.raw+=n.raw,r.text+=n.text):t.push(n)}else if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},K5=class{static{s(this,"_Renderer")}options;parser;constructor(e){this.options=e||V2}space(e){return""}code({text:e,lang:t,escaped:r}){let n=(t||"").match(Y2.notSpaceStart)?.[0],i=e.replace(Y2.endingNewline,"")+"\n";return n?'<pre><code class="language-'+U5(n)+'">'+(r?i:U5(i,!0))+"</code></pre>\n":"<pre><code>"+(r?i:U5(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,r=e.start,n="";for(let t=0;t<e.items.length;t++){let r=e.items[t];n+=this.listitem(r)}let i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+i+">\n"}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+U5(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.tablecell(e.header[t]);t+=this.tablerow({text:r});let n="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];r="";for(let e=0;e<i.length;e++)r+=this.tablecell(i[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${U5(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=G5(e);if(null===i)return n;let a='<a href="'+(e=i)+'"';return t&&(a+=' title="'+U5(t)+'"'),a+=">"+n+"</a>",a}image({href:e,title:t,text:r}){let n=G5(e);if(null===n)return U5(r);let i=`<img src="${e=n}" alt="${r}"`;return t&&(i+=` title="${U5(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:U5(e.text)}},Z5=class{static{s(this,"_TextRenderer")}strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Q5=class e{static{s(this,"_Parser")}options;renderer;textRenderer;constructor(e){this.options=e||V2,this.options.renderer=this.options.renderer||new K5,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Z5}static parse(t,r){return new e(r).parse(t)}static parseInline(t,r){return new e(r).parseInline(t)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){r+=t||"";continue}}let a=i;switch(a.type){case"space":r+=this.renderer.space(a);continue;case"hr":r+=this.renderer.hr(a);continue;case"heading":r+=this.renderer.heading(a);continue;case"code":r+=this.renderer.code(a);continue;case"table":r+=this.renderer.table(a);continue;case"blockquote":r+=this.renderer.blockquote(a);continue;case"list":r+=this.renderer.list(a);continue;case"html":r+=this.renderer.html(a);continue;case"paragraph":r+=this.renderer.paragraph(a);continue;case"text":{let i=a,o=this.renderer.text(i);for(;n+1<e.length&&"text"===e[n+1].type;)i=e[++n],o+="\n"+this.renderer.text(i);r+=t?this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o,escaped:!0}]}):o;continue}default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}parseInline(e,t=this.renderer){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=e||"";continue}}let a=i;switch(a.type){case"escape":case"text":r+=t.text(a);break;case"html":r+=t.html(a);break;case"link":r+=t.link(a);break;case"image":r+=t.image(a);break;case"strong":r+=t.strong(a);break;case"em":r+=t.em(a);break;case"codespan":r+=t.codespan(a);break;case"br":r+=t.br(a);break;case"del":r+=t.del(a);break;default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}},J5=class{static{s(this,"_Hooks")}options;block;constructor(e){this.options=e||V2}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?X5.lex:X5.lexInline}provideParser(){return this.block?Q5.parse:Q5.parseInline}},e3=class{static{s(this,"Marked")}defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Q5;Renderer=K5;TextRenderer=Z5;Lexer=X5;Tokenizer=Y5;Hooks=J5;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":{let e=n;for(let n of e.header)r=r.concat(this.walkTokens(n.tokens,t));for(let n of e.rows)for(let e of n)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=n;r=r.concat(this.walkTokens(e.items,t));break}default:{let e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((n=>{let i=e[n].flat(1/0);r=r.concat(this.walkTokens(i,t))})):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let r=t.renderers[e.name];t.renderers[e.name]=r?function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),r.extensions=t),e.renderer){let t=this.defaults.renderer||new K5(this.defaults);for(let r in e.renderer){if(!(r in t))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let n=r,i=e.renderer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new Y5(this.defaults);for(let r in e.tokenizer){if(!(r in t))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let n=r,i=e.tokenizer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new J5;for(let r in e.hooks){if(!(r in t))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let n=r,i=e.hooks[n],a=t[n];J5.passThroughHooks.has(r)?t[n]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>a.call(t,e)));let r=i.call(t,e);return a.call(t,r)}:t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return X5.lex(e,t??this.defaults)}parser(e,t){return Q5.parse(e,t??this.defaults)}parseMarkdown(e){return s(((t,r)=>{let n={...r},i={...this.defaults,...n},a=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===n.async)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let o=i.hooks?i.hooks.provideLexer():e?X5.lex:X5.lexInline,s=i.hooks?i.hooks.provideParser():e?Q5.parse:Q5.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then((e=>o(e,i))).then((e=>i.hooks?i.hooks.processAllTokens(e):e)).then((e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then((()=>e)):e)).then((e=>s(e,i))).then((e=>i.hooks?i.hooks.postprocess(e):e)).catch(a);try{i.hooks&&(t=i.hooks.preprocess(t));let e=o(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let r=s(e,i);return i.hooks&&(r=i.hooks.postprocess(r)),r}catch(e){return a(e)}}),"parse")}onError(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+U5(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}},t3=new e3;function r3(e,t){return t3.parse(e,t)}function n3(e,{markdownAutoWrap:t}){let r=G2(e.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"));return!1===t?r.replace(/ /g,"&nbsp;"):r}function i3(e,t={}){let r=n3(e,t),n=r3.lexer(r),i=[[]],a=0;function o(e,t="normal"){"text"===e.type?e.text.split("\n").forEach(((e,r)=>{0!==r&&(a++,i.push([])),e.split(" ").forEach((e=>{(e=e.replace(/&#39;/g,"'"))&&i[a].push({content:e,type:t})}))})):"strong"===e.type||"em"===e.type?e.tokens.forEach((t=>{o(t,e.type)})):"html"===e.type&&i[a].push({content:e.text,type:"normal"})}return s(o,"processNode"),n.forEach((e=>{"paragraph"===e.type?e.tokens?.forEach((e=>{o(e)})):"html"===e.type&&i[a].push({content:e.text,type:"normal"})})),i}function a3(e,{markdownAutoWrap:t}={}){let r=r3.lexer(e);function n(e){return"text"===e.type?!1===t?e.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):e.text.replace(/\n */g,"<br/>"):"strong"===e.type?`<strong>${e.tokens?.map(n).join("")}</strong>`:"em"===e.type?`<em>${e.tokens?.map(n).join("")}</em>`:"paragraph"===e.type?`<p>${e.tokens?.map(n).join("")}</p>`:"space"===e.type?"":"html"===e.type?`${e.text}`:"escape"===e.type?e.text:`Unsupported markdown: ${e.type}`}return s(n,"output"),r.map(n).join("")}function o3(e){return Intl.Segmenter?[...(new Intl.Segmenter).segment(e)].map((e=>e.segment)):[...e]}function s3(e,t){return l3(e,[],o3(t.content),t.type)}function l3(e,t,r,n){if(0===r.length)return[{content:t.join(""),type:n},{content:"",type:n}];let[i,...a]=r,o=[...t,i];return e([{content:o.join(""),type:n}])?l3(e,o,a,n):(0===t.length&&i&&(t.push(i),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}function u3(e,t){if(e.some((({content:e})=>e.includes("\n"))))throw new Error("splitLineToFitWidth does not support newlines in the line");return c3(e,t)}function c3(e,t,r=[],n=[]){if(0===e.length)return n.length>0&&r.push(n),r.length>0?r:[];let i="";" "===e[0].content&&(i=" ",e.shift());let a=e.shift()??{content:" ",type:"normal"},o=[...n];if(""!==i&&o.push({content:i,type:"normal"}),o.push(a),t(o))return c3(e,t,r,o);if(n.length>0)r.push(n),e.unshift(a);else if(a.content){let[n,i]=s3(t,a);r.push([n]),i.content&&e.unshift(i)}return c3(e,t,r)}function h3(e,t){t&&e.attr("style",t)}async function d3(e,t,r,n,i=!1){let a=e.append("foreignObject");a.attr("width",10*r+"px"),a.attr("height",10*r+"px");let o=a.append("xhtml:div"),s=t.label;t.label&&OV(t.label)&&(s=await PV(t.label.replace(DV.lineBreakRegex,"\n"),nW()));let l=t.isNode?"nodeLabel":"edgeLabel",u=o.append("span");u.html(s),h3(u,t.labelStyle),u.attr("class",`${l} ${n}`),h3(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&o.attr("class","labelBkg");let c=o.node().getBoundingClientRect();return c.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),c=o.node().getBoundingClientRect()),a.node()}function f3(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}function p3(e,t,r){let n=e.append("text"),i=f3(n,1,t);m3(i,r);let a=i.node().getComputedTextLength();return n.remove(),a}function g3(e,t,r,n=!1){let i=t.append("g"),a=i.insert("rect").attr("class","background").attr("style","stroke: none"),o=i.append("text").attr("y","-10.1"),l=0;for(let t of r){let r=s((t=>p3(i,1.1,t)<=e),"checkWidth"),n=r(t)?[t]:u3(t,r);for(let e of n){m3(f3(o,l,1.1),e),l++}}if(n){let e=o.node().getBBox(),t=2;return a.attr("x",e.x-t).attr("y",e.y-t).attr("width",e.width+2*t).attr("height",e.height+2*t),i.node()}return o.node()}function m3(e,t){e.text(""),t.forEach(((t,r)=>{let n=e.append("tspan").attr("font-style","em"===t.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===t.type?"bold":"normal");0===r?n.text(t.content):n.text(" "+t.content)}))}function y3(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,(e=>`<i class='${e.replace(":"," ")}'></i>`))}s(r3,"marked"),r3.options=r3.setOptions=function(e){return t3.setOptions(e),r3.defaults=t3.defaults,W2(r3.defaults),r3},r3.getDefaults=j2,r3.defaults=V2,r3.use=function(...e){return t3.use(...e),r3.defaults=t3.defaults,W2(r3.defaults),r3},r3.walkTokens=function(e,t){return t3.walkTokens(e,t)},r3.parseInline=t3.parseInline,r3.Parser=Q5,r3.parser=Q5.parse,r3.Renderer=K5,r3.TextRenderer=Z5,r3.Lexer=X5,r3.lexer=X5.lex,r3.Tokenizer=Y5,r3.Hooks=J5,r3.parse=r3,r3.options,r3.setOptions,r3.use,r3.walkTokens,r3.parseInline,Q5.parse,X5.lex,s(n3,"preprocessMarkdown"),s(i3,"markdownToLines"),s(a3,"markdownToHTML"),s(o3,"splitTextToChars"),s(s3,"splitWordToFitWidth"),s(l3,"splitWordToFitWidthRecursion"),s(u3,"splitLineToFitWidth"),s(c3,"splitLineToFitWidthRecursion"),s(h3,"applyStyle"),s(d3,"addHtmlSpan"),s(f3,"createTspan"),s(p3,"computeWidthOfText"),s((function(e,t,r){let n=e.append("text"),i=f3(n,1,t);m3(i,[{content:r,type:"normal"}]);let a=i.node()?.getBoundingClientRect();return a&&n.remove(),a}),"computeDimensionOfText"),s(g3,"createFormattedText"),s(m3,"updateTextContentAndStyles"),s(y3,"replaceIconSubstring");var v3=s((async(e,t="",{style:r="",isTitle:n=!1,classes:i="",useHtmlLabels:a=!0,isNode:o=!0,width:s=200,addSvgBackground:l=!1}={},u)=>{if(CU.debug("XYZ createText",t,r,n,i,a,o,"addSvgBackground: ",l),a){let n=a3(t,u),a=y3(U2(n)),c=t.replace(/\\\\/g,"\\"),h={isNode:o,label:OV(t)?c:a,labelStyle:r.replace("fill:","color:")};return await d3(e,h,s,i,l)}{let n=g3(s,e,i3(t.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),u),!!t&&l);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));let e=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Fq(n).attr("style",e)}else{let e=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Fq(n).select("rect").attr("style",e.replace(/background:/g,"fill:"));let t=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Fq(n).select("text").attr("style",t)}return n}}),"createText"),x3=class extends eU{static{s(this,"InfoTokenBuilder")}static{G$(this,"InfoTokenBuilder")}constructor(){super(["info","showInfo"])}},b3={parser:{TokenBuilder:G$((()=>new x3),"TokenBuilder"),ValueConverter:G$((()=>new Jz),"ValueConverter")}};function T3(e=D$){let t=w$(C$(e),Vz),r=w$(T$({shared:t}),Wz,b3);return t.ServiceRegistry.register(r),{shared:t,Info:r}}s(T3,"createInfoServices"),G$(T3,"createInfoServices");var C3=class extends eU{static{s(this,"PacketTokenBuilder")}static{G$(this,"PacketTokenBuilder")}constructor(){super(["packet-beta"])}},w3={parser:{TokenBuilder:G$((()=>new C3),"TokenBuilder"),ValueConverter:G$((()=>new Jz),"ValueConverter")}};function k3(e=D$){let t=w$(C$(e),Vz),r=w$(T$({shared:t}),Hz,w3);return t.ServiceRegistry.register(r),{shared:t,Packet:r}}s(k3,"createPacketServices"),G$(k3,"createPacketServices");var E3=l(((e,t)=>{s((function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof e?e.layoutBase=n():r.layoutBase=n()}),"webpackUniversalModuleDefinition")(e,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return s(r,"__webpack_require__"),r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?s((function(){return e.default}),"getDefault"):s((function(){return e}),"getModuleExports");return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t,r){function n(){}s(n,"LayoutConstants"),n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,e.exports=n},function(e,t,r){var n=r(2),i=r(8),a=r(9);function o(e,t,r){n.call(this,r),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=r,this.bendpoints=[],this.source=e,this.target=t}for(var l in s(o,"LEdge"),o.prototype=Object.create(n.prototype),n)o[l]=n[l];o.prototype.getSource=function(){return this.source},o.prototype.getTarget=function(){return this.target},o.prototype.isInterGraph=function(){return this.isInterGraph},o.prototype.getLength=function(){return this.length},o.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},o.prototype.getBendpoints=function(){return this.bendpoints},o.prototype.getLca=function(){return this.lca},o.prototype.getSourceInLca=function(){return this.sourceInLca},o.prototype.getTargetInLca=function(){return this.targetInLca},o.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},o.prototype.getOtherEndInGraph=function(e,t){for(var r=this.getOtherEnd(e),n=t.getGraphManager().getRoot();;){if(r.getOwner()==t)return r;if(r.getOwner()==n)break;r=r.getOwner().getParent()}return null},o.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},o.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=o},function(e,t,r){function n(e){this.vGraphObject=e}s(n,"LGraphObject"),e.exports=n},function(e,t,r){var n=r(2),i=r(10),a=r(13),o=r(0),l=r(16),u=r(5);function c(e,t,r,o){null==r&&null==o&&(o=t),n.call(this,o),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=o,this.edges=[],this.graphManager=e,this.rect=null!=r&&null!=t?new a(t.x,t.y,r.width,r.height):new a}for(var h in s(c,"LNode"),c.prototype=Object.create(n.prototype),n)c[h]=n[h];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(e){this.rect.width=e},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(e){this.rect.height=e},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},c.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},c.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},c.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},c.prototype.getEdgeListToNode=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.target==e){if(n.source!=r)throw"Incorrect edge source!";t.push(n)}})),t},c.prototype.getEdgesBetween=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.source!=r&&n.target!=r)throw"Incorrect edge source and/or target";(n.target==e||n.source==e)&&t.push(n)})),t},c.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach((function(r){if(r.source==t)e.add(r.target);else{if(r.target!=t)throw"Incorrect incidency!";e.add(r.source)}})),e},c.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),r=0;r<t.length;r++)t[r].withChildren().forEach((function(t){e.add(t)}));return e},c.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),r=0;r<t.length;r++)e+=t[r].getNoOfChildren();return 0==e&&(e=1),e},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var e,t,r=-o.INITIAL_WORLD_BOUNDARY,n=o.INITIAL_WORLD_BOUNDARY;e=o.WORLD_CENTER_X+l.nextDouble()*(n-r)+r;var i=-o.INITIAL_WORLD_BOUNDARY,a=o.INITIAL_WORLD_BOUNDARY;t=o.WORLD_CENTER_Y+l.nextDouble()*(a-i)+i,this.rect.x=e,this.rect.y=t},c.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),o.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),r=e.getBottom()-e.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(t+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>t?(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(t+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(r+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>r?(this.rect.y-=(this.labelHeight-r)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(r+this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(e){var t=this.rect.x;t>o.WORLD_BOUNDARY?t=o.WORLD_BOUNDARY:t<-o.WORLD_BOUNDARY&&(t=-o.WORLD_BOUNDARY);var r=this.rect.y;r>o.WORLD_BOUNDARY?r=o.WORLD_BOUNDARY:r<-o.WORLD_BOUNDARY&&(r=-o.WORLD_BOUNDARY);var n=new u(t,r),i=e.inverseTransformPoint(n);this.setLocation(i.x,i.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=c},function(e,t,r){var n=r(0);function i(){}for(var a in s(i,"FDLayoutConstants"),n)i[a]=n[a];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,r){function n(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}s(n,"PointD"),n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(e){this.x=e},n.prototype.setY=function(e){this.y=e},n.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=n},function(e,t,r){var n=r(2),i=r(10),a=r(0),o=r(7),l=r(3),u=r(1),c=r(13),h=r(12),d=r(11);function f(e,t,r){n.call(this,r),this.estimatedSize=i.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof o?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var p in s(f,"LGraph"),f.prototype=Object.create(n.prototype),n)f[p]=n[p];f.prototype.getNodes=function(){return this.nodes},f.prototype.getEdges=function(){return this.edges},f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getParent=function(){return this.parent},f.prototype.getLeft=function(){return this.left},f.prototype.getRight=function(){return this.right},f.prototype.getTop=function(){return this.top},f.prototype.getBottom=function(){return this.bottom},f.prototype.isConnected=function(){return this.isConnected},f.prototype.add=function(e,t,r){if(null==t&&null==r){var n=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(n)>-1)throw"Node already in graph!";return n.owner=this,this.getNodes().push(n),n}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(r)>-1))throw"Source or target not in graph!";if(t.owner!=r.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=r.owner?null:(i.source=t,i.target=r,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),r!=t&&r.edges.push(i),i)},f.prototype.remove=function(e){var t=e;if(e instanceof l){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var r=t.edges.slice(),n=r.length,i=0;i<n;i++)(a=r[i]).isInterGraph?this.graphManager.remove(a):a.source.owner.remove(a);if(-1==(o=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(o,1)}else if(e instanceof u){var a;if(null==(a=e))throw"Edge is null!";if(null==a.source||null==a.target)throw"Source and/or target is null!";if(null==a.source.owner||null==a.target.owner||a.source.owner!=this||a.target.owner!=this)throw"Source and/or target owner is invalid!";var o,s=a.source.edges.indexOf(a),c=a.target.edges.indexOf(a);if(!(s>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(a.source.edges.splice(s,1),a.target!=a.source&&a.target.edges.splice(c,1),-1==(o=a.source.owner.getEdges().indexOf(a)))throw"Not in owner's edge list!";a.source.owner.getEdges().splice(o,1)}},f.prototype.updateLeftTop=function(){for(var e,t,r,n=i.MAX_VALUE,a=i.MAX_VALUE,o=this.getNodes(),s=o.length,l=0;l<s;l++){var u=o[l];n>(e=u.getTop())&&(n=e),a>(t=u.getLeft())&&(a=t)}return n==i.MAX_VALUE?null:(r=null!=o[0].getParent().paddingLeft?o[0].getParent().paddingLeft:this.margin,this.left=a-r,this.top=n-r,new h(this.left,this.top))},f.prototype.updateBounds=function(e){for(var t,r,n,a,o,s=i.MAX_VALUE,l=-i.MAX_VALUE,u=i.MAX_VALUE,h=-i.MAX_VALUE,d=this.nodes,f=d.length,p=0;p<f;p++){var g=d[p];e&&null!=g.child&&g.updateBounds(),s>(t=g.getLeft())&&(s=t),l<(r=g.getRight())&&(l=r),u>(n=g.getTop())&&(u=n),h<(a=g.getBottom())&&(h=a)}var m=new c(s,u,l-s,h-u);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),o=null!=d[0].getParent().paddingLeft?d[0].getParent().paddingLeft:this.margin,this.left=m.x-o,this.right=m.x+m.width+o,this.top=m.y-o,this.bottom=m.y+m.height+o},f.calculateBounds=function(e){for(var t,r,n,a,o=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,u=-i.MAX_VALUE,h=e.length,d=0;d<h;d++){var f=e[d];o>(t=f.getLeft())&&(o=t),s<(r=f.getRight())&&(s=r),l>(n=f.getTop())&&(l=n),u<(a=f.getBottom())&&(u=a)}return new c(o,l,s-o,u-l)},f.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,r=t.length,n=0;n<r;n++){e+=t[n].calcEstimatedSize()}return this.estimatedSize=0==e?a.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},f.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,r,n=new d,i=new Set,a=this.nodes[0];for(a.withChildren().forEach((function(e){n.push(e),i.add(e)}));0!==n.length;)for(var o=(t=(a=n.shift()).getEdges()).length,s=0;s<o;s++){if(null!=(r=t[s].getOtherEndInGraph(a,this))&&!i.has(r))r.withChildren().forEach((function(e){n.push(e),i.add(e)}))}if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach((function(t){t.owner==e&&l++})),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=f},function(e,t,r){var n,i=r(1);function a(e){n=r(6),this.layout=e,this.graphs=[],this.edges=[]}s(a,"LGraphManager"),a.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),r=this.add(e,t);return this.setRootGraph(r),this.rootGraph},a.prototype.add=function(e,t,r,n,i){if(null==r&&null==n&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=r,r=e;var a=(n=t).getOwner(),o=i.getOwner();if(null==a||a.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==o||o.getGraphManager()!=this)throw"Target not in this graph mgr!";if(a==o)return r.isInterGraph=!1,a.add(r,n,i);if(r.isInterGraph=!0,r.source=n,r.target=i,this.edges.indexOf(r)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(r),null==r.source||null==r.target)throw"Edge source and/or target is null!";if(-1!=r.source.edges.indexOf(r)||-1!=r.target.edges.indexOf(r))throw"Edge already in source and/or target incidency list!";return r.source.edges.push(r),r.target.edges.push(r),r},a.prototype.remove=function(e){if(e instanceof n){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var r,a=[],o=(a=a.concat(t.getEdges())).length,s=0;s<o;s++)r=a[s],t.remove(r);var l,u=[];o=(u=u.concat(t.getNodes())).length;for(s=0;s<o;s++)l=u[s],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof i){if(null==(r=e))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";c=r.source.edges.indexOf(r);if(r.source.edges.splice(c,1),c=r.target.edges.indexOf(r),r.target.edges.splice(c,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";c=r.source.owner.getGraphManager().edges.indexOf(r);r.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),r=t.length,n=0;n<r;n++)e=e.concat(t[n].getNodes());this.allNodes=e}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),r=(t.length,0);r<t.length;r++)e=e.concat(t[r].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var r,n=e.getOwner();;){if(null==(r=n.getParent()))break;if(r==t)return!0;if(null==(n=r.getOwner()))break}for(n=t.getOwner();;){if(null==(r=n.getParent()))break;if(r==e)return!0;if(null==(n=r.getOwner()))break}return!1},a.prototype.calcLowestCommonAncestors=function(){for(var e,t,r,n,i,a=this.getAllEdges(),o=a.length,s=0;s<o;s++)if(t=(e=a[s]).source,r=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=r,t!=r){for(n=t.getOwner();null==e.lca;){for(e.targetInLca=r,i=r.getOwner();null==e.lca;){if(i==n){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(n==this.rootGraph)break;null==e.lca&&(e.sourceInLca=n.getParent(),n=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},a.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var r=e.getOwner();;){if(null==r)break;for(var n=t.getOwner();;){if(null==n)break;if(n==r)return n;n=n.getParent().getOwner()}r=r.getParent().getOwner()}return r},a.prototype.calcInclusionTreeDepths=function(e,t){null==e&&null==t&&(e=this.rootGraph,t=1);for(var r,n=e.getNodes(),i=n.length,a=0;a<i;a++)(r=n[a]).inclusionTreeDepth=t,null!=r.child&&this.calcInclusionTreeDepths(r.child,t+1)},a.prototype.includesInvalidEdge=function(){for(var e,t=[],r=this.edges.length,n=0;n<r;n++)e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target)&&t.push(e);for(n=0;n<t.length;n++)this.remove(t[n]);return!1},e.exports=a},function(e,t,r){var n=r(12);function i(){}s(i,"IGeometry"),i.calcSeparationAmount=function(e,t,r,n){if(!e.intersects(t))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,i),r[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),r[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(a=1);var o=a*r[0],s=r[1]/a;r[0]<s?s=r[0]:o=r[1],r[0]=-1*i[0]*(s/2+n),r[1]=-1*i[1]*(o/2+n)},i.decideDirectionsForOverlappingNodes=function(e,t,r){e.getCenterX()<t.getCenterX()?r[0]=-1:r[0]=1,e.getCenterY()<t.getCenterY()?r[1]=-1:r[1]=1},i.getIntersection2=function(e,t,r){var n=e.getCenterX(),i=e.getCenterY(),a=t.getCenterX(),o=t.getCenterY();if(e.intersects(t))return r[0]=n,r[1]=i,r[2]=a,r[3]=o,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),d=e.getRight(),f=e.getWidthHalf(),p=e.getHeightHalf(),g=t.getX(),m=t.getY(),y=t.getRight(),v=t.getX(),x=t.getBottom(),b=t.getRight(),T=t.getWidthHalf(),C=t.getHeightHalf(),w=!1,k=!1;if(n===a){if(i>o)return r[0]=n,r[1]=l,r[2]=a,r[3]=x,!1;if(i<o)return r[0]=n,r[1]=h,r[2]=a,r[3]=m,!1}else if(i===o){if(n>a)return r[0]=s,r[1]=i,r[2]=y,r[3]=o,!1;if(n<a)return r[0]=u,r[1]=i,r[2]=g,r[3]=o,!1}else{var E=e.height/e.width,_=t.height/t.width,A=(o-i)/(a-n),S=void 0,R=void 0,N=void 0,L=void 0,I=void 0,M=void 0;if(-E===A?n>a?(r[0]=c,r[1]=h,w=!0):(r[0]=u,r[1]=l,w=!0):E===A&&(n>a?(r[0]=s,r[1]=l,w=!0):(r[0]=d,r[1]=h,w=!0)),-_===A?a>n?(r[2]=v,r[3]=x,k=!0):(r[2]=y,r[3]=m,k=!0):_===A&&(a>n?(r[2]=g,r[3]=m,k=!0):(r[2]=b,r[3]=x,k=!0)),w&&k)return!1;if(n>a?i>o?(S=this.getCardinalDirection(E,A,4),R=this.getCardinalDirection(_,A,2)):(S=this.getCardinalDirection(-E,A,3),R=this.getCardinalDirection(-_,A,1)):i>o?(S=this.getCardinalDirection(-E,A,1),R=this.getCardinalDirection(-_,A,3)):(S=this.getCardinalDirection(E,A,2),R=this.getCardinalDirection(_,A,4)),!w)switch(S){case 1:L=l,N=n+-p/A,r[0]=N,r[1]=L;break;case 2:N=d,L=i+f*A,r[0]=N,r[1]=L;break;case 3:L=h,N=n+p/A,r[0]=N,r[1]=L;break;case 4:N=c,L=i+-f*A,r[0]=N,r[1]=L}if(!k)switch(R){case 1:M=m,I=a+-C/A,r[2]=I,r[3]=M;break;case 2:I=b,M=o+T*A,r[2]=I,r[3]=M;break;case 3:M=x,I=a+C/A,r[2]=I,r[3]=M;break;case 4:I=v,M=o+-T*A,r[2]=I,r[3]=M}}return!1},i.getCardinalDirection=function(e,t,r){return e>t?r:1+r%4},i.getIntersection=function(e,t,r,i){if(null==i)return this.getIntersection2(e,t,r);var a,o,s,l,u,c,h,d=e.x,f=e.y,p=t.x,g=t.y,m=r.x,y=r.y,v=i.x,x=i.y;return u=p*f-d*g,c=v*y-m*x,0===(h=(a=g-f)*(l=m-v)-(o=x-y)*(s=d-p))?null:new n((s*c-l*u)/h,(o*u-a*c)/h)},i.angleOfVector=function(e,t,r,n){var i=void 0;return e!==r?(i=Math.atan((n-t)/(r-e)),r<e?i+=Math.PI:n<t&&(i+=this.TWO_PI)):i=n<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,r,n){var i=e.x,a=e.y,o=t.x,s=t.y,l=r.x,u=r.y,c=n.x,h=n.y,d=(o-i)*(h-u)-(c-l)*(s-a);if(0===d)return!1;var f=((h-u)*(c-i)+(l-c)*(h-a))/d,p=((a-s)*(c-i)+(o-i)*(h-a))/d;return 0<f&&f<1&&0<p&&p<1},i.findCircleLineIntersections=function(e,t,r,n,i,a,o){var s=(r-e)*(r-e)+(n-t)*(n-t),l=2*((e-i)*(r-e)+(t-a)*(n-t)),u=(e-i)*(e-i)+(t-a)*(t-a)-o*o;if(l*l-4*s*u>=0){var c=(-l+Math.sqrt(l*l-4*s*u))/(2*s),h=(-l-Math.sqrt(l*l-4*s*u))/(2*s);return c>=0&&c<=1?[c]:h>=0&&h<=1?[h]:null}return null},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,r){function n(){}s(n,"IMath"),n.sign=function(e){return e>0?1:e<0?-1:0},n.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=n},function(e,t,r){function n(){}s(n,"Integer"),n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=s((function(e){return{value:e,next:null,prev:null}}),"nodeFrom"),o=s((function(e,t,r,n){return null!==e?e.next=t:n.head=t,null!==r?r.prev=t:n.tail=t,t.prev=e,t.next=r,n.length++,t}),"add"),l=s((function(e,t){var r=e.prev,n=e.next;return null!==r?r.next=n:t.head=n,null!==n?n.prev=r:t.tail=r,e.prev=e.next=null,t.length--,e}),"_remove"),u=function(){function e(t){var r=this;i(this,e),this.length=0,this.head=null,this.tail=null,t?.forEach((function(e){return r.push(e)}))}return s(e,"LinkedList"),n(e,[{key:"size",value:s((function(){return this.length}),"size")},{key:"insertBefore",value:s((function(e,t){return o(t.prev,a(e),t,this)}),"insertBefore")},{key:"insertAfter",value:s((function(e,t){return o(t,a(e),t.next,this)}),"insertAfter")},{key:"insertNodeBefore",value:s((function(e,t){return o(t.prev,e,t,this)}),"insertNodeBefore")},{key:"insertNodeAfter",value:s((function(e,t){return o(t,e,t.next,this)}),"insertNodeAfter")},{key:"push",value:s((function(e){return o(this.tail,a(e),null,this)}),"push")},{key:"unshift",value:s((function(e){return o(null,a(e),this.head,this)}),"unshift")},{key:"remove",value:s((function(e){return l(e,this)}),"remove")},{key:"pop",value:s((function(){return l(this.tail,this).value}),"pop")},{key:"popNode",value:s((function(){return l(this.tail,this)}),"popNode")},{key:"shift",value:s((function(){return l(this.head,this).value}),"shift")},{key:"shiftNode",value:s((function(){return l(this.head,this)}),"shiftNode")},{key:"get_object_at",value:s((function(e){if(e<=this.length()){for(var t=1,r=this.head;t<e;)r=r.next,t++;return r.value}}),"get_object_at")},{key:"set_object_at",value:s((function(e,t){if(e<=this.length()){for(var r=1,n=this.head;r<e;)n=n.next,r++;n.value=t}}),"set_object_at")}]),e}();e.exports=u},function(e,t,r){function n(e,t,r){this.x=null,this.y=null,null==e&&null==t&&null==r?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==r?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==r&&(r=e,this.x=r.x,this.y=r.y)}s(n,"Point"),n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(e,t,r){"Point"==e.constructor.name&&null==t&&null==r?(r=e,this.setLocation(r.x,r.y)):"number"==typeof e&&"number"==typeof t&&null==r&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(e,t){this.x=e,this.y=t},n.prototype.translate=function(e,t){this.x+=e,this.y+=t},n.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},n.prototype.toString=function(){return(new n).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=n},function(e,t,r){function n(e,t,r,n){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=r&&null!=n&&(this.x=e,this.y=t,this.width=r,this.height=n)}s(n,"RectangleD"),n.prototype.getX=function(){return this.x},n.prototype.setX=function(e){this.x=e},n.prototype.getY=function(){return this.y},n.prototype.setY=function(e){this.y=e},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},e.exports=n},function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}s(i,"UniqueIDGeneretor"),i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=i.getString(),i.lastID++),e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=typeof e>"u"?"undefined":n(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}s(n,"_toConsumableArray");var i=r(0),a=r(7),o=r(3),l=r(1),u=r(6),c=r(5),h=r(17),d=r(29);function f(e){d.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}s(f,"Layout"),f.RANDOM_SEED=1,f.prototype=Object.create(d.prototype),f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},f.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},f.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},f.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},f.prototype.newGraph=function(e){return new u(null,this.graphManager,e)},f.prototype.newNode=function(e){return new o(this.graphManager,e)},f.prototype.newEdge=function(e){return new l(null,null,e)},f.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},f.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},f.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},f.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var r=this.graphManager.getRoot().getNodes();for(t=0;t<r.length;t++)r[t];this.update(this.graphManager.getRoot())}},f.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof o){var t=e;if(null!=t.getChild())for(var r=t.getChild().getNodes(),n=0;n<r.length;n++)update(r[n]);if(null!=t.vGraphObject)t.vGraphObject.update(t)}else if(e instanceof l){var i=e;if(null!=i.vGraphObject)i.vGraphObject.update(i)}else if(e instanceof u){var a=e;if(null!=a.vGraphObject)a.vGraphObject.update(a)}},f.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},f.prototype.transform=function(e){if(null==e)this.transform(new c(0,0));else{var t=new h,r=this.graphManager.getRoot().updateLeftTop();if(null!=r){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(r.x),t.setDeviceOrgY(r.y);for(var n=this.getAllNodes(),i=0;i<n.length;i++)n[i].transform(t)}}},f.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,r,n=e.getNodes(),i=0;i<n.length;i++)null==(r=(t=n[i]).getChild())||0==r.getNodes().length?t.scatter():(this.positionNodesRandomly(r),t.updateBounds())},f.prototype.getFlatForest=function(){for(var e=[],t=!0,r=this.graphManager.getRoot().getNodes(),i=!0,a=0;a<r.length;a++)null!=r[a].getChild()&&(i=!1);if(!i)return e;var o=new Set,s=[],l=new Map,u=[];for(u=u.concat(r);u.length>0&&t;){for(s.push(u[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),o.add(c);var h=c.getEdges();for(a=0;a<h.length;a++){var d=h[a].getOtherEnd(c);if(l.get(c)!=d){if(o.has(d)){t=!1;break}s.push(d),l.set(d,c)}}}if(t){var f=[].concat(n(o));e.push(f);for(a=0;a<f.length;a++){var p=f[a],g=u.indexOf(p);g>-1&&u.splice(g,1)}o=new Set,l=new Map}else e=[]}return e},f.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],r=e.source,n=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var a=this.newNode(null);a.setRect(new Point(0,0),new Dimension(1,1)),n.add(a);var o=this.newEdge(null);this.graphManager.add(o,r,a),t.add(a),r=a}o=this.newEdge(null);return this.graphManager.add(o,r,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):n.remove(e),t},f.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(n(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var r=e[t];if(r.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(r),a=0;a<i.length;a++){var o=i[a],s=new c(o.getCenterX(),o.getCenterY()),l=r.bendpoints.get(a);l.x=s.x,l.y=s.y,o.getOwner().remove(o)}this.graphManager.add(r,r.source,r.target)}}},f.transform=function(e,t,r,n){if(null!=r&&null!=n){var i=t;if(e<=50)i-=(t-t/r)/50*(50-e);else i+=(t*n-t)/50*(e-50);return i}var a,o;return e<=50?(a=9*t/500,o=t/10):(a=9*t/50,o=-8*t),a*e+o},f.findCenterOfTree=function(e){var t=[];t=t.concat(e);var r=[],n=new Map,i=!1,a=null;(1==t.length||2==t.length)&&(i=!0,a=t[0]);for(var o=0;o<t.length;o++){var s=(c=t[o]).getNeighborsList().size;n.set(c,c.getNeighborsList().size),1==s&&r.push(c)}var l=[];for(l=l.concat(r);!i;){var u=[];u=u.concat(l),l=[];for(o=0;o<t.length;o++){var c=t[o],h=t.indexOf(c);h>=0&&t.splice(h,1),c.getNeighborsList().forEach((function(e){if(r.indexOf(e)<0){var t=n.get(e)-1;1==t&&l.push(e),n.set(e,t)}}))}r=r.concat(l),(1==t.length||2==t.length)&&(i=!0,a=t[0])}return a},f.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=f},function(e,t,r){function n(){}s(n,"RandomSeed"),n.seed=1,n.x=0,n.nextDouble=function(){return n.x=1e4*Math.sin(n.seed++),n.x-Math.floor(n.x)},e.exports=n},function(e,t,r){var n=r(5);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s(i,"Transform"),i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,r=this.lworldExtX;return 0!=r&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/r),t},i.prototype.transformY=function(e){var t=0,r=this.lworldExtY;return 0!=r&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/r),t},i.prototype.inverseTransformX=function(e){var t=0,r=this.ldeviceExtX;return 0!=r&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/r),t},i.prototype.inverseTransformY=function(e){var t=0,r=this.ldeviceExtY;return 0!=r&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/r),t},i.prototype.inverseTransformPoint=function(e){return new n(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}s(n,"_toConsumableArray");var i=r(15),a=r(4),o=r(0),l=r(8),u=r(9);function c(){i.call(this),this.useSmartIdealEdgeLengthCalculation=a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=a.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=a.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=a.MAX_ITERATIONS}for(var h in s(c,"FDLayout"),c.prototype=Object.create(i.prototype),i)c[h]=i[h];c.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},c.prototype.calcIdealEdgeLengths=function(){for(var e,t,r,n,i,s,l,u=this.getGraphManager().getAllEdges(),c=0;c<u.length;c++)t=(e=u[c]).idealLength,e.isInterGraph&&(n=e.getSource(),i=e.getTarget(),s=e.getSourceInLca().getEstimatedSize(),l=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=s+l-2*o.SIMPLE_NODE_SIZE),r=e.getLca().getInclusionTreeDepth(),e.idealLength+=t*a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+i.getInclusionTreeDepth()-2*r))},c.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>a.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*a.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-a.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>a.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(a.COOLING_ADAPTATION_FACTOR,1-(e-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*(1-a.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},c.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),r=0;r<t.length;r++)e=t[r],this.calcSpringForce(e,e.idealLength)},c.prototype.calcRepulsionForces=function(){var e,t,r,n,i,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),i=new Set,e=0;e<l.length;e++)r=l[e],this.calculateRepulsionForceOfANode(r,i,o,s),i.add(r);else for(e=0;e<l.length;e++)for(r=l[e],t=e+1;t<l.length;t++)n=l[t],r.getOwner()==n.getOwner()&&this.calcRepulsionForce(r,n)},c.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),r=0;r<t.length;r++)e=t[r],this.calcGravitationalForce(e)},c.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},c.prototype.calcSpringForce=function(e,t){var r,n,i,a,o=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==o.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(r=e.getLength())&&(i=(n=e.edgeElasticity*(r-t))*(e.lengthX/r),a=n*(e.lengthY/r),o.springForceX+=i,o.springForceY+=a,s.springForceX-=i,s.springForceY-=a)},c.prototype.calcRepulsionForce=function(e,t){var r,n,i,o,s,c,h,d=e.getRect(),f=t.getRect(),p=new Array(2),g=new Array(4);if(d.intersects(f)){l.calcSeparationAmount(d,f,p,a.DEFAULT_EDGE_LENGTH/2),c=2*p[0],h=2*p[1];var m=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=m*c,e.repulsionForceY-=m*h,t.repulsionForceX+=m*c,t.repulsionForceY+=m*h}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(r=f.getCenterX()-d.getCenterX(),n=f.getCenterY()-d.getCenterY()):(l.getIntersection(d,f,g),r=g[2]-g[0],n=g[3]-g[1]),Math.abs(r)<a.MIN_REPULSION_DIST&&(r=u.sign(r)*a.MIN_REPULSION_DIST),Math.abs(n)<a.MIN_REPULSION_DIST&&(n=u.sign(n)*a.MIN_REPULSION_DIST),i=r*r+n*n,o=Math.sqrt(i),c=(s=(e.nodeRepulsion/2+t.nodeRepulsion/2)*e.noOfChildren*t.noOfChildren/i)*r/o,h=s*n/o,e.repulsionForceX-=c,e.repulsionForceY-=h,t.repulsionForceX+=c,t.repulsionForceY+=h},c.prototype.calcGravitationalForce=function(e){var t,r,n,i,a,o,s,l;r=((t=e.getOwner()).getRight()+t.getLeft())/2,n=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-r,a=e.getCenterY()-n,o=Math.abs(i)+e.getWidth()/2,s=Math.abs(a)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(o>(l=t.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*a):(o>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},c.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},c.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},c.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)(e=t[r]).noOfChildren=e.getNoOfChildren()},c.prototype.calcGrid=function(e){var t,r;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),r=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var n=new Array(t),i=0;i<t;i++)n[i]=new Array(r);for(i=0;i<t;i++)for(var a=0;a<r;a++)n[i][a]=new Array;return n},c.prototype.addNodeToGrid=function(e,t,r){var n,i,a,o;n=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().y-r)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().height+e.getRect().y-r)/this.repulsionRange));for(var s=n;s<=i;s++)for(var l=a;l<=o;l++)this.grid[s][l].push(e),e.setGridCoordinates(n,i,a,o)},c.prototype.updateGrid=function(){var e,t,r=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<r.length;e++)t=r[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},c.prototype.calculateRepulsionForceOfANode=function(e,t,r,i){if(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&r||i){var o=new Set;e.surrounding=new Array;for(var s,l=this.grid,u=e.startX-1;u<e.finishX+2;u++)for(var c=e.startY-1;c<e.finishY+2;c++)if(!(u<0||c<0||u>=l.length||c>=l[0].length))for(var h=0;h<l[u][c].length;h++)if(s=l[u][c][h],e.getOwner()==s.getOwner()&&e!=s&&!t.has(s)&&!o.has(s)){var d=Math.abs(e.getCenterX()-s.getCenterX())-(e.getWidth()/2+s.getWidth()/2),f=Math.abs(e.getCenterY()-s.getCenterY())-(e.getHeight()/2+s.getHeight()/2);d<=this.repulsionRange&&f<=this.repulsionRange&&o.add(s)}e.surrounding=[].concat(n(o))}for(u=0;u<e.surrounding.length;u++)this.calcRepulsionForce(e,e.surrounding[u])},c.prototype.calcRepulsionRange=function(){return 0},e.exports=c},function(e,t,r){var n=r(1),i=r(4);function a(e,t,r){n.call(this,e,t,r),this.idealLength=i.DEFAULT_EDGE_LENGTH,this.edgeElasticity=i.DEFAULT_SPRING_STRENGTH}for(var o in s(a,"FDLayoutEdge"),a.prototype=Object.create(n.prototype),n)a[o]=n[o];e.exports=a},function(e,t,r){var n=r(3),i=r(4);function a(e,t,r,a){n.call(this,e,t,r,a),this.nodeRepulsion=i.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in s(a,"FDLayoutNode"),a.prototype=Object.create(n.prototype),n)a[o]=n[o];a.prototype.setGridCoordinates=function(e,t,r,n){this.startX=e,this.finishX=t,this.startY=r,this.finishY=n},e.exports=a},function(e,t,r){function n(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}s(n,"DimensionD"),n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},e.exports=n},function(e,t,r){var n=r(14);function i(){this.map={},this.keys=[]}s(i,"HashMap"),i.prototype.put=function(e,t){var r=n.createID(e);this.contains(r)||(this.map[r]=t,this.keys.push(e))},i.prototype.contains=function(e){return n.createID(e),null!=this.map[e]},i.prototype.get=function(e){var t=n.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,r){var n=r(14);function i(){this.set={}}s(i,"HashSet"),i.prototype.add=function(e){var t=n.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[n.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[n.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),r=t.length,n=0;n<r;n++)e.push(this.set[t[n]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];this.add(n)}},e.exports=i},function(e,t,r){function n(){}s(n,"Matrix"),n.multMat=function(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var i=0;i<t[0].length;i++){r[n][i]=0;for(var a=0;a<e[0].length;a++)r[n][i]+=e[n][a]*t[a][i]}}return r},n.transpose=function(e){for(var t=[],r=0;r<e[0].length;r++){t[r]=[];for(var n=0;n<e.length;n++)t[r][n]=e[n][r]}return t},n.multCons=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]*t;return r},n.minusOp=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]-t[n];return r},n.dotProduct=function(e,t){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r},n.mag=function(e){return Math.sqrt(this.dotProduct(e,e))},n.normalize=function(e){for(var t=[],r=this.mag(e),n=0;n<e.length;n++)t[n]=e[n]/r;return t},n.multGamma=function(e){for(var t=[],r=0,n=0;n<e.length;n++)r+=e[n];r*=-1/e.length;for(var i=0;i<e.length;i++)t[i]=r+e[i];return t},n.multL=function(e,t,r){for(var n=[],i=[],a=[],o=0;o<t[0].length;o++){for(var s=0,l=0;l<t.length;l++)s+=-.5*t[l][o]*e[l];i[o]=s}for(var u=0;u<r.length;u++){for(var c=0,h=0;h<r.length;h++)c+=r[u][h]*i[h];a[u]=c}for(var d=0;d<t.length;d++){for(var f=0,p=0;p<t[0].length;p++)f+=t[d][p]*a[p];n[d]=f}return n},e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=r(11),o=function(){function e(t,r){i(this,e),(null!==r||void 0!==r)&&(this.compareFunction=this._defaultCompareFunction);var n=void 0;n=t instanceof a?t.size():t.length,this._quicksort(t,0,n-1)}return s(e,"Quicksort"),n(e,[{key:"_quicksort",value:s((function(e,t,r){if(t<r){var n=this._partition(e,t,r);this._quicksort(e,t,n),this._quicksort(e,n+1,r)}}),"_quicksort")},{key:"_partition",value:s((function(e,t,r){for(var n=this._get(e,t),i=t,a=r;;){for(;this.compareFunction(n,this._get(e,a));)a--;for(;this.compareFunction(this._get(e,i),n);)i++;if(!(i<a))return a;this._swap(e,i,a),i++,a--}}),"_partition")},{key:"_get",value:s((function(e,t){return e instanceof a?e.get_object_at(t):e[t]}),"_get")},{key:"_set",value:s((function(e,t,r){e instanceof a?e.set_object_at(t,r):e[t]=r}),"_set")},{key:"_swap",value:s((function(e,t,r){var n=this._get(e,t);this._set(e,t,this._get(e,r)),this._set(e,r,n)}),"_swap")},{key:"_defaultCompareFunction",value:s((function(e,t){return t>e}),"_defaultCompareFunction")}]),e}();e.exports=o},function(e,t,r){function n(){}s(n,"SVD"),n.svd=function(e){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=e.length,this.n=e[0].length;var t=Math.min(this.m,this.n);this.s=function(e){for(var t=[];e-- >0;)t.push(0);return t}(Math.min(this.m+1,this.n)),this.U=function(e){var t=s((function e(t){if(0==t.length)return 0;for(var r=[],n=0;n<t[0];n++)r.push(e(t.slice(1)));return r}),"allocate");return t(e)}([this.m,t]),this.V=function(e){var t=s((function e(t){if(0==t.length)return 0;for(var r=[],n=0;n<t[0];n++)r.push(e(t.slice(1)));return r}),"allocate");return t(e)}([this.n,this.n]);for(var r=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.n),i=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.m),a=!0,o=Math.min(this.m-1,this.n),l=Math.max(0,Math.min(this.n-2,this.m)),u=0;u<Math.max(o,l);u++){if(u<o){this.s[u]=0;for(var c=u;c<this.m;c++)this.s[u]=n.hypot(this.s[u],e[c][u]);if(0!==this.s[u]){e[u][u]<0&&(this.s[u]=-this.s[u]);for(var h=u;h<this.m;h++)e[h][u]/=this.s[u];e[u][u]+=1}this.s[u]=-this.s[u]}for(var d=u+1;d<this.n;d++){if(function(e,t){return e&&t}(u<o,0!==this.s[u])){for(var f=0,p=u;p<this.m;p++)f+=e[p][u]*e[p][d];f=-f/e[u][u];for(var g=u;g<this.m;g++)e[g][d]+=f*e[g][u]}r[d]=e[u][d]}if(function(e,t){return t}(0,u<o))for(var m=u;m<this.m;m++)this.U[m][u]=e[m][u];if(u<l){r[u]=0;for(var y=u+1;y<this.n;y++)r[u]=n.hypot(r[u],r[y]);if(0!==r[u]){r[u+1]<0&&(r[u]=-r[u]);for(var v=u+1;v<this.n;v++)r[v]/=r[u];r[u+1]+=1}if(r[u]=-r[u],function(e,t){return e&&t}(u+1<this.m,0!==r[u])){for(var x=u+1;x<this.m;x++)i[x]=0;for(var b=u+1;b<this.n;b++)for(var T=u+1;T<this.m;T++)i[T]+=r[b]*e[T][b];for(var C=u+1;C<this.n;C++)for(var w=-r[C]/r[u+1],k=u+1;k<this.m;k++)e[k][C]+=w*i[k]}for(var E=u+1;E<this.n;E++)this.V[E][u]=r[E]}}var _=Math.min(this.n,this.m+1);o<this.n&&(this.s[o]=e[o][o]),this.m<_&&(this.s[_-1]=0),l+1<_&&(r[l]=e[l][_-1]),r[_-1]=0;for(var A=o;A<t;A++){for(var S=0;S<this.m;S++)this.U[S][A]=0;this.U[A][A]=1}for(var R=o-1;R>=0;R--)if(0!==this.s[R]){for(var N=R+1;N<t;N++){for(var L=0,I=R;I<this.m;I++)L+=this.U[I][R]*this.U[I][N];L=-L/this.U[R][R];for(var M=R;M<this.m;M++)this.U[M][N]+=L*this.U[M][R]}for(var O=R;O<this.m;O++)this.U[O][R]=-this.U[O][R];this.U[R][R]=1+this.U[R][R];for(var P=0;P<R-1;P++)this.U[P][R]=0}else{for(var D=0;D<this.m;D++)this.U[D][R]=0;this.U[R][R]=1}for(var B=this.n-1;B>=0;B--){if(function(e,t){return e&&t}(B<l,0!==r[B]))for(var F=B+1;F<t;F++){for(var $=0,z=B+1;z<this.n;z++)$+=this.V[z][B]*this.V[z][F];$=-$/this.V[B+1][B];for(var U=B+1;U<this.n;U++)this.V[U][F]+=$*this.V[U][B]}for(var G=0;G<this.n;G++)this.V[G][B]=0;this.V[B][B]=1}for(var j=_-1,V=Math.pow(2,-52),W=Math.pow(2,-966);_>0;){var H=void 0,q=void 0;for(H=_-2;H>=-1&&-1!==H;H--)if(Math.abs(r[H])<=W+V*(Math.abs(this.s[H])+Math.abs(this.s[H+1]))){r[H]=0;break}if(H===_-2)q=4;else{var Y=void 0;for(Y=_-1;Y>=H&&Y!==H;Y--){var X=(Y!==_?Math.abs(r[Y]):0)+(Y!==H+1?Math.abs(r[Y-1]):0);if(Math.abs(this.s[Y])<=W+V*X){this.s[Y]=0;break}}Y===H?q=3:Y===_-1?q=1:(q=2,H=Y)}switch(H++,q){case 1:var K=r[_-2];r[_-2]=0;for(var Z=_-2;Z>=H;Z--){var Q=n.hypot(this.s[Z],K),J=this.s[Z]/Q,ee=K/Q;this.s[Z]=Q,Z!==H&&(K=-ee*r[Z-1],r[Z-1]=J*r[Z-1]);for(var te=0;te<this.n;te++)Q=J*this.V[te][Z]+ee*this.V[te][_-1],this.V[te][_-1]=-ee*this.V[te][Z]+J*this.V[te][_-1],this.V[te][Z]=Q}break;case 2:var re=r[H-1];r[H-1]=0;for(var ne=H;ne<_;ne++){var ie=n.hypot(this.s[ne],re),ae=this.s[ne]/ie,oe=re/ie;this.s[ne]=ie,re=-oe*r[ne],r[ne]=ae*r[ne];for(var se=0;se<this.m;se++)ie=ae*this.U[se][ne]+oe*this.U[se][H-1],this.U[se][H-1]=-oe*this.U[se][ne]+ae*this.U[se][H-1],this.U[se][ne]=ie}break;case 3:var le=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[_-1]),Math.abs(this.s[_-2])),Math.abs(r[_-2])),Math.abs(this.s[H])),Math.abs(r[H])),ue=this.s[_-1]/le,ce=this.s[_-2]/le,he=r[_-2]/le,de=this.s[H]/le,fe=r[H]/le,pe=((ce+ue)*(ce-ue)+he*he)/2,ge=ue*he*(ue*he),me=0;(function(e,t){return e||t})(0!==pe,0!==ge)&&(me=Math.sqrt(pe*pe+ge),pe<0&&(me=-me),me=ge/(pe+me));for(var ye=(de+ue)*(de-ue)+me,ve=de*fe,xe=H;xe<_-1;xe++){var be=n.hypot(ye,ve),Te=ye/be,Ce=ve/be;xe!==H&&(r[xe-1]=be),ye=Te*this.s[xe]+Ce*r[xe],r[xe]=Te*r[xe]-Ce*this.s[xe],ve=Ce*this.s[xe+1],this.s[xe+1]=Te*this.s[xe+1];for(var we=0;we<this.n;we++)be=Te*this.V[we][xe]+Ce*this.V[we][xe+1],this.V[we][xe+1]=-Ce*this.V[we][xe]+Te*this.V[we][xe+1],this.V[we][xe]=be;if(Te=ye/(be=n.hypot(ye,ve)),Ce=ve/be,this.s[xe]=be,ye=Te*r[xe]+Ce*this.s[xe+1],this.s[xe+1]=-Ce*r[xe]+Te*this.s[xe+1],ve=Ce*r[xe+1],r[xe+1]=Te*r[xe+1],xe<this.m-1)for(var ke=0;ke<this.m;ke++)be=Te*this.U[ke][xe]+Ce*this.U[ke][xe+1],this.U[ke][xe+1]=-Ce*this.U[ke][xe]+Te*this.U[ke][xe+1],this.U[ke][xe]=be}r[_-2]=ye;break;case 4:if(this.s[H]<=0&&(this.s[H]=this.s[H]<0?-this.s[H]:0,a))for(var Ee=0;Ee<=j;Ee++)this.V[Ee][H]=-this.V[Ee][H];for(;H<j&&!(this.s[H]>=this.s[H+1]);){var _e=this.s[H];if(this.s[H]=this.s[H+1],this.s[H+1]=_e,H<this.n-1)for(var Ae=0;Ae<this.n;Ae++)_e=this.V[Ae][H+1],this.V[Ae][H+1]=this.V[Ae][H],this.V[Ae][H]=_e;if(H<this.m-1)for(var Se=0;Se<this.m;Se++)_e=this.U[Se][H+1],this.U[Se][H+1]=this.U[Se][H],this.U[Se][H]=_e;H++}_--}}return{U:this.U,V:this.V,S:this.s}},n.hypot=function(e,t){var r=void 0;return Math.abs(e)>Math.abs(t)?(r=t/e,r=Math.abs(e)*Math.sqrt(1+r*r)):0!=t?(r=e/t,r=Math.abs(t)*Math.sqrt(1+r*r)):r=0,r},e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;i(this,e),this.sequence1=t,this.sequence2=r,this.match_score=n,this.mismatch_penalty=a,this.gap_penalty=o,this.iMax=t.length+1,this.jMax=r.length+1,this.grid=new Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.tracebackGrid[u][c]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return s(e,"NeedlemanWunsch"),n(e,[{key:"getScore",value:s((function(){return this.score}),"getScore")},{key:"getAlignments",value:s((function(){return this.alignments}),"getAlignments")},{key:"computeGrids",value:s((function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var r=1;r<this.iMax;r++)for(var n=1;n<this.jMax;n++){var i=[this.sequence1[r-1]===this.sequence2[n-1]?this.grid[r-1][n-1]+this.match_score:this.grid[r-1][n-1]+this.mismatch_penalty,this.grid[r-1][n]+this.gap_penalty,this.grid[r][n-1]+this.gap_penalty],a=this.arrayAllMaxIndexes(i);this.grid[r][n]=i[a[0]],this.tracebackGrid[r][n]=[a.includes(0),a.includes(1),a.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}),"computeGrids")},{key:"alignmentTraceback",value:s((function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],r=this.tracebackGrid[t.pos[0]][t.pos[1]];r[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),r[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),r[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}),"alignmentTraceback")},{key:"getAllIndexes",value:s((function(e,t){for(var r=[],n=-1;-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}),"getAllIndexes")},{key:"arrayAllMaxIndexes",value:s((function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}),"arrayAllMaxIndexes")}]),e}();e.exports=a},function(e,t,r){var n=s((function(){}),"layoutBase");n.FDLayout=r(18),n.FDLayoutConstants=r(4),n.FDLayoutEdge=r(19),n.FDLayoutNode=r(20),n.DimensionD=r(21),n.HashMap=r(22),n.HashSet=r(23),n.IGeometry=r(8),n.IMath=r(9),n.Integer=r(10),n.Point=r(12),n.PointD=r(5),n.RandomSeed=r(16),n.RectangleD=r(13),n.Transform=r(17),n.UniqueIDGeneretor=r(14),n.Quicksort=r(25),n.LinkedList=r(11),n.LGraphObject=r(2),n.LGraph=r(6),n.LEdge=r(1),n.LGraphManager=r(7),n.LNode=r(3),n.Layout=r(15),n.LayoutConstants=r(0),n.NeedlemanWunsch=r(27),n.Matrix=r(24),n.SVD=r(26),e.exports=n},function(e,t,r){function n(){this.listeners=[]}s(n,"Emitter");var i=n.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var r=this.listeners.length;r>=0;r--){var n=this.listeners[r];n.event===e&&n.callback===t&&this.listeners.splice(r,1)}},i.emit=function(e,t){for(var r=0;r<this.listeners.length;r++){var n=this.listeners[r];e===n.event&&n.callback(t)}},e.exports=n}])}))})),_3=l(((e,t)=>{s((function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n(E3()):"function"==typeof define&&define.amd?define(["layout-base"],n):"object"==typeof e?e.coseBase=n(E3()):r.coseBase=n(r.layoutBase)}),"webpackUniversalModuleDefinition")(e,(function(e){return(()=>{var t={45:(e,t,r)=>{var n={};n.layoutBase=r(551),n.CoSEConstants=r(806),n.CoSEEdge=r(767),n.CoSEGraph=r(880),n.CoSEGraphManager=r(578),n.CoSELayout=r(765),n.CoSENode=r(991),n.ConstraintHandler=r(902),e.exports=n},806:(e,t,r)=>{var n=r(551).FDLayoutConstants;function i(){}for(var a in s(i,"CoSEConstants"),n)i[a]=n[a];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=n.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,i.ENFORCE_CONSTRAINTS=!0,i.APPLY_LAYOUT=!0,i.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,i.TREE_REDUCTION_ON_INCREMENTAL=!0,i.PURE_INCREMENTAL=i.DEFAULT_INCREMENTAL,e.exports=i},767:(e,t,r)=>{var n=r(551).FDLayoutEdge;function i(e,t,r){n.call(this,e,t,r)}for(var a in s(i,"CoSEEdge"),i.prototype=Object.create(n.prototype),n)i[a]=n[a];e.exports=i},880:(e,t,r)=>{var n=r(551).LGraph;function i(e,t,r){n.call(this,e,t,r)}for(var a in s(i,"CoSEGraph"),i.prototype=Object.create(n.prototype),n)i[a]=n[a];e.exports=i},578:(e,t,r)=>{var n=r(551).LGraphManager;function i(e){n.call(this,e)}for(var a in s(i,"CoSEGraphManager"),i.prototype=Object.create(n.prototype),n)i[a]=n[a];e.exports=i},765:(e,t,r)=>{var n=r(551).FDLayout,i=r(578),a=r(880),o=r(991),l=r(767),u=r(806),c=r(902),h=r(551).FDLayoutConstants,d=r(551).LayoutConstants,f=r(551).Point,p=r(551).PointD,g=r(551).DimensionD,m=r(551).Layout,y=r(551).Integer,v=r(551).IGeometry,x=r(551).LGraph,b=r(551).Transform,T=r(551).LinkedList;function C(){n.call(this),this.toBeTiled={},this.constraints={}}for(var w in s(C,"CoSELayout"),C.prototype=Object.create(n.prototype),n)C[w]=n[w];C.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},C.prototype.newGraph=function(e){return new a(null,this.graphManager,e)},C.prototype.newNode=function(e){return new o(this.graphManager,e)},C.prototype.newEdge=function(e){return new l(null,null,e)},C.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.isSubLayout||(u.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},C.prototype.initSpringEmbedder=function(){n.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},C.prototype.layout=function(){return d.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},C.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(u.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t)}}else{var r=this.getFlatForest();if(r.length>0)this.positionNodesRadially(r);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(c.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),u.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},C.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),u.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),u.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var r=!this.isTreeGrowing&&!this.isGrowthFinished,n=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(r,n),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},C.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var n=e[r].rect,i=e[r].id;t[i]={id:i,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return t},C.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===h.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},C.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(t=0;t<e.length;t++)e[t].move()},C.prototype.initConstraintVariables=function(){var e=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var t=this.graphManager.getAllNodes(),r=0;r<t.length;r++){var n=t[r];this.idToNodeMap.set(n.id,n)}var i=s((function t(r){for(var n,i=r.getChild().getNodes(),a=0,o=0;o<i.length;o++)null==(n=i[o]).getChild()?e.fixedNodeSet.has(n.id)&&(a+=100):a+=t(n);return a}),"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach((function(t){e.fixedNodeSet.add(t.nodeId)}));for(t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)if(null!=(n=t[r]).getChild()){var a=i(n);a>0&&(n.fixedNodeWeight=a)}}if(this.constraints.relativePlacementConstraint){var o=new Map,l=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(t){e.fixedNodesOnHorizontal.add(t),e.fixedNodesOnVertical.add(t)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var c=this.constraints.alignmentConstraint.vertical;for(r=0;r<c.length;r++)this.dummyToNodeForVerticalAlignment.set("dummy"+r,[]),c[r].forEach((function(t){o.set(t,"dummy"+r),e.dummyToNodeForVerticalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnHorizontal.add("dummy"+r)}))}if(this.constraints.alignmentConstraint.horizontal){var h=this.constraints.alignmentConstraint.horizontal;for(r=0;r<h.length;r++)this.dummyToNodeForHorizontalAlignment.set("dummy"+r,[]),h[r].forEach((function(t){l.set(t,"dummy"+r),e.dummyToNodeForHorizontalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnVertical.add("dummy"+r)}))}}if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(e){var t,r,n;for(n=e.length-1;n>=2*e.length/3;n--)t=Math.floor(Math.random()*(n+1)),r=e[n],e[n]=e[t],e[t]=r;return e},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(t){if(t.left){var r=o.has(t.left)?o.get(t.left):t.left,n=o.has(t.right)?o.get(t.right):t.right;e.nodesInRelativeHorizontal.includes(r)||(e.nodesInRelativeHorizontal.push(r),e.nodeToRelativeConstraintMapHorizontal.set(r,[]),e.dummyToNodeForVerticalAlignment.has(r)?e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(r)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(r).getCenterX())),e.nodesInRelativeHorizontal.includes(n)||(e.nodesInRelativeHorizontal.push(n),e.nodeToRelativeConstraintMapHorizontal.set(n,[]),e.dummyToNodeForVerticalAlignment.has(n)?e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(n)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(n).getCenterX())),e.nodeToRelativeConstraintMapHorizontal.get(r).push({right:n,gap:t.gap}),e.nodeToRelativeConstraintMapHorizontal.get(n).push({left:r,gap:t.gap})}else{var i=l.has(t.top)?l.get(t.top):t.top,a=l.has(t.bottom)?l.get(t.bottom):t.bottom;e.nodesInRelativeVertical.includes(i)||(e.nodesInRelativeVertical.push(i),e.nodeToRelativeConstraintMapVertical.set(i,[]),e.dummyToNodeForHorizontalAlignment.has(i)?e.nodeToTempPositionMapVertical.set(i,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(i)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(i,e.idToNodeMap.get(i).getCenterY())),e.nodesInRelativeVertical.includes(a)||(e.nodesInRelativeVertical.push(a),e.nodeToRelativeConstraintMapVertical.set(a,[]),e.dummyToNodeForHorizontalAlignment.has(a)?e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(a)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(a).getCenterY())),e.nodeToRelativeConstraintMapVertical.get(i).push({bottom:a,gap:t.gap}),e.nodeToRelativeConstraintMapVertical.get(a).push({top:i,gap:t.gap})}}));else{var d=new Map,f=new Map;this.constraints.relativePlacementConstraint.forEach((function(e){if(e.left){var t=o.has(e.left)?o.get(e.left):e.left,r=o.has(e.right)?o.get(e.right):e.right;d.has(t)?d.get(t).push(r):d.set(t,[r]),d.has(r)?d.get(r).push(t):d.set(r,[t])}else{var n=l.has(e.top)?l.get(e.top):e.top,i=l.has(e.bottom)?l.get(e.bottom):e.bottom;f.has(n)?f.get(n).push(i):f.set(n,[i]),f.has(i)?f.get(i).push(n):f.set(i,[n])}}));var p=s((function(e,t){var r=[],n=[],i=new T,a=new Set,o=0;return e.forEach((function(s,l){if(!a.has(l)){r[o]=[],n[o]=!1;var u=l;for(i.push(u),a.add(u),r[o].push(u);0!=i.length;){u=i.shift(),t.has(u)&&(n[o]=!0),e.get(u).forEach((function(e){a.has(e)||(i.push(e),a.add(e),r[o].push(e))}))}o++}})),{components:r,isFixed:n}}),"constructComponents"),g=p(d,e.fixedNodesOnHorizontal);this.componentsOnHorizontal=g.components,this.fixedComponentsOnHorizontal=g.isFixed;var m=p(f,e.fixedNodesOnVertical);this.componentsOnVertical=m.components,this.fixedComponentsOnVertical=m.isFixed}}},C.prototype.updateDisplacements=function(){var e=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(t){var r=e.idToNodeMap.get(t.nodeId);r.displacementX=0,r.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var t=this.constraints.alignmentConstraint.vertical,r=0;r<t.length;r++){for(var n=0,i=0;i<t[r].length;i++){if(this.fixedNodeSet.has(t[r][i])){n=0;break}n+=this.idToNodeMap.get(t[r][i]).displacementX}var a=n/t[r].length;for(i=0;i<t[r].length;i++)this.idToNodeMap.get(t[r][i]).displacementX=a}if(this.constraints.alignmentConstraint.horizontal){var o=this.constraints.alignmentConstraint.horizontal;for(r=0;r<o.length;r++){var s=0;for(i=0;i<o[r].length;i++){if(this.fixedNodeSet.has(o[r][i])){s=0;break}s+=this.idToNodeMap.get(o[r][i]).displacementY}var l=s/o[r].length;for(i=0;i<o[r].length;i++)this.idToNodeMap.get(o[r][i]).displacementY=l}}}if(this.constraints.relativePlacementConstraint)if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForVerticalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(t)[0]).displacementX:e.idToNodeMap.get(t).displacementX,e.nodeToRelativeConstraintMapHorizontal.get(t).forEach((function(n){var i;n.right?(i=e.nodeToTempPositionMapHorizontal.get(n.right)-e.nodeToTempPositionMapHorizontal.get(t)-r)<n.gap&&(r-=n.gap-i):(i=e.nodeToTempPositionMapHorizontal.get(t)-e.nodeToTempPositionMapHorizontal.get(n.left)+r)<n.gap&&(r+=n.gap-i)})),e.nodeToTempPositionMapHorizontal.set(t,e.nodeToTempPositionMapHorizontal.get(t)+r),e.dummyToNodeForVerticalAlignment.has(t)?e.dummyToNodeForVerticalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementX=r})):e.idToNodeMap.get(t).displacementX=r}})),this.nodesInRelativeVertical.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForHorizontalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(t)[0]).displacementY:e.idToNodeMap.get(t).displacementY,e.nodeToRelativeConstraintMapVertical.get(t).forEach((function(n){var i;n.bottom?(i=e.nodeToTempPositionMapVertical.get(n.bottom)-e.nodeToTempPositionMapVertical.get(t)-r)<n.gap&&(r-=n.gap-i):(i=e.nodeToTempPositionMapVertical.get(t)-e.nodeToTempPositionMapVertical.get(n.top)+r)<n.gap&&(r+=n.gap-i)})),e.nodeToTempPositionMapVertical.set(t,e.nodeToTempPositionMapVertical.get(t)+r),e.dummyToNodeForHorizontalAlignment.has(t)?e.dummyToNodeForHorizontalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementY=r})):e.idToNodeMap.get(t).displacementY=r}}));else{for(r=0;r<this.componentsOnHorizontal.length;r++){var c=this.componentsOnHorizontal[r];if(this.fixedComponentsOnHorizontal[r])for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementX=0})):this.idToNodeMap.get(c[i]).displacementX=0;else{var h=0,d=0;for(i=0;i<c.length;i++)if(this.dummyToNodeForVerticalAlignment.has(c[i])){h+=(p=this.dummyToNodeForVerticalAlignment.get(c[i])).length*this.idToNodeMap.get(p[0]).displacementX,d+=p.length}else h+=this.idToNodeMap.get(c[i]).displacementX,d++;var f=h/d;for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementX=f})):this.idToNodeMap.get(c[i]).displacementX=f}}for(r=0;r<this.componentsOnVertical.length;r++){c=this.componentsOnVertical[r];if(this.fixedComponentsOnVertical[r])for(i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementY=0})):this.idToNodeMap.get(c[i]).displacementY=0;else{for(h=0,d=0,i=0;i<c.length;i++)if(this.dummyToNodeForHorizontalAlignment.has(c[i])){var p;h+=(p=this.dummyToNodeForHorizontalAlignment.get(c[i])).length*this.idToNodeMap.get(p[0]).displacementY,d+=p.length}else h+=this.idToNodeMap.get(c[i]).displacementY,d++;for(f=h/d,i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach((function(t){e.idToNodeMap.get(t).displacementY=f})):this.idToNodeMap.get(c[i]).displacementY=f}}}},C.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,r=[],n=this.graphManager.getGraphs(),i=n.length;for(t=0;t<i;t++)(e=n[t]).updateConnected(),e.isConnected||(r=r.concat(e.getNodes()));return r},C.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,r=new Set;for(t=0;t<e.length;t++){var n=e[t];if(!r.has(n)){var i=n.getSource(),a=n.getTarget();if(i==a)n.getBendpoints().push(new p),n.getBendpoints().push(new p),this.createDummyNodesForBendpoints(n),r.add(n);else{var o=[];if(o=(o=o.concat(i.getEdgeListToNode(a))).concat(a.getEdgeListToNode(i)),!r.has(o[0])){var s;if(o.length>1)for(s=0;s<o.length;s++){var l=o[s];l.getBendpoints().push(new p),this.createDummyNodesForBendpoints(l)}o.forEach((function(e){r.add(e)}))}}}if(r.size==e.length)break}},C.prototype.positionNodesRadially=function(e){for(var t=new f(0,0),r=Math.ceil(Math.sqrt(e.length)),n=0,i=0,a=0,o=new p(0,0),s=0;s<e.length;s++){s%r==0&&(a=0,i=n,0!=s&&(i+=u.DEFAULT_COMPONENT_SEPERATION),n=0);var l=e[s],c=m.findCenterOfTree(l);t.x=a,t.y=i,(o=C.radialLayout(l,c,t)).y>n&&(n=Math.floor(o.y)),a=Math.floor(o.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(d.WORLD_CENTER_X-o.x/2,d.WORLD_CENTER_Y-o.y/2))},C.radialLayout=function(e,t,r){var n=Math.max(this.maxDiagonalInTree(e),u.DEFAULT_RADIAL_SEPARATION);C.branchRadialLayout(t,null,0,359,0,n);var i=x.calculateBounds(e),a=new b;a.setDeviceOrgX(i.getMinX()),a.setDeviceOrgY(i.getMinY()),a.setWorldOrgX(r.x),a.setWorldOrgY(r.y);for(var o=0;o<e.length;o++){e[o].transform(a)}var s=new p(i.getMaxX(),i.getMaxY());return a.inverseTransformPoint(s)},C.branchRadialLayout=function(e,t,r,n,i,a){var o=(n-r+1)/2;o<0&&(o+=180);var s=(o+r)%360*v.TWO_PI/360,l=i*Math.cos(s),u=i*Math.sin(s);e.setCenter(l,u);var c=[],h=(c=c.concat(e.getEdges())).length;null!=t&&h--;for(var d,f=0,p=c.length,g=e.getEdgesBetween(t);g.length>1;){var m=g[0];g.splice(0,1);var y=c.indexOf(m);y>=0&&c.splice(y,1),p--,h--}d=null!=t?(c.indexOf(g[0])+1)%p:0;for(var x=Math.abs(n-r)/h,b=d;f!=h;b=++b%p){var T=c[b].getOtherEnd(e);if(T!=t){var w=(r+f*x)%360,k=(w+x)%360;C.branchRadialLayout(T,e,w,k,i+a,a),f++}}},C.maxDiagonalInTree=function(e){for(var t=y.MIN_VALUE,r=0;r<e.length;r++){var n=e[r].getDiagonal();n>t&&(t=n)}return t},C.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},C.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var r=[],n=this.graphManager.getAllNodes(),i=0;i<n.length;i++){var a=(s=n[i]).getParent();0===this.getNodeDegreeWithChildren(s)&&(null==a.id||!this.getToBeTiled(a))&&r.push(s)}for(i=0;i<r.length;i++){var s,l=(s=r[i]).getParent().id;typeof t[l]>"u"&&(t[l]=[]),t[l]=t[l].concat(s)}Object.keys(t).forEach((function(r){if(t[r].length>1){var n="DummyCompound_"+r;e.memberGroups[n]=t[r];var i=t[r][0].getParent(),a=new o(e.graphManager);a.id=n,a.paddingLeft=i.paddingLeft||0,a.paddingRight=i.paddingRight||0,a.paddingBottom=i.paddingBottom||0,a.paddingTop=i.paddingTop||0,e.idToDummyNode[n]=a;var s=e.getGraphManager().add(e.newGraph(),a),l=i.getChild();l.add(a);for(var u=0;u<t[r].length;u++){var c=t[r][u];l.remove(c),s.add(c)}}}))},C.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var r=0;r<this.compoundOrder.length;r++)t[this.compoundOrder[r].id]=this.compoundOrder[r],e[this.compoundOrder[r].id]=[].concat(this.compoundOrder[r].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[r].getChild()),this.compoundOrder[r].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},C.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(r){var n=e.idToDummyNode[r];if(t[r]=e.tileNodes(e.memberGroups[r],n.paddingLeft+n.paddingRight),n.rect.width=t[r].width,n.rect.height=t[r].height,n.setCenter(t[r].centerX,t[r].centerY),n.labelMarginLeft=0,n.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var i=n.rect.width,a=n.rect.height;n.labelWidth&&("left"==n.labelPosHorizontal?(n.rect.x-=n.labelWidth,n.setWidth(i+n.labelWidth),n.labelMarginLeft=n.labelWidth):"center"==n.labelPosHorizontal&&n.labelWidth>i?(n.rect.x-=(n.labelWidth-i)/2,n.setWidth(n.labelWidth),n.labelMarginLeft=(n.labelWidth-i)/2):"right"==n.labelPosHorizontal&&n.setWidth(i+n.labelWidth)),n.labelHeight&&("top"==n.labelPosVertical?(n.rect.y-=n.labelHeight,n.setHeight(a+n.labelHeight),n.labelMarginTop=n.labelHeight):"center"==n.labelPosVertical&&n.labelHeight>a?(n.rect.y-=(n.labelHeight-a)/2,n.setHeight(n.labelHeight),n.labelMarginTop=(n.labelHeight-a)/2):"bottom"==n.labelPosVertical&&n.setHeight(a+n.labelHeight))}}))},C.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],r=t.id,n=t.paddingLeft,i=t.paddingTop,a=t.labelMarginLeft,o=t.labelMarginTop;this.adjustLocations(this.tiledMemberPack[r],t.rect.x,t.rect.y,n,i,a,o)}},C.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach((function(r){var n=e.idToDummyNode[r],i=n.paddingLeft,a=n.paddingTop,o=n.labelMarginLeft,s=n.labelMarginTop;e.adjustLocations(t[r],n.rect.x,n.rect.y,i,a,o,s)}))},C.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var r=e.getChild();if(null==r)return this.toBeTiled[t]=!1,!1;for(var n=r.getNodes(),i=0;i<n.length;i++){var a=n[i];if(this.getNodeDegree(a)>0)return this.toBeTiled[t]=!1,!1;if(null!=a.getChild()){if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[a.id]=!1}return this.toBeTiled[t]=!0,!0},C.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),r=0,n=0;n<t.length;n++){var i=t[n];i.getSource().id!==i.getTarget().id&&(r+=1)}return r},C.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var r=e.getChild().getNodes(),n=0;n<r.length;n++){var i=r[n];t+=this.getNodeDegreeWithChildren(i)}return t},C.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},C.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var r=e[t];null!=r.getChild()&&this.fillCompexOrderByDFS(r.getChild().getNodes()),this.getToBeTiled(r)&&this.compoundOrder.push(r)}},C.prototype.adjustLocations=function(e,t,r,n,i,a,o){r+=i+o;for(var s=t+=n+a,l=0;l<e.rows.length;l++){var u=e.rows[l];t=s;for(var c=0,h=0;h<u.length;h++){var d=u[h];d.rect.x=t,d.rect.y=r,t+=d.rect.width+e.horizontalPadding,d.rect.height>c&&(c=d.rect.height)}r+=c+e.verticalPadding}},C.prototype.tileCompoundMembers=function(e,t){var r=this;this.tiledMemberPack=[],Object.keys(e).forEach((function(n){var i=t[n];if(r.tiledMemberPack[n]=r.tileNodes(e[n],i.paddingLeft+i.paddingRight),i.rect.width=r.tiledMemberPack[n].width,i.rect.height=r.tiledMemberPack[n].height,i.setCenter(r.tiledMemberPack[n].centerX,r.tiledMemberPack[n].centerY),i.labelMarginLeft=0,i.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var a=i.rect.width,o=i.rect.height;i.labelWidth&&("left"==i.labelPosHorizontal?(i.rect.x-=i.labelWidth,i.setWidth(a+i.labelWidth),i.labelMarginLeft=i.labelWidth):"center"==i.labelPosHorizontal&&i.labelWidth>a?(i.rect.x-=(i.labelWidth-a)/2,i.setWidth(i.labelWidth),i.labelMarginLeft=(i.labelWidth-a)/2):"right"==i.labelPosHorizontal&&i.setWidth(a+i.labelWidth)),i.labelHeight&&("top"==i.labelPosVertical?(i.rect.y-=i.labelHeight,i.setHeight(o+i.labelHeight),i.labelMarginTop=i.labelHeight):"center"==i.labelPosVertical&&i.labelHeight>o?(i.rect.y-=(i.labelHeight-o)/2,i.setHeight(i.labelHeight),i.labelMarginTop=(i.labelHeight-o)/2):"bottom"==i.labelPosVertical&&i.setHeight(o+i.labelHeight))}}))},C.prototype.tileNodes=function(e,t){var r=this.tileNodesByFavoringDim(e,t,!0),n=this.tileNodesByFavoringDim(e,t,!1),i=this.getOrgRatio(r);return this.getOrgRatio(n)<i?n:r},C.prototype.getOrgRatio=function(e){var t=e.width/e.height;return t<1&&(t=1/t),t},C.prototype.calcIdealRowWidth=function(e,t){var r=u.TILING_PADDING_VERTICAL,n=u.TILING_PADDING_HORIZONTAL,i=e.length,a=0,o=0,s=0;e.forEach((function(e){a+=e.getWidth(),o+=e.getHeight(),e.getWidth()>s&&(s=e.getWidth())}));var l,c=a/i,h=o/i,d=Math.pow(r-n,2)+4*(c+n)*(h+r)*i,f=(n-r+Math.sqrt(d))/(2*(c+n));t?(l=Math.ceil(f))==f&&l++:l=Math.floor(f);var p=l*(c+n)-n;return s>p&&(p=s),p+=2*n},C.prototype.tileNodesByFavoringDim=function(e,t,r){var n=u.TILING_PADDING_VERTICAL,i=u.TILING_PADDING_HORIZONTAL,a=u.TILING_COMPARE_BY,o={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:n,horizontalPadding:i,centerX:0,centerY:0};a&&(o.idealRowWidth=this.calcIdealRowWidth(e,r));var l=s((function(e){return e.rect.width*e.rect.height}),"getNodeArea"),c=s((function(e,t){return l(t)-l(e)}),"areaCompareFcn");e.sort((function(e,t){var r=c;return o.idealRowWidth?(r=a)(e.id,t.id):r(e,t)}));for(var h=0,d=0,f=0;f<e.length;f++){h+=(p=e[f]).getCenterX(),d+=p.getCenterY()}o.centerX=h/e.length,o.centerY=d/e.length;for(f=0;f<e.length;f++){var p=e[f];if(0==o.rows.length)this.insertNodeToRow(o,p,0,t);else if(this.canAddHorizontal(o,p.rect.width,p.rect.height)){var g=o.rows.length-1;o.idealRowWidth||(g=this.getShortestRowIndex(o)),this.insertNodeToRow(o,p,g,t)}else this.insertNodeToRow(o,p,o.rows.length,t);this.shiftToLastRow(o)}return o},C.prototype.insertNodeToRow=function(e,t,r,n){var i=n;if(r==e.rows.length){e.rows.push([]),e.rowWidth.push(i),e.rowHeight.push(0)}var a=e.rowWidth[r]+t.rect.width;e.rows[r].length>0&&(a+=e.horizontalPadding),e.rowWidth[r]=a,e.width<a&&(e.width=a);var o=t.rect.height;r>0&&(o+=e.verticalPadding);var s=0;o>e.rowHeight[r]&&(s=e.rowHeight[r],e.rowHeight[r]=o,s=e.rowHeight[r]-s),e.height+=s,e.rows[r].push(t)},C.prototype.getShortestRowIndex=function(e){for(var t=-1,r=Number.MAX_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]<r&&(t=n,r=e.rowWidth[n]);return t},C.prototype.getLongestRowIndex=function(e){for(var t=-1,r=Number.MIN_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]>r&&(t=n,r=e.rowWidth[n]);return t},C.prototype.canAddHorizontal=function(e,t,r){if(e.idealRowWidth){var n=e.rows.length-1;return e.rowWidth[n]+t+e.horizontalPadding<=e.idealRowWidth}var i=this.getShortestRowIndex(e);if(i<0)return!0;var a=e.rowWidth[i];if(a+e.horizontalPadding+t<=e.width)return!0;var o,s,l=0;return e.rowHeight[i]<r&&i>0&&(l=r+e.verticalPadding-e.rowHeight[i]),o=e.width-a>=t+e.horizontalPadding?(e.height+l)/(a+t+e.horizontalPadding):(e.height+l)/e.width,l=r+e.verticalPadding,(s=e.width<t?(e.height+l)/t:(e.height+l)/e.width)<1&&(s=1/s),o<1&&(o=1/o),o<s},C.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),r=e.rowWidth.length-1,n=e.rows[t],i=n[n.length-1],a=i.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>a&&t!=r){n.splice(-1,1),e.rows[r].push(i),e.rowWidth[t]=e.rowWidth[t]-a,e.rowWidth[r]=e.rowWidth[r]+a,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var o=Number.MIN_VALUE,s=0;s<n.length;s++)n[s].height>o&&(o=n[s].height);t>0&&(o+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[r];e.rowHeight[t]=o,e.rowHeight[r]<i.height+e.verticalPadding&&(e.rowHeight[r]=i.height+e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[r];e.height+=u-l,this.shiftToLastRow(e)}},C.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},C.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},C.prototype.reduceTrees=function(){for(var e,t=[],r=!0;r;){var n=this.graphManager.getAllNodes(),i=[];r=!1;for(var a=0;a<n.length;a++)if(1==(e=n[a]).getEdges().length&&!e.getEdges()[0].isInterGraph&&null==e.getChild()){if(u.PURE_INCREMENTAL){var o=e.getEdges()[0].getOtherEnd(e),s=new g(e.getCenterX()-o.getCenterX(),e.getCenterY()-o.getCenterY());i.push([e,e.getEdges()[0],e.getOwner(),s])}else i.push([e,e.getEdges()[0],e.getOwner()]);r=!0}if(1==r){for(var l=[],c=0;c<i.length;c++)1==i[c][0].getEdges().length&&(l.push(i[c]),i[c][0].getOwner().remove(i[c][0]));t.push(l),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},C.prototype.growTree=function(e){for(var t,r=e[e.length-1],n=0;n<r.length;n++)t=r[n],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},C.prototype.findPlaceforPrunedNode=function(e){var t,r,n=e[0];if(r=n==e[1].source?e[1].target:e[1].source,u.PURE_INCREMENTAL)n.setCenter(r.getCenterX()+e[3].getWidth(),r.getCenterY()+e[3].getHeight());else{var i=r.startX,a=r.finishX,o=r.startY,s=r.finishY,l=[0,0,0,0];if(o>0)for(var c=i;c<=a;c++)l[0]+=this.grid[c][o-1].length+this.grid[c][o].length-1;if(a<this.grid.length-1)for(c=o;c<=s;c++)l[1]+=this.grid[a+1][c].length+this.grid[a][c].length-1;if(s<this.grid[0].length-1)for(c=i;c<=a;c++)l[2]+=this.grid[c][s+1].length+this.grid[c][s].length-1;if(i>0)for(c=o;c<=s;c++)l[3]+=this.grid[i-1][c].length+this.grid[i][c].length-1;for(var d,f,p=y.MAX_VALUE,g=0;g<l.length;g++)l[g]<p?(p=l[g],d=1,f=g):l[g]==p&&d++;if(3==d&&0==p)0==l[0]&&0==l[1]&&0==l[2]?t=1:0==l[0]&&0==l[1]&&0==l[3]?t=0:0==l[0]&&0==l[2]&&0==l[3]?t=3:0==l[1]&&0==l[2]&&0==l[3]&&(t=2);else if(2==d&&0==p){var m=Math.floor(2*Math.random());t=0==l[0]&&0==l[1]?0==m?0:1:0==l[0]&&0==l[2]?0==m?0:2:0==l[0]&&0==l[3]?0==m?0:3:0==l[1]&&0==l[2]?0==m?1:2:0==l[1]&&0==l[3]?0==m?1:3:0==m?2:3}else if(4==d&&0==p){t=m=Math.floor(4*Math.random())}else t=f;0==t?n.setCenter(r.getCenterX(),r.getCenterY()-r.getHeight()/2-h.DEFAULT_EDGE_LENGTH-n.getHeight()/2):1==t?n.setCenter(r.getCenterX()+r.getWidth()/2+h.DEFAULT_EDGE_LENGTH+n.getWidth()/2,r.getCenterY()):2==t?n.setCenter(r.getCenterX(),r.getCenterY()+r.getHeight()/2+h.DEFAULT_EDGE_LENGTH+n.getHeight()/2):n.setCenter(r.getCenterX()-r.getWidth()/2-h.DEFAULT_EDGE_LENGTH-n.getWidth()/2,r.getCenterY())}},e.exports=C},991:(e,t,r)=>{var n=r(551).FDLayoutNode,i=r(551).IMath;function a(e,t,r,i){n.call(this,e,t,r,i)}for(var o in s(a,"CoSENode"),a.prototype=Object.create(n.prototype),n)a[o]=n[o];a.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(e,t){for(var r,n=this.getChild().getNodes(),i=0;i<n.length;i++)null==(r=n[i]).getChild()?(r.displacementX+=e,r.displacementY+=t):r.propogateDisplacementToChildren(e,t)},a.prototype.move=function(){var e=this.graphManager.getLayout();(null==this.child||0==this.child.getNodes().length)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(e){this.pred1=e},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(e){this.next=e},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(e){this.processed=e},a.prototype.isProcessed=function(){return processed},e.exports=a},902:(e,t,r)=>{function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}s(n,"_toConsumableArray");var i=r(806),a=r(551).LinkedList,o=r(551).Matrix,l=r(551).SVD;function u(){}s(u,"ConstraintHandler"),u.handleConstraints=function(e){var t={};t.fixedNodeConstraint=e.constraints.fixedNodeConstraint,t.alignmentConstraint=e.constraints.alignmentConstraint,t.relativePlacementConstraint=e.constraints.relativePlacementConstraint;for(var r=new Map,u=new Map,c=[],h=[],d=e.getAllNodes(),f=0,p=0;p<d.length;p++){var g=d[p];null==g.getChild()&&(u.set(g.id,f++),c.push(g.getCenterX()),h.push(g.getCenterY()),r.set(g.id,g))}t.relativePlacementConstraint&&t.relativePlacementConstraint.forEach((function(e){!e.gap&&0!=e.gap&&(e.left?e.gap=i.DEFAULT_EDGE_LENGTH+r.get(e.left).getWidth()/2+r.get(e.right).getWidth()/2:e.gap=i.DEFAULT_EDGE_LENGTH+r.get(e.top).getHeight()/2+r.get(e.bottom).getHeight()/2)}));var m=s((function(e,t){return{x:e.x-t.x,y:e.y-t.y}}),"calculatePositionDiff"),y=s((function(e){var t=0,r=0;return e.forEach((function(e){t+=c[u.get(e)],r+=h[u.get(e)]})),{x:t/e.size,y:r/e.size}}),"calculateAvgPosition"),v=s((function(e,t,r,i,o){function l(e,t){var r=new Set(e),n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;r.add(l)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}s(l,"setUnion");var d=new Map;e.forEach((function(e,t){d.set(t,0)})),e.forEach((function(e,t){e.forEach((function(e){d.set(e.id,d.get(e.id)+1)}))}));var f=new Map,p=new Map,g=new a;d.forEach((function(e,n){0==e?(g.push(n),r||("horizontal"==t?f.set(n,u.has(n)?c[u.get(n)]:i.get(n)):f.set(n,u.has(n)?h[u.get(n)]:i.get(n)))):f.set(n,Number.NEGATIVE_INFINITY),r&&p.set(n,new Set([n]))})),r&&o.forEach((function(e){var n=[];if(e.forEach((function(e){r.has(e)&&n.push(e)})),n.length>0){var a=0;n.forEach((function(e){"horizontal"==t?(f.set(e,u.has(e)?c[u.get(e)]:i.get(e)),a+=f.get(e)):(f.set(e,u.has(e)?h[u.get(e)]:i.get(e)),a+=f.get(e))})),a/=n.length,e.forEach((function(e){r.has(e)||f.set(e,a)}))}else{var o=0;e.forEach((function(e){o+="horizontal"==t?u.has(e)?c[u.get(e)]:i.get(e):u.has(e)?h[u.get(e)]:i.get(e)})),o/=e.length,e.forEach((function(e){f.set(e,o)}))}}));for(var m=s((function(){var n=g.shift();e.get(n).forEach((function(e){if(f.get(e.id)<f.get(n)+e.gap)if(r&&r.has(e.id)){var a=void 0;if(a="horizontal"==t?u.has(e.id)?c[u.get(e.id)]:i.get(e.id):u.has(e.id)?h[u.get(e.id)]:i.get(e.id),f.set(e.id,a),a<f.get(n)+e.gap){var o=f.get(n)+e.gap-a;p.get(n).forEach((function(e){f.set(e,f.get(e)-o)}))}}else f.set(e.id,f.get(n)+e.gap);d.set(e.id,d.get(e.id)-1),0==d.get(e.id)&&g.push(e.id),r&&p.set(e.id,l(p.get(n),p.get(e.id)))}))}),"_loop");0!=g.length;)m();if(r){var y=new Set;e.forEach((function(e,t){0==e.length&&y.add(t)}));var v=[];p.forEach((function(e,t){if(y.has(t)){var i=!1,a=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;r.has(c)&&(i=!0)}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}if(!i){var h=!1,d=void 0;v.forEach((function(t,r){t.has([].concat(n(e))[0])&&(h=!0,d=r)})),h?e.forEach((function(e){v[d].add(e)})):v.push(new Set(e))}}})),v.forEach((function(e,r){var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=!0,d=!1,p=void 0;try{for(var g,m=e[Symbol.iterator]();!(l=(g=m.next()).done);l=!0){var y=g.value,v=void 0;v="horizontal"==t?u.has(y)?c[u.get(y)]:i.get(y):u.has(y)?h[u.get(y)]:i.get(y);var x=f.get(y);v<n&&(n=v),v>o&&(o=v),x<a&&(a=x),x>s&&(s=x)}}catch(e){d=!0,p=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw p}}var b=(n+o)/2-(a+s)/2,T=!0,C=!1,w=void 0;try{for(var k,E=e[Symbol.iterator]();!(T=(k=E.next()).done);T=!0){var _=k.value;f.set(_,f.get(_)+b)}}catch(e){C=!0,w=e}finally{try{!T&&E.return&&E.return()}finally{if(C)throw w}}}))}return f}),"findAppropriatePositionForRelativePlacement"),x=s((function(e){var t=0,r=0,n=0,i=0;if(e.forEach((function(e){e.left?c[u.get(e.left)]-c[u.get(e.right)]>=0?t++:r++:h[u.get(e.top)]-h[u.get(e.bottom)]>=0?n++:i++})),t>r&&n>i)for(var a=0;a<u.size;a++)c[a]=-1*c[a],h[a]=-1*h[a];else if(t>r)for(var o=0;o<u.size;o++)c[o]=-1*c[o];else if(n>i)for(var s=0;s<u.size;s++)h[s]=-1*h[s]}),"applyReflectionForRelativePlacement"),b=s((function(e){var t=[],r=new a,n=new Set,i=0;return e.forEach((function(a,o){if(!n.has(o)){t[i]=[];var s=o;for(r.push(s),n.add(s),t[i].push(s);0!=r.length;){s=r.shift(),e.get(s).forEach((function(e){n.has(e.id)||(r.push(e.id),n.add(e.id),t[i].push(e.id))}))}i++}})),t}),"findComponents"),T=s((function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(r).push(e),t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t}),"dagToUndirected"),C=s((function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t}),"dagToReversed"),w=[],k=[],E=!1,_=!1,A=new Set,S=new Map,R=new Map,N=[];if(t.fixedNodeConstraint&&t.fixedNodeConstraint.forEach((function(e){A.add(e.nodeId)})),t.relativePlacementConstraint&&(t.relativePlacementConstraint.forEach((function(e){e.left?(S.has(e.left)?S.get(e.left).push({id:e.right,gap:e.gap,direction:"horizontal"}):S.set(e.left,[{id:e.right,gap:e.gap,direction:"horizontal"}]),S.has(e.right)||S.set(e.right,[])):(S.has(e.top)?S.get(e.top).push({id:e.bottom,gap:e.gap,direction:"vertical"}):S.set(e.top,[{id:e.bottom,gap:e.gap,direction:"vertical"}]),S.has(e.bottom)||S.set(e.bottom,[]))})),R=T(S),N=b(R)),i.TRANSFORM_ON_CONSTRAINT_HANDLING){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>1)t.fixedNodeConstraint.forEach((function(e,t){w[t]=[e.position.x,e.position.y],k[t]=[c[u.get(e.nodeId)],h[u.get(e.nodeId)]]})),E=!0;else if(t.alignmentConstraint)!function(){var e=0;if(t.alignmentConstraint.vertical){for(var r=t.alignmentConstraint.vertical,i=s((function(t){var i=new Set;r[t].forEach((function(e){i.add(e)}));var a=new Set([].concat(n(i)).filter((function(e){return A.has(e)}))),o=void 0;o=a.size>0?c[u.get(a.values().next().value)]:y(i).x,r[t].forEach((function(t){w[e]=[o,h[u.get(t)]],k[e]=[c[u.get(t)],h[u.get(t)]],e++}))}),"_loop2"),a=0;a<r.length;a++)i(a);E=!0}if(t.alignmentConstraint.horizontal){for(var o=t.alignmentConstraint.horizontal,l=s((function(t){var r=new Set;o[t].forEach((function(e){r.add(e)}));var i=new Set([].concat(n(r)).filter((function(e){return A.has(e)}))),a=void 0;a=i.size>0?c[u.get(i.values().next().value)]:y(r).y,o[t].forEach((function(t){w[e]=[c[u.get(t)],a],k[e]=[c[u.get(t)],h[u.get(t)]],e++}))}),"_loop3"),d=0;d<o.length;d++)l(d);E=!0}t.relativePlacementConstraint&&(_=!0)}();else if(t.relativePlacementConstraint){for(var L=0,I=0,M=0;M<N.length;M++)N[M].length>L&&(L=N[M].length,I=M);if(L<R.size/2)x(t.relativePlacementConstraint),E=!1,_=!1;else{var O=new Map,P=new Map,D=[];N[I].forEach((function(e){S.get(e).forEach((function(t){"horizontal"==t.direction?(O.has(e)?O.get(e).push(t):O.set(e,[t]),O.has(t.id)||O.set(t.id,[]),D.push({left:e,right:t.id})):(P.has(e)?P.get(e).push(t):P.set(e,[t]),P.has(t.id)||P.set(t.id,[]),D.push({top:e,bottom:t.id}))}))})),x(D),_=!1;var B=v(O,"horizontal"),F=v(P,"vertical");N[I].forEach((function(e,t){k[t]=[c[u.get(e)],h[u.get(e)]],w[t]=[],B.has(e)?w[t][0]=B.get(e):w[t][0]=c[u.get(e)],F.has(e)?w[t][1]=F.get(e):w[t][1]=h[u.get(e)]})),E=!0}}if(E){for(var $,z=o.transpose(w),U=o.transpose(k),G=0;G<z.length;G++)z[G]=o.multGamma(z[G]),U[G]=o.multGamma(U[G]);var j=o.multMat(z,o.transpose(U)),V=l.svd(j);$=o.multMat(V.V,o.transpose(V.U));for(var W=0;W<u.size;W++){var H=[c[W],h[W]],q=[$[0][0],$[1][0]],Y=[$[0][1],$[1][1]];c[W]=o.dotProduct(H,q),h[W]=o.dotProduct(H,Y)}_&&x(t.relativePlacementConstraint)}}if(i.ENFORCE_CONSTRAINTS){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>0){var X={x:0,y:0};t.fixedNodeConstraint.forEach((function(e,t){var r={x:c[u.get(e.nodeId)],y:h[u.get(e.nodeId)]},n=e.position,i=m(n,r);X.x+=i.x,X.y+=i.y})),X.x/=t.fixedNodeConstraint.length,X.y/=t.fixedNodeConstraint.length,c.forEach((function(e,t){c[t]+=X.x})),h.forEach((function(e,t){h[t]+=X.y})),t.fixedNodeConstraint.forEach((function(e){c[u.get(e.nodeId)]=e.position.x,h[u.get(e.nodeId)]=e.position.y}))}if(t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var K=t.alignmentConstraint.vertical,Z=s((function(e){var t=new Set;K[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(n(t)).filter((function(e){return A.has(e)}))),i=void 0;i=r.size>0?c[u.get(r.values().next().value)]:y(t).x,t.forEach((function(e){A.has(e)||(c[u.get(e)]=i)}))}),"_loop4"),Q=0;Q<K.length;Q++)Z(Q);if(t.alignmentConstraint.horizontal)for(var J=t.alignmentConstraint.horizontal,ee=s((function(e){var t=new Set;J[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(n(t)).filter((function(e){return A.has(e)}))),i=void 0;i=r.size>0?h[u.get(r.values().next().value)]:y(t).y,t.forEach((function(e){A.has(e)||(h[u.get(e)]=i)}))}),"_loop5"),te=0;te<J.length;te++)ee(te)}t.relativePlacementConstraint&&function(){var e=new Map,r=new Map,n=new Map,i=new Map,a=new Map,o=new Map,l=new Set,d=new Set;if(A.forEach((function(e){l.add(e),d.add(e)})),t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var f=t.alignmentConstraint.vertical,p=s((function(t){n.set("dummy"+t,[]),f[t].forEach((function(r){e.set(r,"dummy"+t),n.get("dummy"+t).push(r),A.has(r)&&l.add("dummy"+t)})),a.set("dummy"+t,c[u.get(f[t][0])])}),"_loop6"),g=0;g<f.length;g++)p(g);if(t.alignmentConstraint.horizontal)for(var m=t.alignmentConstraint.horizontal,y=s((function(e){i.set("dummy"+e,[]),m[e].forEach((function(t){r.set(t,"dummy"+e),i.get("dummy"+e).push(t),A.has(t)&&d.add("dummy"+e)})),o.set("dummy"+e,h[u.get(m[e][0])])}),"_loop7"),x=0;x<m.length;x++)y(x)}var w=new Map,k=new Map,E=s((function(t){S.get(t).forEach((function(n){var i=void 0,a=void 0;"horizontal"==n.direction?(i=e.get(t)?e.get(t):t,a=e.get(n.id)?{id:e.get(n.id),gap:n.gap,direction:n.direction}:n,w.has(i)?w.get(i).push(a):w.set(i,[a]),w.has(a.id)||w.set(a.id,[])):(i=r.get(t)?r.get(t):t,a=r.get(n.id)?{id:r.get(n.id),gap:n.gap,direction:n.direction}:n,k.has(i)?k.get(i).push(a):k.set(i,[a]),k.has(a.id)||k.set(a.id,[]))}))}),"_loop8"),_=!0,R=!1,N=void 0;try{for(var L,I=S.keys()[Symbol.iterator]();!(_=(L=I.next()).done);_=!0){E(L.value)}}catch(e){R=!0,N=e}finally{try{!_&&I.return&&I.return()}finally{if(R)throw N}}var M=T(w),O=T(k),P=b(M),D=b(O),B=C(w),F=C(k),$=[],z=[];P.forEach((function(e,t){$[t]=[],e.forEach((function(e){0==B.get(e).length&&$[t].push(e)}))})),D.forEach((function(e,t){z[t]=[],e.forEach((function(e){0==F.get(e).length&&z[t].push(e)}))}));var U=v(w,"horizontal",l,a,$),G=v(k,"vertical",d,o,z),j=s((function(e){n.get(e)?n.get(e).forEach((function(t){c[u.get(t)]=U.get(e)})):c[u.get(e)]=U.get(e)}),"_loop9"),V=!0,W=!1,H=void 0;try{for(var q,Y=U.keys()[Symbol.iterator]();!(V=(q=Y.next()).done);V=!0){j(q.value)}}catch(e){W=!0,H=e}finally{try{!V&&Y.return&&Y.return()}finally{if(W)throw H}}var X=s((function(e){i.get(e)?i.get(e).forEach((function(t){h[u.get(t)]=G.get(e)})):h[u.get(e)]=G.get(e)}),"_loop10"),K=!0,Z=!1,Q=void 0;try{for(var J,ee=G.keys()[Symbol.iterator]();!(K=(J=ee.next()).done);K=!0){X(J.value)}}catch(e){Z=!0,Q=e}finally{try{!K&&ee.return&&ee.return()}finally{if(Z)throw Q}}}()}for(var re=0;re<d.length;re++){var ne=d[re];null==ne.getChild()&&ne.setCenter(c[u.get(ne.id)],h[u.get(ne.id)])}},e.exports=u},551:t=>{t.exports=e}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}return s(n,"__webpack_require__"),n(45)})()}))})),A3=l(((e,t)=>{s((function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n(_3()):"function"==typeof define&&define.amd?define(["cose-base"],n):"object"==typeof e?e.cytoscapeFcose=n(_3()):r.cytoscapeFcose=n(r.coseBase)}),"webpackUniversalModuleDefinition")(e,(function(e){return(()=>{var t={658:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},548:(e,t,r)=>{var n=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return s(e,"sliceIterator"),function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(140).layoutBase.LinkedList,a={getTopMostNodes:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].id()]=!0;var n=e.filter((function(e,r){"number"==typeof e&&(e=r);for(var n=e.parent()[0];null!=n;){if(t[n.id()])return!1;n=n.parent()[0]}return!0}));return n},connectComponents:function(e,t,r,n){var a=new i,o=new Set,l=[],u=void 0,c=void 0,h=void 0,d=!1,f=1,p=[],g=[],m=s((function(){var n=e.collection();g.push(n);var i=r[0],m=e.collection();m.merge(i).merge(i.descendants().intersection(t)),l.push(i),m.forEach((function(e){a.push(e),o.add(e),n.merge(e)}));for(var y=s((function(){i=a.shift();var s=e.collection();i.neighborhood().nodes().forEach((function(e){t.intersection(i.edgesWith(e)).length>0&&s.merge(e)}));for(var c=0;c<s.length;c++){var h=s[c];if(null!=(u=r.intersection(h.union(h.ancestors())))&&!o.has(u[0]))u.union(u.descendants()).forEach((function(e){a.push(e),o.add(e),n.merge(e),r.has(e)&&l.push(e)}))}}),"_loop2");0!=a.length;)y();if(n.forEach((function(e){t.intersection(e.connectedEdges()).forEach((function(e){n.has(e.source())&&n.has(e.target())&&n.merge(e)}))})),l.length==r.length&&(d=!0),!d||d&&f>1){c=l[0],h=c.connectedEdges().length,l.forEach((function(e){e.connectedEdges().length<h&&(h=e.connectedEdges().length,c=e)})),p.push(c.id());var v=e.collection();v.merge(l[0]),l.forEach((function(e){v.merge(e)})),l=[],r=r.difference(v),f++}}),"_loop");do{m()}while(!d);return n&&p.length>0&&n.set("dummy"+(n.size+1),p),g},relocateComponent:function(e,t,r){if(!r.fixedNodeConstraint){var i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;if("draft"==r.quality){var l=!0,u=!1,c=void 0;try{for(var h,d=t.nodeIndexes[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value,p=n(f,2),g=p[0],m=p[1],y=r.cy.getElementById(g);if(y){var v=y.boundingBox(),x=t.xCoords[m]-v.w/2,b=t.xCoords[m]+v.w/2,T=t.yCoords[m]-v.h/2,C=t.yCoords[m]+v.h/2;x<i&&(i=x),b>a&&(a=b),T<o&&(o=T),C>s&&(s=C)}}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}var w=e.x-(a+i)/2,k=e.y-(s+o)/2;t.xCoords=t.xCoords.map((function(e){return e+w})),t.yCoords=t.yCoords.map((function(e){return e+k}))}else{Object.keys(t).forEach((function(e){var r=t[e],n=r.getRect().x,l=r.getRect().x+r.getRect().width,u=r.getRect().y,c=r.getRect().y+r.getRect().height;n<i&&(i=n),l>a&&(a=l),u<o&&(o=u),c>s&&(s=c)}));var E=e.x-(a+i)/2,_=e.y-(s+o)/2;Object.keys(t).forEach((function(e){var r=t[e];r.setCenter(r.getCenterX()+E,r.getCenterY()+_)}))}}},calcBoundingBox:function(e,t,r,n){for(var i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=void 0,u=void 0,c=void 0,h=void 0,d=e.descendants().not(":parent"),f=d.length,p=0;p<f;p++){var g=d[p];i>(l=t[n.get(g.id())]-g.width()/2)&&(i=l),a<(u=t[n.get(g.id())]+g.width()/2)&&(a=u),o>(c=r[n.get(g.id())]-g.height()/2)&&(o=c),s<(h=r[n.get(g.id())]+g.height()/2)&&(s=h)}var m={};return m.topLeftX=i,m.topLeftY=o,m.width=a-i,m.height=s-o,m},calcParentsWithoutChildren:function(e,t){var r=e.collection();return t.nodes(":parent").forEach((function(e){var t=!1;e.children().forEach((function(e){"none"!=e.css("display")&&(t=!0)})),t||r.merge(e)})),r}};e.exports=a},816:(e,t,r)=>{var n=r(548),i=r(140).CoSELayout,a=r(140).CoSENode,o=r(140).layoutBase.PointD,l=r(140).layoutBase.DimensionD,u=r(140).layoutBase.LayoutConstants,c=r(140).layoutBase.FDLayoutConstants,h=r(140).CoSEConstants,d=s((function(e,t){var r=e.cy,d=e.eles,f=d.nodes(),p=d.edges(),g=void 0,m=void 0,y=void 0,v={};e.randomize&&(g=t.nodeIndexes,m=t.xCoords,y=t.yCoords);var x=s((function(e){return"function"==typeof e}),"isFn"),b=s((function(e,t){return x(e)?e(t):e}),"optFn"),T=n.calcParentsWithoutChildren(r,d),C=s((function e(t,r,i,s){for(var u=r.length,c=0;c<u;c++){var h=r[c],d=null;0==h.intersection(T).length&&(d=h.children());var f=void 0,p=h.layoutDimensions({nodeDimensionsIncludeLabels:s.nodeDimensionsIncludeLabels});if(null!=h.outerWidth()&&null!=h.outerHeight())if(s.randomize)if(h.isParent()){var x=n.calcBoundingBox(h,m,y,g);f=0==h.intersection(T).length?t.add(new a(i.graphManager,new o(x.topLeftX,x.topLeftY),new l(x.width,x.height))):t.add(new a(i.graphManager,new o(x.topLeftX,x.topLeftY),new l(parseFloat(p.w),parseFloat(p.h))))}else f=t.add(new a(i.graphManager,new o(m[g.get(h.id())]-p.w/2,y[g.get(h.id())]-p.h/2),new l(parseFloat(p.w),parseFloat(p.h))));else f=t.add(new a(i.graphManager,new o(h.position("x")-p.w/2,h.position("y")-p.h/2),new l(parseFloat(p.w),parseFloat(p.h))));else f=t.add(new a(this.graphManager));if(f.id=h.data("id"),f.nodeRepulsion=b(s.nodeRepulsion,h),f.paddingLeft=parseInt(h.css("padding")),f.paddingTop=parseInt(h.css("padding")),f.paddingRight=parseInt(h.css("padding")),f.paddingBottom=parseInt(h.css("padding")),s.nodeDimensionsIncludeLabels&&(f.labelWidth=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,f.labelHeight=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,f.labelPosVertical=h.css("text-valign"),f.labelPosHorizontal=h.css("text-halign")),v[h.data("id")]=f,isNaN(f.rect.x)&&(f.rect.x=0),isNaN(f.rect.y)&&(f.rect.y=0),null!=d&&d.length>0){e(i.getGraphManager().add(i.newGraph(),f),d,i,s)}}}),"processChildrenList"),w=s((function(t,r,n){for(var i=0,a=0,o=0;o<n.length;o++){var s=n[o],l=v[s.data("source")],u=v[s.data("target")];if(l&&u&&l!==u&&0==l.getEdgesBetween(u).length){var d=r.add(t.newEdge(),l,u);d.id=s.id(),d.idealLength=b(e.idealEdgeLength,s),d.edgeElasticity=b(e.edgeElasticity,s),i+=d.idealLength,a++}}null!=e.idealEdgeLength&&(a>0?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=i/a:x(e.idealEdgeLength)?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=50:h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=e.idealEdgeLength,h.MIN_REPULSION_DIST=c.MIN_REPULSION_DIST=c.DEFAULT_EDGE_LENGTH/10,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH)}),"processEdges"),k=s((function(e,t){t.fixedNodeConstraint&&(e.constraints.fixedNodeConstraint=t.fixedNodeConstraint),t.alignmentConstraint&&(e.constraints.alignmentConstraint=t.alignmentConstraint),t.relativePlacementConstraint&&(e.constraints.relativePlacementConstraint=t.relativePlacementConstraint)}),"processConstraints");null!=e.nestingFactor&&(h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(h.DEFAULT_GRAVITY_STRENGTH=c.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(h.MAX_ITERATIONS=c.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(h.DEFAULT_GRAVITY_RANGE_FACTOR=c.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(h.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),null!=e.tilingCompareBy&&(h.TILING_COMPARE_BY=e.tilingCompareBy),"proof"==e.quality?u.QUALITY=2:u.QUALITY=0,h.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!e.randomize,h.ANIMATE=c.ANIMATE=u.ANIMATE=e.animate,h.TILE=e.tile,h.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,h.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!0,h.PURE_INCREMENTAL=!e.randomize,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=e.uniformNodeDimensions,"transformed"==e.step&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!1),"enforced"==e.step&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!1),"cose"==e.step&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!0),"all"==e.step&&(e.randomize?h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0),e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint?h.TREE_REDUCTION_ON_INCREMENTAL=!1:h.TREE_REDUCTION_ON_INCREMENTAL=!0;var E=new i,_=E.newGraphManager();return C(_.addRoot(),n.getTopMostNodes(f),E,e),w(E,_,p),k(E,e),E.runLayout(),v}),"coseLayout");e.exports={coseLayout:d}},212:(e,t,r)=>{var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return s(e,"defineProperties"),function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(i,"_classCallCheck");var a=r(658),o=r(548),l=r(657).spectralLayout,u=r(816).coseLayout,c=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:s((function(e){return 4500}),"nodeRepulsion"),idealEdgeLength:s((function(e){return 50}),"idealEdgeLength"),edgeElasticity:s((function(e){return.45}),"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:s((function(){}),"ready"),stop:s((function(){}),"stop")}),h=function(){function e(t){i(this,e),this.options=a({},c,t)}return s(e,"Layout"),n(e,[{key:"run",value:s((function(){var e=this.options,t=e.cy,r=e.eles,n=[],i=[],a=void 0,c=[];e.fixedNodeConstraint&&(!Array.isArray(e.fixedNodeConstraint)||0==e.fixedNodeConstraint.length)&&(e.fixedNodeConstraint=void 0),e.alignmentConstraint&&(e.alignmentConstraint.vertical&&(!Array.isArray(e.alignmentConstraint.vertical)||0==e.alignmentConstraint.vertical.length)&&(e.alignmentConstraint.vertical=void 0),e.alignmentConstraint.horizontal&&(!Array.isArray(e.alignmentConstraint.horizontal)||0==e.alignmentConstraint.horizontal.length)&&(e.alignmentConstraint.horizontal=void 0)),e.relativePlacementConstraint&&(!Array.isArray(e.relativePlacementConstraint)||0==e.relativePlacementConstraint.length)&&(e.relativePlacementConstraint=void 0),(e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint)&&(e.tile=!1,e.packComponents=!1);var h=void 0,d=!1;if(t.layoutUtilities&&e.packComponents&&((h=t.layoutUtilities("get"))||(h=t.layoutUtilities()),d=!0),r.nodes().length>0)if(d){var f=o.getTopMostNodes(e.eles.nodes());if((a=o.connectComponents(t,e.eles,f)).forEach((function(e){var t=e.boundingBox();c.push({x:t.x1+t.w/2,y:t.y1+t.h/2})})),e.randomize&&a.forEach((function(t){e.eles=t,n.push(l(e))})),"default"==e.quality||"proof"==e.quality){var p=t.collection();if(e.tile){var g=new Map,m=0,y={nodeIndexes:g,xCoords:[],yCoords:[]},v=[];if(a.forEach((function(e,t){0==e.edges().length&&(e.nodes().forEach((function(t,r){p.merge(e.nodes()[r]),t.isParent()||(y.nodeIndexes.set(e.nodes()[r].id(),m++),y.xCoords.push(e.nodes()[0].position().x),y.yCoords.push(e.nodes()[0].position().y))})),v.push(t))})),p.length>1){var x=p.boundingBox();c.push({x:x.x1+x.w/2,y:x.y1+x.h/2}),a.push(p),n.push(y);for(var b=v.length-1;b>=0;b--)a.splice(v[b],1),n.splice(v[b],1),c.splice(v[b],1)}}a.forEach((function(t,r){e.eles=t,i.push(u(e,n[r])),o.relocateComponent(c[r],i[r],e)}))}else a.forEach((function(t,r){o.relocateComponent(c[r],n[r],e)}));var T=new Set;if(a.length>1){var C=[],w=r.filter((function(e){return"none"==e.css("display")}));a.forEach((function(t,r){var a=void 0;if("draft"==e.quality&&(a=n[r].nodeIndexes),t.nodes().not(w).length>0){var s={edges:[],nodes:[]},l=void 0;t.nodes().not(w).forEach((function(t){if("draft"==e.quality)if(t.isParent()){var u=o.calcBoundingBox(t,n[r].xCoords,n[r].yCoords,a);s.nodes.push({x:u.topLeftX,y:u.topLeftY,width:u.width,height:u.height})}else l=a.get(t.id()),s.nodes.push({x:n[r].xCoords[l]-t.boundingbox().w/2,y:n[r].yCoords[l]-t.boundingbox().h/2,width:t.boundingbox().w,height:t.boundingbox().h});else i[r][t.id()]&&s.nodes.push({x:i[r][t.id()].getLeft(),y:i[r][t.id()].getTop(),width:i[r][t.id()].getWidth(),height:i[r][t.id()].getHeight()})})),t.edges().forEach((function(t){var l=t.source(),u=t.target();if("none"!=l.css("display")&&"none"!=u.css("display"))if("draft"==e.quality){var c=a.get(l.id()),h=a.get(u.id()),d=[],f=[];if(l.isParent()){var p=o.calcBoundingBox(l,n[r].xCoords,n[r].yCoords,a);d.push(p.topLeftX+p.width/2),d.push(p.topLeftY+p.height/2)}else d.push(n[r].xCoords[c]),d.push(n[r].yCoords[c]);if(u.isParent()){var g=o.calcBoundingBox(u,n[r].xCoords,n[r].yCoords,a);f.push(g.topLeftX+g.width/2),f.push(g.topLeftY+g.height/2)}else f.push(n[r].xCoords[h]),f.push(n[r].yCoords[h]);s.edges.push({startX:d[0],startY:d[1],endX:f[0],endY:f[1]})}else i[r][l.id()]&&i[r][u.id()]&&s.edges.push({startX:i[r][l.id()].getCenterX(),startY:i[r][l.id()].getCenterY(),endX:i[r][u.id()].getCenterX(),endY:i[r][u.id()].getCenterY()})})),s.nodes.length>0&&(C.push(s),T.add(r))}}));var k=h.packComponents(C,e.randomize).shifts;if("draft"==e.quality)n.forEach((function(e,t){var r=e.xCoords.map((function(e){return e+k[t].dx})),n=e.yCoords.map((function(e){return e+k[t].dy}));e.xCoords=r,e.yCoords=n}));else{var E=0;T.forEach((function(e){Object.keys(i[e]).forEach((function(t){var r=i[e][t];r.setCenter(r.getCenterX()+k[E].dx,r.getCenterY()+k[E].dy)})),E++}))}}}else{var _=e.eles.boundingBox();if(c.push({x:_.x1+_.w/2,y:_.y1+_.h/2}),e.randomize){var A=l(e);n.push(A)}"default"==e.quality||"proof"==e.quality?(i.push(u(e,n[0])),o.relocateComponent(c[0],i[0],e)):o.relocateComponent(c[0],n[0],e)}var S=s((function(t,r){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=r);var a=void 0,o=void 0,s=t.data("id");return i.forEach((function(e){s in e&&(a={x:e[s].getRect().getCenterX(),y:e[s].getRect().getCenterY()},o=e[s])})),e.nodeDimensionsIncludeLabels&&(o.labelWidth&&("left"==o.labelPosHorizontal?a.x+=o.labelWidth/2:"right"==o.labelPosHorizontal&&(a.x-=o.labelWidth/2)),o.labelHeight&&("top"==o.labelPosVertical?a.y+=o.labelHeight/2:"bottom"==o.labelPosVertical&&(a.y-=o.labelHeight/2))),null==a&&(a={x:t.position("x"),y:t.position("y")}),{x:a.x,y:a.y}}var l=void 0;return n.forEach((function(e){var r=e.nodeIndexes.get(t.id());null!=r&&(l={x:e.xCoords[r],y:e.yCoords[r]})})),null==l&&(l={x:t.position("x"),y:t.position("y")}),{x:l.x,y:l.y}}),"getPositions");if("default"==e.quality||"proof"==e.quality||e.randomize){var R=o.calcParentsWithoutChildren(t,r),N=r.filter((function(e){return"none"==e.css("display")}));e.eles=r.not(N),r.nodes().not(":parent").not(N).layoutPositions(this,e,S),R.length>0&&R.forEach((function(e){e.position(S(e))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}),"run")}]),e}();e.exports=h},657:(e,t,r)=>{var n=r(548),i=r(140).layoutBase.Matrix,a=r(140).layoutBase.SVD,o=s((function(e){var t=e.cy,r=e.eles,o=r.nodes(),l=r.nodes(":parent"),u=new Map,c=new Map,h=new Map,d=[],f=[],p=[],g=[],m=[],y=[],v=[],x=[],b=void 0,T=1e8,C=1e-9,w=e.piTol,k=e.samplingType,E=e.nodeSeparation,_=void 0,A=s((function(){for(var e=0,t=0,r=!1;t<_;){e=Math.floor(Math.random()*b),r=!1;for(var n=0;n<t;n++)if(g[n]==e){r=!0;break}r||(g[t]=e,t++)}}),"randomSampleCR"),S=s((function(e,t,r){for(var n=[],i=0,a=0,o=0,s=void 0,l=[],u=0,h=1,f=0;f<b;f++)l[f]=T;for(n[a]=e,l[e]=0;a>=i;){o=n[i++];for(var p=d[o],g=0;g<p.length;g++)l[s=c.get(p[g])]==T&&(l[s]=l[o]+1,n[++a]=s);y[o][t]=l[o]*E}if(r){for(var v=0;v<b;v++)y[v][t]<m[v]&&(m[v]=y[v][t]);for(var x=0;x<b;x++)m[x]>u&&(u=m[x],h=x)}return h}),"BFS"),R=s((function(e){var t=void 0;if(e){t=Math.floor(Math.random()*b);for(var r=0;r<b;r++)m[r]=T;for(var n=0;n<_;n++)g[n]=t,t=S(t,n,e)}else{A();for(var i=0;i<_;i++)S(g[i],i,e,!1)}for(var a=0;a<b;a++)for(var o=0;o<_;o++)y[a][o]*=y[a][o];for(var s=0;s<_;s++)v[s]=[];for(var l=0;l<_;l++)for(var u=0;u<_;u++)v[l][u]=y[g[u]][l]}),"allBFS"),N=s((function(){for(var e=a.svd(v),t=e.S,r=e.U,n=e.V,o=t[0]*t[0]*t[0],s=[],l=0;l<_;l++){s[l]=[];for(var u=0;u<_;u++)s[l][u]=0,l==u&&(s[l][u]=t[l]/(t[l]*t[l]+o/(t[l]*t[l])))}x=i.multMat(i.multMat(n,s),i.transpose(r))}),"sample"),L=s((function(){for(var e=void 0,t=void 0,r=[],n=[],a=[],o=[],s=0;s<b;s++)r[s]=Math.random(),n[s]=Math.random();r=i.normalize(r),n=i.normalize(n);for(var l=C,u=C,c=void 0;;){0;for(var h=0;h<b;h++)a[h]=r[h];if(r=i.multGamma(i.multL(i.multGamma(a),y,x)),e=i.dotProduct(a,r),r=i.normalize(r),l=i.dotProduct(a,r),(c=Math.abs(l/u))<=1+w&&c>=1)break;u=l}for(var d=0;d<b;d++)a[d]=r[d];for(u=C;;){0;for(var g=0;g<b;g++)o[g]=n[g];if(o=i.minusOp(o,i.multCons(a,i.dotProduct(a,o))),n=i.multGamma(i.multL(i.multGamma(o),y,x)),t=i.dotProduct(o,n),n=i.normalize(n),l=i.dotProduct(o,n),(c=Math.abs(l/u))<=1+w&&c>=1)break;u=l}for(var m=0;m<b;m++)o[m]=n[m];f=i.multCons(a,Math.sqrt(Math.abs(e))),p=i.multCons(o,Math.sqrt(Math.abs(t)))}),"powerIteration");n.connectComponents(t,r,n.getTopMostNodes(o),u),l.forEach((function(e){n.connectComponents(t,r,n.getTopMostNodes(e.descendants().intersection(r)),u)}));for(var I=0,M=0;M<o.length;M++)o[M].isParent()||c.set(o[M].id(),I++);var O=!0,P=!1,D=void 0;try{for(var B,F=u.keys()[Symbol.iterator]();!(O=(B=F.next()).done);O=!0){var $=B.value;c.set($,I++)}}catch(e){P=!0,D=e}finally{try{!O&&F.return&&F.return()}finally{if(P)throw D}}for(var z=0;z<c.size;z++)d[z]=[];l.forEach((function(e){for(var t=e.children().intersection(r);0==t.nodes(":childless").length;)t=t.nodes()[0].children().intersection(r);var n=0,i=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach((function(e,t){e.connectedEdges().length<i&&(i=e.connectedEdges().length,n=t)})),h.set(e.id(),t.nodes(":childless")[n].id())})),o.forEach((function(e){var t=void 0;t=e.isParent()?c.get(h.get(e.id())):c.get(e.id()),e.neighborhood().nodes().forEach((function(n){r.intersection(e.edgesWith(n)).length>0&&(n.isParent()?d[t].push(h.get(n.id())):d[t].push(n.id()))}))}));var U=s((function(e){var r=c.get(e),n=void 0;u.get(e).forEach((function(i){n=t.getElementById(i).isParent()?h.get(i):i,d[r].push(n),d[c.get(n)].push(e)}))}),"_loop"),G=!0,j=!1,V=void 0;try{for(var W,H=u.keys()[Symbol.iterator]();!(G=(W=H.next()).done);G=!0){U(W.value)}}catch(e){j=!0,V=e}finally{try{!G&&H.return&&H.return()}finally{if(j)throw V}}var q=void 0;if((b=c.size)>2){_=b<e.sampleSize?b:e.sampleSize;for(var Y=0;Y<b;Y++)y[Y]=[];for(var X=0;X<_;X++)x[X]=[];return"draft"==e.quality||"all"==e.step?(R(k),N(),L(),q={nodeIndexes:c,xCoords:f,yCoords:p}):(c.forEach((function(e,r){f.push(t.getElementById(r).position("x")),p.push(t.getElementById(r).position("y"))})),q={nodeIndexes:c,xCoords:f,yCoords:p}),q}var K=c.keys(),Z=t.getElementById(K.next().value),Q=Z.position(),J=Z.outerWidth();if(f.push(Q.x),p.push(Q.y),2==b){var ee=t.getElementById(K.next().value).outerWidth();f.push(Q.x+J/2+ee/2+e.idealEdgeLength),p.push(Q.y)}return q={nodeIndexes:c,xCoords:f,yCoords:p}}),"spectralLayout");e.exports={spectralLayout:o}},579:(e,t,r)=>{var n=r(212),i=s((function(e){e&&e("layout","fcose",n)}),"register");typeof cytoscape<"u"&&i(cytoscape),e.exports=i},140:t=>{t.exports=e}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}return s(n,"__webpack_require__"),n(579)})()}))})),S3={L:"left",R:"right",T:"top",B:"bottom"},R3={L:s((e=>`${e},${e/2} 0,${e} 0,0`),"L"),R:s((e=>`0,${e/2} ${e},0 ${e},${e}`),"R"),T:s((e=>`0,0 ${e},0 ${e/2},${e}`),"T"),B:s((e=>`${e/2},0 ${e},${e} 0,${e}`),"B")},N3={L:s(((e,t)=>e-t+2),"L"),R:s(((e,t)=>e-2),"R"),T:s(((e,t)=>e-t+2),"T"),B:s(((e,t)=>e-2),"B")},L3=s((function(e){return M3(e)?"L"===e?"R":"L":"T"===e?"B":"T"}),"getOppositeArchitectureDirection"),I3=s((function(e){return"L"===e||"R"===e||"T"===e||"B"===e}),"isArchitectureDirection"),M3=s((function(e){return"L"===e||"R"===e}),"isArchitectureDirectionX"),O3=s((function(e){return"T"===e||"B"===e}),"isArchitectureDirectionY"),P3=s((function(e,t){let r=M3(e)&&O3(t),n=O3(e)&&M3(t);return r||n}),"isArchitectureDirectionXY"),D3=s((function(e){let t=e[0],r=e[1],n=M3(t)&&O3(r),i=O3(t)&&M3(r);return n||i}),"isArchitecturePairXY"),B3=s((function(e){return"LL"!==e&&"RR"!==e&&"TT"!==e&&"BB"!==e}),"isValidArchitectureDirectionPair"),F3=s((function(e,t){let r=`${e}${t}`;return B3(r)?r:void 0}),"getArchitectureDirectionPair"),$3=s((function([e,t],r){let n=r[0],i=r[1];return M3(n)?O3(i)?[e+("L"===n?-1:1),t+("T"===i?1:-1)]:[e+("L"===n?-1:1),t]:M3(i)?[e+("L"===i?1:-1),t+("T"===n?1:-1)]:[e,t+("T"===n?1:-1)]}),"shiftPositionByArchitectureDirectionPair"),z3=s((function(e){return"LT"===e||"TL"===e?[1,1]:"BL"===e||"LB"===e?[1,-1]:"BR"===e||"RB"===e?[-1,-1]:[-1,1]}),"getArchitectureDirectionXYFactors"),U3=s((function(e,t){return P3(e,t)?"bend":M3(e)?"horizontal":"vertical"}),"getArchitectureDirectionAlignment"),G3=s((function(e){return"service"===e.type}),"isArchitectureService"),j3=s((function(e){return"junction"===e.type}),"isArchitectureJunction"),V3=s((e=>e.data()),"edgeData"),W3=s((e=>e.data()),"nodeData"),H3=WG.architecture,q3=new mp((()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:H3,dataStructures:void 0,elements:{}}))),Y3=s((()=>{q3.reset(),YV()}),"clear"),X3=s((function({id:e,icon:t,in:r,title:n,iconText:i}){if(void 0!==q3.records.registeredIds[e])throw new Error(`The service id [${e}] is already in use by another ${q3.records.registeredIds[e]}`);if(void 0!==r){if(e===r)throw new Error(`The service [${e}] cannot be placed within itself`);if(void 0===q3.records.registeredIds[r])throw new Error(`The service [${e}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===q3.records.registeredIds[r])throw new Error(`The service [${e}]'s parent is not a group`)}q3.records.registeredIds[e]="node",q3.records.nodes[e]={id:e,type:"service",icon:t,iconText:i,title:n,edges:[],in:r}}),"addService"),K3=s((()=>Object.values(q3.records.nodes).filter(G3)),"getServices"),Z3=s((function({id:e,in:t}){q3.records.registeredIds[e]="node",q3.records.nodes[e]={id:e,type:"junction",edges:[],in:t}}),"addJunction"),Q3=s((()=>Object.values(q3.records.nodes).filter(j3)),"getJunctions"),J3=s((()=>Object.values(q3.records.nodes)),"getNodes"),e4=s((e=>q3.records.nodes[e]),"getNode"),t4=s((function({id:e,icon:t,in:r,title:n}){if(void 0!==q3.records.registeredIds[e])throw new Error(`The group id [${e}] is already in use by another ${q3.records.registeredIds[e]}`);if(void 0!==r){if(e===r)throw new Error(`The group [${e}] cannot be placed within itself`);if(void 0===q3.records.registeredIds[r])throw new Error(`The group [${e}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===q3.records.registeredIds[r])throw new Error(`The group [${e}]'s parent is not a group`)}q3.records.registeredIds[e]="group",q3.records.groups[e]={id:e,icon:t,title:n,in:r}}),"addGroup"),r4=s((()=>Object.values(q3.records.groups)),"getGroups"),n4=s((function({lhsId:e,rhsId:t,lhsDir:r,rhsDir:n,lhsInto:i,rhsInto:a,lhsGroup:o,rhsGroup:s,title:l}){if(!I3(r))throw new Error(`Invalid direction given for left hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${r}`);if(!I3(n))throw new Error(`Invalid direction given for right hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${n}`);if(void 0===q3.records.nodes[e]&&void 0===q3.records.groups[e])throw new Error(`The left-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===q3.records.nodes[t]&&void 0===q3.records.groups[e])throw new Error(`The right-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);let u=q3.records.nodes[e].in,c=q3.records.nodes[t].in;if(o&&u&&c&&u==c)throw new Error(`The left-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(s&&u&&c&&u==c)throw new Error(`The right-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let h={lhsId:e,lhsDir:r,lhsInto:i,lhsGroup:o,rhsId:t,rhsDir:n,rhsInto:a,rhsGroup:s,title:l};q3.records.edges.push(h),q3.records.nodes[e]&&q3.records.nodes[t]&&(q3.records.nodes[e].edges.push(q3.records.edges[q3.records.edges.length-1]),q3.records.nodes[t].edges.push(q3.records.edges[q3.records.edges.length-1]))}),"addEdge"),i4=s((()=>q3.records.edges),"getEdges"),a4=s((()=>{if(void 0===q3.records.dataStructures){let e={},t=Object.entries(q3.records.nodes).reduce(((t,[r,n])=>(t[r]=n.edges.reduce(((t,n)=>{let i=e4(n.lhsId)?.in,a=e4(n.rhsId)?.in;if(i&&a&&i!==a){let t=U3(n.lhsDir,n.rhsDir);"bend"!==t&&(e[i]??={},e[i][a]=t,e[a]??={},e[a][i]=t)}if(n.lhsId===r){let e=F3(n.lhsDir,n.rhsDir);e&&(t[e]=n.rhsId)}else{let e=F3(n.rhsDir,n.lhsDir);e&&(t[e]=n.lhsId)}return t}),{}),t)),{}),r=Object.keys(t)[0],n={[r]:1},i=Object.keys(t).reduce(((e,t)=>t===r?e:{...e,[t]:1}),{}),a=s((e=>{let r={[e]:[0,0]},a=[e];for(;a.length>0;){let e=a.shift();if(e){n[e]=1,delete i[e];let o=t[e],[s,l]=r[e];Object.entries(o).forEach((([e,t])=>{n[t]||(r[t]=$3([s,l],e),a.push(t))}))}}return r}),"BFS"),o=[a(r)];for(;Object.keys(i).length>0;)o.push(a(Object.keys(i)[0]));q3.records.dataStructures={adjList:t,spatialMaps:o,groupAlignments:e}}return q3.records.dataStructures}),"getDataStructures"),o4=s(((e,t)=>{q3.records.elements[e]=t}),"setElementForId"),s4=s((e=>q3.records.elements[e]),"getElementById"),l4={clear:Y3,setDiagramTitle:JV,getDiagramTitle:eW,setAccTitle:XV,getAccTitle:KV,setAccDescription:ZV,getAccDescription:QV,addService:X3,getServices:K3,addJunction:Z3,getJunctions:Q3,getNodes:J3,getNode:e4,addGroup:t4,getGroups:r4,addEdge:n4,getEdges:i4,setElementForId:o4,getElementById:s4,getDataStructures:a4};function u4(e){let t=nW().architecture;return t?.[e]?t[e]:H3[e]}s(u4,"getConfigField");var c4=s(((e,t)=>{yp(e,t),e.groups.map(t.addGroup),e.services.map((e=>t.addService({...e,type:"service"}))),e.junctions.map((e=>t.addJunction({...e,type:"junction"}))),e.edges.map(t.addEdge)}),"populateDb"),h4={parse:s((async e=>{let t=await nU("architecture",e);CU.debug(t),c4(t,l4)}),"parse")},d4=s((e=>`\n  .edge {\n    stroke-width: ${e.archEdgeWidth};\n    stroke: ${e.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${e.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${e.archGroupBorderColor};\n    stroke-width: ${e.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`),"getStyles"),f4=d4,p4=d(A3(),1),g4=s((e=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${e}</g>`),"wrapIcon"),m4={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:g4('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:g4('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:g4('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:g4('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:g4('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:m2,blank:{body:g4("")}}},y4=s((async function(e,t){let r=u4("padding"),n=u4("iconSize"),i=n/2,a=n/6,o=a/2;await Promise.all(t.edges().map((async t=>{let{source:n,sourceDir:s,sourceArrow:l,sourceGroup:u,target:c,targetDir:h,targetArrow:d,targetGroup:f,label:p}=V3(t),{x:g,y:m}=t[0].sourceEndpoint(),{x:y,y:v}=t[0].midpoint(),{x:x,y:b}=t[0].targetEndpoint(),T=r+4;if(u&&(M3(s)?g+="L"===s?-T:T:m+="T"===s?-T:T+18),f&&(M3(h)?x+="L"===h?-T:T:b+="T"===h?-T:T+18),!u&&"junction"===l4.getNode(n)?.type&&(M3(s)?g+="L"===s?i:-i:m+="T"===s?i:-i),!f&&"junction"===l4.getNode(c)?.type&&(M3(h)?x+="L"===h?i:-i:b+="T"===h?i:-i),t[0]._private.rscratch){let t=e.insert("g");if(t.insert("path").attr("d",`M ${g},${m} L ${y},${v} L${x},${b} `).attr("class","edge"),l){let e=M3(s)?N3[s](g,a):g-o,r=O3(s)?N3[s](m,a):m-o;t.insert("polygon").attr("points",R3[s](a)).attr("transform",`translate(${e},${r})`).attr("class","arrow")}if(d){let e=M3(h)?N3[h](x,a):x-o,r=O3(h)?N3[h](b,a):b-o;t.insert("polygon").attr("points",R3[h](a)).attr("transform",`translate(${e},${r})`).attr("class","arrow")}if(p){let e=P3(s,h)?"XY":M3(s)?"X":"Y",r=0;r="X"===e?Math.abs(g-x):"Y"===e?Math.abs(m-b)/1.5:Math.abs(g-x)/2;let n=t.append("g");if(await v3(n,p,{useHtmlLabels:!1,width:r,classes:"architecture-service-label"},nW()),n.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===e)n.attr("transform","translate("+y+", "+v+")");else if("Y"===e)n.attr("transform","translate("+y+", "+v+") rotate(-90)");else if("XY"===e){let e=F3(s,h);if(e&&D3(e)){let t=n.node().getBoundingClientRect(),[r,i]=z3(e);n.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*r*i*45})`);let a=n.node().getBoundingClientRect();n.attr("transform",`\n                translate(${y}, ${v-t.height/2})\n                translate(${r*a.width/2}, ${i*a.height/2})\n                rotate(${-1*r*i*45}, 0, ${t.height/2})\n              `)}}}}})))}),"drawEdges"),v4=s((async function(e,t){let r=.75*u4("padding"),n=u4("fontSize"),i=u4("iconSize")/2;await Promise.all(t.nodes().map((async t=>{let a=W3(t);if("group"===a.type){let{h:o,w:s,x1:l,y1:u}=t.boundingBox();e.append("rect").attr("x",l+i).attr("y",u+i).attr("width",s).attr("height",o).attr("class","node-bkg");let c=e.append("g"),h=l,d=u;if(a.icon){let e=c.append("g");e.html(`<g>${await T2(a.icon,{height:r,width:r,fallbackPrefix:m4.prefix})}</g>`),e.attr("transform","translate("+(h+i+1)+", "+(d+i+1)+")"),h+=r,d+=n/2-1-2}if(a.label){let e=c.append("g");await v3(e,a.label,{useHtmlLabels:!1,width:s,classes:"architecture-service-label"},nW()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),e.attr("transform","translate("+(h+i+4)+", "+(d+i+2)+")")}}})))}),"drawGroups"),x4=s((async function(e,t,r){for(let n of r){let r=t.append("g"),i=u4("iconSize");if(n.title){let e=r.append("g");await v3(e,n.title,{useHtmlLabels:!1,width:1.5*i,classes:"architecture-service-label"},nW()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),e.attr("transform","translate("+i/2+", "+i+")")}let a=r.append("g");if(n.icon)a.html(`<g>${await T2(n.icon,{height:i,width:i,fallbackPrefix:m4.prefix})}</g>`);else if(n.iconText){a.html(`<g>${await T2("blank",{height:i,width:i,fallbackPrefix:m4.prefix})}</g>`);let e=a.append("g").append("foreignObject").attr("width",i).attr("height",i).append("div").attr("class","node-icon-text").attr("style",`height: ${i}px;`).append("div").html(n.iconText),t=parseInt(window.getComputedStyle(e.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;e.attr("style",`-webkit-line-clamp: ${Math.floor((i-2)/t)};`)}else a.append("path").attr("class","node-bkg").attr("id","node-"+n.id).attr("d",`M0 ${i} v${-i} q0,-5 5,-5 h${i} q5,0 5,5 v${i} H0 Z`);r.attr("class","architecture-service");let{width:o,height:s}=r._groups[0][0].getBBox();n.width=o,n.height=s,e.setElementForId(n.id,r)}return 0}),"drawServices"),b4=s((function(e,t,r){r.forEach((r=>{let n=t.append("g"),i=u4("iconSize");n.append("g").append("rect").attr("id","node-"+r.id).attr("fill-opacity","0").attr("width",i).attr("height",i),n.attr("class","architecture-junction");let{width:a,height:o}=n._groups[0][0].getBBox();n.width=a,n.height=o,e.setElementForId(r.id,n)}))}),"drawJunctions");function T4(e,t){e.forEach((e=>{t.add({group:"nodes",data:{type:"service",id:e.id,icon:e.icon,label:e.title,parent:e.in,width:u4("iconSize"),height:u4("iconSize")},classes:"node-service"})}))}function C4(e,t){e.forEach((e=>{t.add({group:"nodes",data:{type:"junction",id:e.id,parent:e.in,width:u4("iconSize"),height:u4("iconSize")},classes:"node-junction"})}))}function w4(e,t){t.nodes().map((t=>{let r=W3(t);"group"!==r.type&&(r.x=t.position().x,r.y=t.position().y,e.getElementById(r.id).attr("transform","translate("+(r.x||0)+","+(r.y||0)+")"))}))}function k4(e,t){e.forEach((e=>{t.add({group:"nodes",data:{type:"group",id:e.id,icon:e.icon,label:e.title,parent:e.in},classes:"node-group"})}))}function E4(e,t){e.forEach((e=>{let{lhsId:r,rhsId:n,lhsInto:i,lhsGroup:a,rhsInto:o,lhsDir:s,rhsDir:l,rhsGroup:u,title:c}=e,h=P3(e.lhsDir,e.rhsDir)?"segments":"straight",d={id:`${r}-${n}`,label:c,source:r,sourceDir:s,sourceArrow:i,sourceGroup:a,sourceEndpoint:"L"===s?"0 50%":"R"===s?"100% 50%":"T"===s?"50% 0":"50% 100%",target:n,targetDir:l,targetArrow:o,targetGroup:u,targetEndpoint:"L"===l?"0 50%":"R"===l?"100% 50%":"T"===l?"50% 0":"50% 100%"};t.add({group:"edges",data:d,classes:h})}))}function _4(e,t,r){let n=s(((e,t)=>Object.entries(e).reduce(((e,[n,i])=>{let a=0,o=Object.entries(i);if(1===o.length)return e[n]=o[0][1],e;for(let i=0;i<o.length-1;i++)for(let s=i+1;s<o.length;s++){let[l,u]=o[i],[c,h]=o[s];if(r[l]?.[c]===t)e[n]??=[],e[n]=[...e[n],...u,...h];else if("default"===l||"default"===c)e[n]??=[],e[n]=[...e[n],...u,...h];else{e[`${n}-${a++}`]=u,e[`${n}-${a++}`]=h}}return e}),{})),"flattenAlignments"),i=t.map((t=>{let r={},i={};return Object.entries(t).forEach((([t,[n,a]])=>{let o=e.getNode(t)?.in??"default";r[a]??={},r[a][o]??=[],r[a][o].push(t),i[n]??={},i[n][o]??=[],i[n][o].push(t)})),{horiz:Object.values(n(r,"horizontal")).filter((e=>e.length>1)),vert:Object.values(n(i,"vertical")).filter((e=>e.length>1))}})),[a,o]=i.reduce((([e,t],{horiz:r,vert:n})=>[[...e,...r],[...t,...n]]),[[],[]]);return{horizontal:a,vertical:o}}function A4(e){let t=[],r=s((e=>`${e[0]},${e[1]}`),"posToStr"),n=s((e=>e.split(",").map((e=>parseInt(e)))),"strToPos");return e.forEach((e=>{let i=Object.fromEntries(Object.entries(e).map((([e,t])=>[r(t),e]))),a=[r([0,0])],o={},s={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;a.length>0;){let e=a.shift();if(e){o[e]=1;let l=i[e];if(l){let u=n(e);Object.entries(s).forEach((([e,n])=>{let s=r([u[0]+n[0],u[1]+n[1]]),c=i[s];c&&!o[s]&&(a.push(s),t.push({[S3[e]]:c,[S3[L3(e)]]:l,gap:1.5*u4("iconSize")}))}))}}}})),t}function S4(e,t,r,n,i,{spatialMaps:a,groupAlignments:o}){return new Promise((l=>{let u=Fq("body").append("div").attr("id","cy").attr("style","display:none"),c=gp({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${u4("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${u4("padding")}px`}}]});u.remove(),k4(r,c),T4(e,c),C4(t,c),E4(n,c);let h=_4(i,a,o),d=A4(a),f=c.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(e){let[t,r]=e.connectedNodes(),{parent:n}=W3(t),{parent:i}=W3(r);return n===i?1.5*u4("iconSize"):.5*u4("iconSize")},edgeElasticity(e){let[t,r]=e.connectedNodes(),{parent:n}=W3(t),{parent:i}=W3(r);return n===i?.45:.001},alignmentConstraint:h,relativePlacementConstraint:d});f.one("layoutstop",(()=>{function e(e,t,r,n){let i,a,{x:o,y:s}=e,{x:l,y:u}=t;a=(n-s+(o-r)*(s-u)/(o-l))/Math.sqrt(1+Math.pow((s-u)/(o-l),2)),i=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-o,2)-Math.pow(a,2)),i/=Math.sqrt(Math.pow(l-o,2)+Math.pow(u-s,2));let c=(l-o)*(n-s)-(u-s)*(r-o);switch(!0){case c>=0:c=1;break;case c<0:c=-1}let h=(l-o)*(r-o)+(u-s)*(n-s);switch(!0){case h>=0:h=1;break;case h<0:h=-1}return a=Math.abs(a)*c,i*=h,{distances:a,weights:i}}s(e,"getSegmentWeights"),c.startBatch();for(let t of Object.values(c.edges()))if(t.data?.()){let{x:r,y:n}=t.source().position(),{x:i,y:a}=t.target().position();if(r!==i&&n!==a){let r=t.sourceEndpoint(),n=t.targetEndpoint(),{sourceDir:i}=V3(t),[a,o]=O3(i)?[r.x,n.y]:[n.x,r.y],{weights:s,distances:l}=e(r,n,a,o);t.style("segment-distances",l),t.style("segment-weights",s)}}c.endBatch(),f.run()})),f.run(),c.ready((e=>{CU.info("Ready",e),l(c)}))}))}x2([{name:m4.prefix,icons:m4}]),gp.use(p4.default),s(T4,"addServices"),s(C4,"addJunctions"),s(w4,"positionNodes"),s(k4,"addGroups"),s(E4,"addEdges"),s(_4,"getAlignments"),s(A4,"getRelativeConstraints"),s(S4,"layoutArchitecture");var R4=s((async(e,t,r,n)=>{let i=n.db,a=i.getServices(),o=i.getJunctions(),s=i.getGroups(),l=i.getEdges(),u=i.getDataStructures(),c=z1(t),h=c.append("g");h.attr("class","architecture-edges");let d=c.append("g");d.attr("class","architecture-services");let f=c.append("g");f.attr("class","architecture-groups"),await x4(i,d,a),b4(i,d,o);let p=await S4(a,o,s,l,i,u);await y4(h,p),await v4(f,p),w4(i,p),zV(void 0,c,u4("padding"),u4("useMaxWidth"))}),"draw"),N4={parser:h4,db:l4,renderer:{draw:R4},styles:f4};export{N4 as diagram};export default null;
